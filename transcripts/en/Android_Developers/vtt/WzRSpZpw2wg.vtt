WEBVTT
Kind: captions
Language: en

00:00:00.000 --> 00:00:03.501
[MUSIC PLAYING]

00:00:03.501 --> 00:00:04.750
CHRIS WREN: Hi, this is great.

00:00:04.750 --> 00:00:05.869
Thank you for coming.

00:00:05.869 --> 00:00:08.119
It's an honor just being
able to speak in front of you

00:00:08.119 --> 00:00:09.490
about such important topics.

00:00:09.490 --> 00:00:10.895
I'm glad you're all here.

00:00:10.895 --> 00:00:11.655
Hi in the back.

00:00:15.370 --> 00:00:17.366
So my name is Christopher Wren.

00:00:17.366 --> 00:00:19.421
Do I have slides?

00:00:19.421 --> 00:00:22.484
Can I have the slides, please?

00:00:22.484 --> 00:00:23.900
They asked me to
introduce myself.

00:00:23.900 --> 00:00:25.485
So being from the
East Coast, I'm

00:00:25.485 --> 00:00:27.360
going to do something
I'm uncomfortable with,

00:00:27.360 --> 00:00:29.830
which is to talk about myself.

00:00:29.830 --> 00:00:31.610
So I'm Christopher Wren.

00:00:31.610 --> 00:00:33.360
The little letters
after my name represent

00:00:33.360 --> 00:00:35.820
about a decade I spent
at the MIT Media Lab

00:00:35.820 --> 00:00:39.700
studying the interaction
between people and computers.

00:00:39.700 --> 00:00:42.180
And then after some time,
I ended up the Google.

00:00:42.180 --> 00:00:44.560
And only about four
years ago, I ended up

00:00:44.560 --> 00:00:47.170
getting an opportunity
to join the Android team.

00:00:47.170 --> 00:00:52.494
So I work on the
Android system UI.

00:00:52.494 --> 00:00:54.160
And I've done that
for about four years.

00:00:54.160 --> 00:00:56.480
My first release was Jelly Bean.

00:00:56.480 --> 00:00:58.810
So that's pretty exciting.

00:00:58.810 --> 00:01:00.791
We're all the way up
to Marshmallow now.

00:01:00.791 --> 00:01:03.040
And today I'm going to be
talking about notifications,

00:01:03.040 --> 00:01:05.560
which is one of the things
that the system UI team builds.

00:01:07.922 --> 00:01:09.630
And particularly, I'm
going to be talking

00:01:09.630 --> 00:01:11.524
about how notifications
affect people,

00:01:11.524 --> 00:01:13.190
and how you should
be thinking about how

00:01:13.190 --> 00:01:16.550
you're affecting your users.

00:01:16.550 --> 00:01:18.152
So having said all
that introduction,

00:01:18.152 --> 00:01:20.360
I'm a little nervous about
the graphic on the screen,

00:01:20.360 --> 00:01:21.860
because I'm worried
that people will

00:01:21.860 --> 00:01:23.930
think that, like, I'm
on the mountaintop,

00:01:23.930 --> 00:01:26.230
and I have all the answers.

00:01:26.230 --> 00:01:28.320
And I definitely do not.

00:01:28.320 --> 00:01:30.461
So put that out of your head.

00:01:30.461 --> 00:01:32.960
It's definitely the case that
I'm climbing the same mountain

00:01:32.960 --> 00:01:35.050
as you.

00:01:35.050 --> 00:01:36.620
The way people
use these devices,

00:01:36.620 --> 00:01:38.465
the way these
devices are changing,

00:01:38.465 --> 00:01:40.490
and the way we interact
with each other

00:01:40.490 --> 00:01:43.810
while we use the devices is
all changing rapidly right now.

00:01:43.810 --> 00:01:46.210
So we're all trying
to figure it out.

00:01:46.210 --> 00:01:49.540
But I'm going to tell you
what I think is currently

00:01:49.540 --> 00:01:50.460
the good stuff to do.

00:01:50.460 --> 00:01:51.700
So let's get to it.

00:01:51.700 --> 00:01:53.660
So the first thing,
of course, I did--

00:01:53.660 --> 00:01:56.270
well, the last thing I did
before I got on stage here

00:01:56.270 --> 00:01:58.190
to talk to you
about notifications

00:01:58.190 --> 00:02:00.910
was turn off my notifications.

00:02:00.910 --> 00:02:02.802
So because wouldn't
it be embarrassing

00:02:02.802 --> 00:02:04.510
if I was up here
talking to you about how

00:02:04.510 --> 00:02:08.000
not to disrupt user attention
and my phone went off?

00:02:08.000 --> 00:02:10.020
I certainly hope I actually
remember to do that.

00:02:10.020 --> 00:02:12.580
That was in the script.

00:02:12.580 --> 00:02:15.590
So being at a--
ooh, don't do that.

00:02:15.590 --> 00:02:19.304
Being at a developer conference,
obviously, we're developers,

00:02:19.304 --> 00:02:20.720
we're thinking
about the software,

00:02:20.720 --> 00:02:22.678
we're thinking about the
device, we're thinking

00:02:22.678 --> 00:02:24.950
about APIs and editors.

00:02:24.950 --> 00:02:29.092
And that was a great thing this
morning with the Instant Run.

00:02:29.092 --> 00:02:30.175
How many like Instant Run?

00:02:30.175 --> 00:02:31.160
You like that, yeah?

00:02:31.160 --> 00:02:32.072
That's great, OK.

00:02:32.072 --> 00:02:34.280
[APPLAUSE]

00:02:34.280 --> 00:02:37.402
So obviously, our
head is in the device.

00:02:37.402 --> 00:02:39.360
But I want you to pop
out of that a little bit.

00:02:39.360 --> 00:02:42.070
So this talk is about
what the devices are for.

00:02:42.070 --> 00:02:44.710
People will tell you they
can't live without their phone.

00:02:44.710 --> 00:02:47.079
What they mean is they can't
live without the things

00:02:47.079 --> 00:02:49.120
that the phone connects
them to-- the people they

00:02:49.120 --> 00:02:52.730
love, the issues they care
about, the places they miss.

00:02:52.730 --> 00:02:55.130
So this has become a portal
for us to other people

00:02:55.130 --> 00:02:56.827
in other places.

00:02:56.827 --> 00:02:58.660
And so that's important
for you to remember.

00:02:58.660 --> 00:03:02.200
So this is sort of the
backbone of the talk.

00:03:02.200 --> 00:03:04.990
There's like a sort of Maslow's
pyramid of needs, right?

00:03:04.990 --> 00:03:08.060
So this is sort of my pyramid
of needs for notifications.

00:03:08.060 --> 00:03:11.171
And at the-- well, the top--
but the base, the first thing,

00:03:11.171 --> 00:03:13.670
if you can't do anything else
when you're making a decision,

00:03:13.670 --> 00:03:17.300
I want you to ask yourself if
you're going to annoy the user.

00:03:17.300 --> 00:03:18.940
Don't do that.

00:03:18.940 --> 00:03:21.360
And then we walk up the pyramid.

00:03:21.360 --> 00:03:24.030
We want to respect their
life, and their story,

00:03:24.030 --> 00:03:25.280
and how we're fitting into it.

00:03:25.280 --> 00:03:28.240
And we want to empower them to
do the things they care about.

00:03:28.240 --> 00:03:32.760
We want to delight them, because
we want them to love our apps.

00:03:32.760 --> 00:03:35.441
And at the very top, if you
can, if you can reach it

00:03:35.441 --> 00:03:37.690
you want to help them connect
to the people they love,

00:03:37.690 --> 00:03:40.670
and the issues they care about,
and the places they miss.

00:03:40.670 --> 00:03:44.855
OK, so let's go through
these one by one.

00:03:44.855 --> 00:03:45.730
Don't annoy the user.

00:03:48.870 --> 00:03:50.680
So why don't you want
to annoy the user?

00:03:50.680 --> 00:03:55.000
Well, first of all,
starting in Jelly Bean,

00:03:55.000 --> 00:03:57.550
we started giving them
more and more tools

00:03:57.550 --> 00:03:59.520
to push back against
the sort of flood

00:03:59.520 --> 00:04:02.450
of attention-grabbing
information.

00:04:02.450 --> 00:04:05.340
And so one thing they can
do in Jelly Bean and on

00:04:05.340 --> 00:04:07.180
is they can block
your notifications.

00:04:07.180 --> 00:04:09.352
And you will not know.

00:04:09.352 --> 00:04:11.560
We don't tell you the your
notifications are blocked.

00:04:11.560 --> 00:04:14.280
They're just sort of banned,
and they just go into the ether.

00:04:14.280 --> 00:04:16.380
So this is, in some
ways, depending

00:04:16.380 --> 00:04:19.097
on how your app is structured
and what your app is doing,

00:04:19.097 --> 00:04:20.513
you're kind of
dead at this point.

00:04:20.513 --> 00:04:23.030
You have no way to
get back to the user.

00:04:23.030 --> 00:04:24.710
So you should be
thinking, whenever

00:04:24.710 --> 00:04:27.310
you make a decision, whenever
your product manager says

00:04:27.310 --> 00:04:30.420
we've got to do
this thing, I want

00:04:30.420 --> 00:04:35.330
you to have this in your head--
that you could get banned.

00:04:35.330 --> 00:04:37.030
If the user doesn't
know how to ban you,

00:04:37.030 --> 00:04:38.390
or they just don't
feel like doing it,

00:04:38.390 --> 00:04:40.130
or you haven't created
a value proposition.

00:04:40.130 --> 00:04:41.240
the other thing they
could do, of course,

00:04:41.240 --> 00:04:43.830
that every user knows how
to do is uninstall you.

00:04:43.830 --> 00:04:50.330
So let's watch this poor
little ice cream guy.

00:04:50.330 --> 00:04:52.310
There he is, my app, he's happy.

00:04:52.310 --> 00:04:53.580
No, don't do it.

00:04:53.580 --> 00:04:55.234
No, don't do it!

00:04:55.234 --> 00:04:57.220
Ah!

00:04:57.220 --> 00:04:59.020
OK, so let's just watch
that one more time.

00:04:59.020 --> 00:05:00.210
Just let it wash over us.

00:05:00.210 --> 00:05:01.386
[LAUGHTER]

00:05:01.386 --> 00:05:02.620
Just watch it go.

00:05:02.620 --> 00:05:03.450
There it goes.

00:05:03.450 --> 00:05:04.610
It's your app.

00:05:04.610 --> 00:05:05.360
It's gone.

00:05:05.360 --> 00:05:07.150
OK, so don't annoy the user.

00:05:07.150 --> 00:05:09.710
If you didn't have motivation
before, hopefully you do now.

00:05:09.710 --> 00:05:11.400
This is a base thing.

00:05:11.400 --> 00:05:14.322
So this is so important
that, of course,

00:05:14.322 --> 00:05:15.530
we try to help you with this.

00:05:15.530 --> 00:05:22.070
So one of the things we
do in Lollipop and on

00:05:22.070 --> 00:05:24.990
is we have a mode
called Do Not Disturb.

00:05:24.990 --> 00:05:28.169
So you don't know, as the
app, you don't know my story.

00:05:28.169 --> 00:05:30.210
You don't know if you're
going to be interrupting

00:05:30.210 --> 00:05:33.044
me and something
that I care about.

00:05:33.044 --> 00:05:34.460
But I can give the
system signals.

00:05:34.460 --> 00:05:39.230
I can say, listen, I do not want
to be bothered by unimportant

00:05:39.230 --> 00:05:40.742
things for the next hour.

00:05:40.742 --> 00:05:42.700
And what will happen,
from the app perspective,

00:05:42.700 --> 00:05:45.320
is that your notification
won't interrupt the user.

00:05:45.320 --> 00:05:47.653
It'll still be posted, it'll
still show up in the shade.

00:05:47.653 --> 00:05:49.025
It's not like being banned.

00:05:49.025 --> 00:05:49.900
It'll still be there.

00:05:49.900 --> 00:05:52.551
But you have to know
that this might happen.

00:05:52.551 --> 00:05:54.300
So that the notification
might get posted,

00:05:54.300 --> 00:05:56.591
it might not have made the
noise you wanted it to make,

00:05:56.591 --> 00:05:57.501
for example.

00:05:57.501 --> 00:05:58.500
And that's a good thing.

00:05:58.500 --> 00:06:00.800
Because if you'd made the
noise at the wrong time,

00:06:00.800 --> 00:06:02.740
you would have annoyed the user.

00:06:02.740 --> 00:06:05.430
So what do you need to know
as developers about this?

00:06:05.430 --> 00:06:07.259
This is what the
system does, right?

00:06:07.259 --> 00:06:09.050
The user has a lot of
ways to control this.

00:06:09.050 --> 00:06:12.180
They can say-- because
all the information

00:06:12.180 --> 00:06:15.800
channels that users use are, as
I said, they're evolving fast.

00:06:15.800 --> 00:06:17.120
They're changing rapidly.

00:06:17.120 --> 00:06:18.560
So they're kind of idiomatic.

00:06:18.560 --> 00:06:21.130
Some people still rely
on phone calls a lot.

00:06:21.130 --> 00:06:22.882
Some people use SMSes.

00:06:22.882 --> 00:06:24.340
There's a lot of
variability there.

00:06:24.340 --> 00:06:26.160
So the user's able
to control this

00:06:26.160 --> 00:06:29.260
by sort of a channel basis.

00:06:29.260 --> 00:06:32.170
And as a developer,
you need to tell us

00:06:32.170 --> 00:06:33.770
what channel you fit in.

00:06:33.770 --> 00:06:36.470
So this is going to be
my go-to code snippet.

00:06:36.470 --> 00:06:38.720
We're going to be modifying
this all through the talk.

00:06:38.720 --> 00:06:40.511
I made it nice and big,
so you can read it.

00:06:42.549 --> 00:06:43.840
So this is the builder pattern.

00:06:43.840 --> 00:06:46.370
Have you all using
the builder pattern?

00:06:46.370 --> 00:06:46.870
Yes?

00:06:46.870 --> 00:06:47.310
Builder pattern?

00:06:47.310 --> 00:06:48.976
You should be using
the builder pattern.

00:06:48.976 --> 00:06:52.130
Because that makes sure that
we have all the information

00:06:52.130 --> 00:06:54.124
we need to treat your
notification correctly.

00:06:54.124 --> 00:06:56.040
And this is all about
getting the notification

00:06:56.040 --> 00:06:57.620
at the right place.

00:06:57.620 --> 00:07:00.090
So this is the builder pattern.

00:07:00.090 --> 00:07:02.640
Very basic, obviously-- you
get some icon, text, title,

00:07:02.640 --> 00:07:06.230
and you build it, and
you get a notification.

00:07:06.230 --> 00:07:08.610
I will try to use
NotificationCompat everywhere

00:07:08.610 --> 00:07:09.220
in the sample.

00:07:09.220 --> 00:07:10.920
Sometimes it doesn't
fit on the screen.

00:07:10.920 --> 00:07:12.240
But if you're using
the builder, you

00:07:12.240 --> 00:07:13.698
should be using
the Compat.Builder.

00:07:13.698 --> 00:07:16.150
Because this will at least
compile and run all the way

00:07:16.150 --> 00:07:17.405
back to four.

00:07:17.405 --> 00:07:20.130
I don't know, is anybody
targeting four anymore?

00:07:20.130 --> 00:07:24.500
So for all intents and
purposes, all Androids.

00:07:24.500 --> 00:07:27.600
For features that don't exist,
it will fall back gracefully.

00:07:27.600 --> 00:07:28.750
And then you don't
have to worry about it.

00:07:28.750 --> 00:07:29.700
So that's nice.

00:07:29.700 --> 00:07:32.000
So we do that for you.

00:07:32.000 --> 00:07:33.770
So here's the meat of the thing.

00:07:33.770 --> 00:07:36.980
So for category, very
simple-- you just there's

00:07:36.980 --> 00:07:39.734
a builder method that
you set the category.

00:07:39.734 --> 00:07:41.400
And you just have to
pick the right one.

00:07:41.400 --> 00:07:43.140
That's the hard part.

00:07:43.140 --> 00:07:44.860
So here's some categories.

00:07:44.860 --> 00:07:46.730
So these are the
ones that relate

00:07:46.730 --> 00:07:49.600
to that screen I showed you
before, the ones that the user

00:07:49.600 --> 00:07:52.960
right now has direct control
over-- so alarms, reminders,

00:07:52.960 --> 00:07:54.990
events, messages, calls.

00:07:54.990 --> 00:07:58.880
You'll notice they're
pretty tightly defined.

00:07:58.880 --> 00:08:00.809
So alarms are like
alarm clocks--

00:08:00.809 --> 00:08:02.600
the thing that wakes
you up in the morning.

00:08:02.600 --> 00:08:04.100
So you have to think
again about what

00:08:04.100 --> 00:08:05.810
is the user going to expect
when they say they want

00:08:05.810 --> 00:08:07.155
to be interrupted by alarms?

00:08:07.155 --> 00:08:09.530
And make sure that you're not
going to surprise them when

00:08:09.530 --> 00:08:13.140
you tell us that it's an alarm.

00:08:13.140 --> 00:08:15.347
OK, and one of the most
subtle ones, I think,

00:08:15.347 --> 00:08:17.680
is this category, message,
which sounds pretty generic--

00:08:17.680 --> 00:08:19.130
like, oh, message, OK.

00:08:19.130 --> 00:08:22.060
But this particularly
means synchronous messages.

00:08:22.060 --> 00:08:24.880
So SMSes, instant
messages, things like that.

00:08:24.880 --> 00:08:29.350
On the next page there is email,
which is asynchronous messages.

00:08:29.350 --> 00:08:31.040
So email, we
wouldn't necessarily

00:08:31.040 --> 00:08:33.270
consider that a
synchronous message.

00:08:33.270 --> 00:08:35.559
And social updates,
for example, that

00:08:35.559 --> 00:08:38.774
are undirected, like,
not a mention of me,

00:08:38.774 --> 00:08:41.110
but, like, just
I posted a thing.

00:08:41.110 --> 00:08:44.104
That's usually not sort
of a notification event.

00:08:44.104 --> 00:08:45.770
And then this last
one they put up here,

00:08:45.770 --> 00:08:47.811
there were a whole bunch
of other recommendations

00:08:47.811 --> 00:08:50.839
in the API docs--
categories in the API docs.

00:08:50.839 --> 00:08:52.380
The recommendation
one I put up here,

00:08:52.380 --> 00:08:57.440
particularly because if you're
doing development for TV, then

00:08:57.440 --> 00:09:00.115
you're already using this
to get recommendations

00:09:00.115 --> 00:09:01.870
into the recommendation bar.

00:09:01.870 --> 00:09:04.390
And there's no reason you
shouldn't do that on the phone

00:09:04.390 --> 00:09:05.150
as well.

00:09:05.150 --> 00:09:06.525
If you're going
to post something

00:09:06.525 --> 00:09:11.220
that's recommendation-ish,
put the category on it.

00:09:11.220 --> 00:09:14.652
So you may have noticed-- the
sharp eye may have noticed

00:09:14.652 --> 00:09:15.860
that there were little icons.

00:09:15.860 --> 00:09:19.194
Those aren't just my reminders,
although they do help me.

00:09:19.194 --> 00:09:20.860
What I'll try to do
in the rest the talk

00:09:20.860 --> 00:09:23.610
is I'll highlight everything
with the version on which it

00:09:23.610 --> 00:09:24.590
will work.

00:09:24.590 --> 00:09:28.010
So remember, if you use the
compact library, it'll run,

00:09:28.010 --> 00:09:31.097
but it'll actually
exist on these devices.

00:09:31.097 --> 00:09:33.680
So a lot of things I'm going to
be talking about are Lollipop.

00:09:33.680 --> 00:09:36.992
And right now, this is
relatively fresh data.

00:09:36.992 --> 00:09:38.450
It's about a quarter
of the devices

00:09:38.450 --> 00:09:39.870
out there that we're seeing.

00:09:39.870 --> 00:09:42.550
And then many of the other
things we're talking about

00:09:42.550 --> 00:09:44.750
will be Jelly Bean and on,
which is, at this point,

00:09:44.750 --> 00:09:46.210
a huge fraction.

00:09:46.210 --> 00:09:49.280
And then, if it's
relevant to all devices,

00:09:49.280 --> 00:09:50.800
mostly those sort
of policy things,

00:09:50.800 --> 00:09:54.985
like when should you post
things on market with the Droid.

00:09:54.985 --> 00:09:56.610
So keep your eye for
those little icons

00:09:56.610 --> 00:09:59.580
if you're wondering, am I
targeting the thing that will--

00:09:59.580 --> 00:10:01.340
this is useful for me.

00:10:01.340 --> 00:10:03.170
That's how you know.

00:10:03.170 --> 00:10:05.560
OK, so onto the next
chapter-- respecting the user.

00:10:10.350 --> 00:10:11.520
So let's see.

00:10:11.520 --> 00:10:14.810
So one of the main features
you can set in the builder

00:10:14.810 --> 00:10:16.310
is something called priority.

00:10:16.310 --> 00:10:18.050
And that sounds pretty good.

00:10:18.050 --> 00:10:21.830
People usually think of priority
as where I am in the list,

00:10:21.830 --> 00:10:23.590
and often, I
imagine, that people

00:10:23.590 --> 00:10:25.880
want to be toward
the top of the list.

00:10:25.880 --> 00:10:27.630
The priority is about
a lot more than just

00:10:27.630 --> 00:10:28.860
where you are in the list.

00:10:28.860 --> 00:10:30.940
So you'll notice
at the bottom here

00:10:30.940 --> 00:10:33.290
there's this thing
PRIORITY_MIN, which

00:10:33.290 --> 00:10:35.550
actually gets sort of a
different visual treatment.

00:10:35.550 --> 00:10:37.445
So in this case, it's
a little bit gray.

00:10:37.445 --> 00:10:38.653
That's sort of de-emphasized.

00:10:41.670 --> 00:10:44.800
These have implications
about how the user is going

00:10:44.800 --> 00:10:46.140
to end up being interrupted.

00:10:46.140 --> 00:10:47.650
And I guess we should run
through a couple of those

00:10:47.650 --> 00:10:48.820
and try to understand them.

00:10:48.820 --> 00:10:54.820
So again, trying not disturb the
user, annoy the user, one thing

00:10:54.820 --> 00:10:58.470
you should do is use things like
PRIORITY_LOW or PRIORITY_MIN.

00:10:58.470 --> 00:11:00.220
And this is how you
set them-- setPriority

00:11:00.220 --> 00:11:05.500
and there's an
enum, or a constant.

00:11:05.500 --> 00:11:07.392
And the reason you
should not always

00:11:07.392 --> 00:11:09.100
want to get in users'
face is because you

00:11:09.100 --> 00:11:11.220
may have information
that's useful to them

00:11:11.220 --> 00:11:12.630
at some point in the future.

00:11:12.630 --> 00:11:14.445
You don't know when
to postage them.

00:11:14.445 --> 00:11:15.820
And there have
been some studies.

00:11:15.820 --> 00:11:18.420
You can look in the
academic research.

00:11:18.420 --> 00:11:20.880
There was one-- I can't
remember reference right now.

00:11:20.880 --> 00:11:22.380
Anyway, if you look
for them, you'll

00:11:22.380 --> 00:11:23.820
find the studies
that show that people

00:11:23.820 --> 00:11:25.278
are more receptive
to notifications

00:11:25.278 --> 00:11:27.690
that they get at the right time.

00:11:27.690 --> 00:11:30.930
So this is a way for you to
sort of do that on the cheap.

00:11:30.930 --> 00:11:33.840
You post it in the
low priority bin,

00:11:33.840 --> 00:11:35.700
so that they aren't
grabbing attention,

00:11:35.700 --> 00:11:38.650
but the user will see
them when it's time.

00:11:38.650 --> 00:11:41.050
So here's an example of my
lock screen, for example.

00:11:41.050 --> 00:11:44.500
There's a chat
message from Mike.

00:11:44.500 --> 00:11:46.620
And it looks like I
have one notification.

00:11:46.620 --> 00:11:48.786
It turns out that I actually
have two notifications.

00:11:48.786 --> 00:11:52.302
I have this file
upload notification.

00:11:52.302 --> 00:11:53.760
And that was
something that the app

00:11:53.760 --> 00:11:56.290
decided wasn't enough
to bother me about.

00:11:56.290 --> 00:11:58.330
So this is another way
that the presentation

00:11:58.330 --> 00:11:59.819
is key to priority.

00:11:59.819 --> 00:12:01.610
So if you post a min
priority notification,

00:12:01.610 --> 00:12:03.990
what you're saying is
don't bother the user.

00:12:03.990 --> 00:12:05.540
If they go looking
in the shade, you

00:12:05.540 --> 00:12:07.680
can present it to them, because
then they're probably bored,

00:12:07.680 --> 00:12:09.320
they might be
picking up something.

00:12:09.320 --> 00:12:10.610
But we don't put it
in the lock screen

00:12:10.610 --> 00:12:12.090
because it's not
important enough

00:12:12.090 --> 00:12:14.980
to bother you while you're
on your way somewhere else.

00:12:14.980 --> 00:12:18.250
But the instant message, yeah,
I might want to know about that.

00:12:18.250 --> 00:12:20.090
I want to know I missed it.

00:12:20.090 --> 00:12:23.170
So another place that minimum
priority notifications

00:12:23.170 --> 00:12:25.300
are going to don't show
up is the top here.

00:12:25.300 --> 00:12:28.590
So you'll notice the status
bar has one chat icon.

00:12:28.590 --> 00:12:30.800
There is no file upload icon.

00:12:30.800 --> 00:12:33.240
This is another way of that
while the user is on their way

00:12:33.240 --> 00:12:35.690
somewhere else, you
don't necessarily

00:12:35.690 --> 00:12:39.080
want to bother them
with this update that

00:12:39.080 --> 00:12:41.160
may be not critical.

00:12:41.160 --> 00:12:46.380
Another way to get the user
the information they need

00:12:46.380 --> 00:12:48.720
is to use this thing
called a set alert once,

00:12:48.720 --> 00:12:50.630
setOnlyAlertOnce.

00:12:50.630 --> 00:12:52.897
I don't know if
anybody's used that.

00:12:52.897 --> 00:12:54.230
OK, so you should be using this.

00:12:54.230 --> 00:12:57.050
So this is a situation
where, again, it's

00:12:57.050 --> 00:12:58.550
not an instant
message notification.

00:12:58.550 --> 00:13:00.095
It's not one that I'm going
to, like, I hear the beep,

00:13:00.095 --> 00:13:02.100
and I pull my phone out,
and look at it right away.

00:13:02.100 --> 00:13:04.058
It might be something
like, what's the weather,

00:13:04.058 --> 00:13:05.950
or what's the
latest stock quote,

00:13:05.950 --> 00:13:10.324
or how far away is something.

00:13:10.324 --> 00:13:12.240
Those are the kinds of
things where you're not

00:13:12.240 --> 00:13:12.760
going to alert these.

00:13:12.760 --> 00:13:14.380
You don't have any timely
information to give them.

00:13:14.380 --> 00:13:15.838
But you have
information they might

00:13:15.838 --> 00:13:18.140
be able to take advantage
of if they happen to see it.

00:13:18.140 --> 00:13:21.421
And this is a way
if, for example, you

00:13:21.421 --> 00:13:23.420
did want to alert them
that you were posting it,

00:13:23.420 --> 00:13:24.510
but you didn't want
to keep bothering them

00:13:24.510 --> 00:13:26.968
while you're updating it, you
can update in the background.

00:13:26.968 --> 00:13:30.240
So setOnlyAlertOnce says,
don't make noise again.

00:13:30.240 --> 00:13:32.750
If you've already made
noise, don't do it again.

00:13:32.750 --> 00:13:34.140
And then the system tracks that.

00:13:34.140 --> 00:13:35.290
Because that's something
that would be difficult

00:13:35.290 --> 00:13:36.199
for you to track.

00:13:36.199 --> 00:13:37.782
This is another way
we're helping you.

00:13:43.750 --> 00:13:45.870
OK, so this instant
message we keep seeing.

00:13:45.870 --> 00:13:46.736
A lot of the
notifications you're

00:13:46.736 --> 00:13:49.130
going to see on my screenshots
are from an example app.

00:13:49.130 --> 00:13:52.400
And I have a link to
the code at the end.

00:13:52.400 --> 00:13:53.810
And Mike Claron is my director.

00:13:53.810 --> 00:13:57.119
So I have, in the
past, scared myself.

00:13:57.119 --> 00:13:59.160
So I'll be working on
something, and I'll forget,

00:13:59.160 --> 00:14:02.687
and I'll run the test app, and
look at it, and I'll go home.

00:14:02.687 --> 00:14:04.770
And I'll come back the
next day, and I'll be like,

00:14:04.770 --> 00:14:05.430
oh my gosh, Mike!

00:14:05.430 --> 00:14:06.554
I missed a thing from Mike.

00:14:06.554 --> 00:14:09.890
Or I missed a call from
whoever, or whatever.

00:14:09.890 --> 00:14:12.610
OK so there's this notion
of stale notifications.

00:14:12.610 --> 00:14:14.310
When we go talk
to people, we see

00:14:14.310 --> 00:14:15.560
they'll pull down their shade.

00:14:15.560 --> 00:14:17.320
And there will be
like 10 notifications

00:14:17.320 --> 00:14:20.180
from this app, the most
recent of which was useful,

00:14:20.180 --> 00:14:22.320
but the other ones
are totally not.

00:14:22.320 --> 00:14:24.300
So you should--
this is very easy--

00:14:24.300 --> 00:14:26.144
you should just cancel them out.

00:14:26.144 --> 00:14:27.935
If you think that you've
posted information

00:14:27.935 --> 00:14:31.360
that the user isn't going to
care about an hour from now,

00:14:31.360 --> 00:14:32.490
don't show it to them.

00:14:32.490 --> 00:14:33.690
Get out of their face.

00:14:33.690 --> 00:14:36.430
Their attention is worth
more than your extra effort

00:14:36.430 --> 00:14:37.170
for coding.

00:14:37.170 --> 00:14:40.160
So you can do them that favor,
and they will appreciate it.

00:14:40.160 --> 00:14:41.685
So that's one thing to do.

00:14:41.685 --> 00:14:43.780
This is the alarm service.

00:14:43.780 --> 00:14:46.900
It's, again, existed back
from the beginning of Android.

00:14:46.900 --> 00:14:48.665
And so, in this
case, I would craft

00:14:48.665 --> 00:14:50.950
this little
PendingIntent, which,

00:14:50.950 --> 00:14:52.844
in this instance, the
code sort of indicates

00:14:52.844 --> 00:14:54.510
that it may cancel
all my notifications,

00:14:54.510 --> 00:14:56.884
so I would call
no man cancel all.

00:14:56.884 --> 00:14:58.800
If you want to track
individual notifications,

00:14:58.800 --> 00:15:01.550
you would just make a
PendingIntent with the ID,

00:15:01.550 --> 00:15:02.080
for example.

00:15:04.870 --> 00:15:08.182
So I've been talking about how
to get out of the user's way.

00:15:08.182 --> 00:15:10.140
Sometimes you do need to
get in the user's way.

00:15:10.140 --> 00:15:11.841
You need to alert them.

00:15:11.841 --> 00:15:13.590
So we should talk about
that a little bit.

00:15:16.760 --> 00:15:18.950
So this is another
situation where

00:15:18.950 --> 00:15:21.120
the system UI is helping you.

00:15:21.120 --> 00:15:24.777
So it used to be the case
that if you were reading

00:15:24.777 --> 00:15:26.610
a book on Android, and
you got a phone call,

00:15:26.610 --> 00:15:29.420
you kind of got
smacked in the face

00:15:29.420 --> 00:15:31.310
with the resulting
activity, right?

00:15:31.310 --> 00:15:32.629
Like blah!

00:15:32.629 --> 00:15:34.420
So you're reading away,
and you're focused,

00:15:34.420 --> 00:15:35.745
and all of the sudden,
this phone call comes in.

00:15:35.745 --> 00:15:36.840
And the person who
called you didn't

00:15:36.840 --> 00:15:38.780
know that they were going
to interrupt something.

00:15:38.780 --> 00:15:40.400
Or maybe you were
playing a game, even.

00:15:40.400 --> 00:15:41.450
Like you could have been
playing a game, about to get

00:15:41.450 --> 00:15:42.616
a high score, and then blah!

00:15:45.020 --> 00:15:45.880
So that's not good.

00:15:45.880 --> 00:15:48.990
So one thing we
did in Lollipop is

00:15:48.990 --> 00:15:50.790
we introduced this
idea of a peak.

00:15:50.790 --> 00:15:52.302
So there's a peaking
notification.

00:15:52.302 --> 00:15:54.510
So the nice thing about this
is that the user doesn't

00:15:54.510 --> 00:15:55.732
get pulled out of their task.

00:15:55.732 --> 00:15:57.815
So attention, sometimes,
is about focus, sometimes

00:15:57.815 --> 00:16:00.050
about task.

00:16:00.050 --> 00:16:02.160
And because you don't
know what task they're in,

00:16:02.160 --> 00:16:04.725
this is something the
system will help you do.

00:16:04.725 --> 00:16:06.100
So in this case,
in this example,

00:16:06.100 --> 00:16:07.460
the phone call comes in.

00:16:07.460 --> 00:16:09.094
The user gets a
chance to maybe finish

00:16:09.094 --> 00:16:10.760
the sentence they
were reading, and then

00:16:10.760 --> 00:16:13.900
answer it, or ignore it, or
whatever they want to do.

00:16:13.900 --> 00:16:18.750
And what we realized
was that it was still

00:16:18.750 --> 00:16:22.239
an interruption, if you're
reading, to hear the noise.

00:16:22.239 --> 00:16:23.780
Even if it wasn't
a phone call, let's

00:16:23.780 --> 00:16:24.810
say it was just an
instant message.

00:16:24.810 --> 00:16:27.226
So you're reading, or playing
a game, and you hear, broop!

00:16:27.226 --> 00:16:29.920
And you're like, ah, I need
to go see what that was.

00:16:29.920 --> 00:16:31.260
Like, it might have been
something important.

00:16:31.260 --> 00:16:33.301
And then you go see what
it was, and it turns out

00:16:33.301 --> 00:16:34.970
it wasn't anything important.

00:16:34.970 --> 00:16:39.080
What we did is we allowed
high priority notifications

00:16:39.080 --> 00:16:42.940
to bubble up into the space.

00:16:42.940 --> 00:16:44.540
So you can elect
to use the space

00:16:44.540 --> 00:16:46.470
by setting your priority high.

00:16:46.470 --> 00:16:48.970
This is another way in which
priority changes the way you're

00:16:48.970 --> 00:16:51.650
presented, and making sound.

00:16:51.650 --> 00:16:55.800
So we could have-- in fact,
one of the early designs

00:16:55.800 --> 00:16:57.520
was to have a specific
API where you say,

00:16:57.520 --> 00:16:59.510
I want this to be
in the Heads-up.

00:16:59.510 --> 00:17:03.410
And instead, what we did is we
took this sort of implicit API,

00:17:03.410 --> 00:17:05.410
because we wanted
you, the developer,

00:17:05.410 --> 00:17:07.160
to make the conscious
decision that you're

00:17:07.160 --> 00:17:08.730
going to annoy the user.

00:17:08.730 --> 00:17:10.776
So if you're going
to make noise--

00:17:10.776 --> 00:17:12.109
you have to at least make noise.

00:17:12.109 --> 00:17:13.819
You can't show up in the
Heads-up without making noise.

00:17:13.819 --> 00:17:15.777
So you have to make that
commitment that you're

00:17:15.777 --> 00:17:16.780
going to annoy the user.

00:17:16.780 --> 00:17:18.738
So you have to have that
calculus in your head,

00:17:18.738 --> 00:17:21.170
and say, well, this possibly
could go to the user,

00:17:21.170 --> 00:17:23.420
so I want to make sure that's
going to be appropriate.

00:17:23.420 --> 00:17:26.829
I want to make sure that
they're happy about it.

00:17:26.829 --> 00:17:29.054
And again, if you
annoy the user,

00:17:29.054 --> 00:17:31.470
don't use the peak, unless you
really think it's worth it.

00:17:31.470 --> 00:17:33.060
Because you will
get uninstalled.

00:17:33.060 --> 00:17:37.350
So there's the
poor ice cream guy.

00:17:37.350 --> 00:17:38.570
OK, so empowering the user.

00:17:38.570 --> 00:17:40.380
So we're moving up
the pyramid here.

00:17:40.380 --> 00:17:44.340
So we're going to feel a little
better about ourselves, right?

00:17:44.340 --> 00:17:48.337
So one of the things
that you need to do

00:17:48.337 --> 00:17:50.920
is to make sure-- notifications
are supposed to be actionable.

00:17:50.920 --> 00:17:53.730
I'm supposed to be able to
take some action on them.

00:17:53.730 --> 00:17:58.360
If it wasn't actionable,
then I can browse it later.

00:17:58.360 --> 00:18:00.390
But if I need to know
and take action on it,

00:18:00.390 --> 00:18:02.470
then it makes sense
as a notification.

00:18:02.470 --> 00:18:07.450
And my kid already
understands this.

00:18:07.450 --> 00:18:09.325
The tablet was out,
there were notifications.

00:18:09.325 --> 00:18:11.960
I was like, hey, how do you
feel about notifications?

00:18:11.960 --> 00:18:13.960
Kind of a weird
home life, maybe.

00:18:13.960 --> 00:18:16.410
And the response was,
some of them are annoying.

00:18:16.410 --> 00:18:17.890
I was like, oh, why?

00:18:17.890 --> 00:18:21.070
Oh, well, I can't do
anything with them.

00:18:21.070 --> 00:18:23.800
So you're not fooling anybody,
even the kids understand.

00:18:23.800 --> 00:18:26.110
And particularly
in that case, there

00:18:26.110 --> 00:18:27.830
was a notification about a game.

00:18:27.830 --> 00:18:29.580
It was one of these
sort of farming games,

00:18:29.580 --> 00:18:31.937
and like the squash
was ripe or something.

00:18:31.937 --> 00:18:33.520
And there's a
notification about that.

00:18:33.520 --> 00:18:35.230
And that was
actually appreciated,

00:18:35.230 --> 00:18:38.210
because now it's time to
go back and do something.

00:18:38.210 --> 00:18:40.580
The other notification
was oh, wouldn't you

00:18:40.580 --> 00:18:42.310
like to buy that power-up?

00:18:42.310 --> 00:18:43.640
Well, of course I would.

00:18:43.640 --> 00:18:44.727
Click on the notification.

00:18:44.727 --> 00:18:46.560
Turns out you can't do
that yet, because you

00:18:46.560 --> 00:18:49.220
don't have enough beans,
or whatever it is.

00:18:49.220 --> 00:18:51.360
So that's not actionable.

00:18:51.360 --> 00:18:54.157
That's very clearly an ad to
pull you back into the app.

00:18:54.157 --> 00:18:56.740
This one is at least-- I mean,
it's certainly pulling you back

00:18:56.740 --> 00:18:59.757
into the app, but at least
it's doing the user a favor.

00:18:59.757 --> 00:19:02.340
And even children understand the
difference between these two.

00:19:02.340 --> 00:19:03.740
So definitely think about it.

00:19:03.740 --> 00:19:05.280
And then we had the talk.

00:19:05.280 --> 00:19:07.171
So that was when
we had the talk,

00:19:07.171 --> 00:19:09.420
and we talked about how to
install and uninstall apps.

00:19:09.420 --> 00:19:12.836
And they're installed.

00:19:12.836 --> 00:19:14.430
So how can you empower the user?

00:19:14.430 --> 00:19:16.630
So it turns out that
people have different-- one

00:19:16.630 --> 00:19:18.129
thing you can do,
that we've allowed

00:19:18.129 --> 00:19:22.690
you to do in Lollipop is to
get to this long press space.

00:19:22.690 --> 00:19:26.660
If you have a notification
settings activity, an activity

00:19:26.660 --> 00:19:29.250
where the user
goes, just tell you

00:19:29.250 --> 00:19:32.320
how they want the
notifications to be presented.

00:19:32.320 --> 00:19:33.930
Should they make noise?

00:19:33.930 --> 00:19:36.176
Do I even want those
kinds of activities?

00:19:36.176 --> 00:19:37.550
And you should
have one of those.

00:19:37.550 --> 00:19:39.630
If you don't, you should.

00:19:39.630 --> 00:19:42.060
And if you do, then
you can tell us,

00:19:42.060 --> 00:19:44.556
and the system will surface
that in various places

00:19:44.556 --> 00:19:46.180
where the user might
be looking for it.

00:19:46.180 --> 00:19:48.370
Because they may not know
how to get to it in your app.

00:19:48.370 --> 00:19:49.911
They may be in some
menu or whatever,

00:19:49.911 --> 00:19:52.580
and may not even think about it.

00:19:52.580 --> 00:19:54.030
But, for example,
in this case, we

00:19:54.030 --> 00:19:55.100
surface it right
in the long press.

00:19:55.100 --> 00:19:57.250
So they can say, I don't
like that notification.

00:19:57.250 --> 00:19:58.300
And there's a gear.

00:19:58.300 --> 00:20:01.200
And that gear will
appear if you do this.

00:20:01.200 --> 00:20:02.447
So this is your manifest.

00:20:02.447 --> 00:20:04.530
You have your settings
activity, which you already

00:20:04.530 --> 00:20:06.780
have-- you should.

00:20:06.780 --> 00:20:08.750
And you just have this category.

00:20:08.750 --> 00:20:10.770
So notification
preference category,

00:20:10.770 --> 00:20:12.550
and we'll go look those up.

00:20:12.550 --> 00:20:14.320
And wherever they
make sense to surface,

00:20:14.320 --> 00:20:16.210
we'll show them to the user.

00:20:16.210 --> 00:20:18.462
And that'll take them
directly deep into your app.

00:20:18.462 --> 00:20:19.920
And then they can
do all the stuff.

00:20:22.460 --> 00:20:24.356
So another thing--
actually, a friend of mine

00:20:24.356 --> 00:20:25.730
found out I was
giving this talk.

00:20:25.730 --> 00:20:28.740
And he asked me to tell
you one thing, which

00:20:28.740 --> 00:20:31.160
is that if you have
a settings activity

00:20:31.160 --> 00:20:33.330
for your notifications,
which you should,

00:20:33.330 --> 00:20:37.050
and the user
expresses some desire

00:20:37.050 --> 00:20:42.060
about how notifications should
be handled, please save that.

00:20:42.060 --> 00:20:43.620
Don't drop it on
the next upgrade.

00:20:43.620 --> 00:20:45.730
Don't move it between devices.

00:20:45.730 --> 00:20:48.500
You should definitely send it
to your server or something.

00:20:48.500 --> 00:20:51.800
And I think the key idea there
is that any time the user

00:20:51.800 --> 00:20:53.870
tells you or gives you
some information about how

00:20:53.870 --> 00:20:56.269
they like or dislike
your app, that's gold.

00:20:56.269 --> 00:20:57.810
You're never going
to get that again.

00:20:57.810 --> 00:20:59.880
They're never going
to tell you again.

00:20:59.880 --> 00:21:03.230
So any chance you get where
they give you their preferences,

00:21:03.230 --> 00:21:05.450
you should definitely
treat those as something

00:21:05.450 --> 00:21:06.910
to save and cherish.

00:21:06.910 --> 00:21:12.630
And back it up, and restore it,
and make sure it's still there.

00:21:12.630 --> 00:21:17.099
So if you don't have
a settings activity

00:21:17.099 --> 00:21:19.640
for your notifications, and you
should, this is how it looks.

00:21:19.640 --> 00:21:21.295
So it turns out
it's really easy.

00:21:21.295 --> 00:21:23.420
I told you I was climbing
the same mountain as you.

00:21:23.420 --> 00:21:26.110
Actually, I had never
written a preference panel,

00:21:26.110 --> 00:21:28.230
so I learned this for the talk.

00:21:28.230 --> 00:21:30.850
But you write some XMLs,
check-box preference.

00:21:30.850 --> 00:21:35.600
So this in particular controls
my example app-- like,

00:21:35.600 --> 00:21:38.970
do I want my example SMS
to make noise or not?

00:21:38.970 --> 00:21:42.180
So this is sort of what
the XML looks like.

00:21:42.180 --> 00:21:44.900
And then very simply, you just
pull it out of preferences.

00:21:44.900 --> 00:21:48.850
And if it's not true,
you don't set the sound.

00:21:48.850 --> 00:21:50.590
So that's pretty easy.

00:21:50.590 --> 00:21:54.050
So we should be doing
this, definitely.

00:21:54.050 --> 00:21:58.212
OK, the other way to empower
the users is to-- like I said,

00:21:58.212 --> 00:21:59.670
notifications should
be actionable.

00:21:59.670 --> 00:22:01.870
So obviously, you should
add actions to them.

00:22:01.870 --> 00:22:06.340
So actions are this way to
add more than one intent

00:22:06.340 --> 00:22:07.760
to a notification.

00:22:07.760 --> 00:22:10.133
So normally, you would
click on the notification.

00:22:10.133 --> 00:22:11.374
It would fire an intent.

00:22:11.374 --> 00:22:12.790
Usually, that just
opens your app,

00:22:12.790 --> 00:22:17.516
and drops you in the perfect
context to see the thing.

00:22:17.516 --> 00:22:19.390
But sometimes, the user
might be able to make

00:22:19.390 --> 00:22:21.300
a decision from the shade.

00:22:21.300 --> 00:22:23.830
From the user perspective,
that's much better.

00:22:23.830 --> 00:22:26.690
So in this case,
an incoming call,

00:22:26.690 --> 00:22:30.490
I can add an action button
that lets me drop the call.

00:22:30.490 --> 00:22:32.290
And now imagine that
this is in the peak.

00:22:32.290 --> 00:22:33.044
It's slid down.

00:22:33.044 --> 00:22:34.960
I'm reading, I'm playing
a game, or something.

00:22:34.960 --> 00:22:36.600
I don't want to talk
that person-- ignore.

00:22:36.600 --> 00:22:38.130
I didn't even have
to leave the game.

00:22:38.130 --> 00:22:39.630
So if I had to click
on the notification,

00:22:39.630 --> 00:22:41.980
go into the phone app, now
I'm in a different context.

00:22:41.980 --> 00:22:47.190
I've lost my mental space back
there, I have to go back to it.

00:22:47.190 --> 00:22:51.224
So this is something you
definitely do for the users

00:22:51.224 --> 00:22:52.890
to give them more
choices, and give them

00:22:52.890 --> 00:22:55.960
more actionable notifications.

00:22:55.960 --> 00:22:58.272
And this is how you add them.

00:22:58.272 --> 00:23:00.230
This is actually, I think,
the deprecated call,

00:23:00.230 --> 00:23:01.390
but it fits on the slide.

00:23:01.390 --> 00:23:02.890
So if you try to
do this, it'll tell

00:23:02.890 --> 00:23:05.190
you to do something
else slightly different.

00:23:05.190 --> 00:23:07.130
But the basics are the same.

00:23:07.130 --> 00:23:08.505
You give us a
small icon, and you

00:23:08.505 --> 00:23:11.534
miss a very tiny string,
and the pending intent

00:23:11.534 --> 00:23:12.450
that you want to fire.

00:23:12.450 --> 00:23:14.575
And often that pending
intent will go to a service.

00:23:14.575 --> 00:23:16.380
It won't actually
start an activity.

00:23:16.380 --> 00:23:20.850
It'll go to a service that will
say drop the call, for example.

00:23:20.850 --> 00:23:22.350
And the thing you
should think about

00:23:22.350 --> 00:23:24.174
is that the more
actions you add,

00:23:24.174 --> 00:23:25.340
the smaller the buttons get.

00:23:25.340 --> 00:23:28.065
So what might look
good in your language,

00:23:28.065 --> 00:23:31.330
if you internationalize
it, might not fit.

00:23:31.330 --> 00:23:32.807
So this is a very limited space.

00:23:32.807 --> 00:23:34.640
So you have to sort of
craft those messages,

00:23:34.640 --> 00:23:38.180
and think about exactly
what the actions are.

00:23:38.180 --> 00:23:39.900
Another way to
make notifications

00:23:39.900 --> 00:23:42.580
actionable is to give the user
the information they need.

00:23:42.580 --> 00:23:47.110
So instead of, "you'll never
guess what Romain posted,"

00:23:47.110 --> 00:23:48.010
show the picture.

00:23:48.010 --> 00:23:50.134
That's the main body
of this message.

00:23:50.134 --> 00:23:52.300
So the user should be able
to see it and take action

00:23:52.300 --> 00:23:54.040
on it right there.

00:23:54.040 --> 00:23:58.440
And I think this is
about building trust.

00:23:58.440 --> 00:24:00.990
If you don't always pull
the user into your app

00:24:00.990 --> 00:24:03.267
to perform every
action, then the user

00:24:03.267 --> 00:24:05.683
is going to trust that when
you do pull them into the app,

00:24:05.683 --> 00:24:06.580
that it's for a good reason.

00:24:06.580 --> 00:24:08.496
And they're going to
have a better experience.

00:24:10.740 --> 00:24:16.210
There's a style bullet
that started in Jelly Bean.

00:24:16.210 --> 00:24:17.740
Again, using the
builder pattern,

00:24:17.740 --> 00:24:19.830
you would build
your notification,

00:24:19.830 --> 00:24:22.932
and that would render as a
small regular notification.

00:24:22.932 --> 00:24:25.140
And then if you wanted to
have an expandable version,

00:24:25.140 --> 00:24:28.120
then you attach a style.

00:24:28.120 --> 00:24:30.250
So in this case,
there's a picture style,

00:24:30.250 --> 00:24:33.634
it just wraps the bitmap.

00:24:33.634 --> 00:24:36.050
And then there's a text example
of the same sort of thing.

00:24:36.050 --> 00:24:37.910
You can wrap the text example.

00:24:37.910 --> 00:24:41.200
And this is, again,
it's just sensible.

00:24:41.200 --> 00:24:46.500
Like, I'll be there have
to click on it, right?

00:24:46.500 --> 00:24:47.000
OK, instead.

00:24:47.000 --> 00:24:48.530
I can pull it open and be,
I'll be there in five minutes.

00:24:48.530 --> 00:24:50.414
Oh, great, OK--
that's fantastic.

00:24:50.414 --> 00:24:51.830
So giving the user
the information

00:24:51.830 --> 00:24:56.430
they need, when they need
it, so they can sort of live

00:24:56.430 --> 00:25:00.120
their life and tell their
story, is a good way

00:25:00.120 --> 00:25:02.060
to make the user happy with you.

00:25:02.060 --> 00:25:03.720
OK, so this is
another little story.

00:25:03.720 --> 00:25:06.465
So how many people
use Google Calendar?

00:25:06.465 --> 00:25:07.240
A lot of people.

00:25:07.240 --> 00:25:08.739
I saw, when I was
sitting back there

00:25:08.739 --> 00:25:10.579
and I saw people [INAUDIBLE].

00:25:10.579 --> 00:25:12.620
How many people, you've
been using it long enough

00:25:12.620 --> 00:25:15.440
that you remember when it used
to stack up notifications?

00:25:15.440 --> 00:25:16.363
Like you'd have
your next meeting,

00:25:16.363 --> 00:25:18.696
and your current meeting, and
all the previous meetings.

00:25:22.130 --> 00:25:23.949
This is a case
where-- I'm not really

00:25:23.949 --> 00:25:25.740
going to talk about
multi-device very much.

00:25:25.740 --> 00:25:27.580
But this is the one time we're
talking about multi-device.

00:25:27.580 --> 00:25:29.121
It is the case that
some of our users

00:25:29.121 --> 00:25:30.850
will have a phone,
and maybe a tablet.

00:25:30.850 --> 00:25:33.350
And so my experience was that
I would have my phone at work,

00:25:33.350 --> 00:25:35.790
and I'd go to all my
meetings, and dismiss them.

00:25:35.790 --> 00:25:37.960
And then when I got home,
I got a little memoir

00:25:37.960 --> 00:25:40.130
of all my meetings
sitting on my tablet.

00:25:40.130 --> 00:25:42.810
I'm like, great, I
was there, thank you.

00:25:42.810 --> 00:25:44.625
So this is something
one of the advantages

00:25:44.625 --> 00:25:46.977
of working at Google is
I get to paratroop in

00:25:46.977 --> 00:25:49.834
to, say, the calendar team,
and help them out by building

00:25:49.834 --> 00:25:50.750
this global dismissal.

00:25:50.750 --> 00:25:53.390
So this is two devices.

00:25:53.390 --> 00:25:56.270
I get a calendar notification
independently on each one.

00:25:56.270 --> 00:25:59.090
I dismiss it on the right one,
and the left one auto-dismisses

00:25:59.090 --> 00:26:00.490
it.

00:26:00.490 --> 00:26:02.746
So this is about--
remember I said every user

00:26:02.746 --> 00:26:03.870
action is sort of precious.

00:26:03.870 --> 00:26:06.312
You want to really value
those interactions.

00:26:06.312 --> 00:26:08.520
And is a case of making the
most of that interaction.

00:26:08.520 --> 00:26:11.680
I told you I was done
with it, so there's

00:26:11.680 --> 00:26:14.439
no reason to show it elsewhere.

00:26:14.439 --> 00:26:15.605
OK, so this is multi-device.

00:26:15.605 --> 00:26:17.820
It's getting a
little complicated

00:26:17.820 --> 00:26:20.010
But if you're already
creating this problem,

00:26:20.010 --> 00:26:21.500
you almost certainly
have a server

00:26:21.500 --> 00:26:24.200
that's causing these
events to come out.

00:26:24.200 --> 00:26:26.240
And probably, you're using GCM.

00:26:26.240 --> 00:26:29.190
So if you're already doing that,
then the flow is pretty simple.

00:26:29.190 --> 00:26:31.290
The server-- there's
some event happens,

00:26:31.290 --> 00:26:33.200
somebody creates
a calendar event.

00:26:33.200 --> 00:26:35.500
It sends information
out to the two devices.

00:26:35.500 --> 00:26:37.900
They post notifications.

00:26:37.900 --> 00:26:40.599
You catch the dismiss intent.

00:26:40.599 --> 00:26:42.140
I'll show you in a
second how you set

00:26:42.140 --> 00:26:45.710
and dismiss pending intent.

00:26:45.710 --> 00:26:47.490
So the person
dismisses the intent.

00:26:47.490 --> 00:26:49.187
The application
gets that callback.

00:26:49.187 --> 00:26:50.686
It sends a GCM
message to the server

00:26:50.686 --> 00:26:52.499
and says, hey, it was dismissed.

00:26:52.499 --> 00:26:54.665
And the server says, oh,
well I should send that out

00:26:54.665 --> 00:26:55.665
to all the rest of them.

00:26:55.665 --> 00:26:57.720
So it sends it all to
the other devices again,

00:26:57.720 --> 00:26:59.330
and the phone says,
I already got it.

00:26:59.330 --> 00:27:01.150
But the tablet's like, oh,
that's good information,

00:27:01.150 --> 00:27:03.191
I'll cancel that notification
so the user doesn't

00:27:03.191 --> 00:27:05.639
have to worry about it.

00:27:05.639 --> 00:27:06.680
So this is how you do it.

00:27:06.680 --> 00:27:10.094
So in your GCM-- again, if
you're creating this problem,

00:27:10.094 --> 00:27:11.510
you're probably
already using GCM.

00:27:11.510 --> 00:27:15.110
In your GCM handlers,
you just add

00:27:15.110 --> 00:27:17.170
a clause that says--
you have to come up

00:27:17.170 --> 00:27:21.152
with some API for yourself, but
"post" sounds like a good one.

00:27:21.152 --> 00:27:22.610
And the key bit of
information here

00:27:22.610 --> 00:27:25.590
is that the postMessage
from the server

00:27:25.590 --> 00:27:27.810
will include some
sort of unique ID.

00:27:27.810 --> 00:27:30.870
You heard about this
in the previous talk,

00:27:30.870 --> 00:27:34.575
where you have the server
managing these unique IDs

00:27:34.575 --> 00:27:35.700
so you can refer to things.

00:27:35.700 --> 00:27:36.658
This is the same thing.

00:27:36.658 --> 00:27:38.380
Server is going to
send down a unique ID

00:27:38.380 --> 00:27:40.450
so that all the devices agree.

00:27:40.450 --> 00:27:42.040
And then the devices
independently

00:27:42.040 --> 00:27:44.210
are going to create
these delete intents.

00:27:44.210 --> 00:27:46.210
So this is basically a
pending intent, a wrapper

00:27:46.210 --> 00:27:48.871
around this unique ID.

00:27:48.871 --> 00:27:50.745
And then it's going to
post the notification.

00:27:53.810 --> 00:27:57.350
OK, so when the
notification is dismissed,

00:27:57.350 --> 00:28:00.460
there will be some
intent service you have.

00:28:00.460 --> 00:28:03.880
And depending intent will
fire into that service.

00:28:03.880 --> 00:28:06.150
And you'll have
a dismiss action.

00:28:06.150 --> 00:28:08.979
And you pull out that unique
ID, because now you have it back

00:28:08.979 --> 00:28:09.520
in your hand.

00:28:09.520 --> 00:28:11.728
You don't really have to
save it anywhere-- it's sort

00:28:11.728 --> 00:28:14.005
of-- as part of this state.

00:28:14.005 --> 00:28:16.130
OK, so then you build your
message and send it off.

00:28:16.130 --> 00:28:18.589
Again, if you're using GCM,
there's more stuff around this,

00:28:18.589 --> 00:28:19.963
but you probably
already have it.

00:28:19.963 --> 00:28:21.840
So this is just a
couple lines to add.

00:28:21.840 --> 00:28:24.910
And then, again,
back in the Received,

00:28:24.910 --> 00:28:26.455
we already have
our post receiver,

00:28:26.455 --> 00:28:28.500
we're just going to
add a cancel receiver.

00:28:28.500 --> 00:28:30.915
And again, we'll
get the unique ID.

00:28:30.915 --> 00:28:32.290
In this very simple
sample, we're

00:28:32.290 --> 00:28:34.710
using the idea as
the notification ID.

00:28:34.710 --> 00:28:38.312
So I can just call directly
into NoMan and say cancel that.

00:28:38.312 --> 00:28:39.770
You could imagine
a situation where

00:28:39.770 --> 00:28:44.260
you'd do a look-up and mash keys
or something more complicated.

00:28:44.260 --> 00:28:47.310
OK, so the last
thing in this section

00:28:47.310 --> 00:28:51.350
is about ongoing notifications.

00:28:51.350 --> 00:28:54.210
So ongoing notifications
are these things you cannot

00:28:54.210 --> 00:28:54.790
dismiss.

00:28:54.790 --> 00:28:57.430
You sort of swipe them,
and they're stuck there.

00:28:57.430 --> 00:28:59.020
And this sounds
like a great idea.

00:28:59.020 --> 00:29:00.519
Like I can pin
something to the top,

00:29:00.519 --> 00:29:05.060
and make it un-dismissable, and
then I've always got that spot.

00:29:05.060 --> 00:29:07.460
It turns out that this
really annoys users.

00:29:07.460 --> 00:29:12.200
So there are-- how many do we
hear-- like 1.4 billion users?

00:29:12.200 --> 00:29:13.806
A lot of them are not like you.

00:29:13.806 --> 00:29:15.180
And they use their
phones in ways

00:29:15.180 --> 00:29:17.149
that you would never
have predicted.

00:29:17.149 --> 00:29:18.940
And so there's a lot
of different workflows

00:29:18.940 --> 00:29:20.670
that people use in the shade.

00:29:20.670 --> 00:29:23.790
And one of them, for
example, is to just deal

00:29:23.790 --> 00:29:24.850
with the top thing.

00:29:24.850 --> 00:29:26.385
You deal with it, and get
rid of it, deal with it,

00:29:26.385 --> 00:29:26.820
get rid of it.

00:29:26.820 --> 00:29:29.403
And the nice thing is that the
next one pops up automatically,

00:29:29.403 --> 00:29:32.740
and you get the action
buttons out in the full view.

00:29:32.740 --> 00:29:34.460
So in some sense,
the notifications

00:29:34.460 --> 00:29:38.200
aren't actionable until they pop
up to the top in that workflow.

00:29:38.200 --> 00:29:39.640
Now you can always open them.

00:29:39.640 --> 00:29:41.970
But if you've
taken that top spot

00:29:41.970 --> 00:29:44.620
with an un-dismissable thing,
suddenly, their workflow

00:29:44.620 --> 00:29:45.570
is totally broken.

00:29:45.570 --> 00:29:48.187
Yes, they can pinch the
things open and do the stuff.

00:29:48.187 --> 00:29:49.770
But you've interrupted
their workflow,

00:29:49.770 --> 00:29:51.290
and nobody likes that.

00:29:51.290 --> 00:29:55.425
So you've got to think really
hard about sticking something

00:29:55.425 --> 00:29:57.177
on the top.

00:29:57.177 --> 00:29:59.260
And there's certain cases
where you have to do it.

00:29:59.260 --> 00:30:00.926
If you're starting a
foreground service,

00:30:00.926 --> 00:30:02.410
you have to put one up there.

00:30:02.410 --> 00:30:04.950
Because it will kill your
service if you don't.

00:30:04.950 --> 00:30:08.580
Things where there is
an external obligation,

00:30:08.580 --> 00:30:11.780
like another person
who's waiting for me--

00:30:11.780 --> 00:30:12.860
that's an ongoing event.

00:30:12.860 --> 00:30:14.120
That's not an ongoing
event in your app.

00:30:14.120 --> 00:30:15.430
It's not an ongoing
event on the phone.

00:30:15.430 --> 00:30:16.940
It's an ongoing
event in real life.

00:30:16.940 --> 00:30:18.890
So that makes sense to
make that an ongoing,

00:30:18.890 --> 00:30:22.246
because the risk of
dropping that, losing it,

00:30:22.246 --> 00:30:23.620
like accidentally
swiping it away

00:30:23.620 --> 00:30:26.119
and not being able to get back
to it before the other person

00:30:26.119 --> 00:30:29.190
gets bored and goes
away, is very high.

00:30:29.190 --> 00:30:30.920
But for almost
everything else, you

00:30:30.920 --> 00:30:33.370
should prefer a
model where you can,

00:30:33.370 --> 00:30:35.660
instead of making an
ongoing, say, oh, I don't

00:30:35.660 --> 00:30:37.250
care about this now-- snooze.

00:30:37.250 --> 00:30:39.020
And then post an
alarm for yourself

00:30:39.020 --> 00:30:42.985
and if it is that important,
post it again later.

00:30:42.985 --> 00:30:44.610
10 minutes from now,
an hour from now--

00:30:44.610 --> 00:30:46.420
whatever makes sense.

00:30:46.420 --> 00:30:48.491
The other thing you can
do is, if you really

00:30:48.491 --> 00:30:50.740
believe you need to have an
ongoing notification stuck

00:30:50.740 --> 00:30:54.810
in the shade, is either make
it lower priority, or give them

00:30:54.810 --> 00:30:57.270
a way to bump the priority down.

00:30:57.270 --> 00:30:59.280
So here's some examples
of ongoing notifications

00:30:59.280 --> 00:31:01.740
that do the right thing.

00:31:01.740 --> 00:31:04.020
They give the user
an actionable way

00:31:04.020 --> 00:31:05.550
to get rid of the notification.

00:31:05.550 --> 00:31:09.990
So the top one is a
music playing app.

00:31:09.990 --> 00:31:11.350
I think it's Google Music.

00:31:11.350 --> 00:31:14.639
And you notice that while it's
playing, you can't dismiss it.

00:31:14.639 --> 00:31:16.180
But the user can,
once they pause it,

00:31:16.180 --> 00:31:16.970
then they can dismiss it.

00:31:16.970 --> 00:31:18.150
So it's this nice pattern.

00:31:18.150 --> 00:31:20.712
The user, they know why it's
stuck there-- oh yeah, OK.

00:31:20.712 --> 00:31:22.420
And then the bottom
one is very explicit.

00:31:22.420 --> 00:31:25.070
This is ConnectBot-- anybody?

00:31:25.070 --> 00:31:26.850
That's a SSH client.

00:31:26.850 --> 00:31:29.240
OK, it very explicitly says
the way you get rid of this

00:31:29.240 --> 00:31:32.260
is to disconnect the session.

00:31:32.260 --> 00:31:34.180
So you should do that
stuff, or get removed.

00:31:34.180 --> 00:31:36.490
People will definitely
remove you if you annoy them.

00:31:38.717 --> 00:31:40.800
So, delighting the user--
this is a tough chapter.

00:31:40.800 --> 00:31:43.622
Because once you
get the pyramid,

00:31:43.622 --> 00:31:45.580
it really depends on what
your app does, right?

00:31:45.580 --> 00:31:47.090
How are you going to
make your users happy

00:31:47.090 --> 00:31:48.730
is kind of like
what you're doing.

00:31:48.730 --> 00:31:51.510
That's sort of your thing.

00:31:51.510 --> 00:31:54.010
But I do have one specific thing
to say about this that I've

00:31:54.010 --> 00:31:56.050
seen by talking to people.

00:31:56.050 --> 00:31:59.550
A lot of people turn off
sound on their phone always.

00:31:59.550 --> 00:32:01.270
That's one thing to do.

00:32:01.270 --> 00:32:03.490
And they just live on vibrate.

00:32:03.490 --> 00:32:04.830
Other people have sound on.

00:32:04.830 --> 00:32:07.520
And for those people, a lot
of them really love sound.

00:32:07.520 --> 00:32:11.750
And they will love
to change ringtones.

00:32:11.750 --> 00:32:14.350
They love to have this
app be that sound,

00:32:14.350 --> 00:32:15.540
and this app be that sound.

00:32:15.540 --> 00:32:16.837
And that way they can know.

00:32:16.837 --> 00:32:19.420
So when their phone makes noise,
they know if it's-- sometimes

00:32:19.420 --> 00:32:22.000
they even know it's that person,
because there's a person who

00:32:22.000 --> 00:32:23.730
uses that app, and
nobody else uses it.

00:32:27.772 --> 00:32:29.230
So this is another
thing I actually

00:32:29.230 --> 00:32:30.896
learned while I was
setting up the talk.

00:32:30.896 --> 00:32:33.540
So back in our notification
settings-- remember,

00:32:33.540 --> 00:32:36.340
we were here, so we can
get to your settings app.

00:32:36.340 --> 00:32:38.475
It turns out that there's
this RingtonePreference.

00:32:38.475 --> 00:32:40.090
Does anybody use this?

00:32:40.090 --> 00:32:41.730
It goes all the way back to one.

00:32:41.730 --> 00:32:47.080
So you would think-- so when you
look at the notification APIs,

00:32:47.080 --> 00:32:49.694
it just says, give us a URI.

00:32:49.694 --> 00:32:52.110
And you're like, where am I
going to get a URI for a song?

00:32:52.110 --> 00:32:53.550
Well, it turns out
you get it from here.

00:32:53.550 --> 00:32:55.270
So if you just drop
this little snippet

00:32:55.270 --> 00:32:58.650
into your preferences
panel, you'll

00:32:58.650 --> 00:33:00.160
get this nice little dialogue.

00:33:00.160 --> 00:33:01.820
You don't have to
do anything else.

00:33:01.820 --> 00:33:02.840
They get to pick.

00:33:02.840 --> 00:33:04.850
You say, please give me
notification ringtones.

00:33:04.850 --> 00:33:06.540
Those are the short ones.

00:33:06.540 --> 00:33:09.180
So it'll pre-filter
everything for you.

00:33:09.180 --> 00:33:11.170
They pick one.

00:33:11.170 --> 00:33:12.760
When it's time to
make noise, you just

00:33:12.760 --> 00:33:17.040
ask the preference
manager, hey, give me

00:33:17.040 --> 00:33:18.900
that string I asked for.

00:33:18.900 --> 00:33:20.415
And it comes out
as a string URI,

00:33:20.415 --> 00:33:22.450
and you parse it, and
pass it, and done.

00:33:22.450 --> 00:33:24.510
You don't even have
to know about songs.

00:33:24.510 --> 00:33:27.905
You don't have to know
about MP3s or whatever.

00:33:27.905 --> 00:33:29.360
Just that's it.

00:33:29.360 --> 00:33:31.320
So this is surprising
to me that it

00:33:31.320 --> 00:33:32.270
was so simple,
because it's something

00:33:32.270 --> 00:33:33.311
that people love so much.

00:33:33.311 --> 00:33:34.860
And often, you don't
see it in apps.

00:33:34.860 --> 00:33:36.901
So if you want to delight
your users, in addition

00:33:36.901 --> 00:33:38.850
to everything else
you're doing, this

00:33:38.850 --> 00:33:41.120
is another thing you can add on.

00:33:41.120 --> 00:33:44.672
So last thing I wanted to talk
about is this very tippy-top.

00:33:44.672 --> 00:33:46.380
So I'm particularly
interested in people.

00:33:46.380 --> 00:33:49.450
I think people are
particularly important to us.

00:33:49.450 --> 00:33:52.850
And so in the system,
we built a way for you

00:33:52.850 --> 00:33:57.240
to help connect people.

00:33:57.240 --> 00:34:00.420
So one thing that
happens now, one thing

00:34:00.420 --> 00:34:02.370
that's changed in
our society, is

00:34:02.370 --> 00:34:06.090
that this device is the way that
people get in touch with me.

00:34:09.121 --> 00:34:10.620
But it's also the
way that everybody

00:34:10.620 --> 00:34:12.650
gets in touch with me.

00:34:12.650 --> 00:34:13.530
That's the problem.

00:34:13.530 --> 00:34:14.724
It's the way that games
get in touch with me.

00:34:14.724 --> 00:34:16.440
It's the way that politicians
get in touch with me.

00:34:16.440 --> 00:34:18.189
It's the way my mom
gets in touch with me.

00:34:18.189 --> 00:34:20.080
And one of those I care about.

00:34:20.080 --> 00:34:22.000
And it's my mom.

00:34:22.000 --> 00:34:23.605
So I can't turn this phone off.

00:34:23.605 --> 00:34:24.480
I cannot turn it off.

00:34:24.480 --> 00:34:25.675
Like people say, oh, I'll
just turn my phone off,

00:34:25.675 --> 00:34:27.179
and then I can sleep.

00:34:27.179 --> 00:34:28.480
I can't do that.

00:34:28.480 --> 00:34:30.710
I can't do that, because
what if my mom called me

00:34:30.710 --> 00:34:32.020
in the middle of the night?

00:34:32.020 --> 00:34:33.630
It would be important.

00:34:33.630 --> 00:34:34.962
I would want to get that call.

00:34:34.962 --> 00:34:35.920
So I can't turn it off.

00:34:35.920 --> 00:34:37.580
I can't turn the volume off.

00:34:37.580 --> 00:34:39.170
What do I do?

00:34:39.170 --> 00:34:43.480
What I do is I go back
to do not disturb mode.

00:34:43.480 --> 00:34:46.719
And I don't know if you saw it
last time, so this is my phone.

00:34:46.719 --> 00:34:49.520
Every night from 10:00
to 7:00 in the morning,

00:34:49.520 --> 00:34:52.480
I'm in priority-only mode.

00:34:52.480 --> 00:34:56.267
And the way I have it
set up is you can--

00:34:56.267 --> 00:34:58.850
I don't know if you noticed this
before, I didn't mention it--

00:34:58.850 --> 00:35:00.480
but in some of these
categories, you

00:35:00.480 --> 00:35:03.480
can actually select what kind
of people you want to hear from.

00:35:03.480 --> 00:35:04.290
Anyone?

00:35:04.290 --> 00:35:07.580
Do I want all calls, or I
only want calls from people

00:35:07.580 --> 00:35:10.700
I know, or I only want calls
from people I have starred.

00:35:10.700 --> 00:35:13.925
So stars are things that the
system has taught people to do.

00:35:13.925 --> 00:35:15.300
Because that's
how you get people

00:35:15.300 --> 00:35:17.661
into your quick-dial list.

00:35:17.661 --> 00:35:19.410
So people usually
somehow figure that out.

00:35:19.410 --> 00:35:21.701
They're like, how do I get
that in the quick-dial list?

00:35:21.701 --> 00:35:23.320
And somebody teaches
them how to star.

00:35:23.320 --> 00:35:25.900
So I use stars.

00:35:25.900 --> 00:35:28.570
And what this allows us to do
is that now my phone will not

00:35:28.570 --> 00:35:32.190
make noise unless it's
from somebody I care about.

00:35:32.190 --> 00:35:33.840
So that means I have
the peace of mind

00:35:33.840 --> 00:35:36.420
that I'm not going
to miss something,

00:35:36.420 --> 00:35:38.710
but I also get interrupted
when it's important to me.

00:35:38.710 --> 00:35:41.330
So my attention is
properly focused.

00:35:41.330 --> 00:35:43.160
So you have to help us.

00:35:43.160 --> 00:35:46.980
So there's three parties
involved in this grand scheme.

00:35:46.980 --> 00:35:50.890
There is the user, the
person who knows which

00:35:50.890 --> 00:35:52.290
people are important to them.

00:35:52.290 --> 00:35:54.420
And they only know that.

00:35:54.420 --> 00:35:56.790
There's you, the
app developers, who

00:35:56.790 --> 00:35:58.707
know what this event is about.

00:35:58.707 --> 00:36:00.290
And then there's us,
the system, which

00:36:00.290 --> 00:36:02.365
knows what state the
user is in, like are we

00:36:02.365 --> 00:36:05.214
in Do Not Disturb or not?

00:36:05.214 --> 00:36:07.630
And so you need to help us by
giving us information again.

00:36:07.630 --> 00:36:10.200
So you need to annotate
your notifications

00:36:10.200 --> 00:36:14.391
with the appropriate metadata
that tells us about the people.

00:36:14.391 --> 00:36:16.140
We tried to make this
as easy as possible.

00:36:16.140 --> 00:36:17.723
So we gave you lots
of different ways.

00:36:17.723 --> 00:36:21.150
We accepted many
different kinds of URIs.

00:36:21.150 --> 00:36:24.380
So in the most simplest level,
if you use telephone numbers

00:36:24.380 --> 00:36:27.860
as an identifier, which
people do, just give us that.

00:36:27.860 --> 00:36:28.620
That's it.

00:36:28.620 --> 00:36:30.149
So if the person
is important to me,

00:36:30.149 --> 00:36:32.690
it is almost certainly the case
that their phone number ended

00:36:32.690 --> 00:36:34.226
up in my contacts somehow.

00:36:34.226 --> 00:36:36.225
You may not have put it
there, but somebody did.

00:36:36.225 --> 00:36:38.090
Or maybe I did.

00:36:38.090 --> 00:36:42.000
So if that's all you have, don't
ask for contacts permission.

00:36:42.000 --> 00:36:44.150
Just give us that,
and we'll check it.

00:36:44.150 --> 00:36:45.889
And it doesn't hurt to add it.

00:36:45.889 --> 00:36:48.180
If that person's not in
contacts, it won't do anything.

00:36:48.180 --> 00:36:49.930
It doesn't matter.

00:36:49.930 --> 00:36:52.590
And then also the same thing--
if you have an email address,

00:36:52.590 --> 00:36:53.560
you can do that.

00:36:53.560 --> 00:36:56.080
So if you send us mail
to URI, we'll see that.

00:36:56.080 --> 00:36:57.730
We'll say, oh, I
wonder if that email

00:36:57.730 --> 00:36:59.854
address is one we know
about, and we'll look it up.

00:37:02.006 --> 00:37:03.380
The last one is
more complicated.

00:37:03.380 --> 00:37:05.827
So if you're already dealing
with the contacts database

00:37:05.827 --> 00:37:07.410
for some reason, if
you're social app,

00:37:07.410 --> 00:37:09.284
and you're doing contact
syncing or whatever,

00:37:09.284 --> 00:37:14.460
you already have tons of code
for the contacts manager.

00:37:14.460 --> 00:37:16.500
This is a highly
abbreviated sample,

00:37:16.500 --> 00:37:20.320
because otherwise it
would be like five slides.

00:37:20.320 --> 00:37:22.300
But the key bits
here are when you

00:37:22.300 --> 00:37:25.100
go do a lookup on
a contact, you have

00:37:25.100 --> 00:37:27.135
to ask for this thing
called a lookup key.

00:37:27.135 --> 00:37:28.510
And that's something
you normally

00:37:28.510 --> 00:37:30.340
wouldn't have pulled out.

00:37:30.340 --> 00:37:33.070
And once you have it,
then you hand the ID

00:37:33.070 --> 00:37:36.610
and the lookup key to
this static function

00:37:36.610 --> 00:37:39.300
called getLookupUri, and
that builds a URI for you.

00:37:39.300 --> 00:37:40.770
And then you hand us that.

00:37:40.770 --> 00:37:42.730
And the reason you
want to do that

00:37:42.730 --> 00:37:44.870
is because the
lookup URI is more

00:37:44.870 --> 00:37:47.260
stable to certain kinds of
rearrangements of the contacts

00:37:47.260 --> 00:37:47.760
database.

00:37:47.760 --> 00:37:50.317
So things might be moving
around in the contacts database.

00:37:50.317 --> 00:37:51.900
You want to make
sure that you give us

00:37:51.900 --> 00:37:53.350
a URI that will
actually get back

00:37:53.350 --> 00:37:56.750
to the right person
in a stable way.

00:37:56.750 --> 00:37:59.530
So there's all those ways
to tell us about people.

00:37:59.530 --> 00:38:05.630
OK, so just to recap, every
single time you write the code,

00:38:05.630 --> 00:38:10.010
NotificationManager.notify,
I want you think,

00:38:10.010 --> 00:38:11.760
is the user going to
be happy about this,

00:38:11.760 --> 00:38:13.020
or am I going to annoy them?

00:38:13.020 --> 00:38:14.720
And if I annoy them
too much, how long

00:38:14.720 --> 00:38:16.900
is it be before they
ban or install me?

00:38:16.900 --> 00:38:19.410
OK, that's like the first thing.

00:38:19.410 --> 00:38:22.550
But then really, you've got
to be thinking about how,

00:38:22.550 --> 00:38:24.440
when they installed
your app on their phone,

00:38:24.440 --> 00:38:26.580
they're sort of inviting
you into their pocket.

00:38:26.580 --> 00:38:27.779
You're sharing their life.

00:38:27.779 --> 00:38:29.695
And you have to sort of
be respectful of that.

00:38:29.695 --> 00:38:31.630
And you have to
think about, well,

00:38:31.630 --> 00:38:33.265
how am I going to
fit into this story?

00:38:33.265 --> 00:38:34.890
And you have to give
us the information

00:38:34.890 --> 00:38:36.070
we need to help you do that.

00:38:36.070 --> 00:38:38.720
Because there are things
that you can't do,

00:38:38.720 --> 00:38:41.514
like the categories
and the people.

00:38:41.514 --> 00:38:43.180
And then I want to
make sure that you're

00:38:43.180 --> 00:38:44.013
empowering the user.

00:38:44.013 --> 00:38:46.180
Like no, please
don't post, you'll

00:38:46.180 --> 00:38:49.320
never guess what weird IM
your friend just sent you.

00:38:49.320 --> 00:38:50.960
Don't do that.

00:38:50.960 --> 00:38:52.460
Tell them the
information they need,

00:38:52.460 --> 00:38:53.960
give them the actions they need.

00:38:53.960 --> 00:38:56.206
And you'll build trust,
and you'll build happiness,

00:38:56.206 --> 00:38:57.580
and then you'll
have happy users.

00:38:57.580 --> 00:38:59.810
And that's what we all want.

00:38:59.810 --> 00:39:06.330
And then on the delight and
the actualization level,

00:39:06.330 --> 00:39:08.370
help us connect
with the user, help

00:39:08.370 --> 00:39:12.210
them connect with
the sounds they want.

00:39:12.210 --> 00:39:13.760
And that's it.

00:39:13.760 --> 00:39:16.425
So the source code,
all the source samples

00:39:16.425 --> 00:39:19.640
were pulled for this thing
called Notification Showcase,

00:39:19.640 --> 00:39:22.302
which is the worst way
to get you sample code,

00:39:22.302 --> 00:39:23.760
because it's part
of the framework.

00:39:23.760 --> 00:39:27.057
It's like the thing that
we use to test things out.

00:39:27.057 --> 00:39:28.890
I believe there is an
effort afoot to making

00:39:28.890 --> 00:39:29.973
a real sample out of this.

00:39:29.973 --> 00:39:32.520
I'll be helping next
week, probably, with that.

00:39:32.520 --> 00:39:36.627
So this link, for now, you
can go look at the code,

00:39:36.627 --> 00:39:38.085
and hopefully we'll
have something,

00:39:38.085 --> 00:39:42.200
a better story at some
point in the near future.

00:39:42.200 --> 00:39:43.496
So thank you.

00:39:43.496 --> 00:39:49.910
[APPLAUSE]

00:39:49.910 --> 00:39:52.505
And I talked super fast, so we
have some time for questions,

00:39:52.505 --> 00:39:53.421
if you have questions.

00:39:56.007 --> 00:39:57.840
I can't see, because
the lights are glare-y.

00:39:57.840 --> 00:39:58.881
AUDIENCE: Hi, right here.

00:39:58.881 --> 00:40:00.110
CHRIS WREN: Ah, there we go.

00:40:00.110 --> 00:40:02.340
AUDIENCE: My question
has to do with what

00:40:02.340 --> 00:40:05.640
happens when the user
turns off notifications

00:40:05.640 --> 00:40:07.170
for an application.

00:40:07.170 --> 00:40:12.071
CHRIS WREN: Yes, so if
they ban the notification,

00:40:12.071 --> 00:40:13.320
they just don't get delivered.

00:40:13.320 --> 00:40:14.410
Basically, the
notification manager

00:40:14.410 --> 00:40:15.800
will drop them on the floor.

00:40:15.800 --> 00:40:19.410
AUDIENCE: Right,
so does GCM still

00:40:19.410 --> 00:40:22.180
deliver the notification to
the phone, and then the phone

00:40:22.180 --> 00:40:23.530
not show it?

00:40:23.530 --> 00:40:24.239
Or--

00:40:24.239 --> 00:40:25.280
CHRIS WREN: Oh, yes, yes.

00:40:25.280 --> 00:40:27.196
AUDIENCE: --can I get
to know at the GCM level

00:40:27.196 --> 00:40:29.470
that my push was rejected?

00:40:29.470 --> 00:40:31.390
CHRIS WREN: So if you're
using the GCM library

00:40:31.390 --> 00:40:35.305
to post your notifications
for you, yeah,

00:40:35.305 --> 00:40:36.930
they'll still get
dropped on the floor.

00:40:36.930 --> 00:40:37.989
GCM won't know, either.

00:40:37.989 --> 00:40:39.780
Because GCM is kind of
inside your package,

00:40:39.780 --> 00:40:41.146
so it doesn't know
anything more than you do.

00:40:41.146 --> 00:40:43.271
AUDIENCE: No, but if it's
sent from my server, will

00:40:43.271 --> 00:40:46.300
my sever get some kind of--

00:40:46.300 --> 00:40:49.110
CHRIS WREN: Right, so maybe
we should follow backwards.

00:40:49.110 --> 00:40:51.410
But my understanding of it
is that the GCM thing is

00:40:51.410 --> 00:40:53.304
a library within your package.

00:40:53.304 --> 00:40:55.720
So that's actually doing the
posting of the notifications.

00:40:55.720 --> 00:40:57.553
Like they don't get
posted by Play Services.

00:40:57.553 --> 00:40:58.620
They get posted by you.

00:40:58.620 --> 00:41:01.140
And so I think there's
no information there.

00:41:01.140 --> 00:41:03.300
I don't think GCM
would be able to know.

00:41:03.300 --> 00:41:05.680
AUDIENCE: I'm specifically
asking about notification

00:41:05.680 --> 00:41:08.704
that my back end will send
to the device using GCM.

00:41:08.704 --> 00:41:09.620
CHRIS WREN: Oh, I see.

00:41:09.620 --> 00:41:11.177
So the user doesn't
know about those.

00:41:11.177 --> 00:41:12.260
That's not a user feature.

00:41:12.260 --> 00:41:13.880
So they wouldn't block those.

00:41:13.880 --> 00:41:16.700
That's maybe a [INAUDIBLE]
the term notification.

00:41:16.700 --> 00:41:20.240
So the message that comes
from GCM is a back-end thing.

00:41:20.240 --> 00:41:23.950
The user has no sort of
visibility into that at all.

00:41:23.950 --> 00:41:27.427
Really, notification blocking
is about the UI in the shade.

00:41:27.427 --> 00:41:28.260
AUDIENCE: Thank you.

00:41:30.276 --> 00:41:32.151
CHRIS WREN: There was
one back here, I think.

00:41:32.151 --> 00:41:33.109
I could sort of see it.

00:41:38.360 --> 00:41:39.470
AUDIENCE: Thank you.

00:41:39.470 --> 00:41:42.410
Do you have any best practices
for the watch notification?

00:41:42.410 --> 00:41:44.800
Does it work any
different, watch?

00:41:44.800 --> 00:41:46.030
CHRIS WREN: Watch, oh yes.

00:41:48.680 --> 00:41:51.780
Yes, I had some slides on that,
and I ended up taking them out

00:41:51.780 --> 00:41:54.260
because I thought I was
going to be over time.

00:41:54.260 --> 00:41:56.550
So there's a couple
things about that.

00:41:56.550 --> 00:41:58.380
I think a lot of the
same principles apply.

00:42:00.612 --> 00:42:02.070
If you're wearing
a watch, you know

00:42:02.070 --> 00:42:05.890
that the vibration is
pretty-- you can't ignore it.

00:42:05.890 --> 00:42:10.531
So it's an even more grabby sort
of way to interrupt someone.

00:42:10.531 --> 00:42:12.030
So you should be
thinking extra hard

00:42:12.030 --> 00:42:12.990
about whether you're
going to annoy them.

00:42:12.990 --> 00:42:14.480
But you should be thinking
about that anyway,

00:42:14.480 --> 00:42:16.120
because you get some devices
that are louder than others,

00:42:16.120 --> 00:42:19.070
and you don't really know how
annoying it's going to be.

00:42:19.070 --> 00:42:21.840
The one extra bit is that
there's this Set Local

00:42:21.840 --> 00:42:25.660
Only flag on the builder
that if, for whatever reason,

00:42:25.660 --> 00:42:28.430
you're generating notifications
kind of trapped in the device--

00:42:28.430 --> 00:42:29.846
like it's about
the device, maybe,

00:42:29.846 --> 00:42:32.840
and there's no reason
to send it to the watch,

00:42:32.840 --> 00:42:34.640
like USB connected, for example.

00:42:34.640 --> 00:42:35.550
That's a great one.

00:42:35.550 --> 00:42:37.925
You plug it in, you don't want
to see that on your watch.

00:42:37.925 --> 00:42:40.660
So you call Set Local
Only true, and then won't

00:42:40.660 --> 00:42:41.860
get bridged to the watch.

00:42:41.860 --> 00:42:44.557
That's your way to sort of keep
it from getting to the watch.

00:42:44.557 --> 00:42:45.390
AUDIENCE: Thank you.

00:42:49.450 --> 00:42:50.996
CHRIS WREN: This
one in the middle.

00:42:50.996 --> 00:42:59.380
AUDIENCE: So I saw [INAUDIBLE]
set the priority to minimum--

00:42:59.380 --> 00:43:02.612
CHRIS WREN: I can hear you,
but the livestream won't.

00:43:02.612 --> 00:43:05.740
Put it there.

00:43:05.740 --> 00:43:08.610
AUDIENCE: So I
noticed you mentioned

00:43:08.610 --> 00:43:10.320
trying to take
advantage of setting

00:43:10.320 --> 00:43:13.240
the priority to something
like minimum or low,

00:43:13.240 --> 00:43:16.660
which wouldn't
necessarily annoy users.

00:43:16.660 --> 00:43:21.970
Would that end up leading to
lower click-through rates?

00:43:21.970 --> 00:43:25.290
But on the other side, then you
would get your app uninstalled.

00:43:25.290 --> 00:43:26.990
Is that sort of the trade-off?

00:43:26.990 --> 00:43:28.490
CHRIS WREN: OK, so
I don't think so.

00:43:28.490 --> 00:43:32.360
Because, well, like
I mentioned, there

00:43:32.360 --> 00:43:38.950
was some academic
research-- and I'm blanking.

00:43:38.950 --> 00:43:40.910
There was a paper by
[? Norea Oliver ?] out

00:43:40.910 --> 00:43:45.740
of the Spanish
telecom company that

00:43:45.740 --> 00:43:49.240
was recently at a
conference about this exact.

00:43:49.240 --> 00:43:52.010
And I think that's the
trade off you're assuming

00:43:52.010 --> 00:43:54.450
is that I'll lower my
click-through rates

00:43:54.450 --> 00:43:55.300
versus annoyance.

00:43:55.300 --> 00:43:56.180
But those things aren't linked.

00:43:56.180 --> 00:43:58.410
It turns out that if you
present the notifications

00:43:58.410 --> 00:44:00.243
at the right time, you
actually get a higher

00:44:00.243 --> 00:44:01.260
click-through rate.

00:44:01.260 --> 00:44:02.490
And this makes sense.

00:44:02.490 --> 00:44:05.930
Do this sort of model
mental experiment.

00:44:05.930 --> 00:44:08.390
If I'm driving down
the road, and my phone

00:44:08.390 --> 00:44:13.095
tries to tell me to read an
article, not going to do it.

00:44:13.095 --> 00:44:16.480
But if I'm sitting the
doctor's office waiting,

00:44:16.480 --> 00:44:19.522
and I'm bored, oh, an article,
yeah, I'll totally read that.

00:44:19.522 --> 00:44:20.980
So you can totally
imagine how that

00:44:20.980 --> 00:44:24.340
would play out in real life.

00:44:24.340 --> 00:44:26.344
They're not on a seesaw,
they're unrelated.

00:44:26.344 --> 00:44:28.510
So I think it really depends
on what kind of content

00:44:28.510 --> 00:44:31.190
you're posting, and exactly what
the interaction's going to be.

00:44:31.190 --> 00:44:32.680
And you really need
to you think about it.

00:44:32.680 --> 00:44:35.096
But it might be the case that
if you stick it in the shade

00:44:35.096 --> 00:44:37.200
without drawing attention
to it, that they'll just

00:44:37.200 --> 00:44:39.990
find it at the right time, the
time that's right for them.

00:44:39.990 --> 00:44:41.906
When they pull down the
shade and they're just

00:44:41.906 --> 00:44:44.245
sort of triaging, that
might be your golden moment.

00:44:48.910 --> 00:44:51.880
OK I think we're-- oh,
we've got one more.

00:44:51.880 --> 00:44:54.169
One more-- last one.

00:44:54.169 --> 00:44:56.210
AUDIENCE: OK, yeah,
hopefully this will be quick.

00:44:56.210 --> 00:44:59.680
Basically I'm wondering
why not tell developers

00:44:59.680 --> 00:45:01.950
that their notifications
are being blocked by users?

00:45:01.950 --> 00:45:05.970
So basically like user
turns off my notifications,

00:45:05.970 --> 00:45:08.429
I might want to know, because
maybe I need that feedback

00:45:08.429 --> 00:45:09.220
that I'm actually--

00:45:09.220 --> 00:45:10.590
CHRIS WREN: Right, right, right.

00:45:10.590 --> 00:45:12.860
Yeah, OK, so that's
a good question.

00:45:12.860 --> 00:45:15.680
So how do you know if you're
annoying users before you get

00:45:15.680 --> 00:45:16.470
blocked?

00:45:16.470 --> 00:45:19.282
I think the reason
we don't close

00:45:19.282 --> 00:45:21.490
that loop is we're worried
about sort of retribution,

00:45:21.490 --> 00:45:23.489
where we don't want to--
obviously you're having

00:45:23.489 --> 00:45:24.840
a bad time, you and the user.

00:45:24.840 --> 00:45:26.800
We don't want to get
in the middle of that.

00:45:26.800 --> 00:45:30.270
But I think there's signals you
can get before that happened.

00:45:30.270 --> 00:45:31.932
You can post, delete intents.

00:45:31.932 --> 00:45:33.390
You can post-- you
know, of course,

00:45:33.390 --> 00:45:35.260
when they launch
your other intents.

00:45:35.260 --> 00:45:39.110
And I think if you are clever
about watching how soon they

00:45:39.110 --> 00:45:41.450
react to your notifications
and things like that,

00:45:41.450 --> 00:45:45.090
you can get some soft
engagement numbers

00:45:45.090 --> 00:45:46.692
before the bad stuff happens.

00:45:46.692 --> 00:45:51.667
[CHUCKLES] All right,
thank you very much.

00:45:51.667 --> 00:45:53.000
I'll be around for office hours.

00:45:53.000 --> 00:45:54.200
[APPLAUSE]

00:45:54.200 --> 00:45:59.650
[MUSIC PLAYING]

