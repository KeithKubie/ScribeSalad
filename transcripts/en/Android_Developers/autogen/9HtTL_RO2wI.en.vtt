WEBVTT
Kind: captions
Language: en

00:00:01.500 --> 00:00:05.800
 
[Music]

00:00:05.800 --> 00:00:05.810
[Music]
 

00:00:05.810 --> 00:00:09.910
[Music]
Wow what tepid applause thank you

00:00:09.910 --> 00:00:09.920
Wow what tepid applause thank you
 

00:00:09.920 --> 00:00:12.770
Wow what tepid applause thank you
hey my name is Chris Craig I work on

00:00:12.770 --> 00:00:12.780
hey my name is Chris Craig I work on
 

00:00:12.780 --> 00:00:15.650
hey my name is Chris Craig I work on
Android UI toolkit and I'm Chet Haase I

00:00:15.650 --> 00:00:15.660
Android UI toolkit and I'm Chet Haase I
 

00:00:15.660 --> 00:00:18.439
Android UI toolkit and I'm Chet Haase I
also work on the Android UI toolkit team

00:00:18.439 --> 00:00:18.449
also work on the Android UI toolkit team
 

00:00:18.449 --> 00:00:20.240
also work on the Android UI toolkit team
and today why don't we talk about

00:00:20.240 --> 00:00:20.250
and today why don't we talk about
 

00:00:20.250 --> 00:00:22.790
and today why don't we talk about
performance it's it's been a while since

00:00:22.790 --> 00:00:22.800
performance it's it's been a while since
 

00:00:22.800 --> 00:00:24.200
performance it's it's been a while since
we've had a performance talk so we

00:00:24.200 --> 00:00:24.210
we've had a performance talk so we
 

00:00:24.210 --> 00:00:26.060
we've had a performance talk so we
thought we should do it again because we

00:00:26.060 --> 00:00:26.070
thought we should do it again because we
 

00:00:26.070 --> 00:00:27.589
thought we should do it again because we
like talking about performance

00:00:27.589 --> 00:00:27.599
like talking about performance
 

00:00:27.599 --> 00:00:29.330
like talking about performance
for this year's performance talk we

00:00:29.330 --> 00:00:29.340
for this year's performance talk we
 

00:00:29.340 --> 00:00:30.859
for this year's performance talk we
wanted to make it a bit more use case

00:00:30.859 --> 00:00:30.869
wanted to make it a bit more use case
 

00:00:30.869 --> 00:00:32.569
wanted to make it a bit more use case
driven tell you a little bit about how

00:00:32.569 --> 00:00:32.579
driven tell you a little bit about how
 

00:00:32.579 --> 00:00:34.130
driven tell you a little bit about how
rendering works some of the changes that

00:00:34.130 --> 00:00:34.140
rendering works some of the changes that
 

00:00:34.140 --> 00:00:36.530
rendering works some of the changes that
we made some of the improvements around

00:00:36.530 --> 00:00:36.540
we made some of the improvements around
 

00:00:36.540 --> 00:00:39.290
we made some of the improvements around
performance but also go through some

00:00:39.290 --> 00:00:39.300
performance but also go through some
 

00:00:39.300 --> 00:00:42.350
performance but also go through some
steps of how you would actually find out

00:00:42.350 --> 00:00:42.360
steps of how you would actually find out
 

00:00:42.360 --> 00:00:44.600
steps of how you would actually find out
what jank is and how to fix it in your

00:00:44.600 --> 00:00:44.610
what jank is and how to fix it in your
 

00:00:44.610 --> 00:00:49.180
what jank is and how to fix it in your
applications so let's do that

00:00:49.180 --> 00:00:49.190
 
 

00:00:49.190 --> 00:00:52.729
 
UI performance Hey there you go so we

00:00:52.729 --> 00:00:52.739
UI performance Hey there you go so we
 

00:00:52.739 --> 00:00:56.180
UI performance Hey there you go so we
talked about frames for a second PS it's

00:00:56.180 --> 00:00:56.190
talked about frames for a second PS it's
 

00:00:56.190 --> 00:00:58.010
talked about frames for a second PS it's
a really good metric it's a it's a good

00:00:58.010 --> 00:00:58.020
a really good metric it's a it's a good
 

00:00:58.020 --> 00:00:59.569
a really good metric it's a it's a good
way for understanding what's going on in

00:00:59.569 --> 00:00:59.579
way for understanding what's going on in
 

00:00:59.579 --> 00:01:01.459
way for understanding what's going on in
your application but it's actually

00:01:01.459 --> 00:01:01.469
your application but it's actually
 

00:01:01.469 --> 00:01:03.680
your application but it's actually
better to think about the duration right

00:01:03.680 --> 00:01:03.690
better to think about the duration right
 

00:01:03.690 --> 00:01:05.390
better to think about the duration right
so it's not how many frames per second

00:01:05.390 --> 00:01:05.400
so it's not how many frames per second
 

00:01:05.400 --> 00:01:07.429
so it's not how many frames per second
you can hit honestly the display is

00:01:07.429 --> 00:01:07.439
you can hit honestly the display is
 

00:01:07.439 --> 00:01:09.200
you can hit honestly the display is
hitting 60 frames a second all the time

00:01:09.200 --> 00:01:09.210
hitting 60 frames a second all the time
 

00:01:09.210 --> 00:01:12.140
hitting 60 frames a second all the time
it's and then you need to sort of hit

00:01:12.140 --> 00:01:12.150
it's and then you need to sort of hit
 

00:01:12.150 --> 00:01:14.719
it's and then you need to sort of hit
the same number of frames for your

00:01:14.719 --> 00:01:14.729
the same number of frames for your
 

00:01:14.729 --> 00:01:17.149
the same number of frames for your
application in each second but it's

00:01:17.149 --> 00:01:17.159
application in each second but it's
 

00:01:17.159 --> 00:01:18.200
application in each second but it's
really better to think about the

00:01:18.200 --> 00:01:18.210
really better to think about the
 

00:01:18.210 --> 00:01:20.120
really better to think about the
duration that each frame is taking how

00:01:20.120 --> 00:01:20.130
duration that each frame is taking how
 

00:01:20.130 --> 00:01:22.010
duration that each frame is taking how
long is that frame taking to actually

00:01:22.010 --> 00:01:22.020
long is that frame taking to actually
 

00:01:22.020 --> 00:01:23.840
long is that frame taking to actually
draw because you're not going to fit

00:01:23.840 --> 00:01:23.850
draw because you're not going to fit
 

00:01:23.850 --> 00:01:26.090
draw because you're not going to fit
within that window if you're taking too

00:01:26.090 --> 00:01:26.100
within that window if you're taking too
 

00:01:26.100 --> 00:01:30.050
within that window if you're taking too
long to fit right so if you want to fix

00:01:30.050 --> 00:01:30.060
long to fit right so if you want to fix
 

00:01:30.060 --> 00:01:31.700
long to fit right so if you want to fix
the jank in your application if you want

00:01:31.700 --> 00:01:31.710
the jank in your application if you want
 

00:01:31.710 --> 00:01:33.289
the jank in your application if you want
to fix the stutters if when you're

00:01:33.289 --> 00:01:33.299
to fix the stutters if when you're
 

00:01:33.299 --> 00:01:35.840
to fix the stutters if when you're
flinging and scrolling that list there's

00:01:35.840 --> 00:01:35.850
flinging and scrolling that list there's
 

00:01:35.850 --> 00:01:38.090
flinging and scrolling that list there's
skipped frames in the middle and the

00:01:38.090 --> 00:01:38.100
skipped frames in the middle and the
 

00:01:38.100 --> 00:01:39.679
skipped frames in the middle and the
user is seeing this janky behavior

00:01:39.679 --> 00:01:39.689
user is seeing this janky behavior
 

00:01:39.689 --> 00:01:42.080
user is seeing this janky behavior
fixing that means fixing that frames

00:01:42.080 --> 00:01:42.090
fixing that means fixing that frames
 

00:01:42.090 --> 00:01:45.800
fixing that means fixing that frames
that are simply taking too long so also

00:01:45.800 --> 00:01:45.810
that are simply taking too long so also
 

00:01:45.810 --> 00:01:47.560
that are simply taking too long so also
it's good to think about consistency

00:01:47.560 --> 00:01:47.570
it's good to think about consistency
 

00:01:47.570 --> 00:01:50.359
it's good to think about consistency
it's great if you can you know have 60

00:01:50.359 --> 00:01:50.369
it's great if you can you know have 60
 

00:01:50.369 --> 00:01:52.069
it's great if you can you know have 60
frames per second most of the time but

00:01:52.069 --> 00:01:52.079
frames per second most of the time but
 

00:01:52.079 --> 00:01:54.499
frames per second most of the time but
then occasionally if you're dropping

00:01:54.499 --> 00:01:54.509
then occasionally if you're dropping
 

00:01:54.509 --> 00:01:57.109
then occasionally if you're dropping
several frames in a row that's not good

00:01:57.109 --> 00:01:57.119
several frames in a row that's not good
 

00:01:57.119 --> 00:01:58.670
several frames in a row that's not good
what you really want is consistent

00:01:58.670 --> 00:01:58.680
what you really want is consistent
 

00:01:58.680 --> 00:02:02.289
what you really want is consistent
behavior so chasing jank is all about

00:02:02.289 --> 00:02:02.299
behavior so chasing jank is all about
 

00:02:02.299 --> 00:02:04.969
behavior so chasing jank is all about
finding the places where you're dropping

00:02:04.969 --> 00:02:04.979
finding the places where you're dropping
 

00:02:04.979 --> 00:02:06.560
finding the places where you're dropping
those and making sure that you're fixing

00:02:06.560 --> 00:02:06.570
those and making sure that you're fixing
 

00:02:06.570 --> 00:02:08.089
those and making sure that you're fixing
the bottlenecks that are contributing to

00:02:08.089 --> 00:02:08.099
the bottlenecks that are contributing to
 

00:02:08.099 --> 00:02:12.260
the bottlenecks that are contributing to
those so let's talk about time let's

00:02:12.260 --> 00:02:12.270
those so let's talk about time let's
 

00:02:12.270 --> 00:02:13.430
those so let's talk about time let's
take a look at time

00:02:13.430 --> 00:02:13.440
take a look at time
 

00:02:13.440 --> 00:02:15.710
take a look at time
going forward from the left to the right

00:02:15.710 --> 00:02:15.720
going forward from the left to the right
 

00:02:15.720 --> 00:02:19.040
going forward from the left to the right
sorry from the left to the right and

00:02:19.040 --> 00:02:19.050
sorry from the left to the right and
 

00:02:19.050 --> 00:02:22.130
sorry from the left to the right and
take a look at what's happening in the

00:02:22.130 --> 00:02:22.140
take a look at what's happening in the
 

00:02:22.140 --> 00:02:24.260
take a look at what's happening in the
UI space so if you think about these

00:02:24.260 --> 00:02:24.270
UI space so if you think about these
 

00:02:24.270 --> 00:02:27.860
UI space so if you think about these
vertical refresh sinks you know on every

00:02:27.860 --> 00:02:27.870
vertical refresh sinks you know on every
 

00:02:27.870 --> 00:02:30.920
vertical refresh sinks you know on every
16 and 2/3 milliseconds typically on a

00:02:30.920 --> 00:02:30.930
16 and 2/3 milliseconds typically on a
 

00:02:30.930 --> 00:02:33.710
16 and 2/3 milliseconds typically on a
typical display we're getting a vsync

00:02:33.710 --> 00:02:33.720
typical display we're getting a vsync
 

00:02:33.720 --> 00:02:35.540
typical display we're getting a vsync
request right so this is the hardware

00:02:35.540 --> 00:02:35.550
request right so this is the hardware
 

00:02:35.550 --> 00:02:37.130
request right so this is the hardware
sort of posting the frame to the screen

00:02:37.130 --> 00:02:37.140
sort of posting the frame to the screen
 

00:02:37.140 --> 00:02:39.740
sort of posting the frame to the screen
that is when the user sees something so

00:02:39.740 --> 00:02:39.750
that is when the user sees something so
 

00:02:39.750 --> 00:02:42.530
that is when the user sees something so
divide that by 60 seconds divided by 60

00:02:42.530 --> 00:02:42.540
divide that by 60 seconds divided by 60
 

00:02:42.540 --> 00:02:44.600
divide that by 60 seconds divided by 60
16 point 2/3 I can go over the math

00:02:44.600 --> 00:02:44.610
16 point 2/3 I can go over the math
 

00:02:44.610 --> 00:02:48.320
16 point 2/3 I can go over the math
later if you need me to then if you map

00:02:48.320 --> 00:02:48.330
later if you need me to then if you map
 

00:02:48.330 --> 00:02:50.060
later if you need me to then if you map
frames on to that each of these frames

00:02:50.060 --> 00:02:50.070
frames on to that each of these frames
 

00:02:50.070 --> 00:02:52.160
frames on to that each of these frames
this is sort of these gray boxes are

00:02:52.160 --> 00:02:52.170
this is sort of these gray boxes are
 

00:02:52.170 --> 00:02:54.500
this is sort of these gray boxes are
what your application is doing in order

00:02:54.500 --> 00:02:54.510
what your application is doing in order
 

00:02:54.510 --> 00:02:56.780
what your application is doing in order
to post that information to the screen

00:02:56.780 --> 00:02:56.790
to post that information to the screen
 

00:02:56.790 --> 00:02:59.810
to post that information to the screen
right so ideally your frame would all

00:02:59.810 --> 00:02:59.820
right so ideally your frame would all
 

00:02:59.820 --> 00:03:01.580
right so ideally your frame would all
all of the stuff that needs to happen

00:03:01.580 --> 00:03:01.590
all of the stuff that needs to happen
 

00:03:01.590 --> 00:03:03.740
all of the stuff that needs to happen
for that frame would be within that 16

00:03:03.740 --> 00:03:03.750
for that frame would be within that 16
 

00:03:03.750 --> 00:03:05.870
for that frame would be within that 16
and 2/3 milliseconds I need to stop

00:03:05.870 --> 00:03:05.880
and 2/3 milliseconds I need to stop
 

00:03:05.880 --> 00:03:07.100
and 2/3 milliseconds I need to stop
saying that I'm going to say 16

00:03:07.100 --> 00:03:07.110
saying that I'm going to say 16
 

00:03:07.110 --> 00:03:08.990
saying that I'm going to say 16
milliseconds and you can interpret it

00:03:08.990 --> 00:03:09.000
milliseconds and you can interpret it
 

00:03:09.000 --> 00:03:12.170
milliseconds and you can interpret it
however you want so the beautiful icon

00:03:12.170 --> 00:03:12.180
however you want so the beautiful icon
 

00:03:12.180 --> 00:03:14.390
however you want so the beautiful icon
that I hand drew myself down at the

00:03:14.390 --> 00:03:14.400
that I hand drew myself down at the
 

00:03:14.400 --> 00:03:15.800
that I hand drew myself down at the
bottom of the screen that's the user

00:03:15.800 --> 00:03:15.810
bottom of the screen that's the user
 

00:03:15.810 --> 00:03:18.170
bottom of the screen that's the user
seeing things right so on each of those

00:03:18.170 --> 00:03:18.180
seeing things right so on each of those
 

00:03:18.180 --> 00:03:20.210
seeing things right so on each of those
vertical sync they are seeing whatever

00:03:20.210 --> 00:03:20.220
vertical sync they are seeing whatever
 

00:03:20.220 --> 00:03:22.430
vertical sync they are seeing whatever
the hardware buffer is posting to the

00:03:22.430 --> 00:03:22.440
the hardware buffer is posting to the
 

00:03:22.440 --> 00:03:24.290
the hardware buffer is posting to the
screen so they're going to see it you

00:03:24.290 --> 00:03:24.300
screen so they're going to see it you
 

00:03:24.300 --> 00:03:26.030
screen so they're going to see it you
know they're there they're there but if

00:03:26.030 --> 00:03:26.040
know they're there they're there but if
 

00:03:26.040 --> 00:03:27.620
know they're there they're there but if
there's a problem when you're rendering

00:03:27.620 --> 00:03:27.630
there's a problem when you're rendering
 

00:03:27.630 --> 00:03:29.210
there's a problem when you're rendering
if one of your frames takes too long

00:03:29.210 --> 00:03:29.220
if one of your frames takes too long
 

00:03:29.220 --> 00:03:31.460
if one of your frames takes too long
then the user is not going to see that

00:03:31.460 --> 00:03:31.470
then the user is not going to see that
 

00:03:31.470 --> 00:03:33.440
then the user is not going to see that
they're going to see exactly what they

00:03:33.440 --> 00:03:33.450
they're going to see exactly what they
 

00:03:33.450 --> 00:03:35.030
they're going to see exactly what they
saw in the previous frame because you

00:03:35.030 --> 00:03:35.040
saw in the previous frame because you
 

00:03:35.040 --> 00:03:36.800
saw in the previous frame because you
took too long in your application and

00:03:36.800 --> 00:03:36.810
took too long in your application and
 

00:03:36.810 --> 00:03:39.020
took too long in your application and
you skipped a frame so that's jank

00:03:39.020 --> 00:03:39.030
you skipped a frame so that's jank
 

00:03:39.030 --> 00:03:40.550
you skipped a frame so that's jank
that's the stutter that we need to try

00:03:40.550 --> 00:03:40.560
that's the stutter that we need to try
 

00:03:40.560 --> 00:03:43.130
that's the stutter that we need to try
to analyze and fix so let's take a

00:03:43.130 --> 00:03:43.140
to analyze and fix so let's take a
 

00:03:43.140 --> 00:03:44.810
to analyze and fix so let's take a
little step back and say okay how does

00:03:44.810 --> 00:03:44.820
little step back and say okay how does
 

00:03:44.820 --> 00:03:47.479
little step back and say okay how does
rendering actually happen in the UI

00:03:47.479 --> 00:03:47.489
rendering actually happen in the UI
 

00:03:47.489 --> 00:03:49.670
rendering actually happen in the UI
toolkit well there's the app perspective

00:03:49.670 --> 00:03:49.680
toolkit well there's the app perspective
 

00:03:49.680 --> 00:03:51.110
toolkit well there's the app perspective
so what's going on in your application

00:03:51.110 --> 00:03:51.120
so what's going on in your application
 

00:03:51.120 --> 00:03:52.670
so what's going on in your application
and then we'll take a look at what the

00:03:52.670 --> 00:03:52.680
and then we'll take a look at what the
 

00:03:52.680 --> 00:03:54.440
and then we'll take a look at what the
framework is actually doing on your

00:03:54.440 --> 00:03:54.450
framework is actually doing on your
 

00:03:54.450 --> 00:03:57.259
framework is actually doing on your
behalf so here's some simple code I keep

00:03:57.259 --> 00:03:57.269
behalf so here's some simple code I keep
 

00:03:57.269 --> 00:03:59.240
behalf so here's some simple code I keep
looking back and ok so you can see on

00:03:59.240 --> 00:03:59.250
looking back and ok so you can see on
 

00:03:59.250 --> 00:04:01.520
looking back and ok so you can see on
the screen back here here's some simple

00:04:01.520 --> 00:04:01.530
the screen back here here's some simple
 

00:04:01.530 --> 00:04:03.470
the screen back here here's some simple
codes we have this color things are

00:04:03.470 --> 00:04:03.480
codes we have this color things are
 

00:04:03.480 --> 00:04:04.880
codes we have this color things are
light gray right now and when the user

00:04:04.880 --> 00:04:04.890
light gray right now and when the user
 

00:04:04.890 --> 00:04:06.949
light gray right now and when the user
clicks in the middle of this custom view

00:04:06.949 --> 00:04:06.959
clicks in the middle of this custom view
 

00:04:06.959 --> 00:04:08.479
clicks in the middle of this custom view
are going to change the color we're

00:04:08.479 --> 00:04:08.489
are going to change the color we're
 

00:04:08.489 --> 00:04:09.650
are going to change the color we're
going to tell the view that it needs to

00:04:09.650 --> 00:04:09.660
going to tell the view that it needs to
 

00:04:09.660 --> 00:04:11.000
going to tell the view that it needs to
invalidate itself and then it's going to

00:04:11.000 --> 00:04:11.010
invalidate itself and then it's going to
 

00:04:11.010 --> 00:04:14.360
invalidate itself and then it's going to
redraw on it in the new color so user

00:04:14.360 --> 00:04:14.370
redraw on it in the new color so user
 

00:04:14.370 --> 00:04:18.020
redraw on it in the new color so user
clicks on the screen that signals that

00:04:18.020 --> 00:04:18.030
clicks on the screen that signals that
 

00:04:18.030 --> 00:04:20.030
clicks on the screen that signals that
sends an event into the on click method

00:04:20.030 --> 00:04:20.040
sends an event into the on click method
 

00:04:20.040 --> 00:04:22.250
sends an event into the on click method
we're going to change things around then

00:04:22.250 --> 00:04:22.260
we're going to change things around then
 

00:04:22.260 --> 00:04:23.960
we're going to change things around then
we're going to invalidate and then

00:04:23.960 --> 00:04:23.970
we're going to invalidate and then
 

00:04:23.970 --> 00:04:25.940
we're going to invalidate and then
invalidate is going to cause a later

00:04:25.940 --> 00:04:25.950
invalidate is going to cause a later
 

00:04:25.950 --> 00:04:26.629
invalidate is going to cause a later
call to

00:04:26.629 --> 00:04:26.639
call to
 

00:04:26.639 --> 00:04:28.760
call to
ondraw it's not a serial thing it

00:04:28.760 --> 00:04:28.770
ondraw it's not a serial thing it
 

00:04:28.770 --> 00:04:30.260
ondraw it's not a serial thing it
doesn't directly call ondraw but it

00:04:30.260 --> 00:04:30.270
doesn't directly call ondraw but it
 

00:04:30.270 --> 00:04:32.119
doesn't directly call ondraw but it
tells the system hey things need to be

00:04:32.119 --> 00:04:32.129
tells the system hey things need to be
 

00:04:32.129 --> 00:04:33.770
tells the system hey things need to be
redrawn and then a later call will

00:04:33.770 --> 00:04:33.780
redrawn and then a later call will
 

00:04:33.780 --> 00:04:35.629
redrawn and then a later call will
filter into the ondraw method and then

00:04:35.629 --> 00:04:35.639
filter into the ondraw method and then
 

00:04:35.639 --> 00:04:38.179
filter into the ondraw method and then
the ondraw will draw into the canvas and

00:04:38.179 --> 00:04:38.189
the ondraw will draw into the canvas and
 

00:04:38.189 --> 00:04:40.820
the ondraw will draw into the canvas and
that will eventually be posted to the

00:04:40.820 --> 00:04:40.830
that will eventually be posted to the
 

00:04:40.830 --> 00:04:42.589
that will eventually be posted to the
screen through all the operations that

00:04:42.589 --> 00:04:42.599
screen through all the operations that
 

00:04:42.599 --> 00:04:45.110
screen through all the operations that
the UI toolkit is doing on your behalf

00:04:45.110 --> 00:04:45.120
the UI toolkit is doing on your behalf
 

00:04:45.120 --> 00:04:47.689
the UI toolkit is doing on your behalf
so from the platform perspective what's

00:04:47.689 --> 00:04:47.699
so from the platform perspective what's
 

00:04:47.699 --> 00:04:49.369
so from the platform perspective what's
going on is several things in a row

00:04:49.369 --> 00:04:49.379
going on is several things in a row
 

00:04:49.379 --> 00:04:52.100
going on is several things in a row
first of all we on any given frame when

00:04:52.100 --> 00:04:52.110
first of all we on any given frame when
 

00:04:52.110 --> 00:04:54.170
first of all we on any given frame when
we get that vsync request we process

00:04:54.170 --> 00:04:54.180
we get that vsync request we process
 

00:04:54.180 --> 00:04:56.989
we get that vsync request we process
inputs so if the user is clicked if the

00:04:56.989 --> 00:04:56.999
inputs so if the user is clicked if the
 

00:04:56.999 --> 00:04:59.059
inputs so if the user is clicked if the
user is scrolling or flinging that's

00:04:59.059 --> 00:04:59.069
user is scrolling or flinging that's
 

00:04:59.069 --> 00:05:00.950
user is scrolling or flinging that's
where we get that information and do

00:05:00.950 --> 00:05:00.960
where we get that information and do
 

00:05:00.960 --> 00:05:02.659
where we get that information and do
something based on it if there's

00:05:02.659 --> 00:05:02.669
something based on it if there's
 

00:05:02.669 --> 00:05:04.610
something based on it if there's
animation if they had let go of that

00:05:04.610 --> 00:05:04.620
animation if they had let go of that
 

00:05:04.620 --> 00:05:06.379
animation if they had let go of that
scrolling list and it's now flinging and

00:05:06.379 --> 00:05:06.389
scrolling list and it's now flinging and
 

00:05:06.389 --> 00:05:08.179
scrolling list and it's now flinging and
just posting event so that it gets

00:05:08.179 --> 00:05:08.189
just posting event so that it gets
 

00:05:08.189 --> 00:05:10.969
just posting event so that it gets
updated as the list moves in space or as

00:05:10.969 --> 00:05:10.979
updated as the list moves in space or as
 

00:05:10.979 --> 00:05:12.559
updated as the list moves in space or as
views move around on the screen we

00:05:12.559 --> 00:05:12.569
views move around on the screen we
 

00:05:12.569 --> 00:05:14.839
views move around on the screen we
process those animation events we change

00:05:14.839 --> 00:05:14.849
process those animation events we change
 

00:05:14.849 --> 00:05:16.999
process those animation events we change
the properties that causes invalidation

00:05:16.999 --> 00:05:17.009
the properties that causes invalidation
 

00:05:17.009 --> 00:05:18.890
the properties that causes invalidation
so the thing is going to get redrawn

00:05:18.890 --> 00:05:18.900
so the thing is going to get redrawn
 

00:05:18.900 --> 00:05:21.379
so the thing is going to get redrawn
appropriately then if necessary we do

00:05:21.379 --> 00:05:21.389
appropriately then if necessary we do
 

00:05:21.389 --> 00:05:23.450
appropriately then if necessary we do
layout so something changed in your

00:05:23.450 --> 00:05:23.460
layout so something changed in your
 

00:05:23.460 --> 00:05:25.610
layout so something changed in your
application that changes things size or

00:05:25.610 --> 00:05:25.620
application that changes things size or
 

00:05:25.620 --> 00:05:27.739
application that changes things size or
location that's when we measure and

00:05:27.739 --> 00:05:27.749
location that's when we measure and
 

00:05:27.749 --> 00:05:29.239
location that's when we measure and
layout the things that need to be

00:05:29.239 --> 00:05:29.249
layout the things that need to be
 

00:05:29.249 --> 00:05:31.249
layout the things that need to be
changed again causing and validation and

00:05:31.249 --> 00:05:31.259
changed again causing and validation and
 

00:05:31.259 --> 00:05:34.670
changed again causing and validation and
redraws and then we actually do what we

00:05:34.670 --> 00:05:34.680
redraws and then we actually do what we
 

00:05:34.680 --> 00:05:37.219
redraws and then we actually do what we
call record draw so this is what we were

00:05:37.219 --> 00:05:37.229
call record draw so this is what we were
 

00:05:37.229 --> 00:05:38.749
call record draw so this is what we were
seeing on the previous slide in the

00:05:38.749 --> 00:05:38.759
seeing on the previous slide in the
 

00:05:38.759 --> 00:05:40.820
seeing on the previous slide in the
ondraw method this is where you turn

00:05:40.820 --> 00:05:40.830
ondraw method this is where you turn
 

00:05:40.830 --> 00:05:42.619
ondraw method this is where you turn
whatever you want to do into drawing

00:05:42.619 --> 00:05:42.629
whatever you want to do into drawing
 

00:05:42.629 --> 00:05:45.170
whatever you want to do into drawing
operations that we then receive and

00:05:45.170 --> 00:05:45.180
operations that we then receive and
 

00:05:45.180 --> 00:05:47.360
operations that we then receive and
store internally so you're going to say

00:05:47.360 --> 00:05:47.370
store internally so you're going to say
 

00:05:47.370 --> 00:05:49.369
store internally so you're going to say
well canvas you know draw this new color

00:05:49.369 --> 00:05:49.379
well canvas you know draw this new color
 

00:05:49.379 --> 00:05:51.950
well canvas you know draw this new color
so you're recording the commands that

00:05:51.950 --> 00:05:51.960
so you're recording the commands that
 

00:05:51.960 --> 00:05:54.740
so you're recording the commands that
should happen in order for us to then

00:05:54.740 --> 00:05:54.750
should happen in order for us to then
 

00:05:54.750 --> 00:05:56.450
should happen in order for us to then
draw the right thing under the hood and

00:05:56.450 --> 00:05:56.460
draw the right thing under the hood and
 

00:05:56.460 --> 00:05:59.059
draw the right thing under the hood and
then finally render and that's our stage

00:05:59.059 --> 00:05:59.069
then finally render and that's our stage
 

00:05:59.069 --> 00:06:01.070
then finally render and that's our stage
in this right so you do everything in

00:06:01.070 --> 00:06:01.080
in this right so you do everything in
 

00:06:01.080 --> 00:06:04.820
in this right so you do everything in
the first four steps in your code or for

00:06:04.820 --> 00:06:04.830
the first four steps in your code or for
 

00:06:04.830 --> 00:06:06.469
the first four steps in your code or for
standard views we're doing it and then

00:06:06.469 --> 00:06:06.479
standard views we're doing it and then
 

00:06:06.479 --> 00:06:07.700
standard views we're doing it and then
we handle the rendering and that's

00:06:07.700 --> 00:06:07.710
we handle the rendering and that's
 

00:06:07.710 --> 00:06:09.800
we handle the rendering and that's
basically the transformation of those

00:06:09.800 --> 00:06:09.810
basically the transformation of those
 

00:06:09.810 --> 00:06:12.139
basically the transformation of those
recorded draw calls into whatever we

00:06:12.139 --> 00:06:12.149
recorded draw calls into whatever we
 

00:06:12.149 --> 00:06:14.360
recorded draw calls into whatever we
need to do at the bottom layer I'll give

00:06:14.360 --> 00:06:14.370
need to do at the bottom layer I'll give
 

00:06:14.370 --> 00:06:16.820
need to do at the bottom layer I'll give
you a hint we turn it into OpenGL or GPU

00:06:16.820 --> 00:06:16.830
you a hint we turn it into OpenGL or GPU
 

00:06:16.830 --> 00:06:19.369
you a hint we turn it into OpenGL or GPU
commands that we then send to the GPU so

00:06:19.369 --> 00:06:19.379
commands that we then send to the GPU so
 

00:06:19.379 --> 00:06:21.230
commands that we then send to the GPU so
if we look at that in beautiful

00:06:21.230 --> 00:06:21.240
if we look at that in beautiful
 

00:06:21.240 --> 00:06:23.360
if we look at that in beautiful
brilliant colors which we're going to

00:06:23.360 --> 00:06:23.370
brilliant colors which we're going to
 

00:06:23.370 --> 00:06:25.639
brilliant colors which we're going to
use in some upcoming diagram we have

00:06:25.639 --> 00:06:25.649
use in some upcoming diagram we have
 

00:06:25.649 --> 00:06:28.490
use in some upcoming diagram we have
these five stages right so in any

00:06:28.490 --> 00:06:28.500
these five stages right so in any
 

00:06:28.500 --> 00:06:30.320
these five stages right so in any
particular frame the boring gray box

00:06:30.320 --> 00:06:30.330
particular frame the boring gray box
 

00:06:30.330 --> 00:06:32.990
particular frame the boring gray box
there it's actually broken down into

00:06:32.990 --> 00:06:33.000
there it's actually broken down into
 

00:06:33.000 --> 00:06:35.300
there it's actually broken down into
those different stages in our previous

00:06:35.300 --> 00:06:35.310
those different stages in our previous
 

00:06:35.310 --> 00:06:37.219
those different stages in our previous
example in that simple application code

00:06:37.219 --> 00:06:37.229
example in that simple application code
 

00:06:37.229 --> 00:06:39.139
example in that simple application code
we didn't have all of the stages because

00:06:39.139 --> 00:06:39.149
we didn't have all of the stages because
 

00:06:39.149 --> 00:06:39.640
we didn't have all of the stages because
there was

00:06:39.640 --> 00:06:39.650
there was
 

00:06:39.650 --> 00:06:41.230
there was
laya required all we were doing was

00:06:41.230 --> 00:06:41.240
laya required all we were doing was
 

00:06:41.240 --> 00:06:43.240
laya required all we were doing was
changing a color so we had the input of

00:06:43.240 --> 00:06:43.250
changing a color so we had the input of
 

00:06:43.250 --> 00:06:45.100
changing a color so we had the input of
the on click and then we had the record

00:06:45.100 --> 00:06:45.110
the on click and then we had the record
 

00:06:45.110 --> 00:06:47.890
the on click and then we had the record
draw of the canvas operation to draw in

00:06:47.890 --> 00:06:47.900
draw of the canvas operation to draw in
 

00:06:47.900 --> 00:06:49.480
draw of the canvas operation to draw in
the new color and then the rendering

00:06:49.480 --> 00:06:49.490
the new color and then the rendering
 

00:06:49.490 --> 00:06:51.189
the new color and then the rendering
operation that resulted from that and

00:06:51.189 --> 00:06:51.199
operation that resulted from that and
 

00:06:51.199 --> 00:06:53.650
operation that resulted from that and
it's typical yeah just like it says on

00:06:53.650 --> 00:06:53.660
it's typical yeah just like it says on
 

00:06:53.660 --> 00:06:58.330
it's typical yeah just like it says on
the slide in a typical application more

00:06:58.330 --> 00:06:58.340
the slide in a typical application more
 

00:06:58.340 --> 00:07:01.270
the slide in a typical application more
general frame then you're going to have

00:07:01.270 --> 00:07:01.280
general frame then you're going to have
 

00:07:01.280 --> 00:07:02.830
general frame then you're going to have
all of the steps in there so we may

00:07:02.830 --> 00:07:02.840
all of the steps in there so we may
 

00:07:02.840 --> 00:07:04.629
all of the steps in there so we may
process some input and some animation

00:07:04.629 --> 00:07:04.639
process some input and some animation
 

00:07:04.639 --> 00:07:06.969
process some input and some animation
and some layout and record and then

00:07:06.969 --> 00:07:06.979
and some layout and record and then
 

00:07:06.979 --> 00:07:08.469
and some layout and record and then
render and all of these things are

00:07:08.469 --> 00:07:08.479
render and all of these things are
 

00:07:08.479 --> 00:07:10.510
render and all of these things are
happening in a sequence right so this is

00:07:10.510 --> 00:07:10.520
happening in a sequence right so this is
 

00:07:10.520 --> 00:07:13.510
happening in a sequence right so this is
the order of operations in reality we

00:07:13.510 --> 00:07:13.520
the order of operations in reality we
 

00:07:13.520 --> 00:07:15.460
the order of operations in reality we
actually have two threads kicking in as

00:07:15.460 --> 00:07:15.470
actually have two threads kicking in as
 

00:07:15.470 --> 00:07:17.010
actually have two threads kicking in as
a lollipop

00:07:17.010 --> 00:07:17.020
a lollipop
 

00:07:17.020 --> 00:07:19.450
a lollipop
where we came out with a render thread

00:07:19.450 --> 00:07:19.460
where we came out with a render thread
 

00:07:19.460 --> 00:07:20.920
where we came out with a render thread
technology which we've talked about

00:07:20.920 --> 00:07:20.930
technology which we've talked about
 

00:07:20.930 --> 00:07:23.800
technology which we've talked about
before where we process all of the the

00:07:23.800 --> 00:07:23.810
before where we process all of the the
 

00:07:23.810 --> 00:07:25.810
before where we process all of the the
application space stuff going on those

00:07:25.810 --> 00:07:25.820
application space stuff going on those
 

00:07:25.820 --> 00:07:27.820
application space stuff going on those
first four steps in the application

00:07:27.820 --> 00:07:27.830
first four steps in the application
 

00:07:27.830 --> 00:07:30.189
first four steps in the application
space are on the UI thread and then we

00:07:30.189 --> 00:07:30.199
space are on the UI thread and then we
 

00:07:30.199 --> 00:07:31.270
space are on the UI thread and then we
have this separate thread that's

00:07:31.270 --> 00:07:31.280
have this separate thread that's
 

00:07:31.280 --> 00:07:32.920
have this separate thread that's
actually handling the rendering they

00:07:32.920 --> 00:07:32.930
actually handling the rendering they
 

00:07:32.930 --> 00:07:35.230
actually handling the rendering they
still happen in series in sequence

00:07:35.230 --> 00:07:35.240
still happen in series in sequence
 

00:07:35.240 --> 00:07:37.000
still happen in series in sequence
because the render thread doesn't know

00:07:37.000 --> 00:07:37.010
because the render thread doesn't know
 

00:07:37.010 --> 00:07:39.340
because the render thread doesn't know
what to render until you tell it but the

00:07:39.340 --> 00:07:39.350
what to render until you tell it but the
 

00:07:39.350 --> 00:07:41.850
what to render until you tell it but the
render thread can also do other stuff

00:07:41.850 --> 00:07:41.860
render thread can also do other stuff
 

00:07:41.860 --> 00:07:44.200
render thread can also do other stuff
asynchronously from the UI thread so we

00:07:44.200 --> 00:07:44.210
asynchronously from the UI thread so we
 

00:07:44.210 --> 00:07:45.790
asynchronously from the UI thread so we
can send over some of the atomic

00:07:45.790 --> 00:07:45.800
can send over some of the atomic
 

00:07:45.800 --> 00:07:47.440
can send over some of the atomic
animations that it can process in the

00:07:47.440 --> 00:07:47.450
animations that it can process in the
 

00:07:47.450 --> 00:07:49.390
animations that it can process in the
meantime but in general you do all this

00:07:49.390 --> 00:07:49.400
meantime but in general you do all this
 

00:07:49.400 --> 00:07:51.339
meantime but in general you do all this
stuff on the UI thread and then we think

00:07:51.339 --> 00:07:51.349
stuff on the UI thread and then we think
 

00:07:51.349 --> 00:07:52.719
stuff on the UI thread and then we think
that information to the render thread

00:07:52.719 --> 00:07:52.729
that information to the render thread
 

00:07:52.729 --> 00:07:54.339
that information to the render thread
and then the render said on that

00:07:54.339 --> 00:07:54.349
and then the render said on that
 

00:07:54.349 --> 00:07:56.320
and then the render said on that
separate thread will handle talking to

00:07:56.320 --> 00:07:56.330
separate thread will handle talking to
 

00:07:56.330 --> 00:07:59.770
separate thread will handle talking to
the GPU so in a well-behaved application

00:07:59.770 --> 00:07:59.780
the GPU so in a well-behaved application
 

00:07:59.780 --> 00:08:01.420
the GPU so in a well-behaved application
in a typical let's say this is a

00:08:01.420 --> 00:08:01.430
in a typical let's say this is a
 

00:08:01.430 --> 00:08:04.360
in a typical let's say this is a
scrolling or a flinging situation and

00:08:04.360 --> 00:08:04.370
scrolling or a flinging situation and
 

00:08:04.370 --> 00:08:05.920
scrolling or a flinging situation and
things are well-behaved in the

00:08:05.920 --> 00:08:05.930
things are well-behaved in the
 

00:08:05.930 --> 00:08:08.020
things are well-behaved in the
application Yin you draw relatively

00:08:08.020 --> 00:08:08.030
application Yin you draw relatively
 

00:08:08.030 --> 00:08:09.310
application Yin you draw relatively
quickly this is what things look like

00:08:09.310 --> 00:08:09.320
quickly this is what things look like
 

00:08:09.320 --> 00:08:11.439
quickly this is what things look like
again the beautiful eye icon at the

00:08:11.439 --> 00:08:11.449
again the beautiful eye icon at the
 

00:08:11.449 --> 00:08:13.270
again the beautiful eye icon at the
bottom the user sees the frames happen

00:08:13.270 --> 00:08:13.280
bottom the user sees the frames happen
 

00:08:13.280 --> 00:08:15.370
bottom the user sees the frames happen
bam bam bam bam everything's happening

00:08:15.370 --> 00:08:15.380
bam bam bam bam everything's happening
 

00:08:15.380 --> 00:08:18.339
bam bam bam bam everything's happening
within the 16 millisecond barrier but in

00:08:18.339 --> 00:08:18.349
within the 16 millisecond barrier but in
 

00:08:18.349 --> 00:08:20.620
within the 16 millisecond barrier but in
a typical janky situation all of a

00:08:20.620 --> 00:08:20.630
a typical janky situation all of a
 

00:08:20.630 --> 00:08:22.839
a typical janky situation all of a
sudden something took longer right so

00:08:22.839 --> 00:08:22.849
sudden something took longer right so
 

00:08:22.849 --> 00:08:25.180
sudden something took longer right so
here we see that the input command took

00:08:25.180 --> 00:08:25.190
here we see that the input command took
 

00:08:25.190 --> 00:08:26.950
here we see that the input command took
a lot longer so maybe when the user

00:08:26.950 --> 00:08:26.960
a lot longer so maybe when the user
 

00:08:26.960 --> 00:08:29.529
a lot longer so maybe when the user
clicked some expensive operation was

00:08:29.529 --> 00:08:29.539
clicked some expensive operation was
 

00:08:29.539 --> 00:08:31.270
clicked some expensive operation was
performed somebody made a web service

00:08:31.270 --> 00:08:31.280
performed somebody made a web service
 

00:08:31.280 --> 00:08:34.180
performed somebody made a web service
call or more typically you created or

00:08:34.180 --> 00:08:34.190
call or more typically you created or
 

00:08:34.190 --> 00:08:35.949
call or more typically you created or
you bound to view you did some expensive

00:08:35.949 --> 00:08:35.959
you bound to view you did some expensive
 

00:08:35.959 --> 00:08:38.079
you bound to view you did some expensive
operation that caused us to do a lot of

00:08:38.079 --> 00:08:38.089
operation that caused us to do a lot of
 

00:08:38.089 --> 00:08:40.180
operation that caused us to do a lot of
work pushed out the length of time that

00:08:40.180 --> 00:08:40.190
work pushed out the length of time that
 

00:08:40.190 --> 00:08:41.500
work pushed out the length of time that
you're spending doing all of that

00:08:41.500 --> 00:08:41.510
you're spending doing all of that
 

00:08:41.510 --> 00:08:43.899
you're spending doing all of that
recording of draw operations and then

00:08:43.899 --> 00:08:43.909
recording of draw operations and then
 

00:08:43.909 --> 00:08:45.970
recording of draw operations and then
the rendering operation necessarily

00:08:45.970 --> 00:08:45.980
the rendering operation necessarily
 

00:08:45.980 --> 00:08:48.160
the rendering operation necessarily
slipped into the next frame and the user

00:08:48.160 --> 00:08:48.170
slipped into the next frame and the user
 

00:08:48.170 --> 00:08:50.079
slipped into the next frame and the user
missed seeing that input because it

00:08:50.079 --> 00:08:50.089
missed seeing that input because it
 

00:08:50.089 --> 00:08:51.880
missed seeing that input because it
didn't hit the barrier so that's the

00:08:51.880 --> 00:08:51.890
didn't hit the barrier so that's the
 

00:08:51.890 --> 00:08:52.450
didn't hit the barrier so that's the
jank

00:08:52.450 --> 00:08:52.460
jank
 

00:08:52.460 --> 00:08:56.230
jank
and that we want to fix alright so let's

00:08:56.230 --> 00:08:56.240
and that we want to fix alright so let's
 

00:08:56.240 --> 00:08:58.720
and that we want to fix alright so let's
move over to talking about what do you

00:08:58.720 --> 00:08:58.730
move over to talking about what do you
 

00:08:58.730 --> 00:09:00.490
move over to talking about what do you
do you have problems in the application

00:09:00.490 --> 00:09:00.500
do you have problems in the application
 

00:09:00.500 --> 00:09:03.850
do you have problems in the application
you see now as Jen is described what can

00:09:03.850 --> 00:09:03.860
you see now as Jen is described what can
 

00:09:03.860 --> 00:09:06.190
you see now as Jen is described what can
happen when a frame takes too long let's

00:09:06.190 --> 00:09:06.200
happen when a frame takes too long let's
 

00:09:06.200 --> 00:09:07.720
happen when a frame takes too long let's
talk about the process that we call D

00:09:07.720 --> 00:09:07.730
talk about the process that we call D
 

00:09:07.730 --> 00:09:08.980
talk about the process that we call D
janking stepping through your

00:09:08.980 --> 00:09:08.990
janking stepping through your
 

00:09:08.990 --> 00:09:11.470
janking stepping through your
application and finding and fixing these

00:09:11.470 --> 00:09:11.480
application and finding and fixing these
 

00:09:11.480 --> 00:09:13.840
application and finding and fixing these
problems so the first step in dj''q in

00:09:13.840 --> 00:09:13.850
problems so the first step in dj''q in
 

00:09:13.850 --> 00:09:15.610
problems so the first step in dj''q in
your application is to run a release ish

00:09:15.610 --> 00:09:15.620
your application is to run a release ish
 

00:09:15.620 --> 00:09:18.310
your application is to run a release ish
build and so what I mean by that is make

00:09:18.310 --> 00:09:18.320
build and so what I mean by that is make
 

00:09:18.320 --> 00:09:19.360
build and so what I mean by that is make
sure that you're running with debugging

00:09:19.360 --> 00:09:19.370
sure that you're running with debugging
 

00:09:19.370 --> 00:09:21.430
sure that you're running with debugging
off if you're running with debugging on

00:09:21.430 --> 00:09:21.440
off if you're running with debugging on
 

00:09:21.440 --> 00:09:23.080
off if you're running with debugging on
art has to add in a bunch of different

00:09:23.080 --> 00:09:23.090
art has to add in a bunch of different
 

00:09:23.090 --> 00:09:25.660
art has to add in a bunch of different
checks and verification steps they can

00:09:25.660 --> 00:09:25.670
checks and verification steps they can
 

00:09:25.670 --> 00:09:27.460
checks and verification steps they can
add a little bit of time and skew your

00:09:27.460 --> 00:09:27.470
add a little bit of time and skew your
 

00:09:27.470 --> 00:09:28.990
add a little bit of time and skew your
results a little bit so we recommend

00:09:28.990 --> 00:09:29.000
results a little bit so we recommend
 

00:09:29.000 --> 00:09:31.930
results a little bit so we recommend
over writing that or testing an actual

00:09:31.930 --> 00:09:31.940
over writing that or testing an actual
 

00:09:31.940 --> 00:09:34.870
over writing that or testing an actual
release build so the second step is to

00:09:34.870 --> 00:09:34.880
release build so the second step is to
 

00:09:34.880 --> 00:09:36.880
release build so the second step is to
inspect your app visually as you're

00:09:36.880 --> 00:09:36.890
inspect your app visually as you're
 

00:09:36.890 --> 00:09:38.470
inspect your app visually as you're
scrolling through lists if you see any

00:09:38.470 --> 00:09:38.480
scrolling through lists if you see any
 

00:09:38.480 --> 00:09:40.840
scrolling through lists if you see any
jank occurring just visually detecting

00:09:40.840 --> 00:09:40.850
jank occurring just visually detecting
 

00:09:40.850 --> 00:09:42.670
jank occurring just visually detecting
that if you see an animation you know

00:09:42.670 --> 00:09:42.680
that if you see an animation you know
 

00:09:42.680 --> 00:09:44.500
that if you see an animation you know
definitely start with the most key

00:09:44.500 --> 00:09:44.510
definitely start with the most key
 

00:09:44.510 --> 00:09:46.180
definitely start with the most key
important parts of your app lots you

00:09:46.180 --> 00:09:46.190
important parts of your app lots you
 

00:09:46.190 --> 00:09:49.090
important parts of your app lots you
guys have a primary scrolling list great

00:09:49.090 --> 00:09:49.100
guys have a primary scrolling list great
 

00:09:49.100 --> 00:09:49.900
guys have a primary scrolling list great
place to start

00:09:49.900 --> 00:09:49.910
place to start
 

00:09:49.910 --> 00:09:51.190
place to start
if you happen to be one of the kind of

00:09:51.190 --> 00:09:51.200
if you happen to be one of the kind of
 

00:09:51.200 --> 00:09:53.500
if you happen to be one of the kind of
people that can't see Jake if you just

00:09:53.500 --> 00:09:53.510
people that can't see Jake if you just
 

00:09:53.510 --> 00:09:56.650
people that can't see Jake if you just
see oh well it looks fine to me

00:09:56.650 --> 00:09:56.660
see oh well it looks fine to me
 

00:09:56.660 --> 00:09:58.570
see oh well it looks fine to me
you can turn on profile GPU rendering

00:09:58.570 --> 00:09:58.580
you can turn on profile GPU rendering
 

00:09:58.580 --> 00:10:00.790
you can turn on profile GPU rendering
and that gives you all these bars at the

00:10:00.790 --> 00:10:00.800
and that gives you all these bars at the
 

00:10:00.800 --> 00:10:03.670
and that gives you all these bars at the
bottom which will tell you when you pass

00:10:03.670 --> 00:10:03.680
bottom which will tell you when you pass
 

00:10:03.680 --> 00:10:05.200
bottom which will tell you when you pass
that particular threshold and give you a

00:10:05.200 --> 00:10:05.210
that particular threshold and give you a
 

00:10:05.210 --> 00:10:07.030
that particular threshold and give you a
little hint as to what might be

00:10:07.030 --> 00:10:07.040
little hint as to what might be
 

00:10:07.040 --> 00:10:10.150
little hint as to what might be
happening based upon the color and

00:10:10.150 --> 00:10:10.160
happening based upon the color and
 

00:10:10.160 --> 00:10:11.560
happening based upon the color and
there's some documentation about that

00:10:11.560 --> 00:10:11.570
there's some documentation about that
 

00:10:11.570 --> 00:10:14.290
there's some documentation about that
online but the real next step after that

00:10:14.290 --> 00:10:14.300
online but the real next step after that
 

00:10:14.300 --> 00:10:16.120
online but the real next step after that
you've seen some jank you see oh yes

00:10:16.120 --> 00:10:16.130
you've seen some jank you see oh yes
 

00:10:16.130 --> 00:10:18.400
you've seen some jank you see oh yes
when these items come on screen or the

00:10:18.400 --> 00:10:18.410
when these items come on screen or the
 

00:10:18.410 --> 00:10:20.350
when these items come on screen or the
first time that I load this particular

00:10:20.350 --> 00:10:20.360
first time that I load this particular
 

00:10:20.360 --> 00:10:21.940
first time that I load this particular
part of the UI you figure out what the

00:10:21.940 --> 00:10:21.950
part of the UI you figure out what the
 

00:10:21.950 --> 00:10:24.220
part of the UI you figure out what the
interaction is you say okay what do I do

00:10:24.220 --> 00:10:24.230
interaction is you say okay what do I do
 

00:10:24.230 --> 00:10:25.960
interaction is you say okay what do I do
next well the next step is generally

00:10:25.960 --> 00:10:25.970
next well the next step is generally
 

00:10:25.970 --> 00:10:28.300
next well the next step is generally
systrace this trace is a tool that

00:10:28.300 --> 00:10:28.310
systrace this trace is a tool that
 

00:10:28.310 --> 00:10:31.840
systrace this trace is a tool that
exists in the sdk in the platform tools

00:10:31.840 --> 00:10:31.850
exists in the sdk in the platform tools
 

00:10:31.850 --> 00:10:33.550
exists in the sdk in the platform tools
directory you can also get it off of

00:10:33.550 --> 00:10:33.560
directory you can also get it off of
 

00:10:33.560 --> 00:10:35.470
directory you can also get it off of
github if you want the absolute freshest

00:10:35.470 --> 00:10:35.480
github if you want the absolute freshest
 

00:10:35.480 --> 00:10:41.800
github if you want the absolute freshest
version and so from here we're going to

00:10:41.800 --> 00:10:41.810
version and so from here we're going to
 

00:10:41.810 --> 00:10:44.290
version and so from here we're going to
we're going to do a very quick live look

00:10:44.290 --> 00:10:44.300
we're going to do a very quick live look
 

00:10:44.300 --> 00:10:46.480
we're going to do a very quick live look
through what is this trace actually

00:10:46.480 --> 00:10:46.490
through what is this trace actually
 

00:10:46.490 --> 00:10:48.340
through what is this trace actually
looks like so this is what you might see

00:10:48.340 --> 00:10:48.350
looks like so this is what you might see
 

00:10:48.350 --> 00:10:50.080
looks like so this is what you might see
when you pull up assist rates for the

00:10:50.080 --> 00:10:50.090
when you pull up assist rates for the
 

00:10:50.090 --> 00:10:52.150
when you pull up assist rates for the
first time so in this particular example

00:10:52.150 --> 00:10:52.160
first time so in this particular example
 

00:10:52.160 --> 00:10:53.980
first time so in this particular example
I was scrolling through a recycler view

00:10:53.980 --> 00:10:53.990
I was scrolling through a recycler view
 

00:10:53.990 --> 00:10:55.960
I was scrolling through a recycler view
in my app and I saw oh there's some

00:10:55.960 --> 00:10:55.970
in my app and I saw oh there's some
 

00:10:55.970 --> 00:10:57.580
in my app and I saw oh there's some
janky frames I can see some visual

00:10:57.580 --> 00:10:57.590
janky frames I can see some visual
 

00:10:57.590 --> 00:11:00.160
janky frames I can see some visual
stuttering and so I captured this this

00:11:00.160 --> 00:11:00.170
stuttering and so I captured this this
 

00:11:00.170 --> 00:11:02.810
stuttering and so I captured this this
trace over the duration of that time

00:11:02.810 --> 00:11:02.820
trace over the duration of that time
 

00:11:02.820 --> 00:11:05.570
trace over the duration of that time
and now a pull-up assist race and oh my

00:11:05.570 --> 00:11:05.580
and now a pull-up assist race and oh my
 

00:11:05.580 --> 00:11:07.670
and now a pull-up assist race and oh my
goodness there is a lot of information

00:11:07.670 --> 00:11:07.680
goodness there is a lot of information
 

00:11:07.680 --> 00:11:09.050
goodness there is a lot of information
here there is a lot of noise it is

00:11:09.050 --> 00:11:09.060
here there is a lot of noise it is
 

00:11:09.060 --> 00:11:10.640
here there is a lot of noise it is
really hard to see what should I be

00:11:10.640 --> 00:11:10.650
really hard to see what should I be
 

00:11:10.650 --> 00:11:13.190
really hard to see what should I be
looking at so first and foremost what

00:11:13.190 --> 00:11:13.200
looking at so first and foremost what
 

00:11:13.200 --> 00:11:15.200
looking at so first and foremost what
you can do is you can look here on the

00:11:15.200 --> 00:11:15.210
you can do is you can look here on the
 

00:11:15.210 --> 00:11:17.540
you can do is you can look here on the
left you can see okay well there is

00:11:17.540 --> 00:11:17.550
left you can see okay well there is
 

00:11:17.550 --> 00:11:19.340
left you can see okay well there is
kernels there's potentially other

00:11:19.340 --> 00:11:19.350
kernels there's potentially other
 

00:11:19.350 --> 00:11:20.660
kernels there's potentially other
processes you know what I'm going to do

00:11:20.660 --> 00:11:20.670
processes you know what I'm going to do
 

00:11:20.670 --> 00:11:22.010
processes you know what I'm going to do
I'm going to ignore everybody else for

00:11:22.010 --> 00:11:22.020
I'm going to ignore everybody else for
 

00:11:22.020 --> 00:11:23.960
I'm going to ignore everybody else for
now and I'm going to scroll down until

00:11:23.960 --> 00:11:23.970
now and I'm going to scroll down until
 

00:11:23.970 --> 00:11:26.600
now and I'm going to scroll down until
the top process the only thing that I

00:11:26.600 --> 00:11:26.610
the top process the only thing that I
 

00:11:26.610 --> 00:11:28.580
the top process the only thing that I
can see right now is my package Android

00:11:28.580 --> 00:11:28.590
can see right now is my package Android
 

00:11:28.590 --> 00:11:31.640
can see right now is my package Android
jank town and in fact you can even go

00:11:31.640 --> 00:11:31.650
jank town and in fact you can even go
 

00:11:31.650 --> 00:11:33.170
jank town and in fact you can even go
further than that you can you can look

00:11:33.170 --> 00:11:33.180
further than that you can you can look
 

00:11:33.180 --> 00:11:34.970
further than that you can you can look
on the left here this tells you in fact

00:11:34.970 --> 00:11:34.980
on the left here this tells you in fact
 

00:11:34.980 --> 00:11:36.890
on the left here this tells you in fact
individual threads that we care about

00:11:36.890 --> 00:11:36.900
individual threads that we care about
 

00:11:36.900 --> 00:11:38.390
individual threads that we care about
and this chat was talking about there

00:11:38.390 --> 00:11:38.400
and this chat was talking about there
 

00:11:38.400 --> 00:11:39.890
and this chat was talking about there
are two threads that matter here there's

00:11:39.890 --> 00:11:39.900
are two threads that matter here there's
 

00:11:39.900 --> 00:11:41.990
are two threads that matter here there's
the UI thread of my app and the render

00:11:41.990 --> 00:11:42.000
the UI thread of my app and the render
 

00:11:42.000 --> 00:11:43.280
the UI thread of my app and the render
thread so I'm going to scroll down

00:11:43.280 --> 00:11:43.290
thread so I'm going to scroll down
 

00:11:43.290 --> 00:11:45.620
thread so I'm going to scroll down
further until all that I can see at the

00:11:45.620 --> 00:11:45.630
further until all that I can see at the
 

00:11:45.630 --> 00:11:47.300
further until all that I can see at the
very top of the screen is mostly that

00:11:47.300 --> 00:11:47.310
very top of the screen is mostly that
 

00:11:47.310 --> 00:11:49.490
very top of the screen is mostly that
and so from a very high level even just

00:11:49.490 --> 00:11:49.500
and so from a very high level even just
 

00:11:49.500 --> 00:11:50.840
and so from a very high level even just
looking at this trace without knowing

00:11:50.840 --> 00:11:50.850
looking at this trace without knowing
 

00:11:50.850 --> 00:11:53.180
looking at this trace without knowing
much about it I can say okay the the

00:11:53.180 --> 00:11:53.190
much about it I can say okay the the
 

00:11:53.190 --> 00:11:55.430
much about it I can say okay the the
time in this trace goes from left to

00:11:55.430 --> 00:11:55.440
time in this trace goes from left to
 

00:11:55.440 --> 00:11:58.880
time in this trace goes from left to
right on the leftmost we have 0 seconds

00:11:58.880 --> 00:11:58.890
right on the leftmost we have 0 seconds
 

00:11:58.890 --> 00:12:00.050
right on the leftmost we have 0 seconds
going all the way further and if you

00:12:00.050 --> 00:12:00.060
going all the way further and if you
 

00:12:00.060 --> 00:12:01.730
going all the way further and if you
can't see the specific details don't

00:12:01.730 --> 00:12:01.740
can't see the specific details don't
 

00:12:01.740 --> 00:12:03.830
can't see the specific details don't
worry about it we'll go into some zoomed

00:12:03.830 --> 00:12:03.840
worry about it we'll go into some zoomed
 

00:12:03.840 --> 00:12:06.680
worry about it we'll go into some zoomed
in screenshots later but even from this

00:12:06.680 --> 00:12:06.690
in screenshots later but even from this
 

00:12:06.690 --> 00:12:08.300
in screenshots later but even from this
very high level view I can say oh well

00:12:08.300 --> 00:12:08.310
very high level view I can say oh well
 

00:12:08.310 --> 00:12:09.950
very high level view I can say oh well
I've got a lot of tiny little slivers

00:12:09.950 --> 00:12:09.960
I've got a lot of tiny little slivers
 

00:12:09.960 --> 00:12:11.600
I've got a lot of tiny little slivers
here these little pulses these are

00:12:11.600 --> 00:12:11.610
here these little pulses these are
 

00:12:11.610 --> 00:12:14.060
here these little pulses these are
frames ok great most of that looks

00:12:14.060 --> 00:12:14.070
frames ok great most of that looks
 

00:12:14.070 --> 00:12:15.710
frames ok great most of that looks
incredibly consistent looks really

00:12:15.710 --> 00:12:15.720
incredibly consistent looks really
 

00:12:15.720 --> 00:12:18.410
incredibly consistent looks really
smooth and it looks to be repeating

00:12:18.410 --> 00:12:18.420
smooth and it looks to be repeating
 

00:12:18.420 --> 00:12:20.510
smooth and it looks to be repeating
regularly however there are some big

00:12:20.510 --> 00:12:20.520
regularly however there are some big
 

00:12:20.520 --> 00:12:22.730
regularly however there are some big
visual standouts here and this is very

00:12:22.730 --> 00:12:22.740
visual standouts here and this is very
 

00:12:22.740 --> 00:12:24.980
visual standouts here and this is very
often what the janking is is looking for

00:12:24.980 --> 00:12:24.990
often what the janking is is looking for
 

00:12:24.990 --> 00:12:26.930
often what the janking is is looking for
these particular stands out frames and

00:12:26.930 --> 00:12:26.940
these particular stands out frames and
 

00:12:26.940 --> 00:12:33.680
these particular stands out frames and
investigating so if i zoom in here I can

00:12:33.680 --> 00:12:33.690
investigating so if i zoom in here I can
 

00:12:33.690 --> 00:12:35.120
investigating so if i zoom in here I can
start looking at exactly what's going

00:12:35.120 --> 00:12:35.130
start looking at exactly what's going
 

00:12:35.130 --> 00:12:38.210
start looking at exactly what's going
wrong in these frames and I can start

00:12:38.210 --> 00:12:38.220
wrong in these frames and I can start
 

00:12:38.220 --> 00:12:39.650
wrong in these frames and I can start
clicking around figuring out exactly

00:12:39.650 --> 00:12:39.660
clicking around figuring out exactly
 

00:12:39.660 --> 00:12:41.210
clicking around figuring out exactly
what the problem is and just so that you

00:12:41.210 --> 00:12:41.220
what the problem is and just so that you
 

00:12:41.220 --> 00:12:42.080
what the problem is and just so that you
can see that we're going to switch back

00:12:42.080 --> 00:12:42.090
can see that we're going to switch back
 

00:12:42.090 --> 00:12:45.350
can see that we're going to switch back
to slides and show you the screenshots

00:12:45.350 --> 00:12:45.360
to slides and show you the screenshots
 

00:12:45.360 --> 00:12:51.620
to slides and show you the screenshots
in particular so this is one of the

00:12:51.620 --> 00:12:51.630
in particular so this is one of the
 

00:12:51.630 --> 00:12:53.510
in particular so this is one of the
simple frames zoomed in pretty

00:12:53.510 --> 00:12:53.520
simple frames zoomed in pretty
 

00:12:53.520 --> 00:12:54.260
simple frames zoomed in pretty
significantly

00:12:54.260 --> 00:12:54.270
significantly
 

00:12:54.270 --> 00:12:57.560
significantly
that we saw earlier as those very

00:12:57.560 --> 00:12:57.570
that we saw earlier as those very
 

00:12:57.570 --> 00:12:59.720
that we saw earlier as those very
frequent and very regular pulses now

00:12:59.720 --> 00:12:59.730
frequent and very regular pulses now
 

00:12:59.730 --> 00:13:01.490
frequent and very regular pulses now
these were very nice they look like tiny

00:13:01.490 --> 00:13:01.500
these were very nice they look like tiny
 

00:13:01.500 --> 00:13:02.900
these were very nice they look like tiny
little slivers before but let's go ahead

00:13:02.900 --> 00:13:02.910
little slivers before but let's go ahead
 

00:13:02.910 --> 00:13:04.250
little slivers before but let's go ahead
and look at them to see what a baseline

00:13:04.250 --> 00:13:04.260
and look at them to see what a baseline
 

00:13:04.260 --> 00:13:07.400
and look at them to see what a baseline
is um so first of all one of the one of

00:13:07.400 --> 00:13:07.410
is um so first of all one of the one of
 

00:13:07.410 --> 00:13:08.840
is um so first of all one of the one of
the tricky things about systrace is

00:13:08.840 --> 00:13:08.850
the tricky things about systrace is
 

00:13:08.850 --> 00:13:10.460
the tricky things about systrace is
there's a lot of data here there's a lot

00:13:10.460 --> 00:13:10.470
there's a lot of data here there's a lot
 

00:13:10.470 --> 00:13:12.290
there's a lot of data here there's a lot
of things to click on but one of the

00:13:12.290 --> 00:13:12.300
of things to click on but one of the
 

00:13:12.300 --> 00:13:13.580
of things to click on but one of the
nice features is that

00:13:13.580 --> 00:13:13.590
nice features is that
 

00:13:13.590 --> 00:13:16.130
nice features is that
to these UI thread components click on

00:13:16.130 --> 00:13:16.140
to these UI thread components click on
 

00:13:16.140 --> 00:13:17.750
to these UI thread components click on
it since streets will do its best to try

00:13:17.750 --> 00:13:17.760
it since streets will do its best to try
 

00:13:17.760 --> 00:13:19.250
it since streets will do its best to try
and explain it to you so if you click on

00:13:19.250 --> 00:13:19.260
and explain it to you so if you click on
 

00:13:19.260 --> 00:13:21.110
and explain it to you so if you click on
this particular top of the UI thread

00:13:21.110 --> 00:13:21.120
this particular top of the UI thread
 

00:13:21.120 --> 00:13:23.450
this particular top of the UI thread
which means this is the topmost trace

00:13:23.450 --> 00:13:23.460
which means this is the topmost trace
 

00:13:23.460 --> 00:13:25.670
which means this is the topmost trace
section this is the biggest chunk that

00:13:25.670 --> 00:13:25.680
section this is the biggest chunk that
 

00:13:25.680 --> 00:13:28.730
section this is the biggest chunk that
represents the UI thread work if you

00:13:28.730 --> 00:13:28.740
represents the UI thread work if you
 

00:13:28.740 --> 00:13:30.080
represents the UI thread work if you
click on that at the bottom of the

00:13:30.080 --> 00:13:30.090
click on that at the bottom of the
 

00:13:30.090 --> 00:13:32.750
click on that at the bottom of the
systrace UI it'll say oh okay well this

00:13:32.750 --> 00:13:32.760
systrace UI it'll say oh okay well this
 

00:13:32.760 --> 00:13:34.580
systrace UI it'll say oh okay well this
is what choreographer is and in fact

00:13:34.580 --> 00:13:34.590
is what choreographer is and in fact
 

00:13:34.590 --> 00:13:36.470
is what choreographer is and in fact
here it'll even link you to the and the

00:13:36.470 --> 00:13:36.480
here it'll even link you to the and the
 

00:13:36.480 --> 00:13:39.230
here it'll even link you to the and the
documentation where it describes on D on

00:13:39.230 --> 00:13:39.240
documentation where it describes on D on
 

00:13:39.240 --> 00:13:42.550
documentation where it describes on D on
Android comm how choreographer works

00:13:42.550 --> 00:13:42.560
Android comm how choreographer works
 

00:13:42.560 --> 00:13:45.410
Android comm how choreographer works
similarly if I want to look down at draw

00:13:45.410 --> 00:13:45.420
similarly if I want to look down at draw
 

00:13:45.420 --> 00:13:48.200
similarly if I want to look down at draw
frame that's the render thread component

00:13:48.200 --> 00:13:48.210
frame that's the render thread component
 

00:13:48.210 --> 00:13:50.720
frame that's the render thread component
of the of the frame and if I click on it

00:13:50.720 --> 00:13:50.730
of the of the frame and if I click on it
 

00:13:50.730 --> 00:13:53.390
of the of the frame and if I click on it
I get a similar explanation there's lots

00:13:53.390 --> 00:13:53.400
I get a similar explanation there's lots
 

00:13:53.400 --> 00:13:54.920
I get a similar explanation there's lots
of this for all sorts of tracing

00:13:54.920 --> 00:13:54.930
of this for all sorts of tracing
 

00:13:54.930 --> 00:13:56.660
of this for all sorts of tracing
throughout systrace especially on the UI

00:13:56.660 --> 00:13:56.670
throughout systrace especially on the UI
 

00:13:56.670 --> 00:13:58.130
throughout systrace especially on the UI
or under thread where you might be most

00:13:58.130 --> 00:13:58.140
or under thread where you might be most
 

00:13:58.140 --> 00:14:01.550
or under thread where you might be most
interested okay so now that we know we

00:14:01.550 --> 00:14:01.560
interested okay so now that we know we
 

00:14:01.560 --> 00:14:02.750
interested okay so now that we know we
can click on things we can get a little

00:14:02.750 --> 00:14:02.760
can click on things we can get a little
 

00:14:02.760 --> 00:14:04.250
can click on things we can get a little
bit more information that way let's go

00:14:04.250 --> 00:14:04.260
bit more information that way let's go
 

00:14:04.260 --> 00:14:05.600
bit more information that way let's go
through exactly what does this frame

00:14:05.600 --> 00:14:05.610
through exactly what does this frame
 

00:14:05.610 --> 00:14:08.840
through exactly what does this frame
look like what's it doing so the very

00:14:08.840 --> 00:14:08.850
look like what's it doing so the very
 

00:14:08.850 --> 00:14:10.130
look like what's it doing so the very
first thing we see here is an animation

00:14:10.130 --> 00:14:10.140
first thing we see here is an animation
 

00:14:10.140 --> 00:14:11.990
first thing we see here is an animation
callback if you click on this it'll stay

00:14:11.990 --> 00:14:12.000
callback if you click on this it'll stay
 

00:14:12.000 --> 00:14:13.460
callback if you click on this it'll stay
animation or if you zoom in you can see

00:14:13.460 --> 00:14:13.470
animation or if you zoom in you can see
 

00:14:13.470 --> 00:14:15.350
animation or if you zoom in you can see
that and I'm just going to go through

00:14:15.350 --> 00:14:15.360
that and I'm just going to go through
 

00:14:15.360 --> 00:14:17.300
that and I'm just going to go through
these that way so this is the animation

00:14:17.300 --> 00:14:17.310
these that way so this is the animation
 

00:14:17.310 --> 00:14:18.680
these that way so this is the animation
exactly as Chet was talking about it

00:14:18.680 --> 00:14:18.690
exactly as Chet was talking about it
 

00:14:18.690 --> 00:14:20.990
exactly as Chet was talking about it
before and if we saw before we had a

00:14:20.990 --> 00:14:21.000
before and if we saw before we had a
 

00:14:21.000 --> 00:14:22.220
before and if we saw before we had a
whole lot of frames

00:14:22.220 --> 00:14:22.230
whole lot of frames
 

00:14:22.230 --> 00:14:24.290
whole lot of frames
I told you it was a recycler view so

00:14:24.290 --> 00:14:24.300
I told you it was a recycler view so
 

00:14:24.300 --> 00:14:25.790
I told you it was a recycler view so
there's one very common reason for a

00:14:25.790 --> 00:14:25.800
there's one very common reason for a
 

00:14:25.800 --> 00:14:27.830
there's one very common reason for a
recycler view to be animating and that's

00:14:27.830 --> 00:14:27.840
recycler view to be animating and that's
 

00:14:27.840 --> 00:14:31.010
recycler view to be animating and that's
flinging on just the the fling animation

00:14:31.010 --> 00:14:31.020
flinging on just the the fling animation
 

00:14:31.020 --> 00:14:33.160
flinging on just the the fling animation
itself execute recycler views actual

00:14:33.160 --> 00:14:33.170
itself execute recycler views actual
 

00:14:33.170 --> 00:14:36.740
itself execute recycler views actual
translate and inflate work as part of an

00:14:36.740 --> 00:14:36.750
translate and inflate work as part of an
 

00:14:36.750 --> 00:14:39.290
translate and inflate work as part of an
animation callback and then the other

00:14:39.290 --> 00:14:39.300
animation callback and then the other
 

00:14:39.300 --> 00:14:41.450
animation callback and then the other
stage that Chet talked about before is

00:14:41.450 --> 00:14:41.460
stage that Chet talked about before is
 

00:14:41.460 --> 00:14:43.550
stage that Chet talked about before is
record draw well this makes sense as

00:14:43.550 --> 00:14:43.560
record draw well this makes sense as
 

00:14:43.560 --> 00:14:44.840
record draw well this makes sense as
well but his recycler view is

00:14:44.840 --> 00:14:44.850
well but his recycler view is
 

00:14:44.850 --> 00:14:46.820
well but his recycler view is
invalidating sliding things around and

00:14:46.820 --> 00:14:46.830
invalidating sliding things around and
 

00:14:46.830 --> 00:14:49.460
invalidating sliding things around and
drawing okay we kind of get some context

00:14:49.460 --> 00:14:49.470
drawing okay we kind of get some context
 

00:14:49.470 --> 00:14:50.750
drawing okay we kind of get some context
for what it's doing and in fact if you

00:14:50.750 --> 00:14:50.760
for what it's doing and in fact if you
 

00:14:50.760 --> 00:14:54.230
for what it's doing and in fact if you
click on this part of the of the

00:14:54.230 --> 00:14:54.240
click on this part of the of the
 

00:14:54.240 --> 00:14:56.240
click on this part of the of the
animation which is inside animation this

00:14:56.240 --> 00:14:56.250
animation which is inside animation this
 

00:14:56.250 --> 00:14:57.920
animation which is inside animation this
is a recycler view scroll so recycle

00:14:57.920 --> 00:14:57.930
is a recycler view scroll so recycle
 

00:14:57.930 --> 00:14:58.820
is a recycler view scroll so recycle
every scroll is actually going really

00:14:58.820 --> 00:14:58.830
every scroll is actually going really
 

00:14:58.830 --> 00:15:00.740
every scroll is actually going really
really fast here and that's because

00:15:00.740 --> 00:15:00.750
really fast here and that's because
 

00:15:00.750 --> 00:15:03.460
really fast here and that's because
recycler view is doing very minimal work

00:15:03.460 --> 00:15:03.470
recycler view is doing very minimal work
 

00:15:03.470 --> 00:15:05.990
recycler view is doing very minimal work
in fact if we look at the amount of time

00:15:05.990 --> 00:15:06.000
in fact if we look at the amount of time
 

00:15:06.000 --> 00:15:08.180
in fact if we look at the amount of time
taken by this UI thread frame it's one

00:15:08.180 --> 00:15:08.190
taken by this UI thread frame it's one
 

00:15:08.190 --> 00:15:10.430
taken by this UI thread frame it's one
point two five milliseconds that's great

00:15:10.430 --> 00:15:10.440
point two five milliseconds that's great
 

00:15:10.440 --> 00:15:12.860
point two five milliseconds that's great
the whole frame finishes in in less than

00:15:12.860 --> 00:15:12.870
the whole frame finishes in in less than
 

00:15:12.870 --> 00:15:14.240
the whole frame finishes in in less than
six this is a great frame

00:15:14.240 --> 00:15:14.250
six this is a great frame
 

00:15:14.250 --> 00:15:17.210
six this is a great frame
congratulations now we look at a little

00:15:17.210 --> 00:15:17.220
congratulations now we look at a little
 

00:15:17.220 --> 00:15:19.400
congratulations now we look at a little
bit slower of a frame now this one's

00:15:19.400 --> 00:15:19.410
bit slower of a frame now this one's
 

00:15:19.410 --> 00:15:21.410
bit slower of a frame now this one's
actually not terrible but let's look at

00:15:21.410 --> 00:15:21.420
actually not terrible but let's look at
 

00:15:21.420 --> 00:15:23.000
actually not terrible but let's look at
how it differs from the previous one so

00:15:23.000 --> 00:15:23.010
how it differs from the previous one so
 

00:15:23.010 --> 00:15:25.460
how it differs from the previous one so
first of all we notice that there's a

00:15:25.460 --> 00:15:25.470
first of all we notice that there's a
 

00:15:25.470 --> 00:15:26.740
first of all we notice that there's a
measure pass in here

00:15:26.740 --> 00:15:26.750
measure pass in here
 

00:15:26.750 --> 00:15:29.760
measure pass in here
something in something in the hierarchy

00:15:29.760 --> 00:15:29.770
something in something in the hierarchy
 

00:15:29.770 --> 00:15:33.040
something in something in the hierarchy
requested layout and got remesh good to

00:15:33.040 --> 00:15:33.050
requested layout and got remesh good to
 

00:15:33.050 --> 00:15:35.740
requested layout and got remesh good to
know and another thing down here we see

00:15:35.740 --> 00:15:35.750
know and another thing down here we see
 

00:15:35.750 --> 00:15:38.440
know and another thing down here we see
upload bitmap so the first time that the

00:15:38.440 --> 00:15:38.450
upload bitmap so the first time that the
 

00:15:38.450 --> 00:15:40.120
upload bitmap so the first time that the
render thread sees a bitmap and needs to

00:15:40.120 --> 00:15:40.130
render thread sees a bitmap and needs to
 

00:15:40.130 --> 00:15:42.400
render thread sees a bitmap and needs to
display it it will be uploaded to the

00:15:42.400 --> 00:15:42.410
display it it will be uploaded to the
 

00:15:42.410 --> 00:15:45.310
display it it will be uploaded to the
GPU uploaded to OpenGL so that the GPU

00:15:45.310 --> 00:15:45.320
GPU uploaded to OpenGL so that the GPU
 

00:15:45.320 --> 00:15:46.690
GPU uploaded to OpenGL so that the GPU
can draw it really fast now that first

00:15:46.690 --> 00:15:46.700
can draw it really fast now that first
 

00:15:46.700 --> 00:15:49.060
can draw it really fast now that first
upload is a little expensive and we'll

00:15:49.060 --> 00:15:49.070
upload is a little expensive and we'll
 

00:15:49.070 --> 00:15:50.530
upload is a little expensive and we'll
talk about that a little bit more later

00:15:50.530 --> 00:15:50.540
talk about that a little bit more later
 

00:15:50.540 --> 00:15:52.630
talk about that a little bit more later
but really if we look at it well the UI

00:15:52.630 --> 00:15:52.640
but really if we look at it well the UI
 

00:15:52.640 --> 00:15:54.490
but really if we look at it well the UI
thread takes 4 milliseconds the entire

00:15:54.490 --> 00:15:54.500
thread takes 4 milliseconds the entire
 

00:15:54.500 --> 00:15:56.440
thread takes 4 milliseconds the entire
frame finishes in less than 13 this is

00:15:56.440 --> 00:15:56.450
frame finishes in less than 13 this is
 

00:15:56.450 --> 00:15:59.130
frame finishes in less than 13 this is
not a problem frame this is this is fine

00:15:59.130 --> 00:15:59.140
not a problem frame this is this is fine
 

00:15:59.140 --> 00:16:01.360
not a problem frame this is this is fine
but now let's look at the really bad

00:16:01.360 --> 00:16:01.370
but now let's look at the really bad
 

00:16:01.370 --> 00:16:03.070
but now let's look at the really bad
ones these are the ones that we saw from

00:16:03.070 --> 00:16:03.080
ones these are the ones that we saw from
 

00:16:03.080 --> 00:16:05.950
ones these are the ones that we saw from
very far away ok something is definitely

00:16:05.950 --> 00:16:05.960
very far away ok something is definitely
 

00:16:05.960 --> 00:16:07.870
very far away ok something is definitely
going on here but if you're new like

00:16:07.870 --> 00:16:07.880
going on here but if you're new like
 

00:16:07.880 --> 00:16:09.850
going on here but if you're new like
what what's going on how do I figure out

00:16:09.850 --> 00:16:09.860
what what's going on how do I figure out
 

00:16:09.860 --> 00:16:12.070
what what's going on how do I figure out
what's going on so actually if you click

00:16:12.070 --> 00:16:12.080
what's going on so actually if you click
 

00:16:12.080 --> 00:16:15.490
what's going on so actually if you click
on this part that says RV create view

00:16:15.490 --> 00:16:15.500
on this part that says RV create view
 

00:16:15.500 --> 00:16:17.350
on this part that says RV create view
it'll describe to you this is basically

00:16:17.350 --> 00:16:17.360
it'll describe to you this is basically
 

00:16:17.360 --> 00:16:19.900
it'll describe to you this is basically
your adapters callback for oncreateview

00:16:19.900 --> 00:16:19.910
your adapters callback for oncreateview
 

00:16:19.910 --> 00:16:21.610
your adapters callback for oncreateview
holder this means that recycler view

00:16:21.610 --> 00:16:21.620
holder this means that recycler view
 

00:16:21.620 --> 00:16:23.500
holder this means that recycler view
needs a new view and it's creating it

00:16:23.500 --> 00:16:23.510
needs a new view and it's creating it
 

00:16:23.510 --> 00:16:25.360
needs a new view and it's creating it
and in fact if you look directly below

00:16:25.360 --> 00:16:25.370
and in fact if you look directly below
 

00:16:25.370 --> 00:16:27.940
and in fact if you look directly below
that well a lot of the reason a lot of

00:16:27.940 --> 00:16:27.950
that well a lot of the reason a lot of
 

00:16:27.950 --> 00:16:30.130
that well a lot of the reason a lot of
the time that takes up this create view

00:16:30.130 --> 00:16:30.140
the time that takes up this create view
 

00:16:30.140 --> 00:16:32.200
the time that takes up this create view
portion is that it's inflating and

00:16:32.200 --> 00:16:32.210
portion is that it's inflating and
 

00:16:32.210 --> 00:16:33.790
portion is that it's inflating and
inflating especially with the complex

00:16:33.790 --> 00:16:33.800
inflating especially with the complex
 

00:16:33.800 --> 00:16:35.770
inflating especially with the complex
items in my recycler view can take a

00:16:35.770 --> 00:16:35.780
items in my recycler view can take a
 

00:16:35.780 --> 00:16:37.720
items in my recycler view can take a
while well that's unfortunate

00:16:37.720 --> 00:16:37.730
while well that's unfortunate
 

00:16:37.730 --> 00:16:40.600
while well that's unfortunate
the next part here on bind view holder

00:16:40.600 --> 00:16:40.610
the next part here on bind view holder
 

00:16:40.610 --> 00:16:42.940
the next part here on bind view holder
that takes about a millisecond and a

00:16:42.940 --> 00:16:42.950
that takes about a millisecond and a
 

00:16:42.950 --> 00:16:45.160
that takes about a millisecond and a
half not great but ok well what could I

00:16:45.160 --> 00:16:45.170
half not great but ok well what could I
 

00:16:45.170 --> 00:16:48.730
half not great but ok well what could I
do um you know this this UI thread frame

00:16:48.730 --> 00:16:48.740
do um you know this this UI thread frame
 

00:16:48.740 --> 00:16:51.340
do um you know this this UI thread frame
took about 20 seconds 20 milliseconds on

00:16:51.340 --> 00:16:51.350
took about 20 seconds 20 milliseconds on
 

00:16:51.350 --> 00:16:54.520
took about 20 seconds 20 milliseconds on
the UI thread and total to be about 27.4

00:16:54.520 --> 00:16:54.530
the UI thread and total to be about 27.4
 

00:16:54.530 --> 00:16:56.560
the UI thread and total to be about 27.4
not great we are definitely going to

00:16:56.560 --> 00:16:56.570
not great we are definitely going to
 

00:16:56.570 --> 00:17:00.040
not great we are definitely going to
jank that frame so this is actually this

00:17:00.040 --> 00:17:00.050
jank that frame so this is actually this
 

00:17:00.050 --> 00:17:01.420
jank that frame so this is actually this
process is one that you might go through

00:17:01.420 --> 00:17:01.430
process is one that you might go through
 

00:17:01.430 --> 00:17:03.520
process is one that you might go through
yourself but in this particular case we

00:17:03.520 --> 00:17:03.530
yourself but in this particular case we
 

00:17:03.530 --> 00:17:04.870
yourself but in this particular case we
realize well this is this is something

00:17:04.870 --> 00:17:04.880
realize well this is this is something
 

00:17:04.880 --> 00:17:06.490
realize well this is this is something
that we can help you out with in support

00:17:06.490 --> 00:17:06.500
that we can help you out with in support
 

00:17:06.500 --> 00:17:08.530
that we can help you out with in support
lib and this is a feature that we worked

00:17:08.530 --> 00:17:08.540
lib and this is a feature that we worked
 

00:17:08.540 --> 00:17:11.650
lib and this is a feature that we worked
in worked in for exactly that purpose so

00:17:11.650 --> 00:17:11.660
in worked in for exactly that purpose so
 

00:17:11.660 --> 00:17:12.880
in worked in for exactly that purpose so
let's go back and talk a little bit

00:17:12.880 --> 00:17:12.890
let's go back and talk a little bit
 

00:17:12.890 --> 00:17:16.059
let's go back and talk a little bit
about what recycler view does so

00:17:16.059 --> 00:17:16.069
about what recycler view does so
 

00:17:16.069 --> 00:17:18.189
about what recycler view does so
recycler view is the primary support lib

00:17:18.189 --> 00:17:18.199
recycler view is the primary support lib
 

00:17:18.199 --> 00:17:21.520
recycler view is the primary support lib
component for displaying a dynamic list

00:17:21.520 --> 00:17:21.530
component for displaying a dynamic list
 

00:17:21.530 --> 00:17:24.520
component for displaying a dynamic list
of content that needs to show views

00:17:24.520 --> 00:17:24.530
of content that needs to show views
 

00:17:24.530 --> 00:17:27.400
of content that needs to show views
dynamically that needs to scroll

00:17:27.400 --> 00:17:27.410
dynamically that needs to scroll
 

00:17:27.410 --> 00:17:29.680
dynamically that needs to scroll
infinitely potentially or display more

00:17:29.680 --> 00:17:29.690
infinitely potentially or display more
 

00:17:29.690 --> 00:17:31.480
infinitely potentially or display more
content than what is attached to the

00:17:31.480 --> 00:17:31.490
content than what is attached to the
 

00:17:31.490 --> 00:17:33.310
content than what is attached to the
view hierarchy so what do I mean well I

00:17:33.310 --> 00:17:33.320
view hierarchy so what do I mean well I
 

00:17:33.320 --> 00:17:34.990
view hierarchy so what do I mean well I
mean if you have these four items

00:17:34.990 --> 00:17:35.000
mean if you have these four items
 

00:17:35.000 --> 00:17:37.380
mean if you have these four items
partially visible in your recycler view

00:17:37.380 --> 00:17:37.390
partially visible in your recycler view
 

00:17:37.390 --> 00:17:39.840
partially visible in your recycler view
you start scrolling

00:17:39.840 --> 00:17:39.850
you start scrolling
 

00:17:39.850 --> 00:17:41.700
you start scrolling
and all that recyclerview needs to do is

00:17:41.700 --> 00:17:41.710
and all that recyclerview needs to do is
 

00:17:41.710 --> 00:17:43.440
and all that recyclerview needs to do is
handle these four particular items in

00:17:43.440 --> 00:17:43.450
handle these four particular items in
 

00:17:43.450 --> 00:17:45.299
handle these four particular items in
fact all that it has to do is offset

00:17:45.299 --> 00:17:45.309
fact all that it has to do is offset
 

00:17:45.309 --> 00:17:47.220
fact all that it has to do is offset
them very slightly and that's the amount

00:17:47.220 --> 00:17:47.230
them very slightly and that's the amount
 

00:17:47.230 --> 00:17:48.630
them very slightly and that's the amount
of work that we see and in fact if you

00:17:48.630 --> 00:17:48.640
of work that we see and in fact if you
 

00:17:48.640 --> 00:17:51.000
of work that we see and in fact if you
remember the very first RV scroll that

00:17:51.000 --> 00:17:51.010
remember the very first RV scroll that
 

00:17:51.010 --> 00:17:52.289
remember the very first RV scroll that
we highlighted it was tiny it was

00:17:52.289 --> 00:17:52.299
we highlighted it was tiny it was
 

00:17:52.299 --> 00:17:53.760
we highlighted it was tiny it was
trivial because the recyclerview did

00:17:53.760 --> 00:17:53.770
trivial because the recyclerview did
 

00:17:53.770 --> 00:17:56.070
trivial because the recyclerview did
very little but once we get to the edge

00:17:56.070 --> 00:17:56.080
very little but once we get to the edge
 

00:17:56.080 --> 00:17:58.110
very little but once we get to the edge
of this particular list well what

00:17:58.110 --> 00:17:58.120
of this particular list well what
 

00:17:58.120 --> 00:18:00.510
of this particular list well what
happens now we suddenly might see some

00:18:00.510 --> 00:18:00.520
happens now we suddenly might see some
 

00:18:00.520 --> 00:18:02.070
happens now we suddenly might see some
jank because this is a frame in which

00:18:02.070 --> 00:18:02.080
jank because this is a frame in which
 

00:18:02.080 --> 00:18:03.750
jank because this is a frame in which
something interesting happens for the

00:18:03.750 --> 00:18:03.760
something interesting happens for the
 

00:18:03.760 --> 00:18:06.150
something interesting happens for the
first time this list has five items in

00:18:06.150 --> 00:18:06.160
first time this list has five items in
 

00:18:06.160 --> 00:18:08.669
first time this list has five items in
it that means it can't get an item to be

00:18:08.669 --> 00:18:08.679
it that means it can't get an item to be
 

00:18:08.679 --> 00:18:11.159
it that means it can't get an item to be
recycled from previously that means this

00:18:11.159 --> 00:18:11.169
recycled from previously that means this
 

00:18:11.169 --> 00:18:15.840
recycled from previously that means this
message icon had to be inflated well so

00:18:15.840 --> 00:18:15.850
message icon had to be inflated well so
 

00:18:15.850 --> 00:18:17.100
message icon had to be inflated well so
that's the old way of recycler view

00:18:17.100 --> 00:18:17.110
that's the old way of recycler view
 

00:18:17.110 --> 00:18:19.380
that's the old way of recycler view
working so let's welcome let's go back

00:18:19.380 --> 00:18:19.390
working so let's welcome let's go back
 

00:18:19.390 --> 00:18:20.760
working so let's welcome let's go back
to a sort of simplified version of what

00:18:20.760 --> 00:18:20.770
to a sort of simplified version of what
 

00:18:20.770 --> 00:18:22.740
to a sort of simplified version of what
we saw in this trace let's say again

00:18:22.740 --> 00:18:22.750
we saw in this trace let's say again
 

00:18:22.750 --> 00:18:24.870
we saw in this trace let's say again
that this happened during fling we have

00:18:24.870 --> 00:18:24.880
that this happened during fling we have
 

00:18:24.880 --> 00:18:26.970
that this happened during fling we have
two frames that look totally fine they

00:18:26.970 --> 00:18:26.980
two frames that look totally fine they
 

00:18:26.980 --> 00:18:29.970
two frames that look totally fine they
they have short UI thread durations and

00:18:29.970 --> 00:18:29.980
they have short UI thread durations and
 

00:18:29.980 --> 00:18:31.799
they have short UI thread durations and
very reasonable render thread durations

00:18:31.799 --> 00:18:31.809
very reasonable render thread durations
 

00:18:31.809 --> 00:18:33.600
very reasonable render thread durations
finished before the deadline but then

00:18:33.600 --> 00:18:33.610
finished before the deadline but then
 

00:18:33.610 --> 00:18:36.120
finished before the deadline but then
suddenly you hit a big chunk of

00:18:36.120 --> 00:18:36.130
suddenly you hit a big chunk of
 

00:18:36.130 --> 00:18:38.430
suddenly you hit a big chunk of
animation and as we know in this

00:18:38.430 --> 00:18:38.440
animation and as we know in this
 

00:18:38.440 --> 00:18:39.750
animation and as we know in this
particular case that's because

00:18:39.750 --> 00:18:39.760
particular case that's because
 

00:18:39.760 --> 00:18:41.970
particular case that's because
recyclerview is doing its create and

00:18:41.970 --> 00:18:41.980
recyclerview is doing its create and
 

00:18:41.980 --> 00:18:45.539
recyclerview is doing its create and
bind work so we say something funny here

00:18:45.539 --> 00:18:45.549
bind work so we say something funny here
 

00:18:45.549 --> 00:18:47.789
bind work so we say something funny here
though which with render thread working

00:18:47.789 --> 00:18:47.799
though which with render thread working
 

00:18:47.799 --> 00:18:50.820
though which with render thread working
as it does the UI thread is totally idle

00:18:50.820 --> 00:18:50.830
as it does the UI thread is totally idle
 

00:18:50.830 --> 00:18:53.450
as it does the UI thread is totally idle
for the ten or so milliseconds in

00:18:53.450 --> 00:18:53.460
for the ten or so milliseconds in
 

00:18:53.460 --> 00:18:56.399
for the ten or so milliseconds in
advance of this new frame coming on well

00:18:56.399 --> 00:18:56.409
advance of this new frame coming on well
 

00:18:56.409 --> 00:18:57.810
advance of this new frame coming on well
it's not hard to predict as the fling is

00:18:57.810 --> 00:18:57.820
it's not hard to predict as the fling is
 

00:18:57.820 --> 00:18:59.430
it's not hard to predict as the fling is
going to continue I mean that's kind of

00:18:59.430 --> 00:18:59.440
going to continue I mean that's kind of
 

00:18:59.440 --> 00:19:02.399
going to continue I mean that's kind of
what animations do um in this create

00:19:02.399 --> 00:19:02.409
what animations do um in this create
 

00:19:02.409 --> 00:19:04.350
what animations do um in this create
work it actually could have fit right

00:19:04.350 --> 00:19:04.360
work it actually could have fit right
 

00:19:04.360 --> 00:19:08.789
work it actually could have fit right
there so this is exactly what we do in

00:19:08.789 --> 00:19:08.799
there so this is exactly what we do in
 

00:19:08.799 --> 00:19:11.430
there so this is exactly what we do in
recycler view prefetch we we started

00:19:11.430 --> 00:19:11.440
recycler view prefetch we we started
 

00:19:11.440 --> 00:19:13.409
recycler view prefetch we we started
looking ahead to new items that are

00:19:13.409 --> 00:19:13.419
looking ahead to new items that are
 

00:19:13.419 --> 00:19:15.360
looking ahead to new items that are
about to come on screen and basically

00:19:15.360 --> 00:19:15.370
about to come on screen and basically
 

00:19:15.370 --> 00:19:17.880
about to come on screen and basically
stealing work from them realizing oh no

00:19:17.880 --> 00:19:17.890
stealing work from them realizing oh no
 

00:19:17.890 --> 00:19:19.320
stealing work from them realizing oh no
that's going to do a lot of work let me

00:19:19.320 --> 00:19:19.330
that's going to do a lot of work let me
 

00:19:19.330 --> 00:19:20.880
that's going to do a lot of work let me
steal a little bit of that let me go

00:19:20.880 --> 00:19:20.890
steal a little bit of that let me go
 

00:19:20.890 --> 00:19:22.529
steal a little bit of that let me go
ahead and do that inflation early so

00:19:22.529 --> 00:19:22.539
ahead and do that inflation early so
 

00:19:22.539 --> 00:19:23.970
ahead and do that inflation early so
that we don't have to do that on demand

00:19:23.970 --> 00:19:23.980
that we don't have to do that on demand
 

00:19:23.980 --> 00:19:27.360
that we don't have to do that on demand
and this is what it looks like in

00:19:27.360 --> 00:19:27.370
and this is what it looks like in
 

00:19:27.370 --> 00:19:28.890
and this is what it looks like in
practice so this is a fist raised from

00:19:28.890 --> 00:19:28.900
practice so this is a fist raised from
 

00:19:28.900 --> 00:19:30.899
practice so this is a fist raised from
the exact same app all that I did was

00:19:30.899 --> 00:19:30.909
the exact same app all that I did was
 

00:19:30.909 --> 00:19:32.820
the exact same app all that I did was
update update the support live to get

00:19:32.820 --> 00:19:32.830
update update the support live to get
 

00:19:32.830 --> 00:19:35.669
update update the support live to get
this feature and suddenly we get an RV

00:19:35.669 --> 00:19:35.679
this feature and suddenly we get an RV
 

00:19:35.679 --> 00:19:38.399
this feature and suddenly we get an RV
prefetch event in systrace again click

00:19:38.399 --> 00:19:38.409
prefetch event in systrace again click
 

00:19:38.409 --> 00:19:39.930
prefetch event in systrace again click
on it it explains the prefetch feature

00:19:39.930 --> 00:19:39.940
on it it explains the prefetch feature
 

00:19:39.940 --> 00:19:45.240
on it it explains the prefetch feature
what it does um and we see wow that's 13

00:19:45.240 --> 00:19:45.250
what it does um and we see wow that's 13
 

00:19:45.250 --> 00:19:47.220
what it does um and we see wow that's 13
and 1/2 milliseconds that we pulled out

00:19:47.220 --> 00:19:47.230
and 1/2 milliseconds that we pulled out
 

00:19:47.230 --> 00:19:49.140
and 1/2 milliseconds that we pulled out
of the next frame we saved a huge amount

00:19:49.140 --> 00:19:49.150
of the next frame we saved a huge amount
 

00:19:49.150 --> 00:19:50.169
of the next frame we saved a huge amount
of time

00:19:50.169 --> 00:19:50.179
of time
 

00:19:50.179 --> 00:19:52.419
of time
work-stealing and now this is one great

00:19:52.419 --> 00:19:52.429
work-stealing and now this is one great
 

00:19:52.429 --> 00:19:55.480
work-stealing and now this is one great
example of something that the support

00:19:55.480 --> 00:19:55.490
example of something that the support
 

00:19:55.490 --> 00:19:57.430
example of something that the support
live has done but it's absolutely the

00:19:57.430 --> 00:19:57.440
live has done but it's absolutely the
 

00:19:57.440 --> 00:19:58.930
live has done but it's absolutely the
process that you can go through for

00:19:58.930 --> 00:19:58.940
process that you can go through for
 

00:19:58.940 --> 00:20:01.480
process that you can go through for
looking for problems in your your own

00:20:01.480 --> 00:20:01.490
looking for problems in your your own
 

00:20:01.490 --> 00:20:03.489
looking for problems in your your own
app support lib can't solve every

00:20:03.489 --> 00:20:03.499
app support lib can't solve every
 

00:20:03.499 --> 00:20:06.100
app support lib can't solve every
problem this way but let's talk about

00:20:06.100 --> 00:20:06.110
problem this way but let's talk about
 

00:20:06.110 --> 00:20:08.080
problem this way but let's talk about
prefetch a little bit more so there are

00:20:08.080 --> 00:20:08.090
prefetch a little bit more so there are
 

00:20:08.090 --> 00:20:11.590
prefetch a little bit more so there are
some caveats so what happens if the item

00:20:11.590 --> 00:20:11.600
some caveats so what happens if the item
 

00:20:11.600 --> 00:20:12.909
some caveats so what happens if the item
isn't actually needed what happens if we

00:20:12.909 --> 00:20:12.919
isn't actually needed what happens if we
 

00:20:12.919 --> 00:20:14.289
isn't actually needed what happens if we
prefetch an item and suddenly just

00:20:14.289 --> 00:20:14.299
prefetch an item and suddenly just
 

00:20:14.299 --> 00:20:16.119
prefetch an item and suddenly just
before that item is about to come on

00:20:16.119 --> 00:20:16.129
before that item is about to come on
 

00:20:16.129 --> 00:20:17.499
before that item is about to come on
screen the user decides to tap the

00:20:17.499 --> 00:20:17.509
screen the user decides to tap the
 

00:20:17.509 --> 00:20:19.570
screen the user decides to tap the
screen and stop the fling if the thing

00:20:19.570 --> 00:20:19.580
screen and stop the fling if the thing
 

00:20:19.580 --> 00:20:20.830
screen and stop the fling if the thing
is stopped if you don't end up needing

00:20:20.830 --> 00:20:20.840
is stopped if you don't end up needing
 

00:20:20.840 --> 00:20:22.690
is stopped if you don't end up needing
the item or if something else comes in

00:20:22.690 --> 00:20:22.700
the item or if something else comes in
 

00:20:22.700 --> 00:20:25.720
the item or if something else comes in
some last-minute arrival of new data you

00:20:25.720 --> 00:20:25.730
some last-minute arrival of new data you
 

00:20:25.730 --> 00:20:27.570
some last-minute arrival of new data you
might have done the work incorrectly and

00:20:27.570 --> 00:20:27.580
might have done the work incorrectly and
 

00:20:27.580 --> 00:20:30.639
might have done the work incorrectly and
really that's fine 99.9% of the time

00:20:30.639 --> 00:20:30.649
really that's fine 99.9% of the time
 

00:20:30.649 --> 00:20:31.869
really that's fine 99.9% of the time
prefetch is going to make the right

00:20:31.869 --> 00:20:31.879
prefetch is going to make the right
 

00:20:31.879 --> 00:20:33.190
prefetch is going to make the right
decision and you might waste a little

00:20:33.190 --> 00:20:33.200
decision and you might waste a little
 

00:20:33.200 --> 00:20:34.570
decision and you might waste a little
little bit of work in that particular

00:20:34.570 --> 00:20:34.580
little bit of work in that particular
 

00:20:34.580 --> 00:20:36.820
little bit of work in that particular
case what if there's no render thread

00:20:36.820 --> 00:20:36.830
case what if there's no render thread
 

00:20:36.830 --> 00:20:39.369
case what if there's no render thread
though if there's no render thread we

00:20:39.369 --> 00:20:39.379
though if there's no render thread we
 

00:20:39.379 --> 00:20:41.259
though if there's no render thread we
just don't try and prefetch to begin

00:20:41.259 --> 00:20:41.269
just don't try and prefetch to begin
 

00:20:41.269 --> 00:20:41.919
just don't try and prefetch to begin
with right now

00:20:41.919 --> 00:20:41.929
with right now
 

00:20:41.929 --> 00:20:44.470
with right now
so because render thread is on the vast

00:20:44.470 --> 00:20:44.480
so because render thread is on the vast
 

00:20:44.480 --> 00:20:46.659
so because render thread is on the vast
majority of devices you get this on most

00:20:46.659 --> 00:20:46.669
majority of devices you get this on most
 

00:20:46.669 --> 00:20:48.580
majority of devices you get this on most
devices for free by just using a recent

00:20:48.580 --> 00:20:48.590
devices for free by just using a recent
 

00:20:48.590 --> 00:20:51.100
devices for free by just using a recent
version of the support Lib but on older

00:20:51.100 --> 00:20:51.110
version of the support Lib but on older
 

00:20:51.110 --> 00:20:54.720
version of the support Lib but on older
devices this feature doesn't work so

00:20:54.720 --> 00:20:54.730
devices this feature doesn't work so
 

00:20:54.730 --> 00:20:56.950
devices this feature doesn't work so
availability this is actually introduced

00:20:56.950 --> 00:20:56.960
availability this is actually introduced
 

00:20:56.960 --> 00:20:58.659
availability this is actually introduced
so a while ago with support lived v25

00:20:58.659 --> 00:20:58.669
so a while ago with support lived v25
 

00:20:58.669 --> 00:21:00.239
so a while ago with support lived v25
but it's been getting better and

00:21:00.239 --> 00:21:00.249
but it's been getting better and
 

00:21:00.249 --> 00:21:02.710
but it's been getting better and
including with the most recent beta of

00:21:02.710 --> 00:21:02.720
including with the most recent beta of
 

00:21:02.720 --> 00:21:06.369
including with the most recent beta of
26 this feature is built into default

00:21:06.369 --> 00:21:06.379
26 this feature is built into default
 

00:21:06.379 --> 00:21:08.409
26 this feature is built into default
layout managers so if you just use a

00:21:08.409 --> 00:21:08.419
layout managers so if you just use a
 

00:21:08.419 --> 00:21:10.269
layout managers so if you just use a
recycler view horizontal/vertical

00:21:10.269 --> 00:21:10.279
recycler view horizontal/vertical
 

00:21:10.279 --> 00:21:13.509
recycler view horizontal/vertical
whatever with linear or staggered or

00:21:13.509 --> 00:21:13.519
whatever with linear or staggered or
 

00:21:13.519 --> 00:21:15.220
whatever with linear or staggered or
grid layout you just get this for free

00:21:15.220 --> 00:21:15.230
grid layout you just get this for free
 

00:21:15.230 --> 00:21:17.739
grid layout you just get this for free
this is just from updating to the newer

00:21:17.739 --> 00:21:17.749
this is just from updating to the newer
 

00:21:17.749 --> 00:21:21.009
this is just from updating to the newer
support light however if you have a

00:21:21.009 --> 00:21:21.019
support light however if you have a
 

00:21:21.019 --> 00:21:22.749
support light however if you have a
custom layout manager if you wanted to

00:21:22.749 --> 00:21:22.759
custom layout manager if you wanted to
 

00:21:22.759 --> 00:21:24.279
custom layout manager if you wanted to
do something completely custom or if you

00:21:24.279 --> 00:21:24.289
do something completely custom or if you
 

00:21:24.289 --> 00:21:26.080
do something completely custom or if you
wanted to subclass one of them in an

00:21:26.080 --> 00:21:26.090
wanted to subclass one of them in an
 

00:21:26.090 --> 00:21:27.730
wanted to subclass one of them in an
interesting way just be aware that you

00:21:27.730 --> 00:21:27.740
interesting way just be aware that you
 

00:21:27.740 --> 00:21:30.609
interesting way just be aware that you
may need to override this particular

00:21:30.609 --> 00:21:30.619
may need to override this particular
 

00:21:30.619 --> 00:21:32.259
may need to override this particular
method collect adjacent prefetch

00:21:32.259 --> 00:21:32.269
method collect adjacent prefetch
 

00:21:32.269 --> 00:21:35.440
method collect adjacent prefetch
positions and this is how you in your

00:21:35.440 --> 00:21:35.450
positions and this is how you in your
 

00:21:35.450 --> 00:21:37.539
positions and this is how you in your
custom layout manager can get the exact

00:21:37.539 --> 00:21:37.549
custom layout manager can get the exact
 

00:21:37.549 --> 00:21:39.039
custom layout manager can get the exact
same behavior and you can look at the

00:21:39.039 --> 00:21:39.049
same behavior and you can look at the
 

00:21:39.049 --> 00:21:41.560
same behavior and you can look at the
implementations of the other ones and

00:21:41.560 --> 00:21:41.570
implementations of the other ones and
 

00:21:41.570 --> 00:21:43.210
implementations of the other ones and
you can read more about this in just

00:21:43.210 --> 00:21:43.220
you can read more about this in just
 

00:21:43.220 --> 00:21:45.159
you can read more about this in just
wonderful post about recycler view

00:21:45.159 --> 00:21:45.169
wonderful post about recycler view
 

00:21:45.169 --> 00:21:49.840
wonderful post about recycler view
prefetch on medium but let's let's top

00:21:49.840 --> 00:21:49.850
prefetch on medium but let's let's top
 

00:21:49.850 --> 00:21:51.310
prefetch on medium but let's let's top
it let's step back a little bit and talk

00:21:51.310 --> 00:21:51.320
it let's step back a little bit and talk
 

00:21:51.320 --> 00:21:53.289
it let's step back a little bit and talk
about well what happens to jan well we

00:21:53.289 --> 00:21:53.299
about well what happens to jan well we
 

00:21:53.299 --> 00:21:54.669
about well what happens to jan well we
saw in this particular case that

00:21:54.669 --> 00:21:54.679
saw in this particular case that
 

00:21:54.679 --> 00:21:55.720
saw in this particular case that
recyclerview

00:21:55.720 --> 00:21:55.730
recyclerview
 

00:21:55.730 --> 00:21:58.239
recyclerview
having bursty workloads could cause jank

00:21:58.239 --> 00:21:58.249
having bursty workloads could cause jank
 

00:21:58.249 --> 00:22:00.310
having bursty workloads could cause jank
but let's talk about sort of stepping

00:22:00.310 --> 00:22:00.320
but let's talk about sort of stepping
 

00:22:00.320 --> 00:22:02.830
but let's talk about sort of stepping
back what has historically been the

00:22:02.830 --> 00:22:02.840
back what has historically been the
 

00:22:02.840 --> 00:22:07.030
back what has historically been the
problems for Android and jank so what

00:22:07.030 --> 00:22:07.040
problems for Android and jank so what
 

00:22:07.040 --> 00:22:10.030
problems for Android and jank so what
are the oldest ones that that we've

00:22:10.030 --> 00:22:10.040
are the oldest ones that that we've
 

00:22:10.040 --> 00:22:11.890
are the oldest ones that that we've
thought about is garbage collection

00:22:11.890 --> 00:22:11.900
thought about is garbage collection
 

00:22:11.900 --> 00:22:13.660
thought about is garbage collection
garbage collection historically had been

00:22:13.660 --> 00:22:13.670
garbage collection historically had been
 

00:22:13.670 --> 00:22:15.580
garbage collection historically had been
a lot of problem had been a significant

00:22:15.580 --> 00:22:15.590
a lot of problem had been a significant
 

00:22:15.590 --> 00:22:17.920
a lot of problem had been a significant
problem on Android but this has been

00:22:17.920 --> 00:22:17.930
problem on Android but this has been
 

00:22:17.930 --> 00:22:19.120
problem on Android but this has been
something that the the platform has been

00:22:19.120 --> 00:22:19.130
something that the the platform has been
 

00:22:19.130 --> 00:22:22.420
something that the the platform has been
improving steadily so GC for alloc was

00:22:22.420 --> 00:22:22.430
improving steadily so GC for alloc was
 

00:22:22.430 --> 00:22:24.910
improving steadily so GC for alloc was
essentially fixed in L with art I looked

00:22:24.910 --> 00:22:24.920
essentially fixed in L with art I looked
 

00:22:24.920 --> 00:22:27.490
essentially fixed in L with art I looked
at hundreds hundreds of traces I haven't

00:22:27.490 --> 00:22:27.500
at hundreds hundreds of traces I haven't
 

00:22:27.500 --> 00:22:30.730
at hundreds hundreds of traces I haven't
seen a blocking GC on any but the most

00:22:30.730 --> 00:22:30.740
seen a blocking GC on any but the most
 

00:22:30.740 --> 00:22:34.180
seen a blocking GC on any but the most
egregiously allocating apps GC is not a

00:22:34.180 --> 00:22:34.190
egregiously allocating apps GC is not a
 

00:22:34.190 --> 00:22:36.760
egregiously allocating apps GC is not a
huge problem but but then but even still

00:22:36.760 --> 00:22:36.770
huge problem but but then but even still
 

00:22:36.770 --> 00:22:39.460
huge problem but but then but even still
the runtime keeps improving runtime

00:22:39.460 --> 00:22:39.470
the runtime keeps improving runtime
 

00:22:39.470 --> 00:22:41.410
the runtime keeps improving runtime
keeps getting better at GCE lowering the

00:22:41.410 --> 00:22:41.420
keeps getting better at GCE lowering the
 

00:22:41.420 --> 00:22:44.590
keeps getting better at GCE lowering the
overhead of allocation OS thread

00:22:44.590 --> 00:22:44.600
overhead of allocation OS thread
 

00:22:44.600 --> 00:22:45.820
overhead of allocation OS thread
scheduling so this is a particularly

00:22:45.820 --> 00:22:45.830
scheduling so this is a particularly
 

00:22:45.830 --> 00:22:49.990
scheduling so this is a particularly
interesting one we're on very on older

00:22:49.990 --> 00:22:50.000
interesting one we're on very on older
 

00:22:50.000 --> 00:22:51.820
interesting one we're on very on older
versions of the kernel and on older

00:22:51.820 --> 00:22:51.830
versions of the kernel and on older
 

00:22:51.830 --> 00:22:53.560
versions of the kernel and on older
versions of Android sometimes the

00:22:53.560 --> 00:22:53.570
versions of Android sometimes the
 

00:22:53.570 --> 00:22:55.000
versions of Android sometimes the
platform would just make a bad decision

00:22:55.000 --> 00:22:55.010
platform would just make a bad decision
 

00:22:55.010 --> 00:22:57.550
platform would just make a bad decision
about when to schedule your application

00:22:57.550 --> 00:22:57.560
about when to schedule your application
 

00:22:57.560 --> 00:22:59.320
about when to schedule your application
this has been improving greatly on

00:22:59.320 --> 00:22:59.330
this has been improving greatly on
 

00:22:59.330 --> 00:23:01.570
this has been improving greatly on
especially in in and oh but it is

00:23:01.570 --> 00:23:01.580
especially in in and oh but it is
 

00:23:01.580 --> 00:23:03.190
especially in in and oh but it is
unfortunately kernel specific so that

00:23:03.190 --> 00:23:03.200
unfortunately kernel specific so that
 

00:23:03.200 --> 00:23:04.810
unfortunately kernel specific so that
means that it's not guaranteed to be in

00:23:04.810 --> 00:23:04.820
means that it's not guaranteed to be in
 

00:23:04.820 --> 00:23:08.590
means that it's not guaranteed to be in
every in Ouro device but definitely look

00:23:08.590 --> 00:23:08.600
every in Ouro device but definitely look
 

00:23:08.600 --> 00:23:10.270
every in Ouro device but definitely look
for newer devices if you're looking

00:23:10.270 --> 00:23:10.280
for newer devices if you're looking
 

00:23:10.280 --> 00:23:12.010
for newer devices if you're looking
specifically into thread scheduling if

00:23:12.010 --> 00:23:12.020
specifically into thread scheduling if
 

00:23:12.020 --> 00:23:14.260
specifically into thread scheduling if
you're trying to to make sure that your

00:23:14.260 --> 00:23:14.270
you're trying to to make sure that your
 

00:23:14.270 --> 00:23:15.940
you're trying to to make sure that your
work is running exactly when you want it

00:23:15.940 --> 00:23:15.950
work is running exactly when you want it
 

00:23:15.950 --> 00:23:19.480
work is running exactly when you want it
to rendering is an interesting warrant

00:23:19.480 --> 00:23:19.490
to rendering is an interesting warrant
 

00:23:19.490 --> 00:23:21.390
to rendering is an interesting warrant
when I work a whole lot of rendering um

00:23:21.390 --> 00:23:21.400
when I work a whole lot of rendering um
 

00:23:21.400 --> 00:23:22.540
when I work a whole lot of rendering um
rendering

00:23:22.540 --> 00:23:22.550
rendering
 

00:23:22.550 --> 00:23:23.680
rendering
specifically one of the things I

00:23:23.680 --> 00:23:23.690
specifically one of the things I
 

00:23:23.690 --> 00:23:25.360
specifically one of the things I
remember Chet and Ramon talking about

00:23:25.360 --> 00:23:25.370
remember Chet and Ramon talking about
 

00:23:25.370 --> 00:23:27.510
remember Chet and Ramon talking about
years ago has been view alpha if you

00:23:27.510 --> 00:23:27.520
years ago has been view alpha if you
 

00:23:27.520 --> 00:23:30.790
years ago has been view alpha if you
let's see if there's there's has

00:23:30.790 --> 00:23:30.800
let's see if there's there's has
 

00:23:30.800 --> 00:23:32.680
let's see if there's there's has
overlapping rendering there's set layer

00:23:32.680 --> 00:23:32.690
overlapping rendering there's set layer
 

00:23:32.690 --> 00:23:35.350
overlapping rendering there's set layer
type Hardware there's some other

00:23:35.350 --> 00:23:35.360
type Hardware there's some other
 

00:23:35.360 --> 00:23:36.790
type Hardware there's some other
callbacks somewhere that I need to

00:23:36.790 --> 00:23:36.800
callbacks somewhere that I need to
 

00:23:36.800 --> 00:23:38.650
callbacks somewhere that I need to
remember well what we try to improve

00:23:38.650 --> 00:23:38.660
remember well what we try to improve
 

00:23:38.660 --> 00:23:41.470
remember well what we try to improve
that so we started adding auto Hardware

00:23:41.470 --> 00:23:41.480
that so we started adding auto Hardware
 

00:23:41.480 --> 00:23:44.170
that so we started adding auto Hardware
layer and M get that for free and M plus

00:23:44.170 --> 00:23:44.180
layer and M get that for free and M plus
 

00:23:44.180 --> 00:23:45.610
layer and M get that for free and M plus
you can still use hardware layer to

00:23:45.610 --> 00:23:45.620
you can still use hardware layer to
 

00:23:45.620 --> 00:23:47.440
you can still use hardware layer to
avoid that problem but we've gotten even

00:23:47.440 --> 00:23:47.450
avoid that problem but we've gotten even
 

00:23:47.450 --> 00:23:49.750
avoid that problem but we've gotten even
further improvements in in improving the

00:23:49.750 --> 00:23:49.760
further improvements in in improving the
 

00:23:49.760 --> 00:23:52.570
further improvements in in improving the
worst case um bitmap uploads are another

00:23:52.570 --> 00:23:52.580
worst case um bitmap uploads are another
 

00:23:52.580 --> 00:23:55.620
worst case um bitmap uploads are another
one that I talked about earlier that had

00:23:55.620 --> 00:23:55.630
one that I talked about earlier that had
 

00:23:55.630 --> 00:23:57.940
one that I talked about earlier that had
that can cause a significant amount of

00:23:57.940 --> 00:23:57.950
that can cause a significant amount of
 

00:23:57.950 --> 00:23:59.560
that can cause a significant amount of
delay and first displaying your bitmap

00:23:59.560 --> 00:23:59.570
delay and first displaying your bitmap
 

00:23:59.570 --> 00:24:02.560
delay and first displaying your bitmap
but we added a new feature in in prepare

00:24:02.560 --> 00:24:02.570
but we added a new feature in in prepare
 

00:24:02.570 --> 00:24:04.320
but we added a new feature in in prepare
to draw on bitmaps that would allow

00:24:04.320 --> 00:24:04.330
to draw on bitmaps that would allow
 

00:24:04.330 --> 00:24:06.400
to draw on bitmaps that would allow
bitmap loading libraries to

00:24:06.400 --> 00:24:06.410
bitmap loading libraries to
 

00:24:06.410 --> 00:24:09.010
bitmap loading libraries to
asynchronously start that work early and

00:24:09.010 --> 00:24:09.020
asynchronously start that work early and
 

00:24:09.020 --> 00:24:11.430
asynchronously start that work early and
that's starting to be adopted by them

00:24:11.430 --> 00:24:11.440
that's starting to be adopted by them
 

00:24:11.440 --> 00:24:14.129
that's starting to be adopted by them
view recycling just as I said before

00:24:14.129 --> 00:24:14.139
view recycling just as I said before
 

00:24:14.139 --> 00:24:16.549
view recycling just as I said before
with another common cause that basically

00:24:16.549 --> 00:24:16.559
with another common cause that basically
 

00:24:16.559 --> 00:24:19.919
with another common cause that basically
support live has significantly improved

00:24:19.919 --> 00:24:19.929
support live has significantly improved
 

00:24:19.929 --> 00:24:22.919
support live has significantly improved
for you so added in twenty five more

00:24:22.919 --> 00:24:22.929
for you so added in twenty five more
 

00:24:22.929 --> 00:24:26.879
for you so added in twenty five more
improvements to come there and you can

00:24:26.879 --> 00:24:26.889
improvements to come there and you can
 

00:24:26.889 --> 00:24:28.049
improvements to come there and you can
and you can go back and watch the

00:24:28.049 --> 00:24:28.059
and you can go back and watch the
 

00:24:28.059 --> 00:24:30.659
and you can go back and watch the
recording of the art session from this

00:24:30.659 --> 00:24:30.669
recording of the art session from this
 

00:24:30.669 --> 00:24:32.610
recording of the art session from this
i/o if you want to learn more about what

00:24:32.610 --> 00:24:32.620
i/o if you want to learn more about what
 

00:24:32.620 --> 00:24:35.070
i/o if you want to learn more about what
art has been doing but I wanted to go

00:24:35.070 --> 00:24:35.080
art has been doing but I wanted to go
 

00:24:35.080 --> 00:24:36.119
art has been doing but I wanted to go
through all of those because I think

00:24:36.119 --> 00:24:36.129
through all of those because I think
 

00:24:36.129 --> 00:24:37.710
through all of those because I think
that tells you a lot about how the

00:24:37.710 --> 00:24:37.720
that tells you a lot about how the
 

00:24:37.720 --> 00:24:39.720
that tells you a lot about how the
platform has been improving and trying

00:24:39.720 --> 00:24:39.730
platform has been improving and trying
 

00:24:39.730 --> 00:24:41.999
platform has been improving and trying
to get the to the point where the only

00:24:41.999 --> 00:24:42.009
to get the to the point where the only
 

00:24:42.009 --> 00:24:43.980
to get the to the point where the only
sources of jank in your application are

00:24:43.980 --> 00:24:43.990
sources of jank in your application are
 

00:24:43.990 --> 00:24:47.490
sources of jank in your application are
ones that you can solve so let's talk a

00:24:47.490 --> 00:24:47.500
ones that you can solve so let's talk a
 

00:24:47.500 --> 00:24:49.259
ones that you can solve so let's talk a
little bit about some of the sources of

00:24:49.259 --> 00:24:49.269
little bit about some of the sources of
 

00:24:49.269 --> 00:24:50.669
little bit about some of the sources of
jank that might happen in an application

00:24:50.669 --> 00:24:50.679
jank that might happen in an application
 

00:24:50.679 --> 00:24:52.320
jank that might happen in an application
that might happen because of something

00:24:52.320 --> 00:24:52.330
that might happen because of something
 

00:24:52.330 --> 00:24:54.960
that might happen because of something
that's going wrong inside your app and

00:24:54.960 --> 00:24:54.970
that's going wrong inside your app and
 

00:24:54.970 --> 00:24:56.100
that's going wrong inside your app and
there are a lot of them but let's just

00:24:56.100 --> 00:24:56.110
there are a lot of them but let's just
 

00:24:56.110 --> 00:24:57.389
there are a lot of them but let's just
go really quickly so issues in

00:24:57.389 --> 00:24:57.399
go really quickly so issues in
 

00:24:57.399 --> 00:24:59.779
go really quickly so issues in
recyclerview we talked about issues with

00:24:59.779 --> 00:24:59.789
recyclerview we talked about issues with
 

00:24:59.789 --> 00:25:02.430
recyclerview we talked about issues with
recyclerview needing to inflate doing

00:25:02.430 --> 00:25:02.440
recyclerview needing to inflate doing
 

00:25:02.440 --> 00:25:04.759
recyclerview needing to inflate doing
that work at the last minute lazily

00:25:04.759 --> 00:25:04.769
that work at the last minute lazily
 

00:25:04.769 --> 00:25:07.499
that work at the last minute lazily
possibly causing 10 milliseconds or more

00:25:07.499 --> 00:25:07.509
possibly causing 10 milliseconds or more
 

00:25:07.509 --> 00:25:09.960
possibly causing 10 milliseconds or more
of work in a single frame but there's a

00:25:09.960 --> 00:25:09.970
of work in a single frame but there's a
 

00:25:09.970 --> 00:25:11.580
of work in a single frame but there's a
lot of a there's a lot of other subtle

00:25:11.580 --> 00:25:11.590
lot of a there's a lot of other subtle
 

00:25:11.590 --> 00:25:14.999
lot of a there's a lot of other subtle
issues in recycler view that can cause

00:25:14.999 --> 00:25:15.009
issues in recycler view that can cause
 

00:25:15.009 --> 00:25:17.759
issues in recycler view that can cause
unnecessary inflation and talk a little

00:25:17.759 --> 00:25:17.769
unnecessary inflation and talk a little
 

00:25:17.769 --> 00:25:20.310
unnecessary inflation and talk a little
bit more about that so bitmap painting

00:25:20.310 --> 00:25:20.320
bit more about that so bitmap painting
 

00:25:20.320 --> 00:25:22.680
bit more about that so bitmap painting
on the UI thread one of the most common

00:25:22.680 --> 00:25:22.690
on the UI thread one of the most common
 

00:25:22.690 --> 00:25:24.389
on the UI thread one of the most common
reasons for your draw callback to be

00:25:24.389 --> 00:25:24.399
reasons for your draw callback to be
 

00:25:24.399 --> 00:25:25.889
reasons for your draw callback to be
very long as because you're trying to

00:25:25.889 --> 00:25:25.899
very long as because you're trying to
 

00:25:25.899 --> 00:25:28.019
very long as because you're trying to
cache some work cache some content in a

00:25:28.019 --> 00:25:28.029
cache some work cache some content in a
 

00:25:28.029 --> 00:25:29.639
cache some work cache some content in a
bitmap but unfortunately drawing to a

00:25:29.639 --> 00:25:29.649
bitmap but unfortunately drawing to a
 

00:25:29.649 --> 00:25:32.310
bitmap but unfortunately drawing to a
software bitmap can take a lot of time

00:25:32.310 --> 00:25:32.320
software bitmap can take a lot of time
 

00:25:32.320 --> 00:25:34.019
software bitmap can take a lot of time
especially if it's anywhere near screen

00:25:34.019 --> 00:25:34.029
especially if it's anywhere near screen
 

00:25:34.029 --> 00:25:37.619
especially if it's anywhere near screen
size canvas calls there are a few canvas

00:25:37.619 --> 00:25:37.629
size canvas calls there are a few canvas
 

00:25:37.629 --> 00:25:39.450
size canvas calls there are a few canvas
calls namely draw path if you're

00:25:39.450 --> 00:25:39.460
calls namely draw path if you're
 

00:25:39.460 --> 00:25:41.669
calls namely draw path if you're
mutating your path frequently save

00:25:41.669 --> 00:25:41.679
mutating your path frequently save
 

00:25:41.679 --> 00:25:43.379
mutating your path frequently save
layers it can be somewhat expensive and

00:25:43.379 --> 00:25:43.389
layers it can be somewhat expensive and
 

00:25:43.389 --> 00:25:44.669
layers it can be somewhat expensive and
we've actually gone out of our way to

00:25:44.669 --> 00:25:44.679
we've actually gone out of our way to
 

00:25:44.679 --> 00:25:46.560
we've actually gone out of our way to
document some of these and I'll mention

00:25:46.560 --> 00:25:46.570
document some of these and I'll mention
 

00:25:46.570 --> 00:25:48.210
document some of these and I'll mention
this in coming up but let's go quickly

00:25:48.210 --> 00:25:48.220
this in coming up but let's go quickly
 

00:25:48.220 --> 00:25:50.519
this in coming up but let's go quickly
to an example of binder because this has

00:25:50.519 --> 00:25:50.529
to an example of binder because this has
 

00:25:50.529 --> 00:25:54.259
to an example of binder because this has
been one of the one of the favorite of

00:25:54.259 --> 00:25:54.269
been one of the one of the favorite of
 

00:25:54.269 --> 00:25:56.580
been one of the one of the favorite of
Investigation's of the Android

00:25:56.580 --> 00:25:56.590
Investigation's of the Android
 

00:25:56.590 --> 00:25:59.310
Investigation's of the Android
performance team in the past release has

00:25:59.310 --> 00:25:59.320
performance team in the past release has
 

00:25:59.320 --> 00:26:01.440
performance team in the past release has
been looking and fixing binder binder

00:26:01.440 --> 00:26:01.450
been looking and fixing binder binder
 

00:26:01.450 --> 00:26:05.789
been looking and fixing binder binder
problems so binder is the IPC mechanism

00:26:05.789 --> 00:26:05.799
problems so binder is the IPC mechanism
 

00:26:05.799 --> 00:26:09.480
problems so binder is the IPC mechanism
on Android if you want to talk to window

00:26:09.480 --> 00:26:09.490
on Android if you want to talk to window
 

00:26:09.490 --> 00:26:12.659
on Android if you want to talk to window
manager or if the view hierarchy thinks

00:26:12.659 --> 00:26:12.669
manager or if the view hierarchy thinks
 

00:26:12.669 --> 00:26:14.100
manager or if the view hierarchy thinks
you want to talk to window manager

00:26:14.100 --> 00:26:14.110
you want to talk to window manager
 

00:26:14.110 --> 00:26:15.720
you want to talk to window manager
you're probably going through binder if

00:26:15.720 --> 00:26:15.730
you're probably going through binder if
 

00:26:15.730 --> 00:26:17.580
you're probably going through binder if
you're talking to another person's

00:26:17.580 --> 00:26:17.590
you're talking to another person's
 

00:26:17.590 --> 00:26:20.999
you're talking to another person's
content provider if you're talking to

00:26:20.999 --> 00:26:21.009
content provider if you're talking to
 

00:26:21.009 --> 00:26:21.919
content provider if you're talking to
surface flinger

00:26:21.919 --> 00:26:21.929
surface flinger
 

00:26:21.929 --> 00:26:24.960
surface flinger
if you're talking across IPC you're

00:26:24.960 --> 00:26:24.970
if you're talking across IPC you're
 

00:26:24.970 --> 00:26:26.249
if you're talking across IPC you're
probably going through a binder and

00:26:26.249 --> 00:26:26.259
probably going through a binder and
 

00:26:26.259 --> 00:26:27.690
probably going through a binder and
binder has tracing

00:26:27.690 --> 00:26:27.700
binder has tracing
 

00:26:27.700 --> 00:26:29.730
binder has tracing
now unfortunately IPC is often very

00:26:29.730 --> 00:26:29.740
now unfortunately IPC is often very
 

00:26:29.740 --> 00:26:33.029
now unfortunately IPC is often very
expensive and truth be told it can be

00:26:33.029 --> 00:26:33.039
expensive and truth be told it can be
 

00:26:33.039 --> 00:26:35.190
expensive and truth be told it can be
really easy to accidentally add to your

00:26:35.190 --> 00:26:35.200
really easy to accidentally add to your
 

00:26:35.200 --> 00:26:36.690
really easy to accidentally add to your
application here's a particular

00:26:36.690 --> 00:26:36.700
application here's a particular
 

00:26:36.700 --> 00:26:39.539
application here's a particular
screenshot of a systrace that has a lot

00:26:39.539 --> 00:26:39.549
screenshot of a systrace that has a lot
 

00:26:39.549 --> 00:26:41.759
screenshot of a systrace that has a lot
of binder transactions going on during

00:26:41.759 --> 00:26:41.769
of binder transactions going on during
 

00:26:41.769 --> 00:26:44.970
of binder transactions going on during
recycler view scroll if you look at the

00:26:44.970 --> 00:26:44.980
recycler view scroll if you look at the
 

00:26:44.980 --> 00:26:47.669
recycler view scroll if you look at the
finder finder oh my goodness and they're

00:26:47.669 --> 00:26:47.679
finder finder oh my goodness and they're
 

00:26:47.679 --> 00:26:49.109
finder finder oh my goodness and they're
just running another callback on the UI

00:26:49.109 --> 00:26:49.119
just running another callback on the UI
 

00:26:49.119 --> 00:26:51.119
just running another callback on the UI
thread running lots of binder all of

00:26:51.119 --> 00:26:51.129
thread running lots of binder all of
 

00:26:51.129 --> 00:26:53.249
thread running lots of binder all of
these are pretty significant it's the 21

00:26:53.249 --> 00:26:53.259
these are pretty significant it's the 21
 

00:26:53.259 --> 00:26:54.690
these are pretty significant it's the 21
millisecond frame it's not doing any

00:26:54.690 --> 00:26:54.700
millisecond frame it's not doing any
 

00:26:54.700 --> 00:26:56.580
millisecond frame it's not doing any
inflation it's not doing anything that

00:26:56.580 --> 00:26:56.590
inflation it's not doing anything that
 

00:26:56.590 --> 00:26:58.379
inflation it's not doing anything that
should absolutely take that long it's

00:26:58.379 --> 00:26:58.389
should absolutely take that long it's
 

00:26:58.389 --> 00:27:00.810
should absolutely take that long it's
just binder overheads doing work that

00:27:00.810 --> 00:27:00.820
just binder overheads doing work that
 

00:27:00.820 --> 00:27:02.070
just binder overheads doing work that
they really shouldn't be doing on the UI

00:27:02.070 --> 00:27:02.080
they really shouldn't be doing on the UI
 

00:27:02.080 --> 00:27:05.070
they really shouldn't be doing on the UI
thread so tracing binder can help a

00:27:05.070 --> 00:27:05.080
thread so tracing binder can help a
 

00:27:05.080 --> 00:27:06.269
thread so tracing binder can help a
whole lot and that's on by default

00:27:06.269 --> 00:27:06.279
whole lot and that's on by default
 

00:27:06.279 --> 00:27:12.119
whole lot and that's on by default
in the newest versions of systrace what

00:27:12.119 --> 00:27:12.129
in the newest versions of systrace what
 

00:27:12.129 --> 00:27:14.009
in the newest versions of systrace what
to summarize there's a lot of reasons

00:27:14.009 --> 00:27:14.019
to summarize there's a lot of reasons
 

00:27:14.019 --> 00:27:15.810
to summarize there's a lot of reasons
and we've documented a whole lot of them

00:27:15.810 --> 00:27:15.820
and we've documented a whole lot of them
 

00:27:15.820 --> 00:27:17.909
and we've documented a whole lot of them
if you go to do android comm slash

00:27:17.909 --> 00:27:17.919
if you go to do android comm slash
 

00:27:17.919 --> 00:27:19.740
if you go to do android comm slash
vitals we have a lot of the material in

00:27:19.740 --> 00:27:19.750
vitals we have a lot of the material in
 

00:27:19.750 --> 00:27:22.440
vitals we have a lot of the material in
this presentation a lot of those samples

00:27:22.440 --> 00:27:22.450
this presentation a lot of those samples
 

00:27:22.450 --> 00:27:24.899
this presentation a lot of those samples
that i went to more more in more depth

00:27:24.899 --> 00:27:24.909
that i went to more more in more depth
 

00:27:24.909 --> 00:27:28.200
that i went to more more in more depth
with code examples so on and so forth on

00:27:28.200 --> 00:27:28.210
with code examples so on and so forth on
 

00:27:28.210 --> 00:27:31.889
with code examples so on and so forth on
this website and so now i'm going to

00:27:31.889 --> 00:27:31.899
this website and so now i'm going to
 

00:27:31.899 --> 00:27:33.389
this website and so now i'm going to
pass it back to chest he's going to talk

00:27:33.389 --> 00:27:33.399
pass it back to chest he's going to talk
 

00:27:33.399 --> 00:27:34.830
pass it back to chest he's going to talk
about maintaining performance in your

00:27:34.830 --> 00:27:34.840
about maintaining performance in your
 

00:27:34.840 --> 00:27:37.169
about maintaining performance in your
app I should point out to that that the

00:27:37.169 --> 00:27:37.179
app I should point out to that that the
 

00:27:37.179 --> 00:27:38.999
app I should point out to that that the
document site that Chris pointed to is

00:27:38.999 --> 00:27:39.009
document site that Chris pointed to is
 

00:27:39.009 --> 00:27:42.119
document site that Chris pointed to is
new it was just supposed to add yeah so

00:27:42.119 --> 00:27:42.129
new it was just supposed to add yeah so
 

00:27:42.129 --> 00:27:43.470
new it was just supposed to add yeah so
if you think you know the performance

00:27:43.470 --> 00:27:43.480
if you think you know the performance
 

00:27:43.480 --> 00:27:44.970
if you think you know the performance
docs on the site you might want to check

00:27:44.970 --> 00:27:44.980
docs on the site you might want to check
 

00:27:44.980 --> 00:27:47.039
docs on the site you might want to check
it out anyway much more detailed

00:27:47.039 --> 00:27:47.049
it out anyway much more detailed
 

00:27:47.049 --> 00:27:49.440
it out anyway much more detailed
in-depth info and the documentation team

00:27:49.440 --> 00:27:49.450
in-depth info and the documentation team
 

00:27:49.450 --> 00:27:51.119
in-depth info and the documentation team
was working really closely with the

00:27:51.119 --> 00:27:51.129
was working really closely with the
 

00:27:51.129 --> 00:27:53.159
was working really closely with the
engineers like Chris and other teams to

00:27:53.159 --> 00:27:53.169
engineers like Chris and other teams to
 

00:27:53.169 --> 00:27:54.509
engineers like Chris and other teams to
get the information that was really

00:27:54.509 --> 00:27:54.519
get the information that was really
 

00:27:54.519 --> 00:27:57.119
get the information that was really
accurate and and deep to help you with

00:27:57.119 --> 00:27:57.129
accurate and and deep to help you with
 

00:27:57.129 --> 00:27:59.340
accurate and and deep to help you with
this be janking so let's talk about how

00:27:59.340 --> 00:27:59.350
this be janking so let's talk about how
 

00:27:59.350 --> 00:28:01.740
this be janking so let's talk about how
you can find and fix and actually

00:28:01.740 --> 00:28:01.750
you can find and fix and actually
 

00:28:01.750 --> 00:28:04.259
you can find and fix and actually
maintain your own app performance it

00:28:04.259 --> 00:28:04.269
maintain your own app performance it
 

00:28:04.269 --> 00:28:06.539
maintain your own app performance it
boils down to sort of four steps you can

00:28:06.539 --> 00:28:06.549
boils down to sort of four steps you can
 

00:28:06.549 --> 00:28:08.190
boils down to sort of four steps you can
think of one is that you can gather

00:28:08.190 --> 00:28:08.200
think of one is that you can gather
 

00:28:08.200 --> 00:28:10.200
think of one is that you can gather
users to physics to actually figure out

00:28:10.200 --> 00:28:10.210
users to physics to actually figure out
 

00:28:10.210 --> 00:28:12.269
users to physics to actually figure out
where the problems are you can add your

00:28:12.269 --> 00:28:12.279
where the problems are you can add your
 

00:28:12.279 --> 00:28:14.369
where the problems are you can add your
own tracing it's important to note when

00:28:14.369 --> 00:28:14.379
own tracing it's important to note when
 

00:28:14.379 --> 00:28:15.600
own tracing it's important to note when
we're looking at all the sister aid

00:28:15.600 --> 00:28:15.610
we're looking at all the sister aid
 

00:28:15.610 --> 00:28:18.180
we're looking at all the sister aid
stuff that Chris Wood was showing that's

00:28:18.180 --> 00:28:18.190
stuff that Chris Wood was showing that's
 

00:28:18.190 --> 00:28:21.450
stuff that Chris Wood was showing that's
not a sampling profiler it's not a you

00:28:21.450 --> 00:28:21.460
not a sampling profiler it's not a you
 

00:28:21.460 --> 00:28:22.799
not a sampling profiler it's not a you
know we're not seeing like per method

00:28:22.799 --> 00:28:22.809
know we're not seeing like per method
 

00:28:22.809 --> 00:28:24.330
know we're not seeing like per method
calls that's not all the stuff that's

00:28:24.330 --> 00:28:24.340
calls that's not all the stuff that's
 

00:28:24.340 --> 00:28:26.310
calls that's not all the stuff that's
going on in your application those are

00:28:26.310 --> 00:28:26.320
going on in your application those are
 

00:28:26.320 --> 00:28:27.810
going on in your application those are
specific traces that we have

00:28:27.810 --> 00:28:27.820
specific traces that we have
 

00:28:27.820 --> 00:28:29.220
specific traces that we have
instrumented the framework and the

00:28:29.220 --> 00:28:29.230
instrumented the framework and the
 

00:28:29.230 --> 00:28:31.230
instrumented the framework and the
platform code with so the only thing

00:28:31.230 --> 00:28:31.240
platform code with so the only thing
 

00:28:31.240 --> 00:28:32.909
platform code with so the only thing
you're going to see in sis traits are

00:28:32.909 --> 00:28:32.919
you're going to see in sis traits are
 

00:28:32.919 --> 00:28:35.279
you're going to see in sis traits are
the traces that we've actually added to

00:28:35.279 --> 00:28:35.289
the traces that we've actually added to
 

00:28:35.289 --> 00:28:36.720
the traces that we've actually added to
the platform

00:28:36.720 --> 00:28:36.730
the platform
 

00:28:36.730 --> 00:28:38.970
the platform
because if we add a ton of traces then

00:28:38.970 --> 00:28:38.980
because if we add a ton of traces then
 

00:28:38.980 --> 00:28:40.409
because if we add a ton of traces then
it's going to slow down the application

00:28:40.409 --> 00:28:40.419
it's going to slow down the application
 

00:28:40.419 --> 00:28:42.090
it's going to slow down the application
so we add it in two places where it

00:28:42.090 --> 00:28:42.100
so we add it in two places where it
 

00:28:42.100 --> 00:28:44.520
so we add it in two places where it
really makes sense so you can actually

00:28:44.520 --> 00:28:44.530
really makes sense so you can actually
 

00:28:44.530 --> 00:28:46.049
really makes sense so you can actually
add your own tracing stuff we'll show

00:28:46.049 --> 00:28:46.059
add your own tracing stuff we'll show
 

00:28:46.059 --> 00:28:49.080
add your own tracing stuff we'll show
you how to do that you can add jank test

00:28:49.080 --> 00:28:49.090
you how to do that you can add jank test
 

00:28:49.090 --> 00:28:51.990
you how to do that you can add jank test
so maybe you actually need continuous

00:28:51.990 --> 00:28:52.000
so maybe you actually need continuous
 

00:28:52.000 --> 00:28:55.350
so maybe you actually need continuous
test so that you can tell when you when

00:28:55.350 --> 00:28:55.360
test so that you can tell when you when
 

00:28:55.360 --> 00:28:57.120
test so that you can tell when you when
you implement a change and you have a

00:28:57.120 --> 00:28:57.130
you implement a change and you have a
 

00:28:57.130 --> 00:28:58.980
you implement a change and you have a
new build of your application and your

00:28:58.980 --> 00:28:58.990
new build of your application and your
 

00:28:58.990 --> 00:29:00.330
new build of your application and your
performance goes down wouldn't it be

00:29:00.330 --> 00:29:00.340
performance goes down wouldn't it be
 

00:29:00.340 --> 00:29:02.700
performance goes down wouldn't it be
nice if you knew that instead of

00:29:02.700 --> 00:29:02.710
nice if you knew that instead of
 

00:29:02.710 --> 00:29:04.710
nice if you knew that instead of
depending on you know lower ratings on

00:29:04.710 --> 00:29:04.720
depending on you know lower ratings on
 

00:29:04.720 --> 00:29:06.330
depending on you know lower ratings on
Playstore because your users are the

00:29:06.330 --> 00:29:06.340
Playstore because your users are the
 

00:29:06.340 --> 00:29:08.100
Playstore because your users are the
first ones to see that maybe you could

00:29:08.100 --> 00:29:08.110
first ones to see that maybe you could
 

00:29:08.110 --> 00:29:09.570
first ones to see that maybe you could
actually have continuous tests that can

00:29:09.570 --> 00:29:09.580
actually have continuous tests that can
 

00:29:09.580 --> 00:29:11.760
actually have continuous tests that can
catch that for you and then finally use

00:29:11.760 --> 00:29:11.770
catch that for you and then finally use
 

00:29:11.770 --> 00:29:13.620
catch that for you and then finally use
the tools we went in depth on systrace

00:29:13.620 --> 00:29:13.630
the tools we went in depth on systrace
 

00:29:13.630 --> 00:29:14.940
the tools we went in depth on systrace
but it's worth thinking about some other

00:29:14.940 --> 00:29:14.950
but it's worth thinking about some other
 

00:29:14.950 --> 00:29:16.620
but it's worth thinking about some other
ones that should be a part of your

00:29:16.620 --> 00:29:16.630
ones that should be a part of your
 

00:29:16.630 --> 00:29:19.560
ones that should be a part of your
normal toolbox when you're developing so

00:29:19.560 --> 00:29:19.570
normal toolbox when you're developing so
 

00:29:19.570 --> 00:29:21.690
normal toolbox when you're developing so
one of the things I should point out in

00:29:21.690 --> 00:29:21.700
one of the things I should point out in
 

00:29:21.700 --> 00:29:24.960
one of the things I should point out in
looking at the user stats is this is a

00:29:24.960 --> 00:29:24.970
looking at the user stats is this is a
 

00:29:24.970 --> 00:29:27.870
looking at the user stats is this is a
screenshot of a dashboard that is now

00:29:27.870 --> 00:29:27.880
screenshot of a dashboard that is now
 

00:29:27.880 --> 00:29:30.030
screenshot of a dashboard that is now
it's actually sort of a theoretical

00:29:30.030 --> 00:29:30.040
it's actually sort of a theoretical
 

00:29:30.040 --> 00:29:32.940
it's actually sort of a theoretical
screenshots we don't actually give grey

00:29:32.940 --> 00:29:32.950
screenshots we don't actually give grey
 

00:29:32.950 --> 00:29:35.940
screenshots we don't actually give grey
boxes that would mean nothing so this is

00:29:35.940 --> 00:29:35.950
boxes that would mean nothing so this is
 

00:29:35.950 --> 00:29:39.419
boxes that would mean nothing so this is
from a talk that the play team gave on

00:29:39.419 --> 00:29:39.429
from a talk that the play team gave on
 

00:29:39.429 --> 00:29:42.150
from a talk that the play team gave on
Wednesday and talked about the different

00:29:42.150 --> 00:29:42.160
Wednesday and talked about the different
 

00:29:42.160 --> 00:29:43.409
Wednesday and talked about the different
metrics that they can provide on the

00:29:43.409 --> 00:29:43.419
metrics that they can provide on the
 

00:29:43.419 --> 00:29:46.320
metrics that they can provide on the
dashboard now so there are metrics that

00:29:46.320 --> 00:29:46.330
dashboard now so there are metrics that
 

00:29:46.330 --> 00:29:48.510
dashboard now so there are metrics that
are being calculated and stored on the

00:29:48.510 --> 00:29:48.520
are being calculated and stored on the
 

00:29:48.520 --> 00:29:50.340
are being calculated and stored on the
device that depending on whether the

00:29:50.340 --> 00:29:50.350
device that depending on whether the
 

00:29:50.350 --> 00:29:52.409
device that depending on whether the
user opts into it may be uploaded and

00:29:52.409 --> 00:29:52.419
user opts into it may be uploaded and
 

00:29:52.419 --> 00:29:54.270
user opts into it may be uploaded and
then can be information on your

00:29:54.270 --> 00:29:54.280
then can be information on your
 

00:29:54.280 --> 00:29:56.190
then can be information on your
dashboard for your application so you

00:29:56.190 --> 00:29:56.200
dashboard for your application so you
 

00:29:56.200 --> 00:29:58.230
dashboard for your application so you
can see what people are actually seeing

00:29:58.230 --> 00:29:58.240
can see what people are actually seeing
 

00:29:58.240 --> 00:30:00.840
can see what people are actually seeing
in the real world including jank sets so

00:30:00.840 --> 00:30:00.850
in the real world including jank sets so
 

00:30:00.850 --> 00:30:02.640
in the real world including jank sets so
how many of your frames are coming in

00:30:02.640 --> 00:30:02.650
how many of your frames are coming in
 

00:30:02.650 --> 00:30:04.350
how many of your frames are coming in
that's sort of a histogram of these

00:30:04.350 --> 00:30:04.360
that's sort of a histogram of these
 

00:30:04.360 --> 00:30:07.049
that's sort of a histogram of these
duration buckets so how many frames are

00:30:07.049 --> 00:30:07.059
duration buckets so how many frames are
 

00:30:07.059 --> 00:30:09.090
duration buckets so how many frames are
coming in at each level of that

00:30:09.090 --> 00:30:09.100
coming in at each level of that
 

00:30:09.100 --> 00:30:11.760
coming in at each level of that
histogram so you can get an idea not

00:30:11.760 --> 00:30:11.770
histogram so you can get an idea not
 

00:30:11.770 --> 00:30:13.799
histogram so you can get an idea not
just for how your application is doing

00:30:13.799 --> 00:30:13.809
just for how your application is doing
 

00:30:13.809 --> 00:30:16.080
just for how your application is doing
in general but also if you just updated

00:30:16.080 --> 00:30:16.090
in general but also if you just updated
 

00:30:16.090 --> 00:30:18.240
in general but also if you just updated
it and things got worse wouldn't that be

00:30:18.240 --> 00:30:18.250
it and things got worse wouldn't that be
 

00:30:18.250 --> 00:30:21.480
it and things got worse wouldn't that be
nice to know that information

00:30:21.480 --> 00:30:21.490
nice to know that information
 

00:30:21.490 --> 00:30:25.230
nice to know that information
that's being aggregated and and shown in

00:30:25.230 --> 00:30:25.240
that's being aggregated and and shown in
 

00:30:25.240 --> 00:30:26.700
that's being aggregated and and shown in
the play dashboard is actually coming

00:30:26.700 --> 00:30:26.710
the play dashboard is actually coming
 

00:30:26.710 --> 00:30:28.500
the play dashboard is actually coming
from internals that we have in the

00:30:28.500 --> 00:30:28.510
from internals that we have in the
 

00:30:28.510 --> 00:30:31.169
from internals that we have in the
platform that were injected in the N

00:30:31.169 --> 00:30:31.179
platform that were injected in the N
 

00:30:31.179 --> 00:30:33.150
platform that were injected in the N
release where we have this thing called

00:30:33.150 --> 00:30:33.160
release where we have this thing called
 

00:30:33.160 --> 00:30:35.490
release where we have this thing called
frame metrics and we have an API around

00:30:35.490 --> 00:30:35.500
frame metrics and we have an API around
 

00:30:35.500 --> 00:30:38.760
frame metrics and we have an API around
that as well and we compile this thing

00:30:38.760 --> 00:30:38.770
that as well and we compile this thing
 

00:30:38.770 --> 00:30:40.289
that as well and we compile this thing
at a very low level but you can listen

00:30:40.289 --> 00:30:40.299
at a very low level but you can listen
 

00:30:40.299 --> 00:30:42.510
at a very low level but you can listen
in on that you can implement this on

00:30:42.510 --> 00:30:42.520
in on that you can implement this on
 

00:30:42.520 --> 00:30:45.030
in on that you can implement this on
frame metrics available listener and get

00:30:45.030 --> 00:30:45.040
frame metrics available listener and get
 

00:30:45.040 --> 00:30:47.039
frame metrics available listener and get
the per frame callback data that says

00:30:47.039 --> 00:30:47.049
the per frame callback data that says
 

00:30:47.049 --> 00:30:47.640
the per frame callback data that says
okay

00:30:47.640 --> 00:30:47.650
okay
 

00:30:47.650 --> 00:30:49.560
okay
here's what the duration was for each of

00:30:49.560 --> 00:30:49.570
here's what the duration was for each of
 

00:30:49.570 --> 00:30:50.430
here's what the duration was for each of
these individuals

00:30:50.430 --> 00:30:50.440
these individuals
 

00:30:50.440 --> 00:30:52.320
these individuals
and if you think about if you've done

00:30:52.320 --> 00:30:52.330
and if you think about if you've done
 

00:30:52.330 --> 00:30:54.149
and if you think about if you've done
the GPU profile or the on screen

00:30:54.149 --> 00:30:54.159
the GPU profile or the on screen
 

00:30:54.159 --> 00:30:56.700
the GPU profile or the on screen
profiler we saw the screenshot earlier

00:30:56.700 --> 00:30:56.710
profiler we saw the screenshot earlier
 

00:30:56.710 --> 00:30:58.710
profiler we saw the screenshot earlier
all of that information is exactly the

00:30:58.710 --> 00:30:58.720
all of that information is exactly the
 

00:30:58.720 --> 00:31:00.090
all of that information is exactly the
durations that you get from the frame

00:31:00.090 --> 00:31:00.100
durations that you get from the frame
 

00:31:00.100 --> 00:31:02.159
durations that you get from the frame
metrics listener how long did input take

00:31:02.159 --> 00:31:02.169
metrics listener how long did input take
 

00:31:02.169 --> 00:31:03.990
metrics listener how long did input take
how long did the animation take how long

00:31:03.990 --> 00:31:04.000
how long did the animation take how long
 

00:31:04.000 --> 00:31:05.700
how long did the animation take how long
was the total duration of the frame so

00:31:05.700 --> 00:31:05.710
was the total duration of the frame so
 

00:31:05.710 --> 00:31:07.230
was the total duration of the frame so
you can get all of that information to

00:31:07.230 --> 00:31:07.240
you can get all of that information to
 

00:31:07.240 --> 00:31:09.149
you can get all of that information to
aggregate it yourself and then upload

00:31:09.149 --> 00:31:09.159
aggregate it yourself and then upload
 

00:31:09.159 --> 00:31:11.730
aggregate it yourself and then upload
and analyze to your heart's content we

00:31:11.730 --> 00:31:11.740
and analyze to your heart's content we
 

00:31:11.740 --> 00:31:14.369
and analyze to your heart's content we
simplified that a little bit in b-26 of

00:31:14.369 --> 00:31:14.379
simplified that a little bit in b-26 of
 

00:31:14.379 --> 00:31:16.549
simplified that a little bit in b-26 of
the support lib so the beta release

00:31:16.549 --> 00:31:16.559
the support lib so the beta release
 

00:31:16.559 --> 00:31:19.350
the support lib so the beta release
should have those bits now so instead of

00:31:19.350 --> 00:31:19.360
should have those bits now so instead of
 

00:31:19.360 --> 00:31:21.060
should have those bits now so instead of
listening per frame and getting the

00:31:21.060 --> 00:31:21.070
listening per frame and getting the
 

00:31:21.070 --> 00:31:23.039
listening per frame and getting the
duration and then needing to aggregate

00:31:23.039 --> 00:31:23.049
duration and then needing to aggregate
 

00:31:23.049 --> 00:31:25.110
duration and then needing to aggregate
them we aggregate them for you so you

00:31:25.110 --> 00:31:25.120
them we aggregate them for you so you
 

00:31:25.120 --> 00:31:27.960
them we aggregate them for you so you
can get this parse int array of duration

00:31:27.960 --> 00:31:27.970
can get this parse int array of duration
 

00:31:27.970 --> 00:31:31.169
can get this parse int array of duration
buckets basically a histogram and then

00:31:31.169 --> 00:31:31.179
buckets basically a histogram and then
 

00:31:31.179 --> 00:31:33.210
buckets basically a histogram and then
again you can compile aggregate this

00:31:33.210 --> 00:31:33.220
again you can compile aggregate this
 

00:31:33.220 --> 00:31:35.340
again you can compile aggregate this
stuff on the device and then upload it

00:31:35.340 --> 00:31:35.350
stuff on the device and then upload it
 

00:31:35.350 --> 00:31:37.950
stuff on the device and then upload it
to whatever server you choose to analyze

00:31:37.950 --> 00:31:37.960
to whatever server you choose to analyze
 

00:31:37.960 --> 00:31:41.100
to whatever server you choose to analyze
offline so the Playstore dashboard does

00:31:41.100 --> 00:31:41.110
offline so the Playstore dashboard does
 

00:31:41.110 --> 00:31:42.600
offline so the Playstore dashboard does
that for you for your overall

00:31:42.600 --> 00:31:42.610
that for you for your overall
 

00:31:42.610 --> 00:31:44.310
that for you for your overall
application but if you want to

00:31:44.310 --> 00:31:44.320
application but if you want to
 

00:31:44.320 --> 00:31:46.169
application but if you want to
instrument particular flows in your

00:31:46.169 --> 00:31:46.179
instrument particular flows in your
 

00:31:46.179 --> 00:31:48.180
instrument particular flows in your
application that are really sensitive or

00:31:48.180 --> 00:31:48.190
application that are really sensitive or
 

00:31:48.190 --> 00:31:50.310
application that are really sensitive or
important for you to get right then you

00:31:50.310 --> 00:31:50.320
important for you to get right then you
 

00:31:50.320 --> 00:31:51.930
important for you to get right then you
can choose to do that with the frame

00:31:51.930 --> 00:31:51.940
can choose to do that with the frame
 

00:31:51.940 --> 00:31:55.919
can choose to do that with the frame
metric stuff custom tracing so as I said

00:31:55.919 --> 00:31:55.929
metric stuff custom tracing so as I said
 

00:31:55.929 --> 00:31:57.330
metric stuff custom tracing so as I said
all of the traces that we saw in the

00:31:57.330 --> 00:31:57.340
all of the traces that we saw in the
 

00:31:57.340 --> 00:31:58.680
all of the traces that we saw in the
test rates example that Chris was

00:31:58.680 --> 00:31:58.690
test rates example that Chris was
 

00:31:58.690 --> 00:32:00.659
test rates example that Chris was
showing were the standard traces that we

00:32:00.659 --> 00:32:00.669
showing were the standard traces that we
 

00:32:00.669 --> 00:32:02.340
showing were the standard traces that we
have in the platform but you have the

00:32:02.340 --> 00:32:02.350
have in the platform but you have the
 

00:32:02.350 --> 00:32:04.080
have in the platform but you have the
ability to add your own traces in your

00:32:04.080 --> 00:32:04.090
ability to add your own traces in your
 

00:32:04.090 --> 00:32:06.810
ability to add your own traces in your
application so you should think about

00:32:06.810 --> 00:32:06.820
application so you should think about
 

00:32:06.820 --> 00:32:08.610
application so you should think about
doing this for some of the things that

00:32:08.610 --> 00:32:08.620
doing this for some of the things that
 

00:32:08.620 --> 00:32:10.169
doing this for some of the things that
you think might be more expensive where

00:32:10.169 --> 00:32:10.179
you think might be more expensive where
 

00:32:10.179 --> 00:32:13.200
you think might be more expensive where
you know you're you know triggering I

00:32:13.200 --> 00:32:13.210
you know you're you know triggering I
 

00:32:13.210 --> 00:32:15.960
you know you're you know triggering I
don't know layouts or whatever you want

00:32:15.960 --> 00:32:15.970
don't know layouts or whatever you want
 

00:32:15.970 --> 00:32:18.269
don't know layouts or whatever you want
to do it for for when you're binding

00:32:18.269 --> 00:32:18.279
to do it for for when you're binding
 

00:32:18.279 --> 00:32:20.039
to do it for for when you're binding
views or creating things that may be

00:32:20.039 --> 00:32:20.049
views or creating things that may be
 

00:32:20.049 --> 00:32:21.690
views or creating things that may be
expensive maybe you want to add a trace

00:32:21.690 --> 00:32:21.700
expensive maybe you want to add a trace
 

00:32:21.700 --> 00:32:24.360
expensive maybe you want to add a trace
there and sort of see what that time is

00:32:24.360 --> 00:32:24.370
there and sort of see what that time is
 

00:32:24.370 --> 00:32:25.919
there and sort of see what that time is
going to be and what it looks like in

00:32:25.919 --> 00:32:25.929
going to be and what it looks like in
 

00:32:25.929 --> 00:32:27.810
going to be and what it looks like in
systrace it's important to know that the

00:32:27.810 --> 00:32:27.820
systrace it's important to know that the
 

00:32:27.820 --> 00:32:29.519
systrace it's important to know that the
more you instrument the more time you're

00:32:29.519 --> 00:32:29.529
more you instrument the more time you're
 

00:32:29.529 --> 00:32:31.799
more you instrument the more time you're
going to spend actually outputting the

00:32:31.799 --> 00:32:31.809
going to spend actually outputting the
 

00:32:31.809 --> 00:32:33.509
going to spend actually outputting the
instrumentation information that's why

00:32:33.509 --> 00:32:33.519
instrumentation information that's why
 

00:32:33.519 --> 00:32:34.889
instrumentation information that's why
we don't have you know per method

00:32:34.889 --> 00:32:34.899
we don't have you know per method
 

00:32:34.899 --> 00:32:37.320
we don't have you know per method
instrumentation on one hand you don't

00:32:37.320 --> 00:32:37.330
instrumentation on one hand you don't
 

00:32:37.330 --> 00:32:38.909
instrumentation on one hand you don't
want too much information in systrace

00:32:38.909 --> 00:32:38.919
want too much information in systrace
 

00:32:38.919 --> 00:32:40.259
want too much information in systrace
because then the important information

00:32:40.259 --> 00:32:40.269
because then the important information
 

00:32:40.269 --> 00:32:42.119
because then the important information
gets lost but also you don't want to

00:32:42.119 --> 00:32:42.129
gets lost but also you don't want to
 

00:32:42.129 --> 00:32:44.009
gets lost but also you don't want to
actually skew your time by the

00:32:44.009 --> 00:32:44.019
actually skew your time by the
 

00:32:44.019 --> 00:32:45.480
actually skew your time by the
instrumentation calls that you're

00:32:45.480 --> 00:32:45.490
instrumentation calls that you're
 

00:32:45.490 --> 00:32:47.759
instrumentation calls that you're
actually making right so same thing is

00:32:47.759 --> 00:32:47.769
actually making right so same thing is
 

00:32:47.769 --> 00:32:49.980
actually making right so same thing is
true for your application so you should

00:32:49.980 --> 00:32:49.990
true for your application so you should
 

00:32:49.990 --> 00:32:51.240
true for your application so you should
think about you know if it's going to

00:32:51.240 --> 00:32:51.250
think about you know if it's going to
 

00:32:51.250 --> 00:32:53.519
think about you know if it's going to
take greater than a half a millisecond

00:32:53.519 --> 00:32:53.529
take greater than a half a millisecond
 

00:32:53.529 --> 00:32:55.590
take greater than a half a millisecond
then the overhead of the instrumentation

00:32:55.590 --> 00:32:55.600
then the overhead of the instrumentation
 

00:32:55.600 --> 00:32:56.850
then the overhead of the instrumentation
is going to be in the noise but it's

00:32:56.850 --> 00:32:56.860
is going to be in the noise but it's
 

00:32:56.860 --> 00:32:58.769
is going to be in the noise but it's
much it's much faster than that you

00:32:58.769 --> 00:32:58.779
much it's much faster than that you
 

00:32:58.779 --> 00:33:00.240
much it's much faster than that you
probably don't want to do that at least

00:33:00.240 --> 00:33:00.250
probably don't want to do that at least
 

00:33:00.250 --> 00:33:01.529
probably don't want to do that at least
not on any permanent

00:33:01.529 --> 00:33:01.539
not on any permanent
 

00:33:01.539 --> 00:33:05.940
not on any permanent
cases and performance tests it's always

00:33:05.940 --> 00:33:05.950
cases and performance tests it's always
 

00:33:05.950 --> 00:33:07.680
cases and performance tests it's always
good to have tests anyway wouldn't it be

00:33:07.680 --> 00:33:07.690
good to have tests anyway wouldn't it be
 

00:33:07.690 --> 00:33:09.389
good to have tests anyway wouldn't it be
nice if you actually knew when you were

00:33:09.389 --> 00:33:09.399
nice if you actually knew when you were
 

00:33:09.399 --> 00:33:11.789
nice if you actually knew when you were
triggering a performance problem this is

00:33:11.789 --> 00:33:11.799
triggering a performance problem this is
 

00:33:11.799 --> 00:33:13.469
triggering a performance problem this is
especially true for big apps and big

00:33:13.469 --> 00:33:13.479
especially true for big apps and big
 

00:33:13.479 --> 00:33:15.749
especially true for big apps and big
teams so if you have many developers

00:33:15.749 --> 00:33:15.759
teams so if you have many developers
 

00:33:15.759 --> 00:33:17.430
teams so if you have many developers
trucking code into a common code base

00:33:17.430 --> 00:33:17.440
trucking code into a common code base
 

00:33:17.440 --> 00:33:19.919
trucking code into a common code base
it's good to have an automated way of

00:33:19.919 --> 00:33:19.929
it's good to have an automated way of
 

00:33:19.929 --> 00:33:21.570
it's good to have an automated way of
detecting when problems come in if

00:33:21.570 --> 00:33:21.580
detecting when problems come in if
 

00:33:21.580 --> 00:33:22.950
detecting when problems come in if
they're not if you have developers

00:33:22.950 --> 00:33:22.960
they're not if you have developers
 

00:33:22.960 --> 00:33:24.509
they're not if you have developers
trucking code in and that are not as

00:33:24.509 --> 00:33:24.519
trucking code in and that are not as
 

00:33:24.519 --> 00:33:26.789
trucking code in and that are not as
familiar with your architecture or your

00:33:26.789 --> 00:33:26.799
familiar with your architecture or your
 

00:33:26.799 --> 00:33:28.739
familiar with your architecture or your
practices then you want to be able to

00:33:28.739 --> 00:33:28.749
practices then you want to be able to
 

00:33:28.749 --> 00:33:30.930
practices then you want to be able to
detect that earlier instead of catching

00:33:30.930 --> 00:33:30.940
detect that earlier instead of catching
 

00:33:30.940 --> 00:33:33.810
detect that earlier instead of catching
it the users level and you want to in

00:33:33.810 --> 00:33:33.820
it the users level and you want to in
 

00:33:33.820 --> 00:33:37.259
it the users level and you want to in
particular have tests around the areas

00:33:37.259 --> 00:33:37.269
particular have tests around the areas
 

00:33:37.269 --> 00:33:39.330
particular have tests around the areas
of your UI that are more important right

00:33:39.330 --> 00:33:39.340
of your UI that are more important right
 

00:33:39.340 --> 00:33:41.430
of your UI that are more important right
so if there's a common feed some you

00:33:41.430 --> 00:33:41.440
so if there's a common feed some you
 

00:33:41.440 --> 00:33:42.950
so if there's a common feed some you
know common ListView recyclerview

00:33:42.950 --> 00:33:42.960
know common ListView recyclerview
 

00:33:42.960 --> 00:33:44.759
know common ListView recyclerview
situation that people are going to be

00:33:44.759 --> 00:33:44.769
situation that people are going to be
 

00:33:44.769 --> 00:33:47.339
situation that people are going to be
going into all the time if that's where

00:33:47.339 --> 00:33:47.349
going into all the time if that's where
 

00:33:47.349 --> 00:33:49.349
going into all the time if that's where
everybody lands well create some

00:33:49.349 --> 00:33:49.359
everybody lands well create some
 

00:33:49.359 --> 00:33:50.909
everybody lands well create some
performance tests around that and make

00:33:50.909 --> 00:33:50.919
performance tests around that and make
 

00:33:50.919 --> 00:33:54.690
performance tests around that and make
sure that that code stays tight you can

00:33:54.690 --> 00:33:54.700
sure that that code stays tight you can
 

00:33:54.700 --> 00:33:58.320
sure that that code stays tight you can
gather the data on the user side on the

00:33:58.320 --> 00:33:58.330
gather the data on the user side on the
 

00:33:58.330 --> 00:33:59.999
gather the data on the user side on the
on the device side and app side and

00:33:59.999 --> 00:34:00.009
on the device side and app side and
 

00:34:00.009 --> 00:34:02.609
on the device side and app side and
frame metrics aggregator or you can also

00:34:02.609 --> 00:34:02.619
frame metrics aggregator or you can also
 

00:34:02.619 --> 00:34:04.109
frame metrics aggregator or you can also
do it on the host sides you can run

00:34:04.109 --> 00:34:04.119
do it on the host sides you can run
 

00:34:04.119 --> 00:34:06.690
do it on the host sides you can run
these command line tools dumps this gfx

00:34:06.690 --> 00:34:06.700
these command line tools dumps this gfx
 

00:34:06.700 --> 00:34:08.549
these command line tools dumps this gfx
info that will get all of that

00:34:08.549 --> 00:34:08.559
info that will get all of that
 

00:34:08.559 --> 00:34:11.460
info that will get all of that
information GFX info again this is the

00:34:11.460 --> 00:34:11.470
information GFX info again this is the
 

00:34:11.470 --> 00:34:13.500
information GFX info again this is the
same it's a different view into exactly

00:34:13.500 --> 00:34:13.510
same it's a different view into exactly
 

00:34:13.510 --> 00:34:14.940
same it's a different view into exactly
the same kind of duration data that I

00:34:14.940 --> 00:34:14.950
the same kind of duration data that I
 

00:34:14.950 --> 00:34:16.799
the same kind of duration data that I
was talking about earlier that you see

00:34:16.799 --> 00:34:16.809
was talking about earlier that you see
 

00:34:16.809 --> 00:34:18.690
was talking about earlier that you see
in GPU profiling that you see in frame

00:34:18.690 --> 00:34:18.700
in GPU profiling that you see in frame
 

00:34:18.700 --> 00:34:20.849
in GPU profiling that you see in frame
metrics aggregation and in particularly

00:34:20.849 --> 00:34:20.859
metrics aggregation and in particularly
 

00:34:20.859 --> 00:34:22.950
metrics aggregation and in particularly
you want to watch what's going on with

00:34:22.950 --> 00:34:22.960
you want to watch what's going on with
 

00:34:22.960 --> 00:34:24.569
you want to watch what's going on with
the different percentiles of your app if

00:34:24.569 --> 00:34:24.579
the different percentiles of your app if
 

00:34:24.579 --> 00:34:26.639
the different percentiles of your app if
you skip a frame occasionally no big

00:34:26.639 --> 00:34:26.649
you skip a frame occasionally no big
 

00:34:26.649 --> 00:34:29.309
you skip a frame occasionally no big
deal if occasionally you have a 700

00:34:29.309 --> 00:34:29.319
deal if occasionally you have a 700
 

00:34:29.319 --> 00:34:31.589
deal if occasionally you have a 700
millisecond frame drop that's probably a

00:34:31.589 --> 00:34:31.599
millisecond frame drop that's probably a
 

00:34:31.599 --> 00:34:33.629
millisecond frame drop that's probably a
big deal or if you have 10% of your

00:34:33.629 --> 00:34:33.639
big deal or if you have 10% of your
 

00:34:33.639 --> 00:34:35.579
big deal or if you have 10% of your
frames that are actually missing their

00:34:35.579 --> 00:34:35.589
frames that are actually missing their
 

00:34:35.589 --> 00:34:37.770
frames that are actually missing their
boundaries that's a big deal right so

00:34:37.770 --> 00:34:37.780
boundaries that's a big deal right so
 

00:34:37.780 --> 00:34:40.349
boundaries that's a big deal right so
just pay attention to a what your app is

00:34:40.349 --> 00:34:40.359
just pay attention to a what your app is
 

00:34:40.359 --> 00:34:42.780
just pay attention to a what your app is
doing and know and know what the

00:34:42.780 --> 00:34:42.790
doing and know and know what the
 

00:34:42.790 --> 00:34:44.579
doing and know and know what the
performance is like and try to get that

00:34:44.579 --> 00:34:44.589
performance is like and try to get that
 

00:34:44.589 --> 00:34:45.960
performance is like and try to get that
performance as good as you can but also

00:34:45.960 --> 00:34:45.970
performance as good as you can but also
 

00:34:45.970 --> 00:34:48.000
performance as good as you can but also
pay attention to what's changing over

00:34:48.000 --> 00:34:48.010
pay attention to what's changing over
 

00:34:48.010 --> 00:34:50.129
pay attention to what's changing over
time as you update that app make sure

00:34:50.129 --> 00:34:50.139
time as you update that app make sure
 

00:34:50.139 --> 00:34:51.569
time as you update that app make sure
that you're not losing performance as

00:34:51.569 --> 00:34:51.579
that you're not losing performance as
 

00:34:51.579 --> 00:34:54.450
that you're not losing performance as
you do it and then finally use the tool

00:34:54.450 --> 00:34:54.460
you do it and then finally use the tool
 

00:34:54.460 --> 00:34:56.309
you do it and then finally use the tool
so we talked about profile GPU rendering

00:34:56.309 --> 00:34:56.319
so we talked about profile GPU rendering
 

00:34:56.319 --> 00:34:58.470
so we talked about profile GPU rendering
something you can enable in developer

00:34:58.470 --> 00:34:58.480
something you can enable in developer
 

00:34:58.480 --> 00:35:00.000
something you can enable in developer
options very easily just sort of see

00:35:00.000 --> 00:35:00.010
options very easily just sort of see
 

00:35:00.010 --> 00:35:02.339
options very easily just sort of see
where where things are going what's

00:35:02.339 --> 00:35:02.349
where where things are going what's
 

00:35:02.349 --> 00:35:03.960
where where things are going what's
going on in the device when you you know

00:35:03.960 --> 00:35:03.970
going on in the device when you you know
 

00:35:03.970 --> 00:35:06.660
going on in the device when you you know
fling your recyclerview or whatever your

00:35:06.660 --> 00:35:06.670
fling your recyclerview or whatever your
 

00:35:06.670 --> 00:35:09.180
fling your recyclerview or whatever your
your common UI case is that green line

00:35:09.180 --> 00:35:09.190
your common UI case is that green line
 

00:35:09.190 --> 00:35:10.589
your common UI case is that green line
is important if you're going above the

00:35:10.589 --> 00:35:10.599
is important if you're going above the
 

00:35:10.599 --> 00:35:11.780
is important if you're going above the
grain line you missed

00:35:11.780 --> 00:35:11.790
grain line you missed
 

00:35:11.790 --> 00:35:13.820
grain line you missed
a millisecond boundary and you janked a

00:35:13.820 --> 00:35:13.830
a millisecond boundary and you janked a
 

00:35:13.830 --> 00:35:15.680
a millisecond boundary and you janked a
frame this one looks like particularly

00:35:15.680 --> 00:35:15.690
frame this one looks like particularly
 

00:35:15.690 --> 00:35:17.270
frame this one looks like particularly
janky frame I don't think they're making

00:35:17.270 --> 00:35:17.280
janky frame I don't think they're making
 

00:35:17.280 --> 00:35:18.770
janky frame I don't think they're making
any frame there so at least they're

00:35:18.770 --> 00:35:18.780
any frame there so at least they're
 

00:35:18.780 --> 00:35:20.960
any frame there so at least they're
consistent hmm they got that going for

00:35:20.960 --> 00:35:20.970
consistent hmm they got that going for
 

00:35:20.970 --> 00:35:23.270
consistent hmm they got that going for
them so you can do that on the device

00:35:23.270 --> 00:35:23.280
them so you can do that on the device
 

00:35:23.280 --> 00:35:24.710
them so you can do that on the device
that's this is more sort of at that

00:35:24.710 --> 00:35:24.720
that's this is more sort of at that
 

00:35:24.720 --> 00:35:27.200
that's this is more sort of at that
debugger and developer level to sort of

00:35:27.200 --> 00:35:27.210
debugger and developer level to sort of
 

00:35:27.210 --> 00:35:29.150
debugger and developer level to sort of
see where things are at again it's using

00:35:29.150 --> 00:35:29.160
see where things are at again it's using
 

00:35:29.160 --> 00:35:31.220
see where things are at again it's using
the same information that we compiled at

00:35:31.220 --> 00:35:31.230
the same information that we compiled at
 

00:35:31.230 --> 00:35:32.990
the same information that we compiled at
the lowest level and just putting it on

00:35:32.990 --> 00:35:33.000
the lowest level and just putting it on
 

00:35:33.000 --> 00:35:36.380
the lowest level and just putting it on
the screen for ease of use Android

00:35:36.380 --> 00:35:36.390
the screen for ease of use Android
 

00:35:36.390 --> 00:35:37.640
the screen for ease of use Android
studio just came out with some new

00:35:37.640 --> 00:35:37.650
studio just came out with some new
 

00:35:37.650 --> 00:35:40.370
studio just came out with some new
profiling tools in their latest release

00:35:40.370 --> 00:35:40.380
profiling tools in their latest release
 

00:35:40.380 --> 00:35:41.630
profiling tools in their latest release
that we're talking about that in some of

00:35:41.630 --> 00:35:41.640
that we're talking about that in some of
 

00:35:41.640 --> 00:35:43.070
that we're talking about that in some of
their talks this week so you can check

00:35:43.070 --> 00:35:43.080
their talks this week so you can check
 

00:35:43.080 --> 00:35:44.510
their talks this week so you can check
those out in the recordings on YouTube

00:35:44.510 --> 00:35:44.520
those out in the recordings on YouTube
 

00:35:44.520 --> 00:35:47.450
those out in the recordings on YouTube
in particular for this audience the CPU

00:35:47.450 --> 00:35:47.460
in particular for this audience the CPU
 

00:35:47.460 --> 00:35:49.160
in particular for this audience the CPU
monitor will give you information about

00:35:49.160 --> 00:35:49.170
monitor will give you information about
 

00:35:49.170 --> 00:35:51.140
monitor will give you information about
what's actually going on in all of these

00:35:51.140 --> 00:35:51.150
what's actually going on in all of these
 

00:35:51.150 --> 00:35:53.330
what's actually going on in all of these
method calls it gives you a good idea in

00:35:53.330 --> 00:35:53.340
method calls it gives you a good idea in
 

00:35:53.340 --> 00:35:54.620
method calls it gives you a good idea in
general about you know where the

00:35:54.620 --> 00:35:54.630
general about you know where the
 

00:35:54.630 --> 00:35:57.620
general about you know where the
performance is going on and it's going

00:35:57.620 --> 00:35:57.630
performance is going on and it's going
 

00:35:57.630 --> 00:35:59.390
performance is going on and it's going
in your app and also the GPU monitor

00:35:59.390 --> 00:35:59.400
in your app and also the GPU monitor
 

00:35:59.400 --> 00:36:02.060
in your app and also the GPU monitor
which is again another view into like

00:36:02.060 --> 00:36:02.070
which is again another view into like
 

00:36:02.070 --> 00:36:03.590
which is again another view into like
how fast you're rendering this stuff and

00:36:03.590 --> 00:36:03.600
how fast you're rendering this stuff and
 

00:36:03.600 --> 00:36:04.700
how fast you're rendering this stuff and
whether you're hitting the 16

00:36:04.700 --> 00:36:04.710
whether you're hitting the 16
 

00:36:04.710 --> 00:36:07.190
whether you're hitting the 16
milliseconds in fact I want to say in if

00:36:07.190 --> 00:36:07.200
milliseconds in fact I want to say in if
 

00:36:07.200 --> 00:36:09.050
milliseconds in fact I want to say in if
you're ever familiar with the previous

00:36:09.050 --> 00:36:09.060
you're ever familiar with the previous
 

00:36:09.060 --> 00:36:10.670
you're ever familiar with the previous
tools that used to be part of the SDK

00:36:10.670 --> 00:36:10.680
tools that used to be part of the SDK
 

00:36:10.680 --> 00:36:13.340
tools that used to be part of the SDK
the traits view that was built in to

00:36:13.340 --> 00:36:13.350
the traits view that was built in to
 

00:36:13.350 --> 00:36:14.990
the traits view that was built in to
monitor this is the same thing but with

00:36:14.990 --> 00:36:15.000
monitor this is the same thing but with
 

00:36:15.000 --> 00:36:17.330
monitor this is the same thing but with
a far better UI far more usable and

00:36:17.330 --> 00:36:17.340
a far better UI far more usable and
 

00:36:17.340 --> 00:36:19.640
a far better UI far more usable and
actually far more correct data as well

00:36:19.640 --> 00:36:19.650
actually far more correct data as well
 

00:36:19.650 --> 00:36:23.720
actually far more correct data as well
so far far more advisable so the way I

00:36:23.720 --> 00:36:23.730
so far far more advisable so the way I
 

00:36:23.730 --> 00:36:25.820
so far far more advisable so the way I
view is a different tool so we saw the

00:36:25.820 --> 00:36:25.830
view is a different tool so we saw the
 

00:36:25.830 --> 00:36:27.890
view is a different tool so we saw the
deep dive and systrace and especially

00:36:27.890 --> 00:36:27.900
deep dive and systrace and especially
 

00:36:27.900 --> 00:36:29.300
deep dive and systrace and especially
when you first see situates you're like

00:36:29.300 --> 00:36:29.310
when you first see situates you're like
 

00:36:29.310 --> 00:36:31.100
when you first see situates you're like
I never want to see that tool again

00:36:31.100 --> 00:36:31.110
I never want to see that tool again
 

00:36:31.110 --> 00:36:32.990
I never want to see that tool again
there's just so much information there

00:36:32.990 --> 00:36:33.000
there's just so much information there
 

00:36:33.000 --> 00:36:34.100
there's just so much information there
and you're not quite sure what to do

00:36:34.100 --> 00:36:34.110
and you're not quite sure what to do
 

00:36:34.110 --> 00:36:35.990
and you're not quite sure what to do
with the information that is the tool

00:36:35.990 --> 00:36:36.000
with the information that is the tool
 

00:36:36.000 --> 00:36:38.060
with the information that is the tool
that has all of the information it just

00:36:38.060 --> 00:36:38.070
that has all of the information it just
 

00:36:38.070 --> 00:36:40.090
that has all of the information it just
takes a little bit of getting used to in

00:36:40.090 --> 00:36:40.100
takes a little bit of getting used to in
 

00:36:40.100 --> 00:36:43.370
takes a little bit of getting used to in
using it to see how it works and how you

00:36:43.370 --> 00:36:43.380
using it to see how it works and how you
 

00:36:43.380 --> 00:36:45.110
using it to see how it works and how you
can define the information you need and

00:36:45.110 --> 00:36:45.120
can define the information you need and
 

00:36:45.120 --> 00:36:47.120
can define the information you need and
add the custom traces that you want I

00:36:47.120 --> 00:36:47.130
add the custom traces that you want I
 

00:36:47.130 --> 00:36:49.070
add the custom traces that you want I
think an easier way to get into it is

00:36:49.070 --> 00:36:49.080
think an easier way to get into it is
 

00:36:49.080 --> 00:36:50.870
think an easier way to get into it is
you can dip in slowly by using them much

00:36:50.870 --> 00:36:50.880
you can dip in slowly by using them much
 

00:36:50.880 --> 00:36:53.150
you can dip in slowly by using them much
easier to use higher level view of

00:36:53.150 --> 00:36:53.160
easier to use higher level view of
 

00:36:53.160 --> 00:36:54.620
easier to use higher level view of
what's going on with the Android studio

00:36:54.620 --> 00:36:54.630
what's going on with the Android studio
 

00:36:54.630 --> 00:36:56.740
what's going on with the Android studio
tools and then if there's a particular

00:36:56.740 --> 00:36:56.750
tools and then if there's a particular
 

00:36:56.750 --> 00:36:58.820
tools and then if there's a particular
source of jank that you're trying to

00:36:58.820 --> 00:36:58.830
source of jank that you're trying to
 

00:36:58.830 --> 00:37:00.800
source of jank that you're trying to
chase know that systrace is a

00:37:00.800 --> 00:37:00.810
chase know that systrace is a
 

00:37:00.810 --> 00:37:02.120
chase know that systrace is a
fine-grained tool that's going to help

00:37:02.120 --> 00:37:02.130
fine-grained tool that's going to help
 

00:37:02.130 --> 00:37:04.990
fine-grained tool that's going to help
you chase that at a much deeper level

00:37:04.990 --> 00:37:05.000
you chase that at a much deeper level
 

00:37:05.000 --> 00:37:09.680
you chase that at a much deeper level
system-wide and finally not on topic but

00:37:09.680 --> 00:37:09.690
system-wide and finally not on topic but
 

00:37:09.690 --> 00:37:11.120
system-wide and finally not on topic but
for this crowd that's interested in

00:37:11.120 --> 00:37:11.130
for this crowd that's interested in
 

00:37:11.130 --> 00:37:12.800
for this crowd that's interested in
performance you may want to try out a

00:37:12.800 --> 00:37:12.810
performance you may want to try out a
 

00:37:12.810 --> 00:37:14.510
performance you may want to try out a
developer option that will enable this

00:37:14.510 --> 00:37:14.520
developer option that will enable this
 

00:37:14.520 --> 00:37:16.430
developer option that will enable this
alternative render that's not on by

00:37:16.430 --> 00:37:16.440
alternative render that's not on by
 

00:37:16.440 --> 00:37:19.070
alternative render that's not on by
default but you can see how your

00:37:19.070 --> 00:37:19.080
default but you can see how your
 

00:37:19.080 --> 00:37:21.620
default but you can see how your
application behaves with this for

00:37:21.620 --> 00:37:21.630
application behaves with this for
 

00:37:21.630 --> 00:37:24.040
application behaves with this for
possible future possibilities

00:37:24.040 --> 00:37:24.050
possible future possibilities
 

00:37:24.050 --> 00:37:25.780
possible future possibilities
so it's the skia render you can go into

00:37:25.780 --> 00:37:25.790
so it's the skia render you can go into
 

00:37:25.790 --> 00:37:27.310
so it's the skia render you can go into
developer options and enable that and

00:37:27.310 --> 00:37:27.320
developer options and enable that and
 

00:37:27.320 --> 00:37:29.260
developer options and enable that and
just make sure that there's not an issue

00:37:29.260 --> 00:37:29.270
just make sure that there's not an issue
 

00:37:29.270 --> 00:37:30.970
just make sure that there's not an issue
there if there is it be lovely to hear

00:37:30.970 --> 00:37:30.980
there if there is it be lovely to hear
 

00:37:30.980 --> 00:37:32.800
there if there is it be lovely to hear
about it that's why we're mentioning it

00:37:32.800 --> 00:37:32.810
about it that's why we're mentioning it
 

00:37:32.810 --> 00:37:35.830
about it that's why we're mentioning it
today there are some resources that we

00:37:35.830 --> 00:37:35.840
today there are some resources that we
 

00:37:35.840 --> 00:37:37.270
today there are some resources that we
mentioned I will bring them up again

00:37:37.270 --> 00:37:37.280
mentioned I will bring them up again
 

00:37:37.280 --> 00:37:39.520
mentioned I will bring them up again
again check out the vitals page on da

00:37:39.520 --> 00:37:39.530
again check out the vitals page on da
 

00:37:39.530 --> 00:37:41.800
again check out the vitals page on da
Android comm in particular they have a

00:37:41.800 --> 00:37:41.810
Android comm in particular they have a
 

00:37:41.810 --> 00:37:44.400
Android comm in particular they have a
jank section called Lulu rendering is

00:37:44.400 --> 00:37:44.410
jank section called Lulu rendering is
 

00:37:44.410 --> 00:37:47.160
jank section called Lulu rendering is
and there are some important i/o

00:37:47.160 --> 00:37:47.170
and there are some important i/o
 

00:37:47.170 --> 00:37:49.420
and there are some important i/o
sessions to check out on YouTube they're

00:37:49.420 --> 00:37:49.430
sessions to check out on YouTube they're
 

00:37:49.430 --> 00:37:51.550
sessions to check out on YouTube they're
probably posted already Tim Marie gave a

00:37:51.550 --> 00:37:51.560
probably posted already Tim Marie gave a
 

00:37:51.560 --> 00:37:55.060
probably posted already Tim Marie gave a
great overview about systrace and system

00:37:55.060 --> 00:37:55.070
great overview about systrace and system
 

00:37:55.070 --> 00:37:57.490
great overview about systrace and system
performance in general so Android

00:37:57.490 --> 00:37:57.500
performance in general so Android
 

00:37:57.500 --> 00:37:59.830
performance in general so Android
performance overview the art talk talked

00:37:59.830 --> 00:37:59.840
performance overview the art talk talked
 

00:37:59.840 --> 00:38:00.850
performance overview the art talk talked
about performance and memory

00:38:00.850 --> 00:38:00.860
about performance and memory
 

00:38:00.860 --> 00:38:02.740
about performance and memory
improvements they did some pretty

00:38:02.740 --> 00:38:02.750
improvements they did some pretty
 

00:38:02.750 --> 00:38:04.960
improvements they did some pretty
amazing stuff on both the runtime side

00:38:04.960 --> 00:38:04.970
amazing stuff on both the runtime side
 

00:38:04.970 --> 00:38:07.990
amazing stuff on both the runtime side
runtime improvements as well as the GC

00:38:07.990 --> 00:38:08.000
runtime improvements as well as the GC
 

00:38:08.000 --> 00:38:10.090
runtime improvements as well as the GC
side so now they have concurrent garbage

00:38:10.090 --> 00:38:10.100
side so now they have concurrent garbage
 

00:38:10.100 --> 00:38:12.070
side so now they have concurrent garbage
collection there's almost no pauses

00:38:12.070 --> 00:38:12.080
collection there's almost no pauses
 

00:38:12.080 --> 00:38:13.900
collection there's almost no pauses
anymore until they need to take a full

00:38:13.900 --> 00:38:13.910
anymore until they need to take a full
 

00:38:13.910 --> 00:38:15.670
anymore until they need to take a full
GC eventually and they can compact in

00:38:15.670 --> 00:38:15.680
GC eventually and they can compact in
 

00:38:15.680 --> 00:38:17.500
GC eventually and they can compact in
the foreground you get a minimal size

00:38:17.500 --> 00:38:17.510
the foreground you get a minimal size
 

00:38:17.510 --> 00:38:19.870
the foreground you get a minimal size
keep you get much faster allocations as

00:38:19.870 --> 00:38:19.880
keep you get much faster allocations as
 

00:38:19.880 --> 00:38:21.910
keep you get much faster allocations as
well as collections so the details for

00:38:21.910 --> 00:38:21.920
well as collections so the details for
 

00:38:21.920 --> 00:38:23.620
well as collections so the details for
all of that suffer and the art talk and

00:38:23.620 --> 00:38:23.630
all of that suffer and the art talk and
 

00:38:23.630 --> 00:38:25.810
all of that suffer and the art talk and
then finally there's a talk by the

00:38:25.810 --> 00:38:25.820
then finally there's a talk by the
 

00:38:25.820 --> 00:38:28.780
then finally there's a talk by the
plague folks called no one likes

00:38:28.780 --> 00:38:28.790
plague folks called no one likes
 

00:38:28.790 --> 00:38:31.600
plague folks called no one likes
crashing or janky apps which is true and

00:38:31.600 --> 00:38:31.610
crashing or janky apps which is true and
 

00:38:31.610 --> 00:38:33.190
crashing or janky apps which is true and
that's where they talked about the dash

00:38:33.190 --> 00:38:33.200
that's where they talked about the dash
 

00:38:33.200 --> 00:38:34.570
that's where they talked about the dash
board and some of the other facilities

00:38:34.570 --> 00:38:34.580
board and some of the other facilities
 

00:38:34.580 --> 00:38:36.250
board and some of the other facilities
that they're providing for developers

00:38:36.250 --> 00:38:36.260
that they're providing for developers
 

00:38:36.260 --> 00:38:39.440
that they're providing for developers
and that is the talk alright

00:38:39.440 --> 00:38:39.450
and that is the talk alright
 

00:38:39.450 --> 00:38:44.240
and that is the talk alright
[Applause]

00:38:44.240 --> 00:38:44.250
[Applause]
 

00:38:44.250 --> 00:38:58.179
[Applause]
[Music]

