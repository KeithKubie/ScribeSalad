WEBVTT
Kind: captions
Language: en

00:00:02.667 --> 00:00:04.667
Kenny: Hi, welcome

00:00:04.667 --> 00:00:06.501
to "Map your Business,
Inside and Out."

00:00:06.501 --> 00:00:09.167
My name is Brendan Kenny.
I work with developer relations,

00:00:09.167 --> 00:00:11.667
uh, with Geo,
working the Maps API

00:00:11.667 --> 00:00:14.000
and the Earth API.

00:00:14.000 --> 00:00:16.000
Broadfoot:
Hi, I'm Chris Broadfoot.

00:00:16.000 --> 00:00:19.167
I work on the Developer
Relations team in Sydney,

00:00:19.167 --> 00:00:21.334
and I work on the Maps API.

00:00:21.334 --> 00:00:24.000
Uh, you can follow me
on Twitter at "broady,"

00:00:24.000 --> 00:00:25.834
and Brendan is "brendankenny."

00:00:25.834 --> 00:00:27.834
And if you'd like to tweet
about this session,

00:00:27.834 --> 00:00:29.501
use these hash tags, so--

00:00:29.501 --> 00:00:32.501
#io2011 and #Geo.

00:00:32.501 --> 00:00:35.167
So now what are we gonna
talk about today?

00:00:35.167 --> 00:00:36.667
Uh, the title is

00:00:36.667 --> 00:00:38.501
"Map your Business,
Inside and Out."

00:00:38.501 --> 00:00:40.334
Uh, what does that really mean?

00:00:40.334 --> 00:00:42.167
Let's just have
a quick flick-through

00:00:42.167 --> 00:00:45.501
of what we're going
to talk about.

00:00:45.501 --> 00:00:48.501
So first of all--
mapping business locations,

00:00:48.501 --> 00:00:50.634
so essentially mapping,
you know, all the locations

00:00:50.634 --> 00:00:53.133
of your business
or your store across the world,

00:00:53.133 --> 00:00:55.467
uh, and you'll end up
with something like this.

00:00:55.467 --> 00:00:58.133
Then we'll move on to seamless
overlay of floor plans,

00:00:58.133 --> 00:01:00.467
so if you have, uh, imagery--

00:01:00.467 --> 00:01:03.534
This is the Moscone Center.
This is the I/O floor plan.

00:01:03.534 --> 00:01:05.534
If you have something similar
for your own business,

00:01:05.534 --> 00:01:07.367
you can overlay that
on Google Maps

00:01:07.367 --> 00:01:10.701
and seamlessly integrate
with the Google base tiles.

00:01:10.701 --> 00:01:13.367
We'll then move on
to annotating that map,

00:01:13.367 --> 00:01:15.367
so making it useful
for your users

00:01:15.367 --> 00:01:17.534
to find things indoors.

00:01:17.534 --> 00:01:19.367
And then also having
a quick look

00:01:19.367 --> 00:01:21.367
at searching
over indoor features.

00:01:21.367 --> 00:01:23.701
So you know,
often your users won't know,

00:01:23.701 --> 00:01:26.367
you know, the exact location
of what they're looking for.

00:01:26.367 --> 00:01:28.200
So this will
help them find it.

00:01:28.200 --> 00:01:30.701
And then we'll have a look
at navigating indoors

00:01:30.701 --> 00:01:33.868
using Street View.

00:01:33.868 --> 00:01:37.367
So first of all--
mapping business locations.

00:01:37.367 --> 00:01:39.534
Uh, for this--for the purpose
of this talk,

00:01:39.534 --> 00:01:41.534
uh, we're going to use
a case study,

00:01:41.534 --> 00:01:43.367
and that's going to be Google.

00:01:43.367 --> 00:01:45.200
So basically we're going to map

00:01:45.200 --> 00:01:47.200
all of Google's office locations
around the world.

00:01:47.200 --> 00:01:48.868
So the first thing I did

00:01:48.868 --> 00:01:50.701
was I went to Google's
corporate web site,

00:01:50.701 --> 00:01:52.701
and luckily I found
this JSON feed

00:01:52.701 --> 00:01:54.534
of all the offices--

00:01:54.534 --> 00:01:56.200
uh, all of Google's offices.

00:01:56.200 --> 00:01:59.534
So basically it's an array
with details about each office--

00:01:59.534 --> 00:02:02.100
you know, the office name,
latitude and longitude,

00:02:02.100 --> 00:02:04.267
the precise location,

00:02:04.267 --> 00:02:06.100
a nice address
for formatting,

00:02:06.100 --> 00:02:09.767
and a phone and fax number
in some cases.

00:02:09.767 --> 00:02:12.934
So the first thing
I wanted to do with this,

00:02:12.934 --> 00:02:15.434
uh, was import it
into Fusion Tables.

00:02:15.434 --> 00:02:17.434
So Fusion Tables
allows us to map,

00:02:17.434 --> 00:02:21.100
uh, many thousands of markers
really quickly and easily.

00:02:21.100 --> 00:02:23.100
You know,
obviously Google doesn't have

00:02:23.100 --> 00:02:24.767
that many locations,

00:02:24.767 --> 00:02:26.767
but it allows us to map it
really, really simply.

00:02:26.767 --> 00:02:29.267
So importing into Fusion Tables

00:02:29.267 --> 00:02:31.300
is quite simple.

00:02:31.300 --> 00:02:33.601
It supports these data formats--

00:02:33.601 --> 00:02:36.267
CSV, Microsoft Excel,

00:02:36.267 --> 00:02:38.601
OpenDocument spreadsheet,
and KML.

00:02:38.601 --> 00:02:40.767
So I chose CSV for this,

00:02:40.767 --> 00:02:44.267
and I used a super-simple
Bash script.

00:02:44.267 --> 00:02:46.934
Uh, and the output of that

00:02:46.934 --> 00:02:50.267
was a nicely formatted CSV file.

00:02:50.267 --> 00:02:53.100
So I just hopped
into Fusion Tables,

00:02:53.100 --> 00:02:56.434
uh, you know,
went into the Import dialog,

00:02:56.434 --> 00:02:58.601
imported my CSV file,

00:02:58.601 --> 00:03:01.667
and I ended up
with a table like this.

00:03:01.667 --> 00:03:04.868
So you know, this--
this data format's, uh,

00:03:04.868 --> 00:03:07.167
you know,
kind of interesting.

00:03:07.167 --> 00:03:09.167
But the first--
but what we want to do

00:03:09.167 --> 00:03:12.167
is put this on a map, right,
map each of these locations.

00:03:12.167 --> 00:03:15.167
So what I did was, you know,
I hit visualize map,

00:03:15.167 --> 00:03:17.501
and I end up with something
like this.

00:03:17.501 --> 00:03:20.834
So Fusion Tables allows us
to embed this really easily

00:03:20.834 --> 00:03:22.501
on--on my web site,

00:03:22.501 --> 00:03:24.334
uh, with just this embed tag.

00:03:24.334 --> 00:03:27.000
So Fusion Tables would
generate that tag for you,

00:03:27.000 --> 00:03:30.667
and I've actually used
that exact code on this slide.

00:03:30.667 --> 00:03:33.501
They're HTML slides.

00:03:33.501 --> 00:03:35.167
So this is quite nice,

00:03:35.167 --> 00:03:37.868
because I can go over
and click on--

00:03:37.868 --> 00:03:39.834
you know, I can click
on a particular location,

00:03:39.834 --> 00:03:43.000
and I get some structured data
about this.

00:03:43.000 --> 00:03:46.334
Let's just actually go
into zoom, back, normal--

00:03:46.334 --> 00:03:49.834
'cause I think that's mucking
with the...

00:03:49.834 --> 00:03:52.501
So I get some structured data.

00:03:52.501 --> 00:03:54.167
Um, but you know,
this is--

00:03:54.167 --> 00:03:56.167
this is not really useful
for your users, right?

00:03:56.167 --> 00:03:59.834
And you know, you might have
some other existing map data.

00:03:59.834 --> 00:04:03.067
You might have other markers
that represent other things.

00:04:03.067 --> 00:04:06.067
So what we can do
is embed this Fusion Table

00:04:06.067 --> 00:04:08.400
on a Google Maps API map.

00:04:08.400 --> 00:04:10.400
Now you can tell this is
a Google Maps API map,

00:04:10.400 --> 00:04:11.901
because I've styled it.

00:04:11.901 --> 00:04:13.734
So you may want
to style your map,

00:04:13.734 --> 00:04:15.901
you know, to suit
the colors of your business.

00:04:15.901 --> 00:04:17.901
You may want to brand the map
a little bit.

00:04:17.901 --> 00:04:21.567
You can turn off distracting
features and labels also.

00:04:21.567 --> 00:04:24.067
So you know, this gives
the same functionality

00:04:24.067 --> 00:04:26.400
as the Fusion Tables
iframe embed.

00:04:26.400 --> 00:04:29.067
Now as I click on a marker,
I get a little info window

00:04:29.067 --> 00:04:33.067
with the content
of that particular location.

00:04:33.067 --> 00:04:34.901
So this is really simple to do.

00:04:34.901 --> 00:04:36.901
It's just these two lines
of code.

00:04:36.901 --> 00:04:38.901
I create
a new Fusion Tables layer,

00:04:38.901 --> 00:04:40.901
parse it in the table ID,

00:04:40.901 --> 00:04:43.567
and set the map.

00:04:43.567 --> 00:04:45.567
Um, but you know, this is--
this is still not really useful

00:04:45.567 --> 00:04:47.067
for your users.

00:04:47.067 --> 00:04:49.067
I mean, it might be pretty,
but you know,

00:04:49.067 --> 00:04:51.400
we've still got this quite,
you know, frankly ugly

00:04:51.400 --> 00:04:54.901
representation of that data
in that info window.

00:04:54.901 --> 00:04:56.901
Uh, so what I've created
is a library

00:04:56.901 --> 00:04:59.234
that makes this
really easy to do.

00:04:59.234 --> 00:05:01.634
So this is
the storelocator library,

00:05:01.634 --> 00:05:04.300
um, and it basically helps you

00:05:04.300 --> 00:05:06.133
create applications like this.

00:05:06.133 --> 00:05:08.133
You can use any data source.

00:05:08.133 --> 00:05:11.133
Uh, for example, if you have
an existing MySQL database,

00:05:11.133 --> 00:05:14.467
uh, you can easily hook that
into this library.

00:05:14.467 --> 00:05:17.667
But it's super simple to use
with Fusion Tables.

00:05:17.667 --> 00:05:20.968
I've created a, uh, hook-in
for Fusion Tables

00:05:20.968 --> 00:05:22.467
into the store locator.

00:05:22.467 --> 00:05:24.467
So it really reduces
the lines of code

00:05:24.467 --> 00:05:27.467
to create, uh, store locator.

00:05:27.467 --> 00:05:29.467
And it also gives geolocation,

00:05:29.467 --> 00:05:31.467
so that the user is presented

00:05:31.467 --> 00:05:35.133
with a useful viewport
when they first visit the map.

00:05:35.133 --> 00:05:38.300
It has location search
including autocomplete.

00:05:38.300 --> 00:05:41.634
So yesterday we announced
the autocomplete functionality,

00:05:41.634 --> 00:05:44.133
which you can attach
to any text field.

00:05:44.133 --> 00:05:46.133
So you know if geolocation
doesn't give a--

00:05:46.133 --> 00:05:47.968
you know,
a nice initial viewport,

00:05:47.968 --> 00:05:49.968
then they can search

00:05:49.968 --> 00:05:52.801
for their precise location.

00:05:52.801 --> 00:05:54.467
It has feature filtering,

00:05:54.467 --> 00:05:56.467
which I'm not actually
gonna show today.

00:05:56.467 --> 00:05:59.300
But if--you know, if your store
has particular features,

00:05:59.300 --> 00:06:03.200
uh, then the user can easily
filter using checkboxes.

00:06:03.200 --> 00:06:06.033
Also it gives support
for directions,

00:06:06.033 --> 00:06:08.701
so that they can easily find
your business,

00:06:08.701 --> 00:06:11.033
and a link into Street View.

00:06:11.033 --> 00:06:13.868
And this is not only
for store finder applications.

00:06:13.868 --> 00:06:15.868
It's for any application
where you want

00:06:15.868 --> 00:06:18.033
to plot multiple, you know,
locations on a map,

00:06:18.033 --> 00:06:20.534
such as Google office
locations.

00:06:20.534 --> 00:06:22.534
And it's going to be
open-sourced.

00:06:22.534 --> 00:06:24.567
Well, you know,
shortly after I/O,

00:06:24.567 --> 00:06:26.701
it will be available
at this link.

00:06:26.701 --> 00:06:28.701
We're still waiting
on some functionality

00:06:28.701 --> 00:06:30.701
from Fusion Tables to make--
to make the--

00:06:30.701 --> 00:06:33.701
for the Fusion Tables stuff
to be really easy.

00:06:33.701 --> 00:06:35.534
So what does it look like?

00:06:35.534 --> 00:06:38.367
Um, you know,
it looks much like the, uh,

00:06:38.367 --> 00:06:40.367
basic Fusion Tables map.

00:06:40.367 --> 00:06:43.367
Um, but you can see here
immediately

00:06:43.367 --> 00:06:46.067
that the map is centered
on San Francisco.

00:06:46.067 --> 00:06:48.734
So basically the geolocation API
in the browser

00:06:48.734 --> 00:06:50.734
has told the store locator
that, you know,

00:06:50.734 --> 00:06:53.400
we're located in San Francisco.

00:06:53.400 --> 00:06:55.234
And as I click on a location,

00:06:55.234 --> 00:06:58.267
you know, such as the Google
San Francisco office,

00:06:58.267 --> 00:07:00.567
I get a nice,
formatted info window,

00:07:00.567 --> 00:07:02.634
uh, with the address
and title,

00:07:02.634 --> 00:07:05.300
you know,
the name of the location.

00:07:05.300 --> 00:07:07.300
And for the purpose
of this talk,

00:07:07.300 --> 00:07:09.634
we've added Moscone West
as a location,

00:07:09.634 --> 00:07:12.801
you know, just to make it
a bit exciting.

00:07:12.801 --> 00:07:14.801
So you know,

00:07:14.801 --> 00:07:17.467
that's still
not really compelling, right?

00:07:17.467 --> 00:07:19.467
Um, so you know,

00:07:19.467 --> 00:07:22.801
I've created this, uh,
store locator panel component.

00:07:22.801 --> 00:07:24.801
So you know, here I've put it
on the left.

00:07:24.801 --> 00:07:26.801
It's just positioned using CSS.

00:07:26.801 --> 00:07:28.634
So you can put it
anywhere you like.

00:07:28.634 --> 00:07:30.634
Maybe on a mobile device,
you'd want to switch

00:07:30.634 --> 00:07:33.300
between the map and the panel.

00:07:33.300 --> 00:07:35.300
And so basically
it's just that one line of code.

00:07:35.300 --> 00:07:37.300
I give the panel
the DOM element,

00:07:37.300 --> 00:07:40.300
so basically a div
that I've placed on the left,

00:07:40.300 --> 00:07:41.968
and the panel gives us

00:07:41.968 --> 00:07:43.968
some really nice functionality.

00:07:43.968 --> 00:07:45.968
So you know,

00:07:45.968 --> 00:07:48.467
once again, we're centered
on San Francisco,

00:07:48.467 --> 00:07:51.801
but perhaps we want to look
at Mountain View.

00:07:51.801 --> 00:07:54.801
So I can go here,
hit Mountain View,

00:07:54.801 --> 00:07:58.300
and you know, the first location
is the Mountain View campus.

00:07:58.300 --> 00:08:00.300
So I can click on the left,
you know,

00:08:00.300 --> 00:08:03.033
to find the closest location,

00:08:03.033 --> 00:08:05.868
uh, to the--to the--
in the viewport.

00:08:05.868 --> 00:08:08.701
I can go and get directions
straightaway.

00:08:08.701 --> 00:08:11.200
So this is going to go
from downtown Mountain View

00:08:11.200 --> 00:08:13.033
to the Mountain View campus.

00:08:13.033 --> 00:08:16.701
And I can, you know,
drag directions,

00:08:16.701 --> 00:08:18.868
and the panel on the left
is updated.

00:08:18.868 --> 00:08:21.868
But let's say, uh, you know--

00:08:21.868 --> 00:08:24.300
let's go back to San Francisco.

00:08:27.501 --> 00:08:28.934
Uh...

00:08:32.000 --> 00:08:35.000
Oh, so we've got directions.
So you know, if the user decides

00:08:35.000 --> 00:08:36.667
they're actually
in San Francisco,

00:08:36.667 --> 00:08:38.367
the directions are updated.

00:08:38.367 --> 00:08:40.167
So let's close that off

00:08:40.167 --> 00:08:43.501
and zoom back in
on San Francisco.

00:08:43.501 --> 00:08:46.667
And you know, as I zoom in,

00:08:46.667 --> 00:08:50.167
um, you know, I get an outline

00:08:50.167 --> 00:08:52.667
on the Google Maps base tiles

00:08:52.667 --> 00:08:55.000
of the--the outline
of the Moscone Center.

00:08:55.000 --> 00:08:57.667
So the next thing
Brendan's gonna talk about

00:08:57.667 --> 00:09:00.167
is overlaying a floor plan
on that outline.

00:09:03.501 --> 00:09:05.167
Kenny: Thanks.

00:09:05.167 --> 00:09:07.834
So as Chris was saying,

00:09:07.834 --> 00:09:10.834
we're down at the level where,
uh, you can kind of see

00:09:10.834 --> 00:09:12.667
the--the outline
of the building,

00:09:12.667 --> 00:09:14.501
but not much information
is there.

00:09:14.501 --> 00:09:16.501
It's kind of the, uh,
you know, we've got

00:09:16.501 --> 00:09:18.667
a typical Google Maps
building here.

00:09:18.667 --> 00:09:20.834
It's, uh, pretty detailed
for Moscone West,

00:09:20.834 --> 00:09:22.834
um, but there's no information

00:09:22.834 --> 00:09:24.834
about what's going on inside.

00:09:24.834 --> 00:09:27.334
And so that's what we want to--
we want to do.

00:09:27.334 --> 00:09:30.334
We want to overlay some kind
of floor plan on top of that,

00:09:30.334 --> 00:09:32.334
and we have
a lot of different options.

00:09:32.334 --> 00:09:34.334
And it turns out the options
are pretty much

00:09:34.334 --> 00:09:37.167
what's available for overlaying
any information

00:09:37.167 --> 00:09:39.000
on top of Google Maps.

00:09:39.000 --> 00:09:40.834
Um, it's just a matter of scale.

00:09:40.834 --> 00:09:42.834
Because JavaScript
has one numeric type,

00:09:42.834 --> 00:09:46.667
uh, its double-precision
floating point,

00:09:46.667 --> 00:09:49.667
um, it has enough precision
to, you know,

00:09:49.667 --> 00:09:51.834
specify geolocations

00:09:51.834 --> 00:09:54.834
well below, you know,
the pixel limit.

00:09:54.834 --> 00:09:58.334
So you can specify
georeference data, um,

00:09:58.334 --> 00:10:02.167
like, arbitrarily
as precise as you want.

00:10:02.167 --> 00:10:05.834
So we have two kind of classes

00:10:05.834 --> 00:10:08.834
of, uh, of ways
of overlaying data,

00:10:08.834 --> 00:10:12.000
and it's pretty much the classic
computer imagery split,

00:10:12.000 --> 00:10:14.667
uh, between vector
and raster data.

00:10:14.667 --> 00:10:18.200
So first we can talk about
kind of vector floor plans.

00:10:18.200 --> 00:10:19.834
This is, uh,

00:10:19.834 --> 00:10:22.501
kind of a classic
vector graphic,

00:10:22.501 --> 00:10:25.000
where it's just
a very simple line drawing.

00:10:25.000 --> 00:10:27.000
Um, and so typically,

00:10:27.000 --> 00:10:29.000
um, as most people already know,

00:10:29.000 --> 00:10:31.000
vector graphics are specified

00:10:31.000 --> 00:10:32.667
with kind of point data

00:10:32.667 --> 00:10:34.834
and then some kind
of connecting data

00:10:34.834 --> 00:10:36.834
that--that says that lines

00:10:36.834 --> 00:10:39.167
connect these points
or curves,

00:10:39.167 --> 00:10:43.000
or that the--the points
form a closed loop,

00:10:43.000 --> 00:10:44.834
uh, to make a polygon.

00:10:44.834 --> 00:10:47.667
Um, and the advantage of that
is that you get to specify

00:10:47.667 --> 00:10:49.667
with just a little bit of data,

00:10:49.667 --> 00:10:52.033
um, kind of detailed,

00:10:52.033 --> 00:10:55.334
uh, you know,
arbitrarily scalable images.

00:10:55.334 --> 00:10:57.000
Um, and that's great,

00:10:57.000 --> 00:10:59.000
but as soon as you
start adding detail,

00:10:59.000 --> 00:11:01.000
you start kind of approaching
that limit where you--

00:11:01.000 --> 00:11:03.400
you--if you start drawing in,
like, you know, trees

00:11:03.400 --> 00:11:06.567
and--and bathrooms
and scale--uh, and stairs

00:11:06.567 --> 00:11:08.567
and that sort of thing,
you start approaching the point

00:11:08.567 --> 00:11:12.067
where you might as well
just kind of, uh,

00:11:12.067 --> 00:11:15.234
give kind of bitmap data
instead.

00:11:15.234 --> 00:11:17.067
So there is that--
that limit.

00:11:17.067 --> 00:11:18.901
But if you can keep
your drawing simple,

00:11:18.901 --> 00:11:20.567
it's a great--great.

00:11:20.567 --> 00:11:23.234
Um, the other downside can be

00:11:23.234 --> 00:11:24.901
kind of parsing

00:11:24.901 --> 00:11:26.567
and computation time

00:11:26.567 --> 00:11:29.234
on the client side,
if that's where it's displayed.

00:11:29.234 --> 00:11:31.734
Um, the--the data comes in,

00:11:31.734 --> 00:11:33.734
but then depending
on how it's displayed,

00:11:33.734 --> 00:11:35.400
uh, you know, it takes--

00:11:35.400 --> 00:11:37.234
whether it's Canvas or WebGL

00:11:37.234 --> 00:11:39.734
or, um, you know,
if we go SVG or VML,

00:11:39.734 --> 00:11:42.734
that sort of thing,
it can take processing time.

00:11:42.734 --> 00:11:46.234
Um, so if we look at kind of
the simplest way

00:11:46.234 --> 00:11:48.901
to do vector data
in the Maps API,

00:11:48.901 --> 00:11:51.400
um, we start with kind of
the geometry classes.

00:11:51.400 --> 00:11:53.067
This is the polygon object,

00:11:53.067 --> 00:11:54.901
and there's other things
like poly lines,

00:11:54.901 --> 00:11:56.400
that sort of thing.

00:11:56.400 --> 00:11:58.434
I don't really know
what that's supposed to be.

00:11:58.434 --> 00:12:00.234
We can say it's, like,
kind of the view

00:12:00.234 --> 00:12:03.133
of a visitor in the lobby
of the Moscone Center.

00:12:03.133 --> 00:12:04.801
Um, and it's really simple.

00:12:04.801 --> 00:12:07.133
You just provide a paths array,

00:12:07.133 --> 00:12:08.801
which is just an array

00:12:08.801 --> 00:12:10.634
of latitude and longitude
coordinates,

00:12:10.634 --> 00:12:12.634
um, and then you kind of give
styling information,

00:12:12.634 --> 00:12:14.634
based on the stroke
and the fill.

00:12:14.634 --> 00:12:16.801
And, uh, and then you
just add it to the map,

00:12:16.801 --> 00:12:18.467
and that's literally it.

00:12:18.467 --> 00:12:20.467
Um, and you can make, you know--
you can start tracing out

00:12:20.467 --> 00:12:22.801
paths and outlines
and that sort of thing.

00:12:22.801 --> 00:12:24.801
And what's great about this
is that because it's--

00:12:24.801 --> 00:12:26.467
it's added on--on, uh,

00:12:26.467 --> 00:12:28.300
it's specified
on the client side,

00:12:28.300 --> 00:12:31.501
um, you can actually
kind of make dynamic data.

00:12:31.501 --> 00:12:34.467
So if, like a floor plan changed
based on the time of day

00:12:34.467 --> 00:12:36.467
or the time of year,
that sort of thing,

00:12:36.467 --> 00:12:38.968
um, there's no reason
why you couldn't just, you know,

00:12:38.968 --> 00:12:42.467
specify that latitude
and longitude array dynamically

00:12:42.467 --> 00:12:44.467
and--and give a different, uh,

00:12:44.467 --> 00:12:48.300
set of coordinates
for that polygon.

00:12:48.300 --> 00:12:49.801
So next up, uh,

00:12:49.801 --> 00:12:51.634
if you want to get
a little more complicated,

00:12:51.634 --> 00:12:53.300
you can actually use KML.

00:12:53.300 --> 00:12:56.133
And it's--it's just that simple
as you create a KML layer

00:12:56.133 --> 00:12:58.133
and give it a URL

00:12:58.133 --> 00:13:01.200
that points to your file
available online.

00:13:01.200 --> 00:13:02.868
And KML is great,

00:13:02.868 --> 00:13:04.868
especially if you already have
kind of a workflow

00:13:04.868 --> 00:13:06.367
that involves KML,

00:13:06.367 --> 00:13:08.367
if you have--if you use
kind of geospatial products

00:13:08.367 --> 00:13:09.868
that output KML,

00:13:09.868 --> 00:13:13.200
or if you use stuff
with Google Earth,

00:13:13.200 --> 00:13:17.033
you can use the exact same
KML file with Maps.

00:13:17.033 --> 00:13:19.033
Um, what's interesting
about this

00:13:19.033 --> 00:13:21.701
is that because KML
can get quite complex,

00:13:21.701 --> 00:13:23.701
um, what happens is,

00:13:23.701 --> 00:13:27.534
is Google's servers
actually fetch that KML file,

00:13:27.534 --> 00:13:29.534
uh, parse it,
draw it to tiles,

00:13:29.534 --> 00:13:31.701
and then send that
to the client.

00:13:31.701 --> 00:13:33.534
So, um, that's great.

00:13:33.534 --> 00:13:35.367
That means, like,
older computers,

00:13:35.367 --> 00:13:37.868
um, and--and less-able browsers,

00:13:37.868 --> 00:13:40.534
um, have no problem with
kind of more complex files,

00:13:40.534 --> 00:13:42.534
um, but you do lose a little bit

00:13:42.534 --> 00:13:45.200
in kind of being able
to dynamically specify things.

00:13:45.200 --> 00:13:47.033
Uh, you can still do it
on the server,

00:13:47.033 --> 00:13:48.701
but it's a little less flexible.

00:13:48.701 --> 00:13:51.200
Um, so that's kind of the--

00:13:51.200 --> 00:13:54.200
the vector side of things.

00:13:54.200 --> 00:13:57.701
Um, if we think about, uh,
bitmap data,

00:13:57.701 --> 00:13:59.701
this KML kind of straddles that,

00:13:59.701 --> 00:14:01.767
because it comes down
as image tiles.

00:14:01.767 --> 00:14:04.434
And Fusion Tables kind of falls
into the same place,

00:14:04.434 --> 00:14:06.434
where it's specified, um,

00:14:06.434 --> 00:14:08.434
it can be specified
with kind of shape files

00:14:08.434 --> 00:14:10.434
or other, uh, geographic stuff,

00:14:10.434 --> 00:14:12.434
but then it's sent down
as tiles.

00:14:12.434 --> 00:14:14.934
So thinking
about raster floor plans,

00:14:14.934 --> 00:14:17.100
um, if you want something
like this,

00:14:17.100 --> 00:14:19.601
where you kind of have
this nice, uh, drawn,

00:14:19.601 --> 00:14:23.100
you know, quality where
somebody considered each pixel,

00:14:23.100 --> 00:14:24.934
um, especially this level

00:14:24.934 --> 00:14:26.767
is when you should
start thinking

00:14:26.767 --> 00:14:28.601
about kind of
raster floor plans,

00:14:28.601 --> 00:14:30.934
thinking about bitmap data.

00:14:30.934 --> 00:14:32.934
Um, so the benefits of this

00:14:32.934 --> 00:14:34.934
is that--is that the size
is constant,

00:14:34.934 --> 00:14:36.434
based on tile size.

00:14:36.434 --> 00:14:38.434
You know, the number of pixels
that you have

00:14:38.434 --> 00:14:40.267
are the number of pixels
you get,

00:14:40.267 --> 00:14:42.267
and you can actually specify
much more complex shapes,

00:14:42.267 --> 00:14:44.267
but it's--you know,
the data size is fixed

00:14:44.267 --> 00:14:46.601
based on the number of pixels
you actually send.

00:14:46.601 --> 00:14:49.267
On the other hand,
it's certainly not as dynamic.

00:14:49.267 --> 00:14:51.767
You'd have to do things
on the server side.

00:14:51.767 --> 00:14:55.100
Um, and--and it can be
quite a big bigger,

00:14:55.100 --> 00:14:56.934
if you just are giving
a very simple--

00:14:56.934 --> 00:14:58.601
if it was just a simple outline,

00:14:58.601 --> 00:15:00.667
um, you'd have to specify
every pixel,

00:15:00.667 --> 00:15:02.667
um, kind of instead.

00:15:02.667 --> 00:15:05.167
So the very simplest way

00:15:05.167 --> 00:15:07.501
to put a-an image on the map

00:15:07.501 --> 00:15:09.167
is--is the ground overlay,

00:15:09.167 --> 00:15:11.334
and it's--it's, uh,
it's pretty much dead simple.

00:15:11.334 --> 00:15:13.334
You tell Maps
that I want this image,

00:15:13.334 --> 00:15:15.334
and I want it
in this BoundingBox,

00:15:15.334 --> 00:15:17.167
and it just puts it
on the screen.

00:15:17.167 --> 00:15:19.200
Um, and it takes care
of the fact--

00:15:19.200 --> 00:15:23.000
you know, as you scroll around,
it keeps the image in line.

00:15:23.000 --> 00:15:26.167
And as you zoom in,
it correctly places--places it.

00:15:26.167 --> 00:15:29.167
Um, and so that's great.

00:15:29.167 --> 00:15:31.334
You know, it's like 4 lines
of code, like 20 seconds.

00:15:31.334 --> 00:15:33.834
If you already have
existing imagery,

00:15:33.834 --> 00:15:35.501
um, this works really well.

00:15:35.501 --> 00:15:38.334
And in addition, uh, the--
the BoundingBox

00:15:38.334 --> 00:15:41.501
is flexible enough,
at this level especially,

00:15:41.501 --> 00:15:44.501
um, where the earth
is essentially flat

00:15:44.501 --> 00:15:47.167
or kind of local
elevation stuff takes--

00:15:47.167 --> 00:15:48.834
takes over, um,

00:15:48.834 --> 00:15:51.200
as opposed to kind of
larger-scale curvature,

00:15:51.200 --> 00:15:53.000
where you can essentially
just think of it

00:15:53.000 --> 00:15:54.667
as an affine transform

00:15:54.667 --> 00:15:58.334
to place that correctly,
uh, and keep it in line.

00:15:58.334 --> 00:16:00.334
Um, the problem is,

00:16:00.334 --> 00:16:03.400
as we zoom in,

00:16:03.400 --> 00:16:06.067
you can start to see

00:16:06.067 --> 00:16:08.901
the problem
with a single fixed image.

00:16:08.901 --> 00:16:10.734
Um, Maps handles it well,

00:16:10.734 --> 00:16:13.234
but there's nothing you can do
when there's no more pixel data.

00:16:13.234 --> 00:16:15.400
You start seeing the pixels
as you zoom in.

00:16:15.400 --> 00:16:18.734
Um, and so the--
the classic fix for this

00:16:18.734 --> 00:16:20.734
is the--is the image pyramid.

00:16:20.734 --> 00:16:23.234
It's been around forever
from MIP Mapping

00:16:23.234 --> 00:16:25.434
to kind of those deep zoom
kind of things.

00:16:25.434 --> 00:16:27.400
Um, and the idea
is that you start

00:16:27.400 --> 00:16:29.400
with a high-resolution,
uh, image,

00:16:29.400 --> 00:16:31.234
and at successive levels, uh,

00:16:31.234 --> 00:16:33.567
you--you reduce the size,

00:16:33.567 --> 00:16:36.234
uh, and resample
to get some really nice,

00:16:36.234 --> 00:16:39.734
uh, lower, uh, higher zoom--

00:16:39.734 --> 00:16:42.901
let's see,
zoomed-out imagery.

00:16:42.901 --> 00:16:44.901
Um, the nice thing is
because you're off--

00:16:44.901 --> 00:16:46.567
you're doing this offline,

00:16:46.567 --> 00:16:49.400
you can do, like, a really
high-quality resampling

00:16:49.400 --> 00:16:51.734
and keep things, you know,
really looking good.

00:16:51.734 --> 00:16:54.234
You're not dependent on whatever
algorithm the browser uses

00:16:54.234 --> 00:16:55.901
to keep things real-time.

00:16:55.901 --> 00:16:58.100
The other nice thing
is that you can actually,

00:16:58.100 --> 00:17:00.968
uh, change the level of detail
as you zoom in and out.

00:17:00.968 --> 00:17:03.133
So for instance,
uh, like on Maps,

00:17:03.133 --> 00:17:05.133
when you start out at--
at a city level,

00:17:05.133 --> 00:17:07.634
you only see major features
of--of the city,

00:17:07.634 --> 00:17:09.968
but as you zoom in you start
to see building outlines.

00:17:09.968 --> 00:17:11.968
There's nothing to prevent you
from doing that.

00:17:11.968 --> 00:17:13.801
You could start
with a very basic outline

00:17:13.801 --> 00:17:16.300
at the top level,
but as it--as somebody zooms in,

00:17:16.300 --> 00:17:18.968
you can start adding
kind of, you know, rooms,

00:17:18.968 --> 00:17:20.968
walls, and--
and other details

00:17:20.968 --> 00:17:22.734
from the sandbox area.

00:17:24.801 --> 00:17:26.801
So here's that in action.

00:17:26.801 --> 00:17:29.634
Uh, it's--it's
the ImageMapType object.

00:17:29.634 --> 00:17:31.300
Um, and when you create it,

00:17:31.300 --> 00:17:34.467
the, uh, the most important part

00:17:34.467 --> 00:17:36.133
is this getTileUrl.

00:17:36.133 --> 00:17:38.968
This is the main functional
part of the class.

00:17:38.968 --> 00:17:41.467
Um, and what it says is,

00:17:41.467 --> 00:17:45.300
is when you add this to the map,

00:17:45.300 --> 00:17:48.300
and Maps loads a certain area
of the world,

00:17:48.300 --> 00:17:49.968
um, it asks this method--

00:17:49.968 --> 00:17:53.968
so at this coordinate pair
and at this zoom level,

00:17:53.968 --> 00:17:55.634
what image should I show?

00:17:55.634 --> 00:17:57.634
And so in that method
you would, uh,

00:17:57.634 --> 00:18:01.200
have some, uh, procedure
for determining a URL.

00:18:01.200 --> 00:18:02.868
And so on the server side,

00:18:02.868 --> 00:18:04.534
typically you have
a bunch of tiles.

00:18:04.534 --> 00:18:07.033
You'd have some kind
of systematic naming method,

00:18:07.033 --> 00:18:09.033
which we'll get into
in a little bit,

00:18:09.033 --> 00:18:11.033
um, to return the proper tile,

00:18:11.033 --> 00:18:12.701
uh, and then you just insert it.

00:18:12.701 --> 00:18:14.701
And so what's great about this
is we now see

00:18:14.701 --> 00:18:16.701
we've added
kind of dashed red lines here

00:18:16.701 --> 00:18:18.367
so you can see the tiles.

00:18:18.367 --> 00:18:22.200
At this level we have, you know,
five tiles make up this map.

00:18:22.200 --> 00:18:24.534
But as we zoom in,

00:18:24.534 --> 00:18:28.200
un, it actually loads new tiles,

00:18:28.200 --> 00:18:30.200
um, that have
higher detail level.

00:18:30.200 --> 00:18:31.868
The tile size stays fixed,

00:18:31.868 --> 00:18:34.701
but we get more detail
as we zoom in.

00:18:34.701 --> 00:18:36.534
And so now we can see

00:18:36.534 --> 00:18:38.567
that, uh, you can see
really nice,

00:18:38.567 --> 00:18:41.300
high-quality things
from the Android level.

00:18:44.501 --> 00:18:47.167
So, um, the--the final thing

00:18:47.167 --> 00:18:49.000
with adding this--this, uh,

00:18:49.000 --> 00:18:51.000
this raster data
for your floor plans is

00:18:51.000 --> 00:18:53.834
obviously the Moscone Center
has, uh, three different floors,

00:18:53.834 --> 00:18:55.667
and you might want
to explore those--

00:18:55.667 --> 00:18:58.167
those different levels
before you get there.

00:18:58.167 --> 00:19:01.234
So to do that, uh,
it's actually pretty much

00:19:01.234 --> 00:19:04.067
exactly as straightforward
as you would think.

00:19:04.067 --> 00:19:06.567
You want to add these--
these maps.

00:19:06.567 --> 00:19:09.400
And as you select floor two
versus floor three,

00:19:09.400 --> 00:19:11.567
you want to hide the floors
you can't see

00:19:11.567 --> 00:19:14.567
and show the floor that you
can--that you want to see.

00:19:14.567 --> 00:19:16.567
Um, so we take this--
this data,

00:19:16.567 --> 00:19:19.234
we--we generate--
generate that image pyramid,

00:19:19.234 --> 00:19:21.067
uh, for each floor.

00:19:21.067 --> 00:19:23.567
Um, and then...

00:19:23.567 --> 00:19:26.567
on the map itself
we just add these buttons,

00:19:26.567 --> 00:19:29.234
uh, that on a click event

00:19:29.234 --> 00:19:32.567
kind of change this variable,
this floor variable,

00:19:32.567 --> 00:19:36.067
um, and so change a diff--
show a different floor.

00:19:36.067 --> 00:19:38.234
And so the code to do this--

00:19:38.234 --> 00:19:40.901
uh, let's see.

00:19:40.901 --> 00:19:42.400
There we go.

00:19:42.400 --> 00:19:44.734
So the floor--the code
to do this is--is really simple.

00:19:44.734 --> 00:19:47.734
So we have this kind of
floor variable just hanging out.

00:19:47.734 --> 00:19:49.567
And when a button is clicked,

00:19:49.567 --> 00:19:53.234
uh, it's click handler
calls this changeFloor function

00:19:53.234 --> 00:19:55.067
with its floor number.

00:19:55.067 --> 00:19:57.400
Um, it sets the floor value,

00:19:57.400 --> 00:19:59.734
and then it does this--
this kind of tricky thing

00:19:59.734 --> 00:20:01.734
where it removes
the ImageMapType

00:20:01.734 --> 00:20:03.734
and then re-adds it.

00:20:03.734 --> 00:20:05.400
Um, and the reason--

00:20:05.400 --> 00:20:08.567
or the--what that does is
tells the Maps API

00:20:08.567 --> 00:20:11.234
just to, um...

00:20:11.234 --> 00:20:13.901
check all the--
the tile URLs again.

00:20:13.901 --> 00:20:16.067
Um, it'll fetch
all the tile URLs again.

00:20:16.067 --> 00:20:17.734
And if they've changed,

00:20:17.734 --> 00:20:19.734
um, then they'll load
a new image.

00:20:19.734 --> 00:20:21.734
And if they haven't,
they'll keep the same image.

00:20:21.734 --> 00:20:23.234
And it works well,

00:20:23.234 --> 00:20:25.067
because it actually works
with the browser cache.

00:20:25.067 --> 00:20:26.901
If--you know,
if it's seen a tile before,

00:20:26.901 --> 00:20:28.901
it won't fetch the tile again,
but it will check--

00:20:28.901 --> 00:20:30.567
it will change the URL.

00:20:30.567 --> 00:20:32.400
So here you can see--

00:20:32.400 --> 00:20:36.067
this is the getTileUrl
function again.

00:20:36.067 --> 00:20:39.067
Um, and it's--it's still
just coordinate and zoom level.

00:20:39.067 --> 00:20:41.067
But you see where we're
redirecting it

00:20:41.067 --> 00:20:43.067
to, uh, another function
that has an idea

00:20:43.067 --> 00:20:45.734
of--of how floors
figure into things.

00:20:45.734 --> 00:20:47.400
And here it's really simple.

00:20:47.400 --> 00:20:49.400
We just have kind of a level--
floor number,

00:20:49.400 --> 00:20:51.234
and then construct this, uh,

00:20:51.234 --> 00:20:55.067
this URL
out of that information.

00:20:55.067 --> 00:20:58.400
So...

00:20:58.400 --> 00:21:00.567
that makes it really easy.

00:21:00.567 --> 00:21:02.634
Like, Maps makes it really easy
to put that on the map.

00:21:02.634 --> 00:21:04.467
But what I've
kind of not mentioned

00:21:04.467 --> 00:21:07.467
is how you actually get
that imagery onto the map.

00:21:07.467 --> 00:21:10.133
If you're, you know,
a geospatial professional,

00:21:10.133 --> 00:21:12.133
you've had that problem
figured out, you know,

00:21:12.133 --> 00:21:13.634
for decades now.

00:21:13.634 --> 00:21:15.634
Um, but if you,

00:21:15.634 --> 00:21:18.300
uh, just want to get
a floor plan on the map,

00:21:18.300 --> 00:21:19.968
uh, it's not so easy.

00:21:19.968 --> 00:21:21.968
There's--there's tools,
but it's kind of hard to tell

00:21:21.968 --> 00:21:23.634
what's going on.

00:21:23.634 --> 00:21:26.300
So Chris is here to--
to help you out.

00:21:26.300 --> 00:21:27.968
Broadfoot: So as Brendan said,

00:21:27.968 --> 00:21:29.968
if you're not an expert
in this stuff,

00:21:29.968 --> 00:21:32.300
uh, it's kind of hard, right?

00:21:32.300 --> 00:21:35.801
Uh, so I've had, you know,
a bunch of people ask me--

00:21:35.801 --> 00:21:37.300
I started Google--

00:21:37.300 --> 00:21:39.133
at Google
about eight months ago,

00:21:39.133 --> 00:21:41.133
and I've had people ask me
how to do this stuff,

00:21:41.133 --> 00:21:43.133
and I kind of point them
towards these tools.

00:21:43.133 --> 00:21:45.467
But before I agreed
to do this talk,

00:21:45.467 --> 00:21:47.467
I'd not actually done it myself.

00:21:47.467 --> 00:21:49.968
Uh, shameful to admit,
but, you know, it's hard.

00:21:49.968 --> 00:21:51.634
Right?

00:21:51.634 --> 00:21:54.133
Um, so you know, there's tools

00:21:54.133 --> 00:21:55.968
to help you to do this stuff.

00:21:55.968 --> 00:21:59.634
There's the great
gdal2tiles, uh, utility.

00:21:59.634 --> 00:22:01.701
You basically run it
from the command line.

00:22:01.701 --> 00:22:03.367
It's a Python script.

00:22:03.367 --> 00:22:05.367
You know, it's as simple
as specifying

00:22:05.367 --> 00:22:08.033
an input file
and an output directory,

00:22:08.033 --> 00:22:11.200
and it just goes and magically
generates these tiles for you.

00:22:11.200 --> 00:22:13.033
Pretty simple, huh?

00:22:13.033 --> 00:22:15.033
Um, and if that's
not simple enough,

00:22:15.033 --> 00:22:18.367
there's, uh, there's a GUI to it
called MapTiler.

00:22:18.367 --> 00:22:20.200
And so that--
it's pretty nice.

00:22:20.200 --> 00:22:22.033
If you're interested
in this stuff,

00:22:22.033 --> 00:22:24.634
go check out MapTiler
at maptiler.org.

00:22:27.267 --> 00:22:29.334
But you know what?

00:22:29.334 --> 00:22:31.834
You know, we--we got this image
from our vendors

00:22:31.834 --> 00:22:33.334
for Google I/O.

00:22:33.334 --> 00:22:35.501
They basically did
all the fit-out.

00:22:35.501 --> 00:22:37.167
Um, but as you can see,

00:22:37.167 --> 00:22:39.501
you know, this image
doesn't have any concept

00:22:39.501 --> 00:22:41.501
of where it is on the world.

00:22:41.501 --> 00:22:44.501
In fact, it's not even
rotated correctly.

00:22:44.501 --> 00:22:46.501
So you know, this--
for this image

00:22:46.501 --> 00:22:48.834
to be placed on the map,
we need to rotate it

00:22:48.834 --> 00:22:51.834
at a particular, you know,
number of degrees,

00:22:51.834 --> 00:22:53.501
you know, resize it,

00:22:53.501 --> 00:22:55.501
and get the latitude
and longitude

00:22:55.501 --> 00:22:59.167
for the bottom left
and top right corners.

00:22:59.167 --> 00:23:01.234
So you know--
or we could use

00:23:01.234 --> 00:23:03.234
the gdal2tiles utility

00:23:03.234 --> 00:23:05.767
and georeference a few points,

00:23:05.767 --> 00:23:07.734
and it will go
and automatically, uh,

00:23:07.734 --> 00:23:10.734
you know, transform this image
to place on a map.

00:23:10.734 --> 00:23:12.901
So you know, all we need

00:23:12.901 --> 00:23:15.067
are these three coordinates.

00:23:15.067 --> 00:23:16.901
Pretty simple, huh? Right?

00:23:16.901 --> 00:23:19.734
So you know--
but I don't know.

00:23:19.734 --> 00:23:21.734
I-I have no idea how to get,
you know,

00:23:21.734 --> 00:23:24.734
exact latitude and longitude
for this image.

00:23:24.734 --> 00:23:26.567
It's a bit ridiculous,

00:23:26.567 --> 00:23:29.567
um, you know,
and would req--would req--

00:23:29.567 --> 00:23:31.334
would require a bit
of trial and error, I think.

00:23:31.334 --> 00:23:35.000
So I've created this, uh,
little tool,

00:23:35.000 --> 00:23:37.167
uh, called OverlayTiler.

00:23:37.167 --> 00:23:38.834
So it basically makes

00:23:38.834 --> 00:23:41.167
georeferencing
these images easy,

00:23:41.167 --> 00:23:43.167
and therefore helps you
generate tiles

00:23:43.167 --> 00:23:45.834
using the gdal utility.

00:23:45.834 --> 00:23:48.000
And once again,
it's open source.

00:23:48.000 --> 00:23:51.000
I'll upload it straight
after this talk to this URL

00:23:51.000 --> 00:23:54.167
on code.google.com.

00:23:54.167 --> 00:23:56.501
Um, but what does it look like?

00:23:56.501 --> 00:24:00.167
So basically--
let's zoom out.

00:24:00.167 --> 00:24:03.234
So basically
it generates two commands.

00:24:03.234 --> 00:24:05.901
First of all, gdal_translate,

00:24:05.901 --> 00:24:08.901
which basically specifies
a bunch of control points,

00:24:08.901 --> 00:24:12.100
in this case
three control points,

00:24:12.100 --> 00:24:14.400
for the, you know,
top left, top right,

00:24:14.400 --> 00:24:17.067
and bottom right
of the image,

00:24:17.067 --> 00:24:19.067
and says what latitude
and longitudes

00:24:19.067 --> 00:24:21.400
at those pixel points.

00:24:21.400 --> 00:24:23.400
You know, you give it
an input file,

00:24:23.400 --> 00:24:25.400
and it outputs a GeoTIFF,

00:24:25.400 --> 00:24:27.901
basically a georeferenced image.

00:24:27.901 --> 00:24:29.901
So you know,
there's no loss in quality.

00:24:29.901 --> 00:24:32.234
It just goes and adds some more
metadata to that image.

00:24:32.234 --> 00:24:34.234
And the second command
is gdal2tiles,

00:24:34.234 --> 00:24:36.734
which we talked about
a little prev--previously.

00:24:36.734 --> 00:24:38.567
You know, you tell it
what projection

00:24:38.567 --> 00:24:40.400
the source imagery is from,

00:24:40.400 --> 00:24:42.400
in this case because we've
given it ground control points,

00:24:42.400 --> 00:24:44.400
uh, on Google Maps,

00:24:44.400 --> 00:24:46.901
we're using Web Mercator.

00:24:46.901 --> 00:24:48.901
And we say we want
to generate tiles

00:24:48.901 --> 00:24:51.234
from zoom 16 to 19.

00:24:51.234 --> 00:24:53.734
So you know, you could skip
this second step

00:24:53.734 --> 00:24:55.400
and use the MapTiler GUI.

00:24:55.400 --> 00:24:57.234
It will go
and actually figure out

00:24:57.234 --> 00:25:00.567
what appropriate zoom levels,
uh, should be generated.

00:25:00.567 --> 00:25:03.634
And it outputs
a nice directory of tiles

00:25:03.634 --> 00:25:05.634
and in fact
sample implementations

00:25:05.634 --> 00:25:07.634
using Google Maps 
and OpenStreetMap

00:25:07.634 --> 00:25:09.968
with the overlay on it.

00:25:09.968 --> 00:25:11.634
So this is a nice little GUI.

00:25:11.634 --> 00:25:13.634
The first thing
I'm going to do is, uh,

00:25:13.634 --> 00:25:15.467
change the opacity of the layer,

00:25:15.467 --> 00:25:17.467
so I can see the base map
below it.

00:25:17.467 --> 00:25:19.501
And then I can just go
and simply drag

00:25:19.501 --> 00:25:21.300
these three
ground control points

00:25:21.300 --> 00:25:24.234
and move the overlay,
you know, into position.

00:25:27.501 --> 00:25:30.501
So if I can get that right...

00:25:30.501 --> 00:25:33.667
You know, and this is--
this is really WYSIWYG, right?

00:25:33.667 --> 00:25:36.834
Um, you know, the tiles
that are generated

00:25:36.834 --> 00:25:40.334
will look pretty--
pretty close to what's, uh,

00:25:40.334 --> 00:25:42.334
what you're seeing right here.

00:25:42.334 --> 00:25:44.834
Oh, let's see if I can
get that right.

00:25:44.834 --> 00:25:47.501
Anyway, so you know,
if I bump the opacity back up,

00:25:47.501 --> 00:25:50.501
that's basically what's
gonna be generated.

00:25:50.501 --> 00:25:52.200
So this uses Canvas 2D

00:25:52.200 --> 00:25:55.501
to transform the image
inside the browser.

00:25:55.501 --> 00:25:58.167
Um, so you know, a similar
transformation will be done

00:25:58.167 --> 00:25:59.767
by gdal2tiles.

00:26:02.167 --> 00:26:04.501
So you know, now that
that's all done,

00:26:04.501 --> 00:26:06.834
uh, we could--we could use
the exact same command

00:26:06.834 --> 00:26:08.501
for all the different floors,

00:26:08.501 --> 00:26:10.334
uh, because the images

00:26:10.334 --> 00:26:13.334
are of the same dimension.

00:26:13.334 --> 00:26:16.000
So next up,

00:26:16.000 --> 00:26:18.601
I'm going to talk about...

00:26:18.601 --> 00:26:21.834
annotating that indoor map.

00:26:21.834 --> 00:26:24.667
So you know, having
that base map is quite pretty.

00:26:24.667 --> 00:26:27.167
I mean, we've got, you know,
great floor plans here.

00:26:27.167 --> 00:26:30.834
Um, but let's show some
of the features on the map.

00:26:30.834 --> 00:26:33.501
So basically here
I've added markers,

00:26:33.501 --> 00:26:37.167
uh, for each floor
and a bunch of sandbox sessions.

00:26:37.167 --> 00:26:40.167
And you know, I can hover over--

00:26:40.167 --> 00:26:43.501
let's see, this is room 5,
room 4.

00:26:43.501 --> 00:26:45.167
Chrome's over there.

00:26:45.167 --> 00:26:47.000
And I can also switch
the markers,

00:26:47.000 --> 00:26:50.834
depending on the--
the floor shown.

00:26:50.834 --> 00:26:54.501
Um, so what's the code
for that like?

00:26:54.501 --> 00:26:56.834
So basically it's data driven.

00:26:56.834 --> 00:27:00.667
So for each floor I define
a bunch of different features,

00:27:00.667 --> 00:27:03.067
uh, that have a latitude
and longitude

00:27:03.067 --> 00:27:05.234
and the title that's shown
on hover.

00:27:05.234 --> 00:27:06.734
And for each floor,

00:27:06.734 --> 00:27:08.567
there's a different set
of objects,

00:27:08.567 --> 00:27:11.567
and they're switched on and off
as the floor changes.

00:27:11.567 --> 00:27:13.901
So the code for that
is on the right.

00:27:13.901 --> 00:27:15.734
I've modified
the changeLevel function

00:27:15.734 --> 00:27:18.067
to go and remove
the previously shown markers,

00:27:18.067 --> 00:27:20.234
you know, and then go and add
a bunch of different markers

00:27:20.234 --> 00:27:22.234
at the appropriate floor,

00:27:22.234 --> 00:27:25.234
and they're just regular
Google Maps markers.

00:27:25.234 --> 00:27:28.400
So there's nothing special
about doing it indoors.

00:27:28.400 --> 00:27:30.400
Um, so the next thing
I wanted to do

00:27:30.400 --> 00:27:32.267
was make this
a bit more exciting.

00:27:32.267 --> 00:27:35.067
Uh, I don't know about you,
but, uh, the classic red pin

00:27:35.067 --> 00:27:37.234
doesn't really excite me.

00:27:37.234 --> 00:27:40.567
So I've added two different
kinds of markers--

00:27:40.567 --> 00:27:42.400
blue ones
for the sandbox sessions

00:27:42.400 --> 00:27:46.234
and red ones for the--
uh, for the rooms.

00:27:46.234 --> 00:27:48.567
You know, you can get
the same interaction,

00:27:48.567 --> 00:27:51.901
because they're just
regular Google Maps markers.

00:27:51.901 --> 00:27:54.734
Um, but you know, it's--
it's an absolute pain

00:27:54.734 --> 00:27:56.734
to have your users
hover over them

00:27:56.734 --> 00:27:58.734
to figure out what's there,

00:27:58.734 --> 00:28:00.734
so you know, wouldn't it be
great to have labels,

00:28:00.734 --> 00:28:03.300
just like there's labels
on Google Maps streets

00:28:03.300 --> 00:28:05.968
and for various features
on the world?

00:28:05.968 --> 00:28:09.467
So you know, I've decided
to create another library

00:28:09.467 --> 00:28:10.968
to do this.

00:28:10.968 --> 00:28:12.634
So what does it do?

00:28:12.634 --> 00:28:15.968
Uh, it's part of
the Google Maps Utility Library,

00:28:15.968 --> 00:28:18.300
which can be found--
oops, sorry.

00:28:18.300 --> 00:28:20.133
I thought I had a link there.

00:28:20.133 --> 00:28:22.300
But it's part of
the Google Maps Utility Library,

00:28:22.300 --> 00:28:24.300
uh, which includes
popular libraries

00:28:24.300 --> 00:28:26.133
like MarkerClusterer.

00:28:26.133 --> 00:28:28.133
It provides dynamic rendering
of map labels

00:28:28.133 --> 00:28:30.133
using Canvas 2D.

00:28:30.133 --> 00:28:32.133
Uh, so you know,
the advantage of this

00:28:32.133 --> 00:28:33.634
is that you can, uh,

00:28:33.634 --> 00:28:37.467
dynamically change the text
and position of these markers

00:28:37.467 --> 00:28:40.634
in the process of creating
the Google I/O map,

00:28:40.634 --> 00:28:42.467
uh, on the mobile app.

00:28:42.467 --> 00:28:44.300
Uh, you know,
we were often asked,

00:28:44.300 --> 00:28:46.133
you know, move this marker
a bit here,

00:28:46.133 --> 00:28:47.801
you know,
move this label here,

00:28:47.801 --> 00:28:50.133
you know, switch these rooms--
kinda crazy.

00:28:50.133 --> 00:28:52.801
So this made it really,
really easy.

00:28:52.801 --> 00:28:54.634
There's lots
of rendering options,

00:28:54.634 --> 00:28:56.968
font size, font face,
color, alignment--

00:28:56.968 --> 00:28:59.801
basically anything
Canvas can do.

00:28:59.801 --> 00:29:02.200
And there's control
over which zoom levels

00:29:02.200 --> 00:29:03.701
show which labels.

00:29:03.701 --> 00:29:05.534
So this is really useful
for, you know,

00:29:05.534 --> 00:29:07.200
showing a different set
of labels

00:29:07.200 --> 00:29:08.868
at different zoom levels.

00:29:08.868 --> 00:29:10.868
So as you zoom out,
you probably want fewer labels,

00:29:10.868 --> 00:29:13.200
uh, so as not to clutter
the map.

00:29:13.200 --> 00:29:15.033
And it's going
to be open source,

00:29:15.033 --> 00:29:17.033
and it will be available,
you know,

00:29:17.033 --> 00:29:19.200
at the Google Maps
Utility Library page.

00:29:19.200 --> 00:29:22.033
So what does it look like?

00:29:22.033 --> 00:29:24.200
This is a really simple label.

00:29:24.200 --> 00:29:26.200
Uh, you know,
I just say new MapLabel,

00:29:26.200 --> 00:29:29.200
give it a text
and a position,

00:29:29.200 --> 00:29:31.701
uh, you know,
bump the font size a little bit,

00:29:31.701 --> 00:29:33.367
you know, just for this demo.

00:29:33.367 --> 00:29:35.868
And the great thing
about this is

00:29:35.868 --> 00:29:37.868
as I zoom in, you know,

00:29:37.868 --> 00:29:40.033
the marker doesn't get huge,

00:29:40.033 --> 00:29:43.033
uh, as if--as though
you'd just laid it on the--

00:29:43.033 --> 00:29:46.067
you know, on the base tiles
and generated tiles.

00:29:46.067 --> 00:29:48.033
So you don't have to change
the size of the text

00:29:48.033 --> 00:29:50.701
for, you know, each--
each zoom level.

00:29:50.701 --> 00:29:53.367
It's just going
to stay the same.

00:29:53.367 --> 00:29:57.033
So now a quick demo showing
how dynamic this is.

00:29:57.033 --> 00:29:59.200
I've just added a text box
in the top right of the map.

00:29:59.200 --> 00:30:01.200
And whenever I click on the map,

00:30:01.200 --> 00:30:03.868
you know, this text is going
to be used to add a new label.

00:30:03.868 --> 00:30:07.033
So this is floor three
of the Moscone Center.

00:30:07.033 --> 00:30:10.367
So we've got the keynote here--

00:30:10.367 --> 00:30:12.367
you know, "Android"

00:30:12.367 --> 00:30:15.033
up over here,

00:30:15.033 --> 00:30:17.033
and "Room 11."

00:30:17.033 --> 00:30:18.868
So you know,
it makes it really easy

00:30:18.868 --> 00:30:21.701
to go and, uh, you know,
if your data changes a lot

00:30:21.701 --> 00:30:23.701
or you want to have
user-generated content,

00:30:23.701 --> 00:30:26.534
uh, for example,
if you, you know,

00:30:26.534 --> 00:30:29.701
have your office staff
go and be able to edit the map,

00:30:29.701 --> 00:30:31.701
this--this makes it
really possible.

00:30:31.701 --> 00:30:34.033
So I've just gone
and added labels

00:30:34.033 --> 00:30:36.033
for each of those markers.

00:30:36.033 --> 00:30:38.367
As before,
as I switch through the floors,

00:30:38.367 --> 00:30:41.367
the markers change.

00:30:41.367 --> 00:30:43.367
And you'll notice, you know,
in a bunch of places

00:30:43.367 --> 00:30:45.300
I've got a label but no marker.

00:30:47.734 --> 00:30:51.000
And as you--as I zoom in,

00:30:51.000 --> 00:30:53.033
you'll see I've added--

00:30:53.033 --> 00:30:55.334
in the previous zoom level,
there were no markers

00:30:55.334 --> 00:30:57.334
up in the sandbox,

00:30:57.334 --> 00:30:59.334
because it would be
too cluttered,

00:30:59.334 --> 00:31:01.734
and as I zoom in,
they just appear.

00:31:01.734 --> 00:31:03.567
And so they're
also right-aligned.

00:31:03.567 --> 00:31:05.567
If they were center-aligned,
like in the default,

00:31:05.567 --> 00:31:07.567
the--the markers
would interfere

00:31:07.567 --> 00:31:09.734
and you wouldn't be able
to read what's there.

00:31:09.734 --> 00:31:12.567
So you know, these--these labels
are really flexible.

00:31:12.567 --> 00:31:14.734
Uh, and it was a huge win

00:31:14.734 --> 00:31:17.234
when we were making
the Google I/O map.

00:31:17.234 --> 00:31:20.734
So I'm gonna talk
a little bit now

00:31:20.734 --> 00:31:23.400
over--about searching over
indoor features.

00:31:23.400 --> 00:31:25.400
So you know,
often your users don't know

00:31:25.400 --> 00:31:27.734
exactly, uh, you know,
the location

00:31:27.734 --> 00:31:29.901
of what they're looking for.

00:31:29.901 --> 00:31:32.567
So I'm gonna demonstrate,
you know, a simple way

00:31:32.567 --> 00:31:34.067
to enable this.

00:31:34.067 --> 00:31:36.067
So you can see here

00:31:36.067 --> 00:31:38.400
I've got a little search box
in the top right.

00:31:38.400 --> 00:31:40.734
And basically
what this is gonna do--

00:31:40.734 --> 00:31:44.400
it's going to filter the--
filter the markers on the map.

00:31:44.400 --> 00:31:47.400
So you know,
as I type in "room,"

00:31:47.400 --> 00:31:49.567
I'll see all the rooms.

00:31:49.567 --> 00:31:53.400
Also, I think the toilets
are called washrooms,

00:31:53.400 --> 00:31:55.567
uh, you know,
press room, et cetera.

00:31:55.567 --> 00:31:57.400
You know, if I search
for "toilet,"

00:31:57.400 --> 00:31:58.901
I just see the toilets.

00:31:58.901 --> 00:32:02.467
"chrome" and "geo"--

00:32:02.467 --> 00:32:04.300
so I can see the Geo sandbox

00:32:04.300 --> 00:32:07.968
as well as, uh, the room
we're in right now.

00:32:07.968 --> 00:32:09.968
I added a little bit
of metadata to that

00:32:09.968 --> 00:32:12.300
to say, you know,
this is Geo.

00:32:12.300 --> 00:32:14.801
So you know, this is--this is
all done on the client side.

00:32:14.801 --> 00:32:16.300
Uh, it's really quick.

00:32:16.300 --> 00:32:18.801
It's not exactly scalable.

00:32:18.801 --> 00:32:20.968
Uh, you might want to have--

00:32:20.968 --> 00:32:22.634
uh, have that text box

00:32:22.634 --> 00:32:24.634
actually, you know,
go and ping the server

00:32:24.634 --> 00:32:26.567
to go and bring back
new markers.

00:32:29.667 --> 00:32:31.334
And you know, for example,

00:32:31.334 --> 00:32:35.167
if I want to see, you know,
the toilets on every level,

00:32:35.167 --> 00:32:37.667
I can switch through them
as well.

00:32:37.667 --> 00:32:40.000
So the code for that's
pretty simple.

00:32:40.000 --> 00:32:43.834
Um, I've gone and modified
that addMarker function

00:32:43.834 --> 00:32:45.334
we saw previously.

00:32:45.334 --> 00:32:47.667
And you know,
it's basically a giant hack.

00:32:47.667 --> 00:32:49.834
It just goes and does regex

00:32:49.834 --> 00:32:52.000
over a bunch
of different fields

00:32:52.000 --> 00:32:55.334
and just filters--
filters the markers out.

00:32:55.334 --> 00:32:57.334
Um, so yeah, as I said,
not scalable--

00:32:57.334 --> 00:32:59.334
there's definitely better ways
to do this,

00:32:59.334 --> 00:33:02.000
but it's a really great feature
to add to a--to an indoor map.

00:33:05.834 --> 00:33:08.834
So Brendan's gonna talk now
a bit about navigating indoors

00:33:08.834 --> 00:33:11.167
using Street View.

00:33:11.167 --> 00:33:15.000
Kenny: Yeah,
so Street View is great

00:33:15.000 --> 00:33:16.667
on maps, you know.

00:33:16.667 --> 00:33:18.667
If you are searching
for a place on a map,

00:33:18.667 --> 00:33:21.000
uh, it's one thing to find
kind of the intersection

00:33:21.000 --> 00:33:23.167
or kind of which part
of the block

00:33:23.167 --> 00:33:25.000
something is on,

00:33:25.000 --> 00:33:27.000
but it's another to actually
kinda go down into Street View

00:33:27.000 --> 00:33:28.501
and actually see

00:33:28.501 --> 00:33:30.501
kind of the facades
of different buildings.

00:33:30.501 --> 00:33:33.334
And it's the same thing
with kind of indoor mapping,

00:33:33.334 --> 00:33:35.334
um, or really any kind of,
like, place

00:33:35.334 --> 00:33:37.334
where there is
no Street View coverage.

00:33:37.334 --> 00:33:39.033
Um, it could be parks.

00:33:39.033 --> 00:33:42.000
It could be, uh,
college campuses, what have you.

00:33:42.000 --> 00:33:44.634
Um, so it's actually
extremely easy

00:33:44.634 --> 00:33:46.133
to use Street View,

00:33:46.133 --> 00:33:48.133
and I've been kind of sad
that there hasn't--

00:33:48.133 --> 00:33:50.133
or to make custom Street Views,
and I've been kind of sad

00:33:50.133 --> 00:33:51.968
that there--there haven't
been enough.

00:33:51.968 --> 00:33:53.968
But there is kind of
a barrier to entry,

00:33:53.968 --> 00:33:56.801
just in kind of--it looks
more complicated than it is.

00:33:56.801 --> 00:33:59.634
Um, so here's a couple

00:33:59.634 --> 00:34:01.534
of really cool ones

00:34:01.534 --> 00:34:03.200
that have been done.

00:34:03.200 --> 00:34:05.367
Uh, this is an agency in France
called Digitas.

00:34:05.367 --> 00:34:07.033
Uh, and for their
Christmas card,

00:34:07.033 --> 00:34:09.367
they made these, uh,

00:34:09.367 --> 00:34:11.200
this kind of walkway
into their--

00:34:11.200 --> 00:34:12.868
into their office building.

00:34:12.868 --> 00:34:14.701
And they even did
this kind of, like,

00:34:14.701 --> 00:34:16.534
pseudo augmented reality thing
where they--

00:34:16.534 --> 00:34:19.200
they put these arrows and images
into the, uh,

00:34:19.200 --> 00:34:22.033
into the Street View panorama.

00:34:22.033 --> 00:34:25.901
And so you can see
only a few meters away--

00:34:25.901 --> 00:34:27.734
exciting.

00:34:27.734 --> 00:34:30.033
Exciting.

00:34:30.033 --> 00:34:32.534
And there we go. Hooray.

00:34:32.534 --> 00:34:34.801
Um, let's see.

00:34:38.501 --> 00:34:41.167
Uh, and here's one the same
agency did for Nissan,

00:34:41.167 --> 00:34:43.167
and they did this other
pretty cool effect

00:34:43.167 --> 00:34:45.501
where they actually did
kind of long exposure, uh,

00:34:45.501 --> 00:34:48.000
long exposure, so they
could write with, uh,

00:34:48.000 --> 00:34:51.434
with lights--
lights on a stick, so...

00:34:54.667 --> 00:34:57.501
So how do you make
your own Street View?

00:34:57.501 --> 00:35:00.334
No, thank you.

00:35:00.334 --> 00:35:02.734
So...

00:35:02.734 --> 00:35:05.400
Street View is done
actually, uh,

00:35:05.400 --> 00:35:07.400
pretty much the same way

00:35:07.400 --> 00:35:09.234
that, uh, Maps itself is done.

00:35:09.234 --> 00:35:11.234
It uses the exact same
projection that we use,

00:35:11.234 --> 00:35:13.234
the equirectangular projection,

00:35:13.234 --> 00:35:15.734
um, to map from a sphere,

00:35:15.734 --> 00:35:17.234
or a spheroid,

00:35:17.234 --> 00:35:19.100
uh, onto kind of a flat surface

00:35:19.100 --> 00:35:21.234
that we can tile
and represent easily

00:35:21.234 --> 00:35:22.734
with--with images.

00:35:22.734 --> 00:35:24.901
Um, so if you can kind of
imagine yourself

00:35:24.901 --> 00:35:27.901
at the center of a sphere
and looking in each direction,

00:35:27.901 --> 00:35:30.234
um, at every point
that you can address,

00:35:30.234 --> 00:35:32.234
uh, there's--
there's a certain color,

00:35:32.234 --> 00:35:34.234
and that--that becomes
your pixel element.

00:35:34.234 --> 00:35:36.400
Then we use kind of
that latitude-longitude grid,

00:35:36.400 --> 00:35:39.067
so we can actually give
that point a name.

00:35:39.067 --> 00:35:40.901
And when we unfold it,

00:35:40.901 --> 00:35:42.734
uh, it becomes
this rectangular image,

00:35:42.734 --> 00:35:44.234
just like a map,

00:35:44.234 --> 00:35:46.234
and we tile it
just like a map,

00:35:46.234 --> 00:35:48.067
and then we can use
that same, uh,

00:35:48.067 --> 00:35:50.400
kind of image pyramid technique
that we talked about earlier,

00:35:50.400 --> 00:35:53.100
um, to provide
more level of detail

00:35:53.100 --> 00:35:56.067
and really fast loading
on that first zoom level,

00:35:56.067 --> 00:35:58.067
but then progressive amounts
of detail

00:35:58.067 --> 00:36:01.467
as the user zooms in.

00:36:01.467 --> 00:36:05.300
So yesterday Chris and I
went downstairs,

00:36:05.300 --> 00:36:08.133
and we took some pictures
of the lobby

00:36:08.133 --> 00:36:10.300
and then used, uh,

00:36:10.300 --> 00:36:12.634
just kind of a popular
image-editing program

00:36:12.634 --> 00:36:14.300
to--to stitch 'em together.

00:36:14.300 --> 00:36:17.300
There's--there's a lot of these
available now,

00:36:17.300 --> 00:36:20.133
um, and this is just
the one that we chose.

00:36:20.133 --> 00:36:22.634
Um, it kind of starts
placing the images in place.

00:36:22.634 --> 00:36:25.133
Um, obviously, you know,
it's not the--

00:36:25.133 --> 00:36:27.000
what you'd want to use,

00:36:27.000 --> 00:36:28.968
but it kind of shows you
how they start getting aligned

00:36:28.968 --> 00:36:30.968
to get the geometry correct.

00:36:30.968 --> 00:36:33.467
Um, there we go.

00:36:33.467 --> 00:36:35.634
Then once the images are
stitched together,

00:36:35.634 --> 00:36:37.968
it can do this kind
of geometric correction.

00:36:37.968 --> 00:36:39.968
So it actually aligns them
together,

00:36:39.968 --> 00:36:42.634
and you get the proper, uh,

00:36:42.634 --> 00:36:44.634
projection
to make things line up

00:36:44.634 --> 00:36:46.801
when we put it back
onto the surface

00:36:46.801 --> 00:36:48.400
of a virtual sphere.

00:36:51.667 --> 00:36:54.667
So the code to do this
is pretty easy.

00:36:54.667 --> 00:36:57.334
Um, it's a little more
complicated than ImageMapType,

00:36:57.334 --> 00:36:59.868
just because we need
to provide, uh,

00:36:59.868 --> 00:37:01.901
not only a tile
for a certain location

00:37:01.901 --> 00:37:03.400
and zoom level,

00:37:03.400 --> 00:37:05.901
but also a Street View
node has a--

00:37:05.901 --> 00:37:09.067
kind of a location itself
in the world,

00:37:09.067 --> 00:37:11.567
so that we can kind of locate
them relative to each other

00:37:11.567 --> 00:37:13.234
and then link them together.

00:37:13.234 --> 00:37:16.067
Um, so in this--
so here we--we, uh,

00:37:16.067 --> 00:37:17.901
create a new
Street View panorama,

00:37:17.901 --> 00:37:19.400
which is the view.

00:37:19.400 --> 00:37:21.234
Uh, we pass it
these panel options.

00:37:21.234 --> 00:37:23.234
And the options just say, um,
that we want to start

00:37:23.234 --> 00:37:25.567
at this--at
the pano ID of lobby,

00:37:25.567 --> 00:37:28.067
the panoramic provider
that we're about to give,

00:37:28.067 --> 00:37:29.901
uh, with the IDed lobby.

00:37:29.901 --> 00:37:32.067
And we--we say
the panoProvider,

00:37:32.067 --> 00:37:35.734
the object that's actually gonna
provide the Street View data,

00:37:35.734 --> 00:37:38.901
um, is at this--
is this object right here.

00:37:38.901 --> 00:37:42.000
Um, so--well, it's actually a
function that returns an object.

00:37:42.000 --> 00:37:44.734
But that's--that role
is usually filled in

00:37:44.734 --> 00:37:47.067
by, uh, by Google Maps itself,

00:37:47.067 --> 00:37:49.234
and it requests that data
from, uh,

00:37:49.234 --> 00:37:50.901
from the Google Maps servers,

00:37:50.901 --> 00:37:52.734
but there's no--no reason
that you can't put

00:37:52.734 --> 00:37:54.734
your own custom object there
and kind of intercept

00:37:54.734 --> 00:37:56.734
those calls and then answer
with your own data,

00:37:56.734 --> 00:37:58.734
uh, which is what we're
gonna do here.

00:37:58.734 --> 00:38:00.734
So that gets--
getCustomPanorama

00:38:00.734 --> 00:38:04.133
is a function that returns
an object

00:38:04.133 --> 00:38:06.834
that--that gives, uh, it's--

00:38:06.834 --> 00:38:09.801
it has a location,
um, in the world,

00:38:09.801 --> 00:38:13.634
and at that location,
it has a kind of, uh, heading

00:38:13.634 --> 00:38:15.133
that points north.

00:38:15.133 --> 00:38:17.133
It has a pano ID,

00:38:17.133 --> 00:38:19.968
which is just a string that
we're gonna use to identify it.

00:38:19.968 --> 00:38:23.300
And then it has this getTileUrl
you can see,

00:38:23.300 --> 00:38:26.300
which is that
same exact, uh, method

00:38:26.300 --> 00:38:28.968
that has--that provides
URLs for images

00:38:28.968 --> 00:38:32.300
for a certain view.

00:38:32.300 --> 00:38:35.968
Um, and finally,
so we just pass it

00:38:35.968 --> 00:38:38.634
once again
to a really simple, uh, method

00:38:38.634 --> 00:38:40.634
that just appends some strings

00:38:40.634 --> 00:38:44.300
and produces a URL that gives
the proper, uh, image URL

00:38:44.300 --> 00:38:45.968
for a certain zoom level

00:38:45.968 --> 00:38:47.634
and certain tile coordinates.

00:38:47.634 --> 00:38:49.634
It's a little bit different
from latitude and longitude,

00:38:49.634 --> 00:38:51.634
uh, but it's actually
the same.

00:38:51.634 --> 00:38:54.801
It's just not the same
numeric scale.

00:38:54.801 --> 00:38:56.968
Um, so here we've taken that--
that tile--

00:38:56.968 --> 00:38:59.300
or that--sorry, that image
that we produced

00:38:59.300 --> 00:39:02.200
of the Moscone lobby,

00:39:02.200 --> 00:39:03.868
and we've made tiles of it,

00:39:03.868 --> 00:39:06.534
and then now we put it
in Street View.

00:39:06.534 --> 00:39:08.367
So this is just a normal
Street View

00:39:08.367 --> 00:39:10.367
with imagery that we provided.

00:39:10.367 --> 00:39:12.534
There's a guy
kind of checking his phone.

00:39:12.534 --> 00:39:15.200
And there's the--
the entranceway

00:39:15.200 --> 00:39:17.200
and escalators, et cetera.

00:39:17.200 --> 00:39:21.033
So now we have kind of a sense
of where we are.

00:39:21.033 --> 00:39:23.200
Um, but it--it also feels
kind of lonely,

00:39:23.200 --> 00:39:26.200
like I made a photo panorama

00:39:26.200 --> 00:39:28.200
in, like, 1997 in a Java applet.

00:39:28.200 --> 00:39:30.200
So, like, that's cool,
but what's really cool

00:39:30.200 --> 00:39:32.033
is having the notion
of--of Street View

00:39:32.033 --> 00:39:33.701
as this interconnected network,

00:39:33.701 --> 00:39:36.033
uh, that you can travel along
and get a sense of space.

00:39:36.033 --> 00:39:39.033
Um, so to do that,

00:39:39.033 --> 00:39:42.033
uh, we kind of augment
that panoProvider.

00:39:42.033 --> 00:39:44.701
This is the same
panoProvider object.

00:39:44.701 --> 00:39:47.234
Uh, we still have that lobby ID.
We still have a location.

00:39:47.234 --> 00:39:51.033
Um, we have a nice description
that shows up on a screen,

00:39:51.033 --> 00:39:53.367
but now we have
this links array,

00:39:53.367 --> 00:39:57.200
which is an array of objects
that describe

00:39:57.200 --> 00:40:00.868
the panoramas that
that location can link to.

00:40:00.868 --> 00:40:04.367
Um, so it hinges
on that pano ID again.

00:40:04.367 --> 00:40:07.534
So we're gonna link
to the Android floor.

00:40:07.534 --> 00:40:09.534
Um, and it has a heading,
which we'll just say

00:40:09.534 --> 00:40:11.534
those, uh, those nice
street markers

00:40:11.534 --> 00:40:13.534
that--that are overlaid
on the image,

00:40:13.534 --> 00:40:16.534
uh, should point at 262 degrees,

00:40:16.534 --> 00:40:18.534
uh, from north.

00:40:18.534 --> 00:40:21.033
It's kind of a compass bearing.

00:40:21.033 --> 00:40:22.868
So--and then finally,

00:40:22.868 --> 00:40:24.868
this is just the same
getTileUrl.

00:40:24.868 --> 00:40:26.534
Nothing's that different.

00:40:26.534 --> 00:40:28.534
And so what this
enables us to do

00:40:28.534 --> 00:40:30.200
is take
two different panoramas--

00:40:30.200 --> 00:40:32.200
we took this one originally--

00:40:32.200 --> 00:40:35.133
and now we can link
to the Android level...

00:40:38.334 --> 00:40:41.334
and go right upstairs

00:40:41.334 --> 00:40:43.667
and always go back down.

00:40:43.667 --> 00:40:45.334
I think--I don't know.

00:40:45.334 --> 00:40:47.667
It's a time-traveling
Street View.

00:40:47.667 --> 00:40:50.667
It's cool. If you go in there,
Jane's Addiction is playing.

00:40:50.667 --> 00:40:52.934
Um, so...

00:40:56.501 --> 00:40:58.834
I think we're gonna tempt
the demo gods here

00:40:58.834 --> 00:41:00.901
and actually show you the--
the full kind of experience.

00:41:00.901 --> 00:41:02.901
So we start

00:41:02.901 --> 00:41:06.234
at the store locator level.

00:41:06.234 --> 00:41:09.234
Um, and we're actually already
in San Francisco.

00:41:09.234 --> 00:41:11.901
So here's the Moscone Center,

00:41:11.901 --> 00:41:14.234
and as we zoom in,

00:41:14.234 --> 00:41:16.000
we can start to see...

00:41:20.000 --> 00:41:23.000
our imagery already
overlaid on top.

00:41:23.000 --> 00:41:24.434
And...

00:41:26.968 --> 00:41:28.467
here we go.

00:41:28.467 --> 00:41:29.968
It's loading.

00:41:29.968 --> 00:41:32.133
Um, here's outside
the Moscone Center.

00:41:32.133 --> 00:41:34.133
We'll point this way.
It's a little prettier.

00:41:34.133 --> 00:41:37.300
And then if we--we now have
this custom link here,

00:41:37.300 --> 00:41:39.300
um, which is added
in the exact same way

00:41:39.300 --> 00:41:40.801
as we showed before,

00:41:40.801 --> 00:41:43.133
where we just link
to a public, uh,

00:41:43.133 --> 00:41:46.634
public Google Maps,
uh, panorama ID.

00:41:46.634 --> 00:41:48.634
Uh, so Street View imagery
actually resides

00:41:48.634 --> 00:41:50.300
on your own server.

00:41:50.300 --> 00:41:52.133
It's provided by you.

00:41:52.133 --> 00:41:55.634
Um, and obviously,
we wouldn't link

00:41:55.634 --> 00:41:57.467
to kind of arbitrary
Street View things,

00:41:57.467 --> 00:41:59.801
'cause you know, you can put
anything you want on there.

00:41:59.801 --> 00:42:01.334
So I--you know.

00:42:01.334 --> 00:42:05.033
Um, but what you do instead
is when you get a panorama ID

00:42:05.033 --> 00:42:07.701
from Google Maps--
sorry, from Street View--

00:42:07.701 --> 00:42:09.868
so when somebody says, "I want
to see a Street View here,"

00:42:09.868 --> 00:42:12.200
you actually just, uh,
intercept that

00:42:12.200 --> 00:42:14.367
and add the same link
that we showed before.

00:42:14.367 --> 00:42:16.367
You just add a link
with the object

00:42:16.367 --> 00:42:18.300
that points to this location.

00:42:20.367 --> 00:42:24.200
And, uh, and you can always
head up to Android,

00:42:24.200 --> 00:42:27.868
um, go back to Moscone lobby,

00:42:27.868 --> 00:42:30.868
and exit again.

00:42:30.868 --> 00:42:32.534
And there we have it.

00:42:32.534 --> 00:42:34.534
You can even see--
actually, I didn't mention this,

00:42:34.534 --> 00:42:36.534
but this is a really nice--
it just does this

00:42:36.534 --> 00:42:38.033
automatically for you.

00:42:38.033 --> 00:42:39.868
Because we were searching
for the Moscone Center,

00:42:39.868 --> 00:42:41.701
uh, and it put a marker
on the map,

00:42:41.701 --> 00:42:43.701
uh, Street View automatically
places that marker

00:42:43.701 --> 00:42:45.200
in the world correctly.

00:42:45.200 --> 00:42:48.868
So we can see--that's what we
were searching for right there.

00:42:48.868 --> 00:42:50.701
Um, so that's--
that's all we have.

00:42:50.701 --> 00:42:53.200
So if you have any questions,
please come up to the mic,

00:42:53.200 --> 00:42:55.534
and we'll be happy to--
to answer them.

00:42:55.534 --> 00:42:58.467
[applause]

00:43:06.267 --> 00:43:08.234
man: So a quick question--

00:43:08.234 --> 00:43:10.400
for all this sort of metadata
and stuff

00:43:10.400 --> 00:43:12.234
that we'd be creating
for our own apps,

00:43:12.234 --> 00:43:14.567
is there gonna be any way
to potentially feed that back

00:43:14.567 --> 00:43:16.567
into search results
or something else

00:43:16.567 --> 00:43:18.400
on the larger Google Maps?

00:43:18.400 --> 00:43:20.400
I'm thinking of, like, 
stores at a mall

00:43:20.400 --> 00:43:23.400
or products inside a store,
where you have levels,

00:43:23.400 --> 00:43:25.567
a hierarchy of location.
Kenny: Right.

00:43:25.567 --> 00:43:28.567
Do you mean, like,
Google search proper?

00:43:28.567 --> 00:43:30.400
man: Yeah, in any way--
I mean, it's sort of--

00:43:30.400 --> 00:43:32.234
you know, a lot of times
if you're searching

00:43:32.234 --> 00:43:34.067
for a store within a mall...
Kenny: Right.

00:43:34.067 --> 00:43:35.901
man: it can be hard,
so if the mall decided,

00:43:35.901 --> 00:43:37.734
let's make a detailed map...
Kenny: Right.

00:43:37.734 --> 00:43:39.734
man: how could that sort of
be bubbled back into--

00:43:39.734 --> 00:43:42.067
is that part of the plan or no?
Kenny: Yeah, you want to...

00:43:42.067 --> 00:43:44.901
Broadfoot: Um, so I don't really
know too much about that.

00:43:44.901 --> 00:43:47.234
I work more from
the developer perspective,

00:43:47.234 --> 00:43:49.567
kind of enabling you to put this
on your own web site.

00:43:49.567 --> 00:43:51.901
man: Sure.
Broadfoot: Um, but yeah,

00:43:51.901 --> 00:43:54.567
I see that would potentially be,
you know, quite good

00:43:54.567 --> 00:43:56.567
for Google and users.

00:43:56.567 --> 00:43:59.234
Um, but yeah, I don't know much.
Come talk to me after.

00:43:59.234 --> 00:44:00.901
man: Okay.
Kenny: Yeah, that'd be great.

00:44:00.901 --> 00:44:03.300
Um, business place pages,
you know,

00:44:03.300 --> 00:44:05.634
is a good place to start.

00:44:05.634 --> 00:44:08.634
man: Um, I just have
a similar question.

00:44:08.634 --> 00:44:11.300
To add, like, more media to--

00:44:11.300 --> 00:44:13.167
to, like, to the pins,

00:44:13.167 --> 00:44:15.801
like sound bites or video--
is that an easy thing to do,

00:44:15.801 --> 00:44:17.467
or is that something
in the works?

00:44:17.467 --> 00:44:20.300
Kenny: Yeah, it's just HTML,
so you can put a click listener.

00:44:20.300 --> 00:44:23.968
You can do any sort of, uh,
event listener kind of thing

00:44:23.968 --> 00:44:26.467
and trigger, you know, audio.
You can put things.

00:44:26.467 --> 00:44:28.467
And, uh, and we didn't
show this,

00:44:28.467 --> 00:44:31.133
but you can actually--it's--
people are getting, uh,

00:44:31.133 --> 00:44:32.801
cool results from doing things.

00:44:32.801 --> 00:44:34.467
Instead of just
overlaying images,

00:44:34.467 --> 00:44:36.467
you can overlay a canvas
like Chris showed when he--

00:44:36.467 --> 00:44:38.801
when he, uh, georeferenced
that building.

00:44:38.801 --> 00:44:42.467
WebGL video--somebody made
a cool Mandelbrot explorer

00:44:42.467 --> 00:44:45.133
where you could zoom in
really far with Google Maps.

00:44:45.133 --> 00:44:47.167
Broadfoot: So if you're going
to use the storelocator library,

00:44:47.167 --> 00:44:48.801
and I'd love you to,

00:44:48.801 --> 00:44:50.634
uh, there's actually an event
that's triggered

00:44:50.634 --> 00:44:52.133
whenever the stores--

00:44:52.133 --> 00:44:53.968
whenever the, you know,
selected store is changed,

00:44:53.968 --> 00:44:55.968
so you can hook into that,
maybe, you know,

00:44:55.968 --> 00:44:58.300
ping back to your server for,
you know, some more stuff,

00:44:58.300 --> 00:44:59.968
show it anywhere on the page.

00:44:59.968 --> 00:45:01.868
Kenny: Play your store's
theme song.

00:45:01.868 --> 00:45:04.033
Broadfoot: Yeah.
Kenny: Yeah.

00:45:04.033 --> 00:45:05.868
man: For the custom Street View,

00:45:05.868 --> 00:45:07.868
is there any way to integrate
with the Pegman UI

00:45:07.868 --> 00:45:10.534
and get the blue lines
and stuff?

00:45:10.534 --> 00:45:12.367
Broadfoot: Uh, not really.

00:45:12.367 --> 00:45:14.200
I mean, that's
a really hard problem.

00:45:14.200 --> 00:45:16.200
Kenny: Yeah.
Broadfoot: I mean, you could--

00:45:16.200 --> 00:45:18.033
you could show your own
overlay on top,

00:45:18.033 --> 00:45:20.734
but you know,
if they intersect, it's, um,

00:45:20.734 --> 00:45:22.701
yeah, that's not really--I mean,
that's a really good question.

00:45:22.701 --> 00:45:24.701
man: So there's no API level
support for that right now?

00:45:24.701 --> 00:45:26.367
Kenny: There's no API level
of support.

00:45:26.367 --> 00:45:28.701
'Cause--so the--the blue lines
come down as image tiles,

00:45:28.701 --> 00:45:31.200
so they're already prerendered
on the Google servers.

00:45:31.200 --> 00:45:33.200
So you'd kind of have to, like,
tell Google,

00:45:33.200 --> 00:45:35.033
I have a location
at this point.

00:45:35.033 --> 00:45:36.701
They would add it to the tile.

00:45:36.701 --> 00:45:38.534
So it's not feasible
at this point,

00:45:38.534 --> 00:45:40.367
but you could certainly overlay
your own, you know,

00:45:40.367 --> 00:45:42.367
blue line on that segment,
and it would, you know--

00:45:42.367 --> 00:45:44.367
because they're mostly
transparent pings,

00:45:44.367 --> 00:45:46.367
they would overlay
correctly together.

00:45:46.367 --> 00:45:48.200
man: So if we made
our own map tiles,

00:45:48.200 --> 00:45:52.033
then is there a way to use
the same Pegman that you use?

00:45:52.033 --> 00:45:55.200
Um, 'cause right now when you
drag in your Pegman,

00:45:55.200 --> 00:45:57.200
it comes up with
the Street Views of the road.

00:45:57.200 --> 00:45:59.701
But can we intercept
that somehow

00:45:59.701 --> 00:46:01.934
so that it's seamless
for the user?

00:46:01.934 --> 00:46:03.934
Broadfoot: Yeah, actually, no.
You can't--you can't get,

00:46:03.934 --> 00:46:05.767
you know, the drag start
for the Pegman

00:46:05.767 --> 00:46:07.434
or something like that.
man: Okay.

00:46:07.434 --> 00:46:09.434
Broadfoot: But yeah,
that's a great feature request.

00:46:09.434 --> 00:46:13.100
man: Okay, thanks.

00:46:13.100 --> 00:46:15.100
man: Actually,
about his previous question--

00:46:15.100 --> 00:46:17.100
I thought you could do stuff
like that with Fusion Tables.

00:46:17.100 --> 00:46:19.601
If I loaded a KML shape
into a Fusion Table,

00:46:19.601 --> 00:46:21.601
I could just fuse that in
and get it back and rendered...

00:46:21.601 --> 00:46:23.434
Kenny: Yeah, yeah.

00:46:23.434 --> 00:46:25.601
It's just a matter of, uh,
you know,

00:46:25.601 --> 00:46:27.133
how interoperable they are.

00:46:27.133 --> 00:46:28.934
But if you want to replace it
completely

00:46:28.934 --> 00:46:30.934
with your own blue lines,
like, that's--sure.

00:46:30.934 --> 00:46:32.934
man: Um, so my question was
a little bit different.

00:46:32.934 --> 00:46:35.267
So let's say, uh, if we go
back to the Moscone view

00:46:35.267 --> 00:46:38.100
where you had all the, uh,
kiosks set up,

00:46:38.100 --> 00:46:39.934
and let's say it's
the conference--

00:46:39.934 --> 00:46:41.767
these rooms here,
and I wanted to click

00:46:41.767 --> 00:46:45.100
on one of those and get
what the next session was.

00:46:45.100 --> 00:46:46.934
Kenny: This one?
man: Um, in order for me--

00:46:46.934 --> 00:46:48.767
Broadfoot: Sure, um...
man: So in order for me

00:46:48.767 --> 00:46:50.767
to do that, I need to be able
to intercept that event

00:46:50.767 --> 00:46:52.601
and convert it
into the coordinate system

00:46:52.601 --> 00:46:56.100
that my original metadata is in.
So is that part of the API?

00:46:56.100 --> 00:46:58.100
Broadfoot: So--so you're talking
about inside Street View,

00:46:58.100 --> 00:46:59.601
clicking it?

00:46:59.601 --> 00:47:01.501
man: Uh, whether it's inside
of Street View--

00:47:01.501 --> 00:47:03.334
well, Street View
would be cool to, but, um,

00:47:03.334 --> 00:47:06.501
whatever metadata
I've overlaid on top...

00:47:06.501 --> 00:47:08.334
Broadfoot: Okay, sure.
man: or whatever visual--

00:47:08.334 --> 00:47:10.334
visualization
I happen to be using,

00:47:10.334 --> 00:47:12.334
I need to be able to convert
my gestures

00:47:12.334 --> 00:47:14.000
back into that entity,

00:47:14.000 --> 00:47:16.501
whether it's
in a coordinate system

00:47:16.501 --> 00:47:18.167
that I'm dealing with,

00:47:18.167 --> 00:47:20.667
or you can link it directly
to one of the entities--

00:47:20.667 --> 00:47:23.334
I need something to latch onto,
so I know what it is

00:47:23.334 --> 00:47:25.167
that the user
is interacting with,

00:47:25.167 --> 00:47:27.000
so I can provide
the appropriate...

00:47:27.000 --> 00:47:29.000
Broadfoot: Sure. So have
you used the Google Maps--

00:47:29.000 --> 00:47:32.334
uh, the Google I/O map
on the Android app?

00:47:32.334 --> 00:47:34.200
man: I have not yet.
Broadfoot: Oh, so we've

00:47:34.200 --> 00:47:36.000
actually got some really nice
integration there.

00:47:36.000 --> 00:47:38.501
Whenever you click on--
on a marker pin on your phone,

00:47:38.501 --> 00:47:40.501
um, it actually, you know,

00:47:40.501 --> 00:47:42.501
uh, tells Android,

00:47:42.501 --> 00:47:45.334
the native app, that, you know,
something has been clicked.

00:47:45.334 --> 00:47:47.834
And some--you know,
a little thing slides out

00:47:47.834 --> 00:47:49.834
and shows you the sessions
that are coming up.

00:47:49.834 --> 00:47:51.834
man: So I don't want to use
the markers,

00:47:51.834 --> 00:47:54.834
'cause red or blue
or whatever--I hate 'em.

00:47:54.834 --> 00:47:56.834
Broadfoot: Right.
man: So let's--let's think about

00:47:56.834 --> 00:47:58.667
a conference room outline...
Broadfoot: Uh-huh, sure.

00:47:58.667 --> 00:48:00.334
man: right,
where I'm gonna book--

00:48:00.334 --> 00:48:02.234
I just want to book this room
that I've just clicked on.

00:48:02.234 --> 00:48:04.067
Broadfoot: Sure, okay, I mean,
you could use a polygon.

00:48:04.067 --> 00:48:06.567
And in the same way you could
listen to a click event.

00:48:06.567 --> 00:48:08.567
Um, or if, you know--

00:48:08.567 --> 00:48:11.400
or if polygons are even,
you know,

00:48:11.400 --> 00:48:12.901
too much to do,

00:48:12.901 --> 00:48:14.734
you could, you know, listen
to a click event on the map

00:48:14.734 --> 00:48:17.567
and send back those coordinates
to your own server,

00:48:17.567 --> 00:48:19.400
which could then maybe
send back, you know,

00:48:19.400 --> 00:48:21.234
what was clicked there,
or you could use Fusion Tables.

00:48:21.234 --> 00:48:23.067
man: [speaking indistinctly]
Broadfoot: Sorry?

00:48:23.067 --> 00:48:24.734
man: Your APIs
do the translation

00:48:24.734 --> 00:48:26.400
into the base
coordinate system, or...

00:48:26.400 --> 00:48:28.234
Kenny: Yeah, you can--
you can project back

00:48:28.234 --> 00:48:30.067
the latitude and longitude
coordinates, yeah.

00:48:30.067 --> 00:48:31.901
man: Okay. All right, Thanks.
Broadfoot: Sure.

00:48:31.901 --> 00:48:33.734
man: Even with rotation
and stuff like that in the map,

00:48:33.734 --> 00:48:35.567
you guys do the translation?
Kenny: Yes.

00:48:35.567 --> 00:48:37.734
Well, I mean, so--
so the Maps API

00:48:37.734 --> 00:48:39.734
doesn't support rotation now.
man: [speaking indistinctly]

00:48:39.734 --> 00:48:42.901
Kenny: It does on mobile,
but--but, yes, that would--

00:48:42.901 --> 00:48:46.234
that would be added along--
when rotation is added,

00:48:46.234 --> 00:48:48.834
then, yes, definitely.
man: All right, thanks, guys.

00:48:51.167 --> 00:48:54.334
man: Um, are these cool features

00:48:54.334 --> 00:48:58.000
well-supported in
mobile, uh, browsers,

00:48:58.000 --> 00:49:01.000
uh, typically like Android
and iOS?

00:49:01.000 --> 00:49:03.400
Broadfoot: Uh, so what--
what specifically?

00:49:03.400 --> 00:49:06.901
man: Um, I mean,
most of the features--

00:49:06.901 --> 00:49:08.901
are--are they--
are they supported?

00:49:08.901 --> 00:49:10.901
Broadfoot: Sure.
I mean, so generally,

00:49:10.901 --> 00:49:12.901
the Google Maps API v3

00:49:12.901 --> 00:49:14.734
was designed
with mobile in mind.

00:49:14.734 --> 00:49:16.567
Um, so you know,
things are really quick

00:49:16.567 --> 00:49:18.067
to render on mobile.

00:49:18.067 --> 00:49:20.734
Uh, you know, a lot of work
was done to reduce latency.

00:49:20.734 --> 00:49:22.734
And so all of these features
that are showing here

00:49:22.734 --> 00:49:24.567
are supported on mobile as well.

00:49:24.567 --> 00:49:26.567
In fact, you know, this map
that you're seeing here

00:49:26.567 --> 00:49:28.400
is essentially the same
as the, uh,

00:49:28.400 --> 00:49:31.000
the map you see
on the Android I/O app.

00:49:34.901 --> 00:49:36.901
man: So, um, any thoughts

00:49:36.901 --> 00:49:39.400
on how to tell the user

00:49:39.400 --> 00:49:41.734
where they are
on this map?

00:49:41.734 --> 00:49:43.734
Because this room
is pretty nondescript,

00:49:43.734 --> 00:49:46.067
and I don't know
that I'm in room 7.

00:49:46.067 --> 00:49:49.234
Broadfoot: Sure. Um, you know,
a lot of work has been done

00:49:49.234 --> 00:49:51.234
about indoor geolocation.

00:49:51.234 --> 00:49:53.567
Um, I don't--I don't really know

00:49:53.567 --> 00:49:56.400
too much about that.

00:49:56.400 --> 00:49:59.234
Um, you know, it's quite coarse,
from what I understand.

00:49:59.234 --> 00:50:01.067
You know, but it's...

00:50:01.067 --> 00:50:02.901
Kenny: Yeah, it's
a really hard problem,

00:50:02.901 --> 00:50:04.901
because not--I mean,
not only are you kind of

00:50:04.901 --> 00:50:06.400
in a nondescript room,

00:50:06.400 --> 00:50:08.067
you're also blocking
all the signals

00:50:08.067 --> 00:50:09.901
from things that want
to get to you.

00:50:09.901 --> 00:50:11.901
Um, so there are--I mean,
there are ways of doing things

00:50:11.901 --> 00:50:13.734
where you can actually
put kind of--

00:50:13.734 --> 00:50:15.400
essentially beacons
inside a building,

00:50:15.400 --> 00:50:17.234
but they're all pretty much
custom solutions.

00:50:17.234 --> 00:50:18.901
There are also
really interesting ones

00:50:18.901 --> 00:50:20.767
where you can do kind of
machine vision,

00:50:20.767 --> 00:50:22.734
like, kind of figure out
where you are based on, like,

00:50:22.734 --> 00:50:26.400
if you actually take a picture,
but, um, but nothing automatic.

00:50:26.400 --> 00:50:29.400
It's a hard problem,
and you know...

00:50:29.400 --> 00:50:32.067
man: Hopefully somebody will
figure out something cool.

00:50:32.067 --> 00:50:34.734
Thanks.

00:50:34.734 --> 00:50:37.400
man: Hi. Is it possible
to play some video

00:50:37.400 --> 00:50:40.567
in panorama mode
somewhere in the--

00:50:40.567 --> 00:50:42.901
the tile
in the Street View?

00:50:42.901 --> 00:50:45.901
Broadfoot: So--so the question
is, can I put video,

00:50:45.901 --> 00:50:48.567
uh, you know, on the map
or Street View?

00:50:48.567 --> 00:50:50.234
man: Yeah.
Broadfoot: Uh, sure.

00:50:50.234 --> 00:50:53.901
I mean, uh, we have a concept
of an overlay view

00:50:53.901 --> 00:50:55.901
in Google Maps,
which essentially lets you

00:50:55.901 --> 00:50:59.567
put any DOM element
on the map,

00:50:59.567 --> 00:51:01.300
and it can be attached

00:51:01.300 --> 00:51:03.133
to a particular latitude
and longitude.

00:51:03.133 --> 00:51:05.801
So it'll be dragged around.
Um, that's certainly possible.

00:51:05.801 --> 00:51:09.300
In Street View--not so much,
I think, yeah.

00:51:09.300 --> 00:51:11.968
Kenny: Yeah, it won't be
correctly place.

00:51:11.968 --> 00:51:13.968
But, uh, there's no reason--
I mean, because it's just--

00:51:13.968 --> 00:51:15.968
It's HTML. Like, there's no
reason why you couldn't

00:51:15.968 --> 00:51:18.634
insert into there--yeah.
man: I was just asking.

00:51:18.634 --> 00:51:20.801
Okay, thanks.

00:51:20.801 --> 00:51:23.801
Kenny: Great.
If there's no more questions,

00:51:23.801 --> 00:51:25.467
thank you very much.

00:51:25.467 --> 00:51:27.934
[applause]

