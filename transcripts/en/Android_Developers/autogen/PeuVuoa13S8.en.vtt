WEBVTT
Kind: captions
Language: en

00:00:05.029 --> 00:00:07.430
 
hi I'm Chet Haase an engineer on the

00:00:07.430 --> 00:00:07.440
hi I'm Chet Haase an engineer on the
 

00:00:07.440 --> 00:00:10.070
hi I'm Chet Haase an engineer on the
Android team at Google in a previous

00:00:10.070 --> 00:00:10.080
Android team at Google in a previous
 

00:00:10.080 --> 00:00:12.379
Android team at Google in a previous
episode I talked about list view

00:00:12.379 --> 00:00:12.389
episode I talked about list view
 

00:00:12.389 --> 00:00:14.749
episode I talked about list view
animations where we would remove of you

00:00:14.749 --> 00:00:14.759
animations where we would remove of you
 

00:00:14.759 --> 00:00:17.450
animations where we would remove of you
and then animate both the swipe of the

00:00:17.450 --> 00:00:17.460
and then animate both the swipe of the
 

00:00:17.460 --> 00:00:19.070
and then animate both the swipe of the
item out of the list view as well as the

00:00:19.070 --> 00:00:19.080
item out of the list view as well as the
 

00:00:19.080 --> 00:00:21.050
item out of the list view as well as the
collapse around where the item used to

00:00:21.050 --> 00:00:21.060
collapse around where the item used to
 

00:00:21.060 --> 00:00:23.660
collapse around where the item used to
be animating all the other views into

00:00:23.660 --> 00:00:23.670
be animating all the other views into
 

00:00:23.670 --> 00:00:26.870
be animating all the other views into
place so that was all good you can run

00:00:26.870 --> 00:00:26.880
place so that was all good you can run
 

00:00:26.880 --> 00:00:29.150
place so that was all good you can run
that kind of animation on the property

00:00:29.150 --> 00:00:29.160
that kind of animation on the property
 

00:00:29.160 --> 00:00:31.189
that kind of animation on the property
animation system that goes all the way

00:00:31.189 --> 00:00:31.199
animation system that goes all the way
 

00:00:31.199 --> 00:00:34.010
animation system that goes all the way
back to 30 the demo I'm going to show

00:00:34.010 --> 00:00:34.020
back to 30 the demo I'm going to show
 

00:00:34.020 --> 00:00:36.049
back to 30 the demo I'm going to show
today looks remarkably similar to that

00:00:36.049 --> 00:00:36.059
today looks remarkably similar to that
 

00:00:36.059 --> 00:00:38.360
today looks remarkably similar to that
but there's an important twist to it so

00:00:38.360 --> 00:00:38.370
but there's an important twist to it so
 

00:00:38.370 --> 00:00:41.270
but there's an important twist to it so
first let's see the demo if you want to

00:00:41.270 --> 00:00:41.280
first let's see the demo if you want to
 

00:00:41.280 --> 00:00:42.740
first let's see the demo if you want to
go back and watch the previous show and

00:00:42.740 --> 00:00:42.750
go back and watch the previous show and
 

00:00:42.750 --> 00:00:44.770
go back and watch the previous show and
certain context for that that's fine

00:00:44.770 --> 00:00:44.780
certain context for that that's fine
 

00:00:44.780 --> 00:00:47.450
certain context for that that's fine
okay you're back here we go let's run

00:00:47.450 --> 00:00:47.460
okay you're back here we go let's run
 

00:00:47.460 --> 00:00:49.610
okay you're back here we go let's run
the current demo and this should look

00:00:49.610 --> 00:00:49.620
the current demo and this should look
 

00:00:49.620 --> 00:00:51.139
the current demo and this should look
remarkably similar to what we saw before

00:00:51.139 --> 00:00:51.149
remarkably similar to what we saw before
 

00:00:51.149 --> 00:00:54.229
remarkably similar to what we saw before
so we swipe an item out if we swipe it a

00:00:54.229 --> 00:00:54.239
so we swipe an item out if we swipe it a
 

00:00:54.239 --> 00:00:55.639
so we swipe an item out if we swipe it a
little bit it animates back into place

00:00:55.639 --> 00:00:55.649
little bit it animates back into place
 

00:00:55.649 --> 00:00:57.319
little bit it animates back into place
if we swipe it further it animates out

00:00:57.319 --> 00:00:57.329
if we swipe it further it animates out
 

00:00:57.329 --> 00:00:58.790
if we swipe it further it animates out
and then it animates the gap to be

00:00:58.790 --> 00:00:58.800
and then it animates the gap to be
 

00:00:58.800 --> 00:01:02.660
and then it animates the gap to be
closed so here's the twist if we run

00:01:02.660 --> 00:01:02.670
closed so here's the twist if we run
 

00:01:02.670 --> 00:01:05.660
closed so here's the twist if we run
this on gingerbread which is on my Nexus

00:01:05.660 --> 00:01:05.670
this on gingerbread which is on my Nexus
 

00:01:05.670 --> 00:01:08.719
this on gingerbread which is on my Nexus
S here you can see the same animation so

00:01:08.719 --> 00:01:08.729
S here you can see the same animation so
 

00:01:08.729 --> 00:01:10.399
S here you can see the same animation so
this is a question I get a lot with my

00:01:10.399 --> 00:01:10.409
this is a question I get a lot with my
 

00:01:10.409 --> 00:01:12.440
this is a question I get a lot with my
animation demos is G all this property

00:01:12.440 --> 00:01:12.450
animation demos is G all this property
 

00:01:12.450 --> 00:01:14.450
animation demos is G all this property
animation stuff is really cool how would

00:01:14.450 --> 00:01:14.460
animation stuff is really cool how would
 

00:01:14.460 --> 00:01:17.120
animation stuff is really cool how would
I do it on older releases hopefully that

00:01:17.120 --> 00:01:17.130
I do it on older releases hopefully that
 

00:01:17.130 --> 00:01:18.980
I do it on older releases hopefully that
issue is going away over time but if you

00:01:18.980 --> 00:01:18.990
issue is going away over time but if you
 

00:01:18.990 --> 00:01:21.649
issue is going away over time but if you
are concerned about gingerbread releases

00:01:21.649 --> 00:01:21.659
are concerned about gingerbread releases
 

00:01:21.659 --> 00:01:24.170
are concerned about gingerbread releases
still for our application then maybe we

00:01:24.170 --> 00:01:24.180
still for our application then maybe we
 

00:01:24.180 --> 00:01:25.880
still for our application then maybe we
can see how you could get this kind of

00:01:25.880 --> 00:01:25.890
can see how you could get this kind of
 

00:01:25.890 --> 00:01:28.850
can see how you could get this kind of
technique even on that older release so

00:01:28.850 --> 00:01:28.860
technique even on that older release so
 

00:01:28.860 --> 00:01:30.380
technique even on that older release so
let's take a look at the code I'm not

00:01:30.380 --> 00:01:30.390
let's take a look at the code I'm not
 

00:01:30.390 --> 00:01:31.940
let's take a look at the code I'm not
going to go over all the elements of the

00:01:31.940 --> 00:01:31.950
going to go over all the elements of the
 

00:01:31.950 --> 00:01:33.230
going to go over all the elements of the
code the background drawing in the

00:01:33.230 --> 00:01:33.240
code the background drawing in the
 

00:01:33.240 --> 00:01:36.080
code the background drawing in the
shadow and everything that was in the

00:01:36.080 --> 00:01:36.090
shadow and everything that was in the
 

00:01:36.090 --> 00:01:37.550
shadow and everything that was in the
previous talk just go ahead and check

00:01:37.550 --> 00:01:37.560
previous talk just go ahead and check
 

00:01:37.560 --> 00:01:39.109
previous talk just go ahead and check
out that other dead bites as well as the

00:01:39.109 --> 00:01:39.119
out that other dead bites as well as the
 

00:01:39.119 --> 00:01:41.600
out that other dead bites as well as the
google i/o animation talk that that demo

00:01:41.600 --> 00:01:41.610
google i/o animation talk that that demo
 

00:01:41.610 --> 00:01:43.940
google i/o animation talk that that demo
came from instead i just want to focus

00:01:43.940 --> 00:01:43.950
came from instead i just want to focus
 

00:01:43.950 --> 00:01:46.460
came from instead i just want to focus
on the aspect where we're able to run

00:01:46.460 --> 00:01:46.470
on the aspect where we're able to run
 

00:01:46.470 --> 00:01:48.410
on the aspect where we're able to run
both the new property style animations

00:01:48.410 --> 00:01:48.420
both the new property style animations
 

00:01:48.420 --> 00:01:50.719
both the new property style animations
as well as the older animations so in

00:01:50.719 --> 00:01:50.729
as well as the older animations so in
 

00:01:50.729 --> 00:01:52.580
as well as the older animations so in
our touch listener we're listening for

00:01:52.580 --> 00:01:52.590
our touch listener we're listening for
 

00:01:52.590 --> 00:01:53.569
our touch listener we're listening for
these swipe events and we're doing

00:01:53.569 --> 00:01:53.579
these swipe events and we're doing
 

00:01:53.579 --> 00:01:55.730
these swipe events and we're doing
essentially the same thing we're

00:01:55.730 --> 00:01:55.740
essentially the same thing we're
 

00:01:55.740 --> 00:01:57.380
essentially the same thing we're
listening for the down event and we're

00:01:57.380 --> 00:01:57.390
listening for the down event and we're
 

00:01:57.390 --> 00:01:58.789
listening for the down event and we're
tracking where that down event occurs

00:01:58.789 --> 00:01:58.799
tracking where that down event occurs
 

00:01:58.799 --> 00:02:00.440
tracking where that down event occurs
and then in the move event we figure out

00:02:00.440 --> 00:02:00.450
and then in the move event we figure out
 

00:02:00.450 --> 00:02:03.649
and then in the move event we figure out
where the new exposition is to figure

00:02:03.649 --> 00:02:03.659
where the new exposition is to figure
 

00:02:03.659 --> 00:02:06.020
where the new exposition is to figure
out how far to move this thing and at

00:02:06.020 --> 00:02:06.030
out how far to move this thing and at
 

00:02:06.030 --> 00:02:07.249
out how far to move this thing and at
this point you might be thinking yeah

00:02:07.249 --> 00:02:07.259
this point you might be thinking yeah
 

00:02:07.259 --> 00:02:09.290
this point you might be thinking yeah
but but we're actually we're using

00:02:09.290 --> 00:02:09.300
but but we're actually we're using
 

00:02:09.300 --> 00:02:11.540
but but we're actually we're using
translation X like we're using a

00:02:11.540 --> 00:02:11.550
translation X like we're using a
 

00:02:11.550 --> 00:02:12.890
translation X like we're using a
property that

00:02:12.890 --> 00:02:12.900
property that
 

00:02:12.900 --> 00:02:14.990
property that
doesn't actually exist on gingerbread so

00:02:14.990 --> 00:02:15.000
doesn't actually exist on gingerbread so
 

00:02:15.000 --> 00:02:17.210
doesn't actually exist on gingerbread so
how does that work ah that's the key

00:02:17.210 --> 00:02:17.220
how does that work ah that's the key
 

00:02:17.220 --> 00:02:19.910
how does that work ah that's the key
okay so before we could get the

00:02:19.910 --> 00:02:19.920
okay so before we could get the
 

00:02:19.920 --> 00:02:21.589
okay so before we could get the
translation x value and we could set the

00:02:21.589 --> 00:02:21.599
translation x value and we could set the
 

00:02:21.599 --> 00:02:22.970
translation x value and we could set the
translation x value and these are view

00:02:22.970 --> 00:02:22.980
translation x value and these are view
 

00:02:22.980 --> 00:02:24.679
translation x value and these are view
properties that came in at 30 on

00:02:24.679 --> 00:02:24.689
properties that came in at 30 on
 

00:02:24.689 --> 00:02:26.869
properties that came in at 30 on
gingerbread those properties don't exist

00:02:26.869 --> 00:02:26.879
gingerbread those properties don't exist
 

00:02:26.879 --> 00:02:28.280
gingerbread those properties don't exist
on view so it's a little bit difficult

00:02:28.280 --> 00:02:28.290
on view so it's a little bit difficult
 

00:02:28.290 --> 00:02:30.319
on view so it's a little bit difficult
to work with them there so instead what

00:02:30.319 --> 00:02:30.329
to work with them there so instead what
 

00:02:30.329 --> 00:02:33.199
to work with them there so instead what
we do is call this set swipe position so

00:02:33.199 --> 00:02:33.209
we do is call this set swipe position so
 

00:02:33.209 --> 00:02:34.910
we do is call this set swipe position so
I refactor the code so that we can sort

00:02:34.910 --> 00:02:34.920
I refactor the code so that we can sort
 

00:02:34.920 --> 00:02:36.110
I refactor the code so that we can sort
of do the correct thing on either

00:02:36.110 --> 00:02:36.120
of do the correct thing on either
 

00:02:36.120 --> 00:02:38.809
of do the correct thing on either
release gingerbread or non gingerbread

00:02:38.809 --> 00:02:38.819
release gingerbread or non gingerbread
 

00:02:38.819 --> 00:02:42.319
release gingerbread or non gingerbread
post gingerbread so in that method sets

00:02:42.319 --> 00:02:42.329
post gingerbread so in that method sets
 

00:02:42.329 --> 00:02:45.680
post gingerbread so in that method sets
y position you can see how this works so

00:02:45.680 --> 00:02:45.690
y position you can see how this works so
 

00:02:45.690 --> 00:02:47.539
y position you can see how this works so
if runtime is post gingerbread this is

00:02:47.539 --> 00:02:47.549
if runtime is post gingerbread this is
 

00:02:47.549 --> 00:02:48.890
if runtime is post gingerbread this is
what we did before we simply set the

00:02:48.890 --> 00:02:48.900
what we did before we simply set the
 

00:02:48.900 --> 00:02:51.020
what we did before we simply set the
translation x value we basically pop

00:02:51.020 --> 00:02:51.030
translation x value we basically pop
 

00:02:51.030 --> 00:02:53.780
translation x value we basically pop
this item that we were swiping over to

00:02:53.780 --> 00:02:53.790
this item that we were swiping over to
 

00:02:53.790 --> 00:02:55.190
this item that we were swiping over to
the appropriate place and then we set

00:02:55.190 --> 00:02:55.200
the appropriate place and then we set
 

00:02:55.200 --> 00:02:57.080
the appropriate place and then we set
the alpha value to be more or less

00:02:57.080 --> 00:02:57.090
the alpha value to be more or less
 

00:02:57.090 --> 00:02:59.539
the alpha value to be more or less
translucent based on how far away it was

00:02:59.539 --> 00:02:59.549
translucent based on how far away it was
 

00:02:59.549 --> 00:03:00.979
translucent based on how far away it was
from the original position or how close

00:03:00.979 --> 00:03:00.989
from the original position or how close
 

00:03:00.989 --> 00:03:03.170
from the original position or how close
to the edge of the screen if you're on

00:03:03.170 --> 00:03:03.180
to the edge of the screen if you're on
 

00:03:03.180 --> 00:03:05.390
to the edge of the screen if you're on
gingerbread that property doesn't those

00:03:05.390 --> 00:03:05.400
gingerbread that property doesn't those
 

00:03:05.400 --> 00:03:06.679
gingerbread that property doesn't those
properties don't exist we don't have

00:03:06.679 --> 00:03:06.689
properties don't exist we don't have
 

00:03:06.689 --> 00:03:08.179
properties don't exist we don't have
alpha we don't have translation X so

00:03:08.179 --> 00:03:08.189
alpha we don't have translation X so
 

00:03:08.189 --> 00:03:10.009
alpha we don't have translation X so
what can we do we can work with the old

00:03:10.009 --> 00:03:10.019
what can we do we can work with the old
 

00:03:10.019 --> 00:03:12.050
what can we do we can work with the old
style animations this is this was the

00:03:12.050 --> 00:03:12.060
style animations this is this was the
 

00:03:12.060 --> 00:03:14.449
style animations this is this was the
animation the system that existed prior

00:03:14.449 --> 00:03:14.459
animation the system that existed prior
 

00:03:14.459 --> 00:03:17.360
animation the system that existed prior
to 30 but we can use that for actually

00:03:17.360 --> 00:03:17.370
to 30 but we can use that for actually
 

00:03:17.370 --> 00:03:18.890
to 30 but we can use that for actually
setting these properties and kind of

00:03:18.890 --> 00:03:18.900
setting these properties and kind of
 

00:03:18.900 --> 00:03:21.830
setting these properties and kind of
faking the way that you look so it

00:03:21.830 --> 00:03:21.840
faking the way that you look so it
 

00:03:21.840 --> 00:03:24.020
faking the way that you look so it
essentially looks the same it's not

00:03:24.020 --> 00:03:24.030
essentially looks the same it's not
 

00:03:24.030 --> 00:03:25.640
essentially looks the same it's not
quite the same because there is no alpha

00:03:25.640 --> 00:03:25.650
quite the same because there is no alpha
 

00:03:25.650 --> 00:03:27.770
quite the same because there is no alpha
property but it is more translucent so

00:03:27.770 --> 00:03:27.780
property but it is more translucent so
 

00:03:27.780 --> 00:03:30.170
property but it is more translucent so
it's effectively visually the same thing

00:03:30.170 --> 00:03:30.180
it's effectively visually the same thing
 

00:03:30.180 --> 00:03:32.659
it's effectively visually the same thing
so we can set a translate animation on

00:03:32.659 --> 00:03:32.669
so we can set a translate animation on
 

00:03:32.669 --> 00:03:34.849
so we can set a translate animation on
the item we can set an alpha animation

00:03:34.849 --> 00:03:34.859
the item we can set an alpha animation
 

00:03:34.859 --> 00:03:36.020
the item we can set an alpha animation
on the item and we can create an

00:03:36.020 --> 00:03:36.030
on the item and we can create an
 

00:03:36.030 --> 00:03:38.720
on the item and we can create an
animation set to bundle both of these up

00:03:38.720 --> 00:03:38.730
animation set to bundle both of these up
 

00:03:38.730 --> 00:03:41.569
animation set to bundle both of these up
we add both of these animations to the

00:03:41.569 --> 00:03:41.579
we add both of these animations to the
 

00:03:41.579 --> 00:03:43.939
we add both of these animations to the
animation set we set fill after and fill

00:03:43.939 --> 00:03:43.949
animation set we set fill after and fill
 

00:03:43.949 --> 00:03:45.259
animation set we set fill after and fill
in able to true which means they're

00:03:45.259 --> 00:03:45.269
in able to true which means they're
 

00:03:45.269 --> 00:03:47.360
in able to true which means they're
going to hold their value even when the

00:03:47.360 --> 00:03:47.370
going to hold their value even when the
 

00:03:47.370 --> 00:03:49.129
going to hold their value even when the
animation is over and then we're going

00:03:49.129 --> 00:03:49.139
animation is over and then we're going
 

00:03:49.139 --> 00:03:50.960
animation is over and then we're going
to start the animation so basically we

00:03:50.960 --> 00:03:50.970
to start the animation so basically we
 

00:03:50.970 --> 00:03:53.780
to start the animation so basically we
set up animations on these things and

00:03:53.780 --> 00:03:53.790
set up animations on these things and
 

00:03:53.790 --> 00:03:55.879
set up animations on these things and
we're going to effectively set the alpha

00:03:55.879 --> 00:03:55.889
we're going to effectively set the alpha
 

00:03:55.889 --> 00:03:58.129
we're going to effectively set the alpha
and the translation property of this

00:03:58.129 --> 00:03:58.139
and the translation property of this
 

00:03:58.139 --> 00:04:00.319
and the translation property of this
item by running these animations to a

00:04:00.319 --> 00:04:00.329
item by running these animations to a
 

00:04:00.329 --> 00:04:02.960
item by running these animations to a
particular value and we're going to run

00:04:02.960 --> 00:04:02.970
particular value and we're going to run
 

00:04:02.970 --> 00:04:04.610
particular value and we're going to run
notice they're actually running the

00:04:04.610 --> 00:04:04.620
notice they're actually running the
 

00:04:04.620 --> 00:04:06.710
notice they're actually running the
translation animation basically from the

00:04:06.710 --> 00:04:06.720
translation animation basically from the
 

00:04:06.720 --> 00:04:08.210
translation animation basically from the
current value to the current value which

00:04:08.210 --> 00:04:08.220
current value to the current value which
 

00:04:08.220 --> 00:04:09.890
current value to the current value which
means we're going to just slam it in

00:04:09.890 --> 00:04:09.900
means we're going to just slam it in
 

00:04:09.900 --> 00:04:11.059
means we're going to just slam it in
there where it's going to start and end

00:04:11.059 --> 00:04:11.069
there where it's going to start and end
 

00:04:11.069 --> 00:04:13.219
there where it's going to start and end
to the same value and even though the

00:04:13.219 --> 00:04:13.229
to the same value and even though the
 

00:04:13.229 --> 00:04:14.809
to the same value and even though the
animation is ended we've set fill

00:04:14.809 --> 00:04:14.819
animation is ended we've set fill
 

00:04:14.819 --> 00:04:17.870
animation is ended we've set fill
enabled to true and fill after the true

00:04:17.870 --> 00:04:17.880
enabled to true and fill after the true
 

00:04:17.880 --> 00:04:19.670
enabled to true and fill after the true
which means that they're going to stay

00:04:19.670 --> 00:04:19.680
which means that they're going to stay
 

00:04:19.680 --> 00:04:20.310
which means that they're going to stay
at that

00:04:20.310 --> 00:04:20.320
at that
 

00:04:20.320 --> 00:04:22.590
at that
value so that's the trick to actually

00:04:22.590 --> 00:04:22.600
value so that's the trick to actually
 

00:04:22.600 --> 00:04:24.420
value so that's the trick to actually
not animating the swype but actually

00:04:24.420 --> 00:04:24.430
not animating the swype but actually
 

00:04:24.430 --> 00:04:26.370
not animating the swype but actually
setting the swype to be at the right

00:04:26.370 --> 00:04:26.380
setting the swype to be at the right
 

00:04:26.380 --> 00:04:28.770
setting the swype to be at the right
position under the user's finger okay so

00:04:28.770 --> 00:04:28.780
position under the user's finger okay so
 

00:04:28.780 --> 00:04:30.300
position under the user's finger okay so
that's setting this way but then we have

00:04:30.300 --> 00:04:30.310
that's setting this way but then we have
 

00:04:30.310 --> 00:04:31.980
that's setting this way but then we have
the other behavior of actually animating

00:04:31.980 --> 00:04:31.990
the other behavior of actually animating
 

00:04:31.990 --> 00:04:34.350
the other behavior of actually animating
the thing after it's removed so we come

00:04:34.350 --> 00:04:34.360
the thing after it's removed so we come
 

00:04:34.360 --> 00:04:37.290
the thing after it's removed so we come
in here and say okay when the user lifts

00:04:37.290 --> 00:04:37.300
in here and say okay when the user lifts
 

00:04:37.300 --> 00:04:40.950
in here and say okay when the user lifts
up if they were swiping this item then

00:04:40.950 --> 00:04:40.960
up if they were swiping this item then
 

00:04:40.960 --> 00:04:42.960
up if they were swiping this item then
we want to figure out how far to move

00:04:42.960 --> 00:04:42.970
we want to figure out how far to move
 

00:04:42.970 --> 00:04:45.540
we want to figure out how far to move
and then we want to animate the swipe so

00:04:45.540 --> 00:04:45.550
and then we want to animate the swipe so
 

00:04:45.550 --> 00:04:47.130
and then we want to animate the swipe so
we call this other method down here

00:04:47.130 --> 00:04:47.140
we call this other method down here
 

00:04:47.140 --> 00:04:48.630
we call this other method down here
again we've refactored this into a

00:04:48.630 --> 00:04:48.640
again we've refactored this into a
 

00:04:48.640 --> 00:04:51.000
again we've refactored this into a
separate method where we either do the

00:04:51.000 --> 00:04:51.010
separate method where we either do the
 

00:04:51.010 --> 00:04:52.200
separate method where we either do the
gingerbread thing or the post

00:04:52.200 --> 00:04:52.210
gingerbread thing or the post
 

00:04:52.210 --> 00:04:54.150
gingerbread thing or the post
gingerbread thing post gingerbread this

00:04:54.150 --> 00:04:54.160
gingerbread thing post gingerbread this
 

00:04:54.160 --> 00:04:56.640
gingerbread thing post gingerbread this
looks similar to it did before if you

00:04:56.640 --> 00:04:56.650
looks similar to it did before if you
 

00:04:56.650 --> 00:04:59.190
looks similar to it did before if you
saw that other video we animate we use

00:04:59.190 --> 00:04:59.200
saw that other video we animate we use
 

00:04:59.200 --> 00:05:00.810
saw that other video we animate we use
view property animator we're animating

00:05:00.810 --> 00:05:00.820
view property animator we're animating
 

00:05:00.820 --> 00:05:04.290
view property animator we're animating
alpha or animating translation X here we

00:05:04.290 --> 00:05:04.300
alpha or animating translation X here we
 

00:05:04.300 --> 00:05:06.060
alpha or animating translation X here we
use a listener so actually this

00:05:06.060 --> 00:05:06.070
use a listener so actually this
 

00:05:06.070 --> 00:05:07.790
use a listener so actually this
animation will work all the way back to

00:05:07.790 --> 00:05:07.800
animation will work all the way back to
 

00:05:07.800 --> 00:05:11.310
animation will work all the way back to
31 there's no dependency on the jelly

00:05:11.310 --> 00:05:11.320
31 there's no dependency on the jelly
 

00:05:11.320 --> 00:05:14.460
31 there's no dependency on the jelly
bean api of with end action in view

00:05:14.460 --> 00:05:14.470
bean api of with end action in view
 

00:05:14.470 --> 00:05:15.930
bean api of with end action in view
property animator anymore instead we

00:05:15.930 --> 00:05:15.940
property animator anymore instead we
 

00:05:15.940 --> 00:05:17.400
property animator anymore instead we
just set a listener and when the

00:05:17.400 --> 00:05:17.410
just set a listener and when the
 

00:05:17.410 --> 00:05:19.260
just set a listener and when the
animation ends then we do the

00:05:19.260 --> 00:05:19.270
animation ends then we do the
 

00:05:19.270 --> 00:05:21.180
animation ends then we do the
appropriate thing we restore values we

00:05:21.180 --> 00:05:21.190
appropriate thing we restore values we
 

00:05:21.190 --> 00:05:23.010
appropriate thing we restore values we
animate the to close the gap all that

00:05:23.010 --> 00:05:23.020
animate the to close the gap all that
 

00:05:23.020 --> 00:05:25.680
animate the to close the gap all that
stuff if we're running in Gingerbread to

00:05:25.680 --> 00:05:25.690
stuff if we're running in Gingerbread to
 

00:05:25.690 --> 00:05:28.050
stuff if we're running in Gingerbread to
animate the swype this looks remarkably

00:05:28.050 --> 00:05:28.060
animate the swype this looks remarkably
 

00:05:28.060 --> 00:05:29.700
animate the swype this looks remarkably
similar to what we saw before where we

00:05:29.700 --> 00:05:29.710
similar to what we saw before where we
 

00:05:29.710 --> 00:05:31.530
similar to what we saw before where we
were setting the swipe position we're

00:05:31.530 --> 00:05:31.540
were setting the swipe position we're
 

00:05:31.540 --> 00:05:33.630
were setting the swipe position we're
doing is animating swipe position now so

00:05:33.630 --> 00:05:33.640
doing is animating swipe position now so
 

00:05:33.640 --> 00:05:35.760
doing is animating swipe position now so
we're starting from the current X and

00:05:35.760 --> 00:05:35.770
we're starting from the current X and
 

00:05:35.770 --> 00:05:37.440
we're starting from the current X and
the current alpha value from wherever

00:05:37.440 --> 00:05:37.450
the current alpha value from wherever
 

00:05:37.450 --> 00:05:39.510
the current alpha value from wherever
that item ended up and we're animating

00:05:39.510 --> 00:05:39.520
that item ended up and we're animating
 

00:05:39.520 --> 00:05:41.780
that item ended up and we're animating
either off the screen or back into place

00:05:41.780 --> 00:05:41.790
either off the screen or back into place
 

00:05:41.790 --> 00:05:44.520
either off the screen or back into place
again we're using an animation set we're

00:05:44.520 --> 00:05:44.530
again we're using an animation set we're
 

00:05:44.530 --> 00:05:46.290
again we're using an animation set we're
no longer setting fill enable because we

00:05:46.290 --> 00:05:46.300
no longer setting fill enable because we
 

00:05:46.300 --> 00:05:47.760
no longer setting fill enable because we
don't want to hold a value when we're

00:05:47.760 --> 00:05:47.770
don't want to hold a value when we're
 

00:05:47.770 --> 00:05:49.100
don't want to hold a value when we're
done instead we just going to animate

00:05:49.100 --> 00:05:49.110
done instead we just going to animate
 

00:05:49.110 --> 00:05:52.230
done instead we just going to animate
off or animate back and when the

00:05:52.230 --> 00:05:52.240
off or animate back and when the
 

00:05:52.240 --> 00:05:54.000
off or animate back and when the
animation ends then we are either

00:05:54.000 --> 00:05:54.010
animation ends then we are either
 

00:05:54.010 --> 00:05:55.680
animation ends then we are either
restore values to where they were if we

00:05:55.680 --> 00:05:55.690
restore values to where they were if we
 

00:05:55.690 --> 00:05:57.870
restore values to where they were if we
were animating back or we animate the

00:05:57.870 --> 00:05:57.880
were animating back or we animate the
 

00:05:57.880 --> 00:06:01.320
were animating back or we animate the
other views and for this one we want to

00:06:01.320 --> 00:06:01.330
other views and for this one we want to
 

00:06:01.330 --> 00:06:04.080
other views and for this one we want to
animate the gap closed so using the same

00:06:04.080 --> 00:06:04.090
animate the gap closed so using the same
 

00:06:04.090 --> 00:06:05.820
animate the gap closed so using the same
technique that we used in the previous

00:06:05.820 --> 00:06:05.830
technique that we used in the previous
 

00:06:05.830 --> 00:06:09.930
technique that we used in the previous
demo in the previous dev bites video we

00:06:09.930 --> 00:06:09.940
demo in the previous dev bites video we
 

00:06:09.940 --> 00:06:12.210
demo in the previous dev bites video we
figure out where all the views are and

00:06:12.210 --> 00:06:12.220
figure out where all the views are and
 

00:06:12.220 --> 00:06:14.220
figure out where all the views are and
we associate those view positions with

00:06:14.220 --> 00:06:14.230
we associate those view positions with
 

00:06:14.230 --> 00:06:17.010
we associate those view positions with
the item ID so we're using a stable ID

00:06:17.010 --> 00:06:17.020
the item ID so we're using a stable ID
 

00:06:17.020 --> 00:06:20.160
the item ID so we're using a stable ID
array adapter here again and we store

00:06:20.160 --> 00:06:20.170
array adapter here again and we store
 

00:06:20.170 --> 00:06:23.100
array adapter here again and we store
these in a hash map and then we remove

00:06:23.100 --> 00:06:23.110
these in a hash map and then we remove
 

00:06:23.110 --> 00:06:25.500
these in a hash map and then we remove
the item from the adapter that forces a

00:06:25.500 --> 00:06:25.510
the item from the adapter that forces a
 

00:06:25.510 --> 00:06:27.210
the item from the adapter that forces a
notified data set change that will force

00:06:27.210 --> 00:06:27.220
notified data set change that will force
 

00:06:27.220 --> 00:06:29.100
notified data set change that will force
a layout but before that layout is

00:06:29.100 --> 00:06:29.110
a layout but before that layout is
 

00:06:29.110 --> 00:06:31.320
a layout but before that layout is
displayed on the screen our on pre draw

00:06:31.320 --> 00:06:31.330
displayed on the screen our on pre draw
 

00:06:31.330 --> 00:06:32.740
displayed on the screen our on pre draw
listener on the view tree observer

00:06:32.740 --> 00:06:32.750
listener on the view tree observer
 

00:06:32.750 --> 00:06:35.020
listener on the view tree observer
in and we can now track the positions of

00:06:35.020 --> 00:06:35.030
in and we can now track the positions of
 

00:06:35.030 --> 00:06:36.970
in and we can now track the positions of
all the views in the current version of

00:06:36.970 --> 00:06:36.980
all the views in the current version of
 

00:06:36.980 --> 00:06:38.920
all the views in the current version of
the list view and figure out what item

00:06:38.920 --> 00:06:38.930
the list view and figure out what item
 

00:06:38.930 --> 00:06:40.750
the list view and figure out what item
ids those are associated with compare

00:06:40.750 --> 00:06:40.760
ids those are associated with compare
 

00:06:40.760 --> 00:06:42.910
ids those are associated with compare
them to the other item ids and animate

00:06:42.910 --> 00:06:42.920
them to the other item ids and animate
 

00:06:42.920 --> 00:06:44.710
them to the other item ids and animate
the changes again all of this is the

00:06:44.710 --> 00:06:44.720
the changes again all of this is the
 

00:06:44.720 --> 00:06:47.080
the changes again all of this is the
same as before the only trick here is

00:06:47.080 --> 00:06:47.090
same as before the only trick here is
 

00:06:47.090 --> 00:06:48.610
same as before the only trick here is
how to actually make it work in

00:06:48.610 --> 00:06:48.620
how to actually make it work in
 

00:06:48.620 --> 00:06:51.490
how to actually make it work in
gingerbread so we remove the pre draw

00:06:51.490 --> 00:06:51.500
gingerbread so we remove the pre draw
 

00:06:51.500 --> 00:06:53.740
gingerbread so we remove the pre draw
listener we figure out where things need

00:06:53.740 --> 00:06:53.750
listener we figure out where things need
 

00:06:53.750 --> 00:06:58.980
listener we figure out where things need
to go and then we run the animation

00:06:58.980 --> 00:06:58.990
to go and then we run the animation
 

00:06:58.990 --> 00:07:05.320
to go and then we run the animation
which is right here move view runs the

00:07:05.320 --> 00:07:05.330
which is right here move view runs the
 

00:07:05.330 --> 00:07:06.940
which is right here move view runs the
animation to actually shift these things

00:07:06.940 --> 00:07:06.950
animation to actually shift these things
 

00:07:06.950 --> 00:07:08.800
animation to actually shift these things
on the screen again we have a

00:07:08.800 --> 00:07:08.810
on the screen again we have a
 

00:07:08.810 --> 00:07:10.750
on the screen again we have a
gingerbread and non gingerbread version

00:07:10.750 --> 00:07:10.760
gingerbread and non gingerbread version
 

00:07:10.760 --> 00:07:13.360
gingerbread and non gingerbread version
of this thing the non gingerbread should

00:07:13.360 --> 00:07:13.370
of this thing the non gingerbread should
 

00:07:13.370 --> 00:07:14.830
of this thing the non gingerbread should
look remarkably similar to what it did

00:07:14.830 --> 00:07:14.840
look remarkably similar to what it did
 

00:07:14.840 --> 00:07:16.390
look remarkably similar to what it did
before except in this case we're

00:07:16.390 --> 00:07:16.400
before except in this case we're
 

00:07:16.400 --> 00:07:18.940
before except in this case we're
actually using object animators sort of

00:07:18.940 --> 00:07:18.950
actually using object animators sort of
 

00:07:18.950 --> 00:07:20.230
actually using object animators sort of
interchangeable with view property

00:07:20.230 --> 00:07:20.240
interchangeable with view property
 

00:07:20.240 --> 00:07:21.640
interchangeable with view property
animator view property animator is a

00:07:21.640 --> 00:07:21.650
animator view property animator is a
 

00:07:21.650 --> 00:07:23.530
animator view property animator is a
little bit more of a streamlined API I

00:07:23.530 --> 00:07:23.540
little bit more of a streamlined API I
 

00:07:23.540 --> 00:07:25.930
little bit more of a streamlined API I
happen to use object animators in this

00:07:25.930 --> 00:07:25.940
happen to use object animators in this
 

00:07:25.940 --> 00:07:28.270
happen to use object animators in this
case in the gingerbread version again

00:07:28.270 --> 00:07:28.280
case in the gingerbread version again
 

00:07:28.280 --> 00:07:30.430
case in the gingerbread version again
we're using a translate animation pre 30

00:07:30.430 --> 00:07:30.440
we're using a translate animation pre 30
 

00:07:30.440 --> 00:07:33.130
we're using a translate animation pre 30
api's and we're saying okay I want this

00:07:33.130 --> 00:07:33.140
api's and we're saying okay I want this
 

00:07:33.140 --> 00:07:35.440
api's and we're saying okay I want this
view to move from the current start and

00:07:35.440 --> 00:07:35.450
view to move from the current start and
 

00:07:35.450 --> 00:07:37.960
view to move from the current start and
end X&amp;Y positions and those were

00:07:37.960 --> 00:07:37.970
end X&amp;Y positions and those were
 

00:07:37.970 --> 00:07:39.670
end X&amp;Y positions and those were
calculated according to where the item

00:07:39.670 --> 00:07:39.680
calculated according to where the item
 

00:07:39.680 --> 00:07:41.770
calculated according to where the item
contents were before and after the

00:07:41.770 --> 00:07:41.780
contents were before and after the
 

00:07:41.780 --> 00:07:44.980
contents were before and after the
layout change on the list view and we

00:07:44.980 --> 00:07:44.990
layout change on the list view and we
 

00:07:44.990 --> 00:07:46.719
layout change on the list view and we
set the duration and we start the

00:07:46.719 --> 00:07:46.729
set the duration and we start the
 

00:07:46.729 --> 00:07:49.960
set the duration and we start the
animation and that's it really fairly

00:07:49.960 --> 00:07:49.970
animation and that's it really fairly
 

00:07:49.970 --> 00:07:52.690
animation and that's it really fairly
straightforward the only trick was that

00:07:52.690 --> 00:07:52.700
straightforward the only trick was that
 

00:07:52.700 --> 00:07:55.210
straightforward the only trick was that
the old approach was using properties

00:07:55.210 --> 00:07:55.220
the old approach was using properties
 

00:07:55.220 --> 00:07:57.820
the old approach was using properties
that didn't exist on view prior to 30 so

00:07:57.820 --> 00:07:57.830
that didn't exist on view prior to 30 so
 

00:07:57.830 --> 00:07:59.590
that didn't exist on view prior to 30 so
we can't use that so we use the old

00:07:59.590 --> 00:07:59.600
we can't use that so we use the old
 

00:07:59.600 --> 00:08:01.990
we can't use that so we use the old
animations instead to fake the system

00:08:01.990 --> 00:08:02.000
animations instead to fake the system
 

00:08:02.000 --> 00:08:04.360
animations instead to fake the system
out and make it look the same and then

00:08:04.360 --> 00:08:04.370
out and make it look the same and then
 

00:08:04.370 --> 00:08:05.980
out and make it look the same and then
the animation same thing we were using

00:08:05.980 --> 00:08:05.990
the animation same thing we were using
 

00:08:05.990 --> 00:08:08.170
the animation same thing we were using
animation api's based on properties

00:08:08.170 --> 00:08:08.180
animation api's based on properties
 

00:08:08.180 --> 00:08:10.090
animation api's based on properties
didn't exist prior to 30 so instead

00:08:10.090 --> 00:08:10.100
didn't exist prior to 30 so instead
 

00:08:10.100 --> 00:08:12.310
didn't exist prior to 30 so instead
we'll use the old animations that didn't

00:08:12.310 --> 00:08:12.320
we'll use the old animations that didn't
 

00:08:12.320 --> 00:08:14.380
we'll use the old animations that didn't
use properties but give the same visual

00:08:14.380 --> 00:08:14.390
use properties but give the same visual
 

00:08:14.390 --> 00:08:15.909
use properties but give the same visual
effects to what we're doing everything

00:08:15.909 --> 00:08:15.919
effects to what we're doing everything
 

00:08:15.919 --> 00:08:17.890
effects to what we're doing everything
else is the same logic track the item

00:08:17.890 --> 00:08:17.900
else is the same logic track the item
 

00:08:17.900 --> 00:08:20.230
else is the same logic track the item
ids before and after where the views

00:08:20.230 --> 00:08:20.240
ids before and after where the views
 

00:08:20.240 --> 00:08:22.990
ids before and after where the views
associated with those item ids were and

00:08:22.990 --> 00:08:23.000
associated with those item ids were and
 

00:08:23.000 --> 00:08:24.700
associated with those item ids were and
then simply animate the changes and

00:08:24.700 --> 00:08:24.710
then simply animate the changes and
 

00:08:24.710 --> 00:08:27.520
then simply animate the changes and
that's it so go ahead and check out the

00:08:27.520 --> 00:08:27.530
that's it so go ahead and check out the
 

00:08:27.530 --> 00:08:29.200
that's it so go ahead and check out the
animation talk called a moving

00:08:29.200 --> 00:08:29.210
animation talk called a moving
 

00:08:29.210 --> 00:08:31.719
animation talk called a moving
experience at Google i/o to get a little

00:08:31.719 --> 00:08:31.729
experience at Google i/o to get a little
 

00:08:31.729 --> 00:08:34.659
experience at Google i/o to get a little
bit more glimpse into how the demo

00:08:34.659 --> 00:08:34.669
bit more glimpse into how the demo
 

00:08:34.669 --> 00:08:37.270
bit more glimpse into how the demo
actually works and the reasons behind it

00:08:37.270 --> 00:08:37.280
actually works and the reasons behind it
 

00:08:37.280 --> 00:08:39.279
actually works and the reasons behind it
and check out the other devbytes videos

00:08:39.279 --> 00:08:39.289
and check out the other devbytes videos
 

00:08:39.289 --> 00:08:40.719
and check out the other devbytes videos
to see the overall structure of the code

00:08:40.719 --> 00:08:40.729
to see the overall structure of the code
 

00:08:40.729 --> 00:08:41.719
to see the overall structure of the code
and some of the other elements

00:08:41.719 --> 00:08:41.729
and some of the other elements
 

00:08:41.729 --> 00:08:43.790
and some of the other elements
didn't talk about today and check out

00:08:43.790 --> 00:08:43.800
didn't talk about today and check out
 

00:08:43.800 --> 00:08:47.149
didn't talk about today and check out
the code for this demo thanks

