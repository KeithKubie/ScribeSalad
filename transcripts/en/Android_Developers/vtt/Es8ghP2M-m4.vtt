WEBVTT
Kind: captions
Language: en

00:00:00.000 --> 00:00:03.339
[MUSIC]

00:00:04.770 --> 00:00:06.370
BRIAN KEMLER: Good afternoon.

00:00:06.370 --> 00:00:10.470
Welcome to Accessible Audio,
Android Hearing Aid Support,

00:00:10.470 --> 00:00:13.630
and the Audio Framework.

00:00:13.630 --> 00:00:16.590
My name is Brian Kemler,
and I'm a PM on the Android

00:00:16.590 --> 00:00:18.370
Accessibility Team.

00:00:18.370 --> 00:00:21.150
Our team's mission is to
improve the lives of people

00:00:21.150 --> 00:00:26.130
with disabilities by creating
useful and innovative products.

00:00:26.130 --> 00:00:30.840
Specifically, we design
Android Accessibility Suite,

00:00:30.840 --> 00:00:33.720
Sound Amplifier,
Live Transcribe,

00:00:33.720 --> 00:00:37.402
and as you may have heard
today, now Live Caption.

00:00:37.402 --> 00:00:41.620
In the last year and a
half, we've invested heavily

00:00:41.620 --> 00:00:45.350
in making audio on
Android more accessible,

00:00:45.350 --> 00:00:49.130
and so we're going to be
focusing on that in this talk.

00:00:49.130 --> 00:00:53.230
I'm here today with an
awesome cast of characters--

00:00:53.230 --> 00:00:55.400
our engineers and
product managers

00:00:55.400 --> 00:00:58.090
Ricardo, John, and Stanley.

00:01:01.410 --> 00:01:06.640
So we are going to talk not
only about what we've done,

00:01:06.640 --> 00:01:09.210
but about what you
can do with the work

00:01:09.210 --> 00:01:14.100
that we've created by leveraging
the Android Audio Framework.

00:01:14.100 --> 00:01:18.690
First, I'm going to walk you
guys through hearing loss

00:01:18.690 --> 00:01:20.250
literally and
figuratively, so we're

00:01:20.250 --> 00:01:23.520
going to talk all about it
to help you build empathy

00:01:23.520 --> 00:01:27.600
and actually hear or
experience what that is like.

00:01:27.600 --> 00:01:31.440
Next, Ricardo is going
to go under the hood

00:01:31.440 --> 00:01:35.760
and talk about the technologies
we've baked in to the platform

00:01:35.760 --> 00:01:40.590
so you can make your apps and
your devices more accessible

00:01:40.590 --> 00:01:43.830
and have a better
experience for your users.

00:01:43.830 --> 00:01:46.470
Lastly, John and
Stanley are going

00:01:46.470 --> 00:01:49.860
to get up and talk about
hearing aid support

00:01:49.860 --> 00:01:52.710
and how to create the
best experience possible,

00:01:52.710 --> 00:01:55.830
whether you're a
device maker or an OEM.

00:01:55.830 --> 00:01:57.790
Now let's get started.

00:01:57.790 --> 00:01:59.895
So first, let's walk
through and talk

00:01:59.895 --> 00:02:05.020
about what hearing loss
is, how it affects people

00:02:05.020 --> 00:02:07.690
and what we can do about it.

00:02:07.690 --> 00:02:12.400
So the scope of the
problem is massive.

00:02:12.400 --> 00:02:18.580
466 million people
worldwide have hearing loss.

00:02:18.580 --> 00:02:21.010
If that were a
country, that would

00:02:21.010 --> 00:02:23.530
be a bigger country
than every country

00:02:23.530 --> 00:02:24.890
except for India and China.

00:02:24.890 --> 00:02:26.770
So that's bigger than the US.

00:02:26.770 --> 00:02:29.020
So this is a massive
problem, and again,

00:02:29.020 --> 00:02:31.690
according to the World
Health Organization,

00:02:31.690 --> 00:02:35.710
this is actually supposed to
grow to nearly a billion people

00:02:35.710 --> 00:02:37.930
in the year 2055.

00:02:37.930 --> 00:02:40.480
So it can have a dramatic
effect not only on the people

00:02:40.480 --> 00:02:44.660
who have it but also their
friends, family, colleagues,

00:02:44.660 --> 00:02:45.970
and loved ones.

00:02:45.970 --> 00:02:49.900
These effects can include
fatigue, social isolation,

00:02:49.900 --> 00:02:53.110
or reduced job or
academic performance.

00:02:53.110 --> 00:02:58.510
Now in my own life, both my
dad in this picture and my best

00:02:58.510 --> 00:03:01.240
friend from university
have hearing loss,

00:03:01.240 --> 00:03:03.280
and it's really
made communicating

00:03:03.280 --> 00:03:06.070
with them difficult
and challenging,

00:03:06.070 --> 00:03:09.450
and not only for
them, but also for me.

00:03:09.450 --> 00:03:14.020
So what is hearing loss?

00:03:14.020 --> 00:03:16.840
How do we quantify
or measure it?

00:03:16.840 --> 00:03:19.500
So this is an empty
audiogram and we're

00:03:19.500 --> 00:03:21.630
going to walk you through this.

00:03:21.630 --> 00:03:24.540
On the top, we have the
normal range of hearing.

00:03:24.540 --> 00:03:27.460
At the very bottom,
we have profound loss.

00:03:27.460 --> 00:03:30.390
And then we have different
gradations in between.

00:03:30.390 --> 00:03:35.250
On the left, we
have loud sounds.

00:03:35.250 --> 00:03:38.970
At the bottom, we have
frequency measured in pitch,

00:03:38.970 --> 00:03:45.190
measured in Hertz, from low
to high, going left to right.

00:03:45.190 --> 00:03:48.100
This line is called the
threshold of hearing.

00:03:48.100 --> 00:03:52.420
Anything above it you cannot
hear unless you're a dog

00:03:52.420 --> 00:03:56.020
or a dolphin, in which case
dogs actually hear three times

00:03:56.020 --> 00:03:59.470
better than humans and
dolphins hear way better,

00:03:59.470 --> 00:04:01.850
something like seven
times better than humans,

00:04:01.850 --> 00:04:04.940
which is absolutely amazing.

00:04:04.940 --> 00:04:09.910
Now, I'm overlaying
the regions in which

00:04:09.910 --> 00:04:12.580
music and speech occur.

00:04:12.580 --> 00:04:15.100
So we have a music
region, a speech region,

00:04:15.100 --> 00:04:18.040
and anything outside
of these two regions

00:04:18.040 --> 00:04:21.459
is in that threshold,
what we can't hear.

00:04:21.459 --> 00:04:23.470
People with loss in
the speech region

00:04:23.470 --> 00:04:25.810
may have difficulty
interpreting speech,

00:04:25.810 --> 00:04:28.870
and similarly if you have
loss in the music region

00:04:28.870 --> 00:04:31.960
you'll have difficulty
interpreting music.

00:04:31.960 --> 00:04:35.020
So now let's focus a
little bit on speech.

00:04:35.020 --> 00:04:38.990
On the left-hand side, we
have low frequency sounds.

00:04:38.990 --> 00:04:42.340
So these would typically
be women-- or, I'm sorry--

00:04:42.340 --> 00:04:45.220
men's voices, so
think baritones.

00:04:45.220 --> 00:04:48.550
On the right-hand side, we
have high frequency loss,

00:04:48.550 --> 00:04:51.040
so this would typically
be women's voices,

00:04:51.040 --> 00:04:53.305
children's voices,
think sopranos.

00:04:56.755 --> 00:04:58.130
This is called
the speech banana,

00:04:58.130 --> 00:04:59.300
and I didn't make this up.

00:04:59.300 --> 00:05:02.090
This is actually a thing.

00:05:02.090 --> 00:05:06.040
So this is where we hear
consonants and vowels.

00:05:06.040 --> 00:05:09.830
And so you can see
this little overlay

00:05:09.830 --> 00:05:13.090
where all these
letters literally sit.

00:05:13.090 --> 00:05:16.990
For English, persons with
mild high frequency loss

00:05:16.990 --> 00:05:22.660
will have difficulty
hearing f, th and s.

00:05:22.660 --> 00:05:27.040
So in other words, a sentence
like "This is your fate"

00:05:27.040 --> 00:05:29.200
could become
something completely

00:05:29.200 --> 00:05:32.530
unintelligible to anybody,
like "E e you're eight."

00:05:32.530 --> 00:05:33.670
What does that mean?

00:05:33.670 --> 00:05:34.610
Nothing.

00:05:34.610 --> 00:05:37.720
So that's how you can
experience hearing loss.

00:05:41.700 --> 00:05:46.320
Let's shift from
speech over to sound.

00:05:46.320 --> 00:05:50.640
So in this overlay, I'm
overlaying typical sounds

00:05:50.640 --> 00:05:52.890
and where they take place.

00:05:52.890 --> 00:05:55.200
So you can see we
have very loud sounds,

00:05:55.200 --> 00:05:58.550
like the lawnmower, the phone,
the bus, at the very bottom,

00:05:58.550 --> 00:06:04.780
and quieter ones like the wind
and the seagull at the top.

00:06:04.780 --> 00:06:08.870
This is an audiogram for
a fictitious patient.

00:06:08.870 --> 00:06:11.440
And so we stripped away
the sounds, the consonants,

00:06:11.440 --> 00:06:14.500
the vowels and so
forth, and we can

00:06:14.500 --> 00:06:18.140
measure the ability to hear
for each ear, left and right.

00:06:18.140 --> 00:06:21.820
And so the right ear is red
in the left ear is blue.

00:06:21.820 --> 00:06:25.030
Loss will vary by
person, and indeed it's

00:06:25.030 --> 00:06:26.950
going to vary ear to ear.

00:06:26.950 --> 00:06:29.600
And over time this will change.

00:06:29.600 --> 00:06:32.290
So you can see the pattern
of loss in this example

00:06:32.290 --> 00:06:33.970
is high frequency
loss, and that is

00:06:33.970 --> 00:06:38.270
one of the most typical
forms of hearing loss.

00:06:38.270 --> 00:06:40.130
Now we're laying
everything on top.

00:06:40.130 --> 00:06:42.670
So we have the sounds,
we have the audiogram.

00:06:42.670 --> 00:06:47.060
And basically everything
down and to the left

00:06:47.060 --> 00:06:48.710
is going to be audible
for this person.

00:06:48.710 --> 00:06:52.370
Everything up and to the right
is going to be inaudible.

00:06:52.370 --> 00:06:55.650
So they can hear the bus,
the baby and the phone,

00:06:55.650 --> 00:07:00.410
but they cannot hear the seagull
or the clock and the wind.

00:07:00.410 --> 00:07:02.040
So a hearing aid.

00:07:02.040 --> 00:07:04.320
This is a very
simplified example,

00:07:04.320 --> 00:07:07.340
but a hearing aid is
going to work by injecting

00:07:07.340 --> 00:07:09.470
the right amount of gain--

00:07:09.470 --> 00:07:11.870
so turning up the volume--

00:07:11.870 --> 00:07:14.720
and the right amount
of signal processing

00:07:14.720 --> 00:07:16.770
at the appropriate
frequency levels.

00:07:16.770 --> 00:07:18.860
It also works by
lowering the gain

00:07:18.860 --> 00:07:23.100
so that you're not overloading
the ears in certain cases.

00:07:23.100 --> 00:07:25.800
So this can make up for loss.

00:07:25.800 --> 00:07:27.650
And this is called compensation.

00:07:27.650 --> 00:07:29.930
And the amount of
compensation, again, it's

00:07:29.930 --> 00:07:34.760
going to vary from
individual to individual.

00:07:34.760 --> 00:07:36.800
And I'm sort of showing
this fictitiously

00:07:36.800 --> 00:07:39.920
by raising up this line.

00:07:39.920 --> 00:07:43.040
So hearing aids are really,
really, really effective.

00:07:43.040 --> 00:07:47.780
They work well, but they're
not perfect solutions.

00:07:47.780 --> 00:07:51.650
According to a recent survey,
the majority of respondents

00:07:51.650 --> 00:07:55.400
said that their quality of life
was improved with a hearing aid

00:07:55.400 --> 00:07:58.280
compared to no
amplification at all.

00:07:58.280 --> 00:07:59.990
So that's really, really good.

00:07:59.990 --> 00:08:02.280
But there are a lot of
challenges with hearing aids,

00:08:02.280 --> 00:08:02.780
too.

00:08:02.780 --> 00:08:05.420
So for people who
self-identified

00:08:05.420 --> 00:08:09.010
as having difficulty
hearing, that was about 10%

00:08:09.010 --> 00:08:10.190
of the population.

00:08:10.190 --> 00:08:16.420
However, only a corresponding
3% of the population

00:08:16.420 --> 00:08:18.640
reported having one or
more hearing aid devices.

00:08:18.640 --> 00:08:24.760
So there are a lot of reasons
why hearing aids are not

00:08:24.760 --> 00:08:25.750
widely adopted.

00:08:25.750 --> 00:08:26.740
One is expense.

00:08:26.740 --> 00:08:29.450
Typically they're not
covered by insurance.

00:08:29.450 --> 00:08:33.070
Two, sadly, there could
be a stigma associated

00:08:33.070 --> 00:08:35.380
with wearing a hearing
aid, or people just

00:08:35.380 --> 00:08:38.990
don't want to admit that
they have this loss.

00:08:38.990 --> 00:08:41.570
So we're doing a bunch
of things about this.

00:08:41.570 --> 00:08:45.430
But what I want to do right now
is a hearing loss simulation

00:08:45.430 --> 00:08:46.270
demo.

00:08:46.270 --> 00:08:49.930
So I'm going to switch over
and run this demo for you guys,

00:08:49.930 --> 00:08:51.520
playing some music,
so you guys get

00:08:51.520 --> 00:08:55.600
a sense of what normal hearing
is like and then what hearing

00:08:55.600 --> 00:08:57.680
with hearing loss sounds like.

00:08:57.680 --> 00:08:58.180
Demo.

00:09:03.743 --> 00:09:04.660
So I'm going to play--

00:09:07.380 --> 00:09:10.726
[MUSIC]

00:09:10.726 --> 00:09:12.440
--play a little
opera for you guys.

00:09:12.440 --> 00:09:15.849
[MUSIC]

00:09:29.490 --> 00:09:32.860
So right now using our
hearing loss simulator,

00:09:32.860 --> 00:09:36.180
I basically in a
very simplistic sense

00:09:36.180 --> 00:09:39.000
turned the volume down, even
though the audio was still

00:09:39.000 --> 00:09:40.350
playing.

00:09:40.350 --> 00:09:42.990
Now what I'm going
to demonstrate,

00:09:42.990 --> 00:09:46.380
using our sound
amplifier product,

00:09:46.380 --> 00:09:52.060
is how we can apply some basic
compensation to this loss,

00:09:52.060 --> 00:09:55.420
and you can get to experience
the effect of the product.

00:09:55.420 --> 00:09:56.920
So I'm going to
play the music again

00:09:56.920 --> 00:09:59.343
and then I'm going to switch
over to Sound Amplifier.

00:09:59.343 --> 00:10:01.760
[MUSIC]

00:10:01.760 --> 00:10:04.120
So again, you can
barely hear it,

00:10:04.120 --> 00:10:06.190
but the music is
actually playing.

00:10:06.190 --> 00:10:09.454
Now I'm going to turn
on Sound Amplifier.

00:10:09.454 --> 00:10:12.940
[MUSIC]

00:10:16.924 --> 00:10:18.418
RICARDO GARCIA: Is it running?

00:10:18.418 --> 00:10:19.912
Is it running Sound Amplifier?

00:10:19.912 --> 00:10:21.406
BRIAN KEMLER: What's that?

00:10:21.406 --> 00:10:25.390
RICARDO GARCIA: Enable
Sound Amplifier.

00:10:25.390 --> 00:10:28.876
[MUSIC]

00:10:30.031 --> 00:10:31.864
BRIAN KEMLER: The demo
gods are not with us.

00:10:31.864 --> 00:10:33.358
OK, they are now.

00:10:33.358 --> 00:10:35.900
[MUSIC]

00:10:35.900 --> 00:10:36.530
There we go.

00:10:36.530 --> 00:10:37.670
Thank you.

00:10:37.670 --> 00:10:39.990
This is why, as a
product manager,

00:10:39.990 --> 00:10:42.050
you always need to have
an engineer by your side.

00:10:44.703 --> 00:10:46.370
So right now I'm
playing with the boost.

00:10:50.190 --> 00:10:53.260
And a user would simply
use this by finding

00:10:53.260 --> 00:10:55.360
the right combination
of the settings

00:10:55.360 --> 00:10:58.630
to get a little more Mozart.

00:10:58.630 --> 00:11:02.530
And we can reduce the sound
with a sound amplifier.

00:11:02.530 --> 00:11:07.180
[MUSIC]

00:11:07.180 --> 00:11:07.830
There we go.

00:11:07.830 --> 00:11:08.330
Thank you.

00:11:11.480 --> 00:11:13.410
Back to the slides, please.

00:11:13.410 --> 00:11:17.540
So Sound Amplifier
is not a hearing aid,

00:11:17.540 --> 00:11:21.230
but we do use machine learning
to process audio in real time

00:11:21.230 --> 00:11:23.850
in order to make
listening a little easier.

00:11:23.850 --> 00:11:26.150
It'll add gain in
quiet situations

00:11:26.150 --> 00:11:30.110
and will also help reduce
distracting background noise.

00:11:30.110 --> 00:11:32.570
Sound Amplifier's free,
and you need nothing

00:11:32.570 --> 00:11:34.970
more than a set of
wired headphones

00:11:34.970 --> 00:11:39.050
to boost the sound of a
faraway speaker, a TV, a movie,

00:11:39.050 --> 00:11:43.410
or reduce the noise of an
annoying heating, ventilation,

00:11:43.410 --> 00:11:45.320
and air conditioning system.

00:11:45.320 --> 00:11:48.860
Sound Amplifier dramatically
lowers the barriers

00:11:48.860 --> 00:11:51.890
to entry for somebody
who can't afford,

00:11:51.890 --> 00:11:54.620
doesn't have, or
forgets the batteries

00:11:54.620 --> 00:11:56.690
to their hearing aids.

00:11:56.690 --> 00:11:59.090
So now that we've
understood a little bit more

00:11:59.090 --> 00:12:01.440
about hearing loss,
Ricardo is going

00:12:01.440 --> 00:12:04.910
to discuss how you can
use some of the technology

00:12:04.910 --> 00:12:06.920
under the hood of
Sound Amplifier

00:12:06.920 --> 00:12:11.390
to make your products more
accessible for everybody.

00:12:11.390 --> 00:12:12.745
Ricardo?

00:12:12.745 --> 00:12:14.120
RICARDO GARCIA:
Thank you, Brian.

00:12:17.700 --> 00:12:19.330
So, hello.

00:12:19.330 --> 00:12:20.620
I'm Ricardo Garcia.

00:12:20.620 --> 00:12:24.010
I'm a software engineer in the
Android Audio Frameworks Team,

00:12:24.010 --> 00:12:26.470
and I am also the tech lead
for the Sound Amplifier project

00:12:26.470 --> 00:12:27.520
that you saw.

00:12:27.520 --> 00:12:29.350
So today in this
segment, we are going

00:12:29.350 --> 00:12:32.500
to talk more about how
to build some enhancement

00:12:32.500 --> 00:12:34.370
in your own applications.

00:12:34.370 --> 00:12:37.240
So the question is when would
you like sound enhancement?

00:12:37.240 --> 00:12:39.850
There are many, many situations
where your applications

00:12:39.850 --> 00:12:41.470
can benefit from this.

00:12:41.470 --> 00:12:43.690
One example is the
one that we just saw,

00:12:43.690 --> 00:12:46.330
that when you have a sound
amplification application,

00:12:46.330 --> 00:12:48.400
you would like to take
a microphone input

00:12:48.400 --> 00:12:51.670
and process the sound and
somehow enhance that sound,

00:12:51.670 --> 00:12:56.170
bring some soft sounds up,
take some very loud sounds

00:12:56.170 --> 00:12:58.090
and put them down,
something that you would

00:12:58.090 --> 00:13:00.123
like to process in that way.

00:13:00.123 --> 00:13:01.540
Sometimes also,
let's say that you

00:13:01.540 --> 00:13:05.182
are building your own Android
device, a speaker or something

00:13:05.182 --> 00:13:06.640
that has a headphone,
and you would

00:13:06.640 --> 00:13:09.910
like to tune how that speaker,
that headphones sound.

00:13:09.910 --> 00:13:12.300
You would like to
voice that speaker

00:13:12.300 --> 00:13:15.557
and make it have a
certain frequency profile.

00:13:15.557 --> 00:13:17.140
Another application
will be, let's say

00:13:17.140 --> 00:13:19.540
that you're building
an Android TV

00:13:19.540 --> 00:13:22.680
and you would like to
implement the TV midnight mode.

00:13:22.680 --> 00:13:25.960
You are watching a movie at
home at midnight and, you know,

00:13:25.960 --> 00:13:28.510
watching the movie and
you have very loud sounds

00:13:28.510 --> 00:13:30.070
and explosions,
but you also have

00:13:30.070 --> 00:13:31.880
someone whispering right there.

00:13:31.880 --> 00:13:34.390
You would like to have some
dynamics processing that

00:13:34.390 --> 00:13:37.120
is going to bring up
the very soft sounds

00:13:37.120 --> 00:13:39.490
and is going to bring
down the very loud sounds,

00:13:39.490 --> 00:13:41.860
so everything sounds better
and your parents at home

00:13:41.860 --> 00:13:43.510
will not kick you out of home.

00:13:43.510 --> 00:13:46.840
Or if you want to have a
media player application

00:13:46.840 --> 00:13:49.780
and you would like to level
the loudness from song

00:13:49.780 --> 00:13:52.540
to song, from video to video.

00:13:52.540 --> 00:13:54.730
You can build these
kind of applications

00:13:54.730 --> 00:13:56.770
and you can use
sound enhancements

00:13:56.770 --> 00:14:01.130
to make the experience
better for your users.

00:14:01.130 --> 00:14:04.040
So in this section, we are going
to have three major things.

00:14:04.040 --> 00:14:06.700
The first one is
a little reminder

00:14:06.700 --> 00:14:09.400
of what we have about
the Dynamics Processing

00:14:09.400 --> 00:14:12.670
Effect, the DPE, that
we introduced last year.

00:14:12.670 --> 00:14:16.000
We are going to
also show the code

00:14:16.000 --> 00:14:19.330
of an equalizer, an app, a
simple application just doing

00:14:19.330 --> 00:14:20.470
an equalization.

00:14:20.470 --> 00:14:23.890
And we are going to have a look
inside of our very own Sound

00:14:23.890 --> 00:14:27.170
Amplifier, especially how
we control the parameters,

00:14:27.170 --> 00:14:28.750
how we do the noise reduction.

00:14:28.750 --> 00:14:30.970
And the goal is that
with all these tools,

00:14:30.970 --> 00:14:34.300
you could actually go out and
build your own Sound Amplifiers

00:14:34.300 --> 00:14:37.200
and distribute
them to your users.

00:14:37.200 --> 00:14:39.440
So to start, with the refresher.

00:14:39.440 --> 00:14:41.450
The Dynamics
Processing Effect, DPE

00:14:41.450 --> 00:14:44.520
for short, because I'm going
to say that many times today.

00:14:44.520 --> 00:14:47.600
The Dynamics Processing Effect
was introduced in Android Pie

00:14:47.600 --> 00:14:48.600
last year.

00:14:48.600 --> 00:14:51.010
And we also had a talk
in Google I/O which

00:14:51.010 --> 00:14:54.590
has a little bit more
content than this one,

00:14:54.590 --> 00:14:56.840
but is a good reference to have.

00:14:56.840 --> 00:14:58.370
With the Dynamics
Processing Effect

00:14:58.370 --> 00:15:00.920
we have a very
flexible architecture

00:15:00.920 --> 00:15:04.520
that will allow developers to
implement dynamic processing

00:15:04.520 --> 00:15:08.690
effects in the way that
you want to implement them.

00:15:08.690 --> 00:15:11.880
For example, we process
the sound by channels.

00:15:11.880 --> 00:15:13.340
You have left and right.

00:15:13.340 --> 00:15:15.128
You will have two
channels in there.

00:15:15.128 --> 00:15:16.670
So we are going to
do some processing

00:15:16.670 --> 00:15:18.380
on each one of the channels.

00:15:18.380 --> 00:15:22.460
And in the channels we have
four blocks, four modules,

00:15:22.460 --> 00:15:24.350
that can be used for
sound processing.

00:15:24.350 --> 00:15:28.250
We have a pre EQ, and equalizer
that can shape the frequency

00:15:28.250 --> 00:15:29.780
response of the sound.

00:15:29.780 --> 00:15:31.790
We have a multi-brand
compressor that

00:15:31.790 --> 00:15:34.150
allows for different
frequencies to treat

00:15:34.150 --> 00:15:36.170
the sound in different ways.

00:15:36.170 --> 00:15:38.120
A compressor does
one of the things

00:15:38.120 --> 00:15:39.860
that I mentioned
before, that it takes

00:15:39.860 --> 00:15:42.290
very loud sounds and
makes them softer,

00:15:42.290 --> 00:15:44.990
and very soft sounds
and makes them louder,

00:15:44.990 --> 00:15:48.590
which is the heart of the
sound amplifier that we saw.

00:15:48.590 --> 00:15:51.260
Post equalizer, also
to be able to shape

00:15:51.260 --> 00:15:53.670
the spectrum of the
sound that is coming out.

00:15:53.670 --> 00:15:54.900
And we have a limiter.

00:15:54.900 --> 00:15:57.170
A limiter is a very
good safety device,

00:15:57.170 --> 00:16:00.080
that after you have done all
this processing, if you have

00:16:00.080 --> 00:16:02.842
for some reason a pop
or a very loud sound,

00:16:02.842 --> 00:16:04.550
it's good to have a
limiter that is going

00:16:04.550 --> 00:16:07.520
to limit how loud that sound
is going to go when it's

00:16:07.520 --> 00:16:10.180
coming out of the processing.

00:16:10.180 --> 00:16:13.010
And inside of each
one of these modules,

00:16:13.010 --> 00:16:15.070
we have a lot of
parameters, a lot of bands,

00:16:15.070 --> 00:16:18.200
that we can control
individually.

00:16:18.200 --> 00:16:20.340
And in addition to that,
we have many channels.

00:16:20.340 --> 00:16:24.050
So as you see, our architecture
will allow us to actually

00:16:24.050 --> 00:16:26.730
have a lot of channels,
a lot of stages,

00:16:26.730 --> 00:16:28.890
and a lot of parameters
in each one of them,

00:16:28.890 --> 00:16:30.830
which is kind of
difficult to control,

00:16:30.830 --> 00:16:33.800
but it gives you a lot of
power to port your algorithms

00:16:33.800 --> 00:16:36.660
into this platform.

00:16:36.660 --> 00:16:38.370
Going into code,
I want to show how

00:16:38.370 --> 00:16:40.200
this instance is instantiated.

00:16:40.200 --> 00:16:43.200
First, we introduce our
Dynamics Processing Effect,

00:16:43.200 --> 00:16:45.310
we import the Dynamics
Processing Effect module

00:16:45.310 --> 00:16:48.140
in your Java code.

00:16:48.140 --> 00:16:52.380
Then we are using the
builder design pattern,

00:16:52.380 --> 00:16:55.830
where we are going to configure
what we want the Dynamics

00:16:55.830 --> 00:16:57.090
Processing Effect to do.

00:16:57.090 --> 00:17:00.030
And then we actually create
a Dynamics Processing Effect.

00:17:00.030 --> 00:17:02.250
In this case, we
are saying that we

00:17:02.250 --> 00:17:04.859
want to favor frequency
resolution instead

00:17:04.859 --> 00:17:05.910
of time domain.

00:17:05.910 --> 00:17:08.250
We have different
flavors of processing.

00:17:08.250 --> 00:17:11.040
With frequency domain,
you can have more control

00:17:11.040 --> 00:17:13.950
of how your frequencies are
distributed in the frequency

00:17:13.950 --> 00:17:14.520
domain.

00:17:14.520 --> 00:17:17.670
With time resolution, with
favoring time resolution,

00:17:17.670 --> 00:17:20.670
you will have more control of
how big your blocks in time

00:17:20.670 --> 00:17:21.359
will be.

00:17:21.359 --> 00:17:23.280
So you want fast
response, probably

00:17:23.280 --> 00:17:26.760
you would like to have the
time domain implementation.

00:17:26.760 --> 00:17:29.150
We can also say how
many channels we want,

00:17:29.150 --> 00:17:33.960
and then we can say in the
stages if we want to use pre EQ

00:17:33.960 --> 00:17:34.980
and how many bands.

00:17:34.980 --> 00:17:38.700
In this case, we want to
use pre EQ and 12 bands.

00:17:38.700 --> 00:17:42.420
We want to use a multi-band
compressor and eight bands,

00:17:42.420 --> 00:17:46.477
and we want to use post EQ 16
bands and also the limiter.

00:17:46.477 --> 00:17:48.060
So pretty much we
are using everything

00:17:48.060 --> 00:17:51.300
that we have access to.

00:17:51.300 --> 00:17:54.480
Then we can set some
parameters that are preferred.

00:17:54.480 --> 00:17:56.950
We are kind of
hinting the system.

00:17:56.950 --> 00:18:00.140
We would like to have frames
that are 10 milliseconds long.

00:18:00.140 --> 00:18:02.430
Doesn't mean that the
system is going to comply,

00:18:02.430 --> 00:18:05.250
but it is going to do the
best effort to offer us

00:18:05.250 --> 00:18:06.630
10 milliseconds frames.

00:18:06.630 --> 00:18:09.570
We can ask for something
smaller, something longer.

00:18:09.570 --> 00:18:11.940
It depends what your
algorithm needs.

00:18:11.940 --> 00:18:14.790
Then we create the
config object and we are

00:18:14.790 --> 00:18:16.740
ready to go to the next stage.

00:18:16.740 --> 00:18:19.830
In the next stage, we haven't
created the Dynamics Processing

00:18:19.830 --> 00:18:20.670
Effect yet.

00:18:20.670 --> 00:18:24.990
We would like to go and get hold
of the multi-band compressor

00:18:24.990 --> 00:18:27.660
and change some of the
default parameters.

00:18:27.660 --> 00:18:29.670
So we get ahold
of that and we are

00:18:29.670 --> 00:18:33.210
going to iterate in this moment,
in the eight bands in this toy

00:18:33.210 --> 00:18:34.920
example that I have here.

00:18:34.920 --> 00:18:37.030
We get ahold of the band.

00:18:37.030 --> 00:18:39.330
In this moment, we set
some of the parameters,

00:18:39.330 --> 00:18:42.330
like the attack time,
to be 50 milliseconds.

00:18:42.330 --> 00:18:45.280
We set the release time
to be 100 milliseconds.

00:18:45.280 --> 00:18:47.040
We can set all the
other parameters

00:18:47.040 --> 00:18:48.760
whatever that we want there.

00:18:48.760 --> 00:18:51.780
And this can really mimic the
algorithms that we already

00:18:51.780 --> 00:18:54.060
have in place, or
they are the specs

00:18:54.060 --> 00:18:56.700
that your sound designers
or your sound engineers

00:18:56.700 --> 00:18:58.890
require for your application.

00:18:58.890 --> 00:19:01.950
And finally, we are going to
create the Dynamics Processing

00:19:01.950 --> 00:19:04.260
Effect, the one
that I call my DPE.

00:19:04.260 --> 00:19:06.900
That one is my actual
Dynamics Processing

00:19:06.900 --> 00:19:09.360
that is going to do all
the signal processing.

00:19:09.360 --> 00:19:12.990
A very important part is
that we have the sessionId.

00:19:12.990 --> 00:19:14.880
And this is something
that as a developer

00:19:14.880 --> 00:19:17.070
is going to give
you the flexibility

00:19:17.070 --> 00:19:21.750
to create a media player
or to start playing a sound

00:19:21.750 --> 00:19:25.080
and then create an effect and
put them together, because you

00:19:25.080 --> 00:19:26.890
are using the same sessionId.

00:19:26.890 --> 00:19:29.680
And we are going to see
that in the next example.

00:19:29.680 --> 00:19:33.820
So to recap, we are creating
the dynamic processing effect,

00:19:33.820 --> 00:19:37.260
and we have access to a lot of
parameters that we can control,

00:19:37.260 --> 00:19:39.980
either at init
time or at runtime.

00:19:39.980 --> 00:19:42.120
At runtime we can
go and change what

00:19:42.120 --> 00:19:44.940
is the frequency that
we want to affect,

00:19:44.940 --> 00:19:47.130
how much energy we
want in each frequency.

00:19:47.130 --> 00:19:49.350
We can control
everything real time.

00:19:49.350 --> 00:19:51.870
And in this graph, we
see that we have channels

00:19:51.870 --> 00:19:52.890
inside of the channels.

00:19:52.890 --> 00:19:56.600
We have different stages, pre
EQ, multi-band compressor,

00:19:56.600 --> 00:19:58.800
post EQ and the limiter.

00:19:58.800 --> 00:20:00.300
And inside of each
one of them we

00:20:00.300 --> 00:20:04.630
have bands and multiple
parameters that we can control.

00:20:04.630 --> 00:20:06.820
So one very quick example.

00:20:06.820 --> 00:20:09.270
I am going to use
this equalizer demo

00:20:09.270 --> 00:20:11.550
and I'm going to show
you the code that I

00:20:11.550 --> 00:20:13.030
used for this application.

00:20:13.030 --> 00:20:14.730
So can we switch to
the demo, please?

00:20:20.630 --> 00:20:23.090
So I have a very
simple application

00:20:23.090 --> 00:20:25.250
that is called equalizer
I am going to play,

00:20:25.250 --> 00:20:27.230
so I am not doing
any hearing loss.

00:20:27.230 --> 00:20:28.400
I just want it to play here.

00:20:28.400 --> 00:20:30.740
[MUSIC]

00:20:30.740 --> 00:20:33.870
And I'm going to start
modifying the bands in there.

00:20:33.870 --> 00:20:34.370
So.

00:20:34.370 --> 00:20:37.765
[MUSIC]

00:20:45.540 --> 00:20:46.680
OK, that was the demo.

00:20:46.680 --> 00:20:48.760
So I just wanted to
show that it is running,

00:20:48.760 --> 00:20:51.680
and I'm going to show
you how it's working.

00:20:51.680 --> 00:20:52.930
So back to the slides, please.

00:20:56.920 --> 00:20:59.970
So we start with, we
create a media player.

00:20:59.970 --> 00:21:02.730
We go to the code and we
just use the same code

00:21:02.730 --> 00:21:05.760
that we have used for many
years to create a media object.

00:21:05.760 --> 00:21:07.710
In this case, it's
the media player.

00:21:07.710 --> 00:21:11.680
And I'm playing a classical
music example in there.

00:21:11.680 --> 00:21:14.400
But the most important thing
is that when I create that,

00:21:14.400 --> 00:21:17.070
we have the sessionId
as I mentioned before.

00:21:17.070 --> 00:21:18.870
We create a media
player and we are

00:21:18.870 --> 00:21:21.990
going to use the sessionId
in a second, when we create

00:21:21.990 --> 00:21:23.790
the Dynamics Processing Effect.

00:21:23.790 --> 00:21:26.670
So I am going to go inside
my function that is there,

00:21:26.670 --> 00:21:28.620
the last one called createDP.

00:21:28.620 --> 00:21:30.630
That is my own custom function.

00:21:30.630 --> 00:21:33.390
I am using the builder,
a design pattern,

00:21:33.390 --> 00:21:35.870
that I am going to say
how many channels I want,

00:21:35.870 --> 00:21:37.420
how many bands I want.

00:21:37.420 --> 00:21:40.830
I am just going to use the
first one that is the EQ.

00:21:40.830 --> 00:21:46.260
And I am going to create
in each one of the EQ bands

00:21:46.260 --> 00:21:48.300
what is the level,
the initial level.

00:21:48.300 --> 00:21:50.290
So I know there is
a lot of code there.

00:21:50.290 --> 00:21:55.110
But the most important part is
that when we have created this

00:21:55.110 --> 00:21:59.190
and at runtime, when I move in
the sliders, what I am doing

00:21:59.190 --> 00:22:00.400
when I'm moving the sliders.

00:22:00.400 --> 00:22:02.150
If you're looking here,
the section that I

00:22:02.150 --> 00:22:03.420
just highlighted there.

00:22:03.420 --> 00:22:05.430
Every time that I move
one of the sliders,

00:22:05.430 --> 00:22:09.420
I go and find the band
of interest for that EQ

00:22:09.420 --> 00:22:11.800
and just assign a
different value there.

00:22:11.800 --> 00:22:15.330
I say I want to attenuate or
I want to enhance that band.

00:22:15.330 --> 00:22:16.030
This is all.

00:22:16.030 --> 00:22:17.460
This is all the
code that you need

00:22:17.460 --> 00:22:20.880
to run a very powerful,
very configurable EQ

00:22:20.880 --> 00:22:22.680
in your application.

00:22:22.680 --> 00:22:26.760
And now I'm going to go to
my last part of my talk.

00:22:26.760 --> 00:22:29.310
I know that is a
lot of data, but.

00:22:29.310 --> 00:22:30.820
Inside of the Sound Amplifier.

00:22:30.820 --> 00:22:33.330
So our Sound Amplifier,
the application

00:22:33.330 --> 00:22:38.160
that Brian demoed before, is
built on top of the Dynamics

00:22:38.160 --> 00:22:39.090
Processing Effect.

00:22:39.090 --> 00:22:40.740
We are using the
dynamic sources effect

00:22:40.740 --> 00:22:44.310
that anyone that is using
Android Pie or above

00:22:44.310 --> 00:22:45.710
can have access to.

00:22:45.710 --> 00:22:47.420
And it has in the
architecture, it

00:22:47.420 --> 00:22:50.370
has two parts that I
want to make emphasis to.

00:22:50.370 --> 00:22:53.040
The first one is the
control part, the top part.

00:22:53.040 --> 00:22:56.010
Very much the user
has access to the UI.

00:22:56.010 --> 00:22:57.660
It can move some sliders.

00:22:57.660 --> 00:23:00.180
And when it moves the
sliders, the application

00:23:00.180 --> 00:23:03.660
is computing some parameters
that gets sent to the Dynamics

00:23:03.660 --> 00:23:04.500
Processing Effect.

00:23:04.500 --> 00:23:07.650
That is says, change the EQ
here, change this band here,

00:23:07.650 --> 00:23:09.160
move things here.

00:23:09.160 --> 00:23:12.490
This is all done in the UI, I
will say in the control part.

00:23:12.490 --> 00:23:15.265
But all the number-crunching,
all the magic

00:23:15.265 --> 00:23:16.890
is happening in the
Dynamics Processing

00:23:16.890 --> 00:23:19.330
Effect that belongs to the OS.

00:23:19.330 --> 00:23:23.550
Another part of that I want
to show is the audio part.

00:23:23.550 --> 00:23:25.770
We are doing some noise
reduction analysis

00:23:25.770 --> 00:23:28.620
in the audio, but at
the end we are just

00:23:28.620 --> 00:23:31.650
selecting some parameters
that get sent to the Dynamics

00:23:31.650 --> 00:23:33.630
Processing Effect to
tell the system how

00:23:33.630 --> 00:23:36.360
to process the audio.

00:23:36.360 --> 00:23:39.210
How do we do this, the
first part, the UI part?

00:23:39.210 --> 00:23:41.600
So our problem is
we have two sliders

00:23:41.600 --> 00:23:44.300
and we would like the Dynamics
Processing Effect to change

00:23:44.300 --> 00:23:46.310
the parameters that this has.

00:23:46.310 --> 00:23:49.190
What type of changes we
want in those parameters?

00:23:49.190 --> 00:23:51.780
We are going to use
some EQ and compression.

00:23:51.780 --> 00:23:54.030
We are going to do what
Brian showed us to do,

00:23:54.030 --> 00:23:55.880
that hearing aids
do, that they just

00:23:55.880 --> 00:23:59.450
change some of the parameters,
how they affect the frequency

00:23:59.450 --> 00:24:01.670
response and how they
affect the frequency,

00:24:01.670 --> 00:24:03.980
at different frequencies
in different ways.

00:24:03.980 --> 00:24:06.620
We can go and-- in this
case, the top curve

00:24:06.620 --> 00:24:09.500
is telling me to boost some
of the low frequencies,

00:24:09.500 --> 00:24:13.880
and the bottom curve is telling
me to apply some compression

00:24:13.880 --> 00:24:16.610
also to the low frequencies.

00:24:16.610 --> 00:24:18.380
But still, that's
a lot of parameters

00:24:18.380 --> 00:24:21.560
for a user to control directly.

00:24:21.560 --> 00:24:25.060
We could simplify these
curves by just saying, well,

00:24:25.060 --> 00:24:27.880
you know, let's take
the slope of the curve.

00:24:27.880 --> 00:24:30.580
I'm just to represent the whole
curve with all these parameters

00:24:30.580 --> 00:24:32.090
with a single number.

00:24:32.090 --> 00:24:34.030
And if I do that
for both curves,

00:24:34.030 --> 00:24:37.330
I could plot that in a
two-dimensional space.

00:24:37.330 --> 00:24:39.860
I could say the first
curve is one number,

00:24:39.860 --> 00:24:41.530
the second curve
is another number.

00:24:41.530 --> 00:24:44.230
I have an xy
coordinate and I just

00:24:44.230 --> 00:24:47.710
represent that in that space as
the circle that you see there.

00:24:47.710 --> 00:24:49.850
I could do the same
for another curve.

00:24:49.850 --> 00:24:52.750
And it's a different point
that I get in xy coordinate.

00:24:52.750 --> 00:24:55.060
The same for another
curve, another curve.

00:24:55.060 --> 00:24:58.330
So we can get a lot of
curves that get represented,

00:24:58.330 --> 00:25:01.240
even so that they have a lot of
parameters that get represented

00:25:01.240 --> 00:25:02.470
in the xy coordinate.

00:25:02.470 --> 00:25:03.610
Very simple.

00:25:03.610 --> 00:25:07.720
The magic, the beauty of this is
that now with an xy coordinate,

00:25:07.720 --> 00:25:11.170
a map, we can just take our
boost and our fine tuning

00:25:11.170 --> 00:25:14.320
and we could pretty much
navigate that xy coordinate

00:25:14.320 --> 00:25:16.960
space very easy,
go and find what

00:25:16.960 --> 00:25:20.380
is the point that is closest
to what the user wants,

00:25:20.380 --> 00:25:23.230
and that gets translated
to a lot of parameters

00:25:23.230 --> 00:25:26.120
that get sent to the
Dynamics Processing Effect.

00:25:26.120 --> 00:25:28.810
So we're actually doing
multidimensional mapping.

00:25:28.810 --> 00:25:31.210
We are taking something
that has many dimensions

00:25:31.210 --> 00:25:33.940
and reducing that
to two dimensions.

00:25:33.940 --> 00:25:35.570
Of course, this
is a toy example.

00:25:35.570 --> 00:25:37.520
There is a lot of math
involved in there.

00:25:37.520 --> 00:25:39.290
But you get the idea.

00:25:39.290 --> 00:25:41.650
But one of the other important
things that we did here

00:25:41.650 --> 00:25:44.860
is that we took many
curves from many people

00:25:44.860 --> 00:25:48.040
from many audiograms,
and with those audiograms

00:25:48.040 --> 00:25:51.730
we managed to come up
with all these curves

00:25:51.730 --> 00:25:54.370
that represent the kind
of hearing enhancement

00:25:54.370 --> 00:25:55.960
that a lot of
people will benefit

00:25:55.960 --> 00:25:59.200
from in the real world, when
they're in a coffee shop

00:25:59.200 --> 00:26:01.190
or in a restaurant,
in different places.

00:26:01.190 --> 00:26:01.690
OK.

00:26:01.690 --> 00:26:03.850
And to finish, I want
to talk a little bit

00:26:03.850 --> 00:26:05.050
about noise reduction.

00:26:05.050 --> 00:26:08.330
With noise reduction, what
we do is in the bottom part,

00:26:08.330 --> 00:26:10.162
we are get hold of the audio.

00:26:10.162 --> 00:26:11.620
We are looking at
the audio that is

00:26:11.620 --> 00:26:12.940
coming through the microphone.

00:26:12.940 --> 00:26:14.980
But we would like
to get rid of sounds

00:26:14.980 --> 00:26:18.370
that, especially-- they
are all there, like there

00:26:18.370 --> 00:26:19.250
for a long time.

00:26:19.250 --> 00:26:22.210
For example, that AC sound
that is really annoying.

00:26:22.210 --> 00:26:25.170
So if we start looking at
the spectrum of the sound

00:26:25.170 --> 00:26:28.330
and we take one spectrum,
then another spectrum, then

00:26:28.330 --> 00:26:31.630
another spectrum, we can see
what is pretty much there

00:26:31.630 --> 00:26:33.790
for a long period of time,
versus something that

00:26:33.790 --> 00:26:36.650
changes a lot, like my voice
that is just there for a second

00:26:36.650 --> 00:26:38.590
and then it's not
there the next instant.

00:26:38.590 --> 00:26:41.800
When we compute that, we
can go and tell the DPE,

00:26:41.800 --> 00:26:43.960
you know, these frequencies
that have been there

00:26:43.960 --> 00:26:45.200
for a long time?

00:26:45.200 --> 00:26:48.360
Please put them down
and attenuate them.

00:26:48.360 --> 00:26:51.290
Now, just to recap, we looked
inside the Dynamics Processing

00:26:51.290 --> 00:26:53.470
Effect, we build
our own equalizer

00:26:53.470 --> 00:26:56.380
and we talk about the Sound
Amplifier, noise reduction

00:26:56.380 --> 00:26:57.760
and the control UI.

00:26:57.760 --> 00:27:00.250
Now we are going to
go to Jon and Stanley

00:27:00.250 --> 00:27:03.640
to know more about Android
hearing aid support.

00:27:03.640 --> 00:27:05.305
Thank you.

00:27:05.305 --> 00:27:08.630
[APPLAUSE]

00:27:09.643 --> 00:27:11.060
JONATHAN HURWITZ:
Thanks, Ricardo.

00:27:11.060 --> 00:27:13.430
Let's talk about hearing aids.

00:27:13.430 --> 00:27:15.430
So first, I'm going to
go over what the existing

00:27:15.430 --> 00:27:18.135
landscape looks like and where
what we've built in fits in.

00:27:18.135 --> 00:27:19.510
And then I'm going
to hand it off

00:27:19.510 --> 00:27:22.010
to Stanley, who's going to talk
through exactly how to build

00:27:22.010 --> 00:27:26.493
this into your devices if you're
an OEM or a hearing aid maker.

00:27:26.493 --> 00:27:28.910
So today, if you want to get
audio from your Android phone

00:27:28.910 --> 00:27:31.340
to your hearing aids,
it's not so easy.

00:27:31.340 --> 00:27:33.500
Typically, you'll need
what's called a streamer.

00:27:33.500 --> 00:27:35.042
And this is a small
piece of hardware

00:27:35.042 --> 00:27:38.210
that you wear on your
body that allows the phone

00:27:38.210 --> 00:27:40.940
to relay an audio signal
to the hearing aids.

00:27:40.940 --> 00:27:43.890
And the reason why this exists
is because of battery life.

00:27:43.890 --> 00:27:46.190
So Bluetooth Classic
is just not good enough

00:27:46.190 --> 00:27:48.560
for the power constraints
of a hearing aid device.

00:27:48.560 --> 00:27:51.440
And we can't ask hearing aid
users to replace the battery

00:27:51.440 --> 00:27:53.252
on the order of hours or days.

00:27:53.252 --> 00:27:54.710
And so what the
streamer does is it

00:27:54.710 --> 00:27:56.240
will take a classic
Bluetooth signal

00:27:56.240 --> 00:27:58.400
from the phone to the
streamer and then use

00:27:58.400 --> 00:28:02.030
a proprietary low-power link to
send the audio to the hearing

00:28:02.030 --> 00:28:03.080
aids.

00:28:03.080 --> 00:28:05.400
But this introduces
two problems.

00:28:05.400 --> 00:28:07.820
The first is that it's
just simply something

00:28:07.820 --> 00:28:09.110
else to worry about.

00:28:09.110 --> 00:28:12.010
If you lose it or damage
it, you're out of luck.

00:28:12.010 --> 00:28:15.610
And the second is it's
another thing to keep charged.

00:28:15.610 --> 00:28:17.560
We have a growing
ecosystem of devices.

00:28:17.560 --> 00:28:20.325
All of us have smart watches,
smartphones, tablets, and more,

00:28:20.325 --> 00:28:21.700
and to have yet
another thing you

00:28:21.700 --> 00:28:25.480
need to plug in every night or
every other night is a pain.

00:28:25.480 --> 00:28:27.520
Because if you wake up
and it's not charged,

00:28:27.520 --> 00:28:29.320
you're out of luck.

00:28:29.320 --> 00:28:31.240
So we challenged
ourselves to do better,

00:28:31.240 --> 00:28:33.240
and we worked really hard
these past few months.

00:28:33.240 --> 00:28:36.070
We think we really have.

00:28:36.070 --> 00:28:39.210
So you'll be able to
take calls, stream music,

00:28:39.210 --> 00:28:40.870
all without an
accessory, because we

00:28:40.870 --> 00:28:42.880
built direct streaming
support for hearing aids

00:28:42.880 --> 00:28:45.450
right into Android.

00:28:45.450 --> 00:28:47.312
But we didn't stop there.

00:28:47.312 --> 00:28:48.770
We really listened
to users, and we

00:28:48.770 --> 00:28:51.240
know that battery life
is incredibly important.

00:28:51.240 --> 00:28:53.870
And so what we've actually
done is challenged ourselves

00:28:53.870 --> 00:28:56.150
to build battery life into
the hearing aids that's

00:28:56.150 --> 00:29:00.770
better than a regular headphone,
and the team delivered.

00:29:00.770 --> 00:29:03.230
We've been able to deliver
week-long battery life,

00:29:03.230 --> 00:29:05.750
even with streaming support.

00:29:05.750 --> 00:29:08.240
This isn't something that
any headphone can do.

00:29:08.240 --> 00:29:09.040
So how do we do it?

00:29:11.630 --> 00:29:13.573
Well, Bluetooth
Classic wasn't enough,

00:29:13.573 --> 00:29:14.990
so we had to go
to something else.

00:29:14.990 --> 00:29:18.910
And we turned to Bluetooth
Low Energy, or BLE for short.

00:29:18.910 --> 00:29:21.970
To get audio from the phone to
the hearing aids, what we do

00:29:21.970 --> 00:29:24.340
is we actually open
up two audio channels,

00:29:24.340 --> 00:29:25.960
called low energy
connection oriented

00:29:25.960 --> 00:29:27.730
channels, where
we send the data.

00:29:27.730 --> 00:29:30.090
We have one channel
per hearing aid device.

00:29:30.090 --> 00:29:32.050
And the benefit of
using BLE over Classic

00:29:32.050 --> 00:29:34.690
is that all the power
savings we get we

00:29:34.690 --> 00:29:37.428
can push back to the
user as battery life.

00:29:37.428 --> 00:29:39.220
So there's no need to
recharge your hearing

00:29:39.220 --> 00:29:41.320
aids every single night.

00:29:41.320 --> 00:29:43.305
And in addition, all
of the important ways

00:29:43.305 --> 00:29:45.180
in which you interface
with your hearing aids

00:29:45.180 --> 00:29:47.250
are built directly
into Android, which

00:29:47.250 --> 00:29:48.810
means right out
of the box you'll

00:29:48.810 --> 00:29:51.330
be able to pair, connect
and stream, so there's

00:29:51.330 --> 00:29:53.588
no need for a third party app.

00:29:53.588 --> 00:29:55.380
We do really love third
party apps, though,

00:29:55.380 --> 00:29:57.030
because they allow you
to enhance your listening

00:29:57.030 --> 00:29:57.530
experience.

00:29:57.530 --> 00:30:00.958
You can customize EQ and
adjust your hearing profile

00:30:00.958 --> 00:30:03.250
based on where you are,
whether you're in a restaurant,

00:30:03.250 --> 00:30:05.690
whether you're outside, or
in a presentation like this.

00:30:05.690 --> 00:30:07.155
And so they're not going away.

00:30:07.155 --> 00:30:09.030
In fact, we've actually
created some new APIs

00:30:09.030 --> 00:30:11.010
which Stanley is
going to talk through

00:30:11.010 --> 00:30:14.000
to make your life easier and
to make hearing aid companies,

00:30:14.000 --> 00:30:18.500
to enable them to build
really killer apps.

00:30:18.500 --> 00:30:23.190
So we'll be launching with
support for select GN hearing

00:30:23.190 --> 00:30:25.157
aids and Cochlear implantables.

00:30:25.157 --> 00:30:27.240
And we're really excited
about these partnerships.

00:30:27.240 --> 00:30:28.830
We worked super hard
with these companies

00:30:28.830 --> 00:30:31.080
over the past few months to
build some killer products

00:30:31.080 --> 00:30:33.610
that we think users
are going to love.

00:30:33.610 --> 00:30:36.040
But we're also excited for
all of the other hearing aid

00:30:36.040 --> 00:30:37.730
companies that are
in the pipeline,

00:30:37.730 --> 00:30:41.740
So keep your eyes out for
other people and companies who

00:30:41.740 --> 00:30:45.748
will be showing up here
within the next few months.

00:30:45.748 --> 00:30:52.320
So phone calls, audio,
music, podcasts and more,

00:30:52.320 --> 00:30:56.620
all without an accessory and
all with a week of battery life.

00:30:56.620 --> 00:30:58.853
This has been an amazing
effort and partnership,

00:30:58.853 --> 00:31:00.270
and we're super
excited about what

00:31:00.270 --> 00:31:04.230
this is going to do for
the 466 million people who

00:31:04.230 --> 00:31:05.610
have disabling hearing loss.

00:31:05.610 --> 00:31:07.110
I'm going to hand
it over to Stanley

00:31:07.110 --> 00:31:09.527
now, who's going to talk through
exactly how to build this

00:31:09.527 --> 00:31:11.490
into your device
if you're in OEM.

00:31:11.490 --> 00:31:12.766
Thank you.

00:31:12.766 --> 00:31:16.182
[APPLAUSE]

00:31:17.650 --> 00:31:19.250
STANLEY TNG: Thanks, John.

00:31:19.250 --> 00:31:23.090
I'm Stanley Tng from the
Android Bluetooth Team.

00:31:23.090 --> 00:31:26.090
I'll be talking through
how Android devices can

00:31:26.090 --> 00:31:27.875
support hearing aids directly.

00:31:30.860 --> 00:31:33.160
So the very first thing
is that go and look

00:31:33.160 --> 00:31:36.550
at our open and
publicly available

00:31:36.550 --> 00:31:39.450
Android hearing aid
specifications, in a given link

00:31:39.450 --> 00:31:39.950
here.

00:31:43.570 --> 00:31:45.820
Once you read the spec,
you want to make sure

00:31:45.820 --> 00:31:49.540
that the Android device
that you want to [INAUDIBLE]

00:31:49.540 --> 00:31:51.340
can support ASHA.

00:31:51.340 --> 00:31:56.610
I'll be going through the list
of requirements a bit later.

00:31:56.610 --> 00:32:01.730
Then reach out to Google to
receive reference hearing aid

00:32:01.730 --> 00:32:03.665
devices for your testing.

00:32:06.930 --> 00:32:09.270
All of our development
is done in open source

00:32:09.270 --> 00:32:13.060
and on the AOSP code base.

00:32:13.060 --> 00:32:18.600
So with your reference devices
and the AOSP open source code,

00:32:18.600 --> 00:32:23.260
you have everything you
need to build a solution.

00:32:23.260 --> 00:32:25.650
But I must stress,
it's very important

00:32:25.650 --> 00:32:29.320
that you test thoroughly
with the reference device

00:32:29.320 --> 00:32:32.110
to make sure it's correct.

00:32:32.110 --> 00:32:35.110
Our test plan will be
made available for you

00:32:35.110 --> 00:32:41.640
shortly to test for both
quality and interoperability.

00:32:41.640 --> 00:32:45.540
So let's talk about what are the
Android platform requirements.

00:32:45.540 --> 00:32:47.440
Really good news.

00:32:47.440 --> 00:32:52.200
There is no new hardware
or Bluetooth chip firmware

00:32:52.200 --> 00:32:53.760
needed to support ASHA.

00:32:56.450 --> 00:33:02.290
You just use any BTSIG-compliant
Bluetooth chipsets.

00:33:02.290 --> 00:33:07.450
We didn't want to define any new
vendor-specific HCI commands.

00:33:07.450 --> 00:33:10.750
That means you could still
use your generic Bluetooth

00:33:10.750 --> 00:33:14.890
firmware that is provided
from your chip provider.

00:33:14.890 --> 00:33:19.130
However, we do prefer
a BT 5.0 chipset.

00:33:21.960 --> 00:33:24.210
As John has mentioned,
we are using

00:33:24.210 --> 00:33:30.780
the LE Connection on the
Channels, or CoC for short.

00:33:30.780 --> 00:33:34.370
You want to make sure that
your implementation of CoC

00:33:34.370 --> 00:33:37.070
is good on your
Android platform.

00:33:37.070 --> 00:33:40.190
Therefore, please run
the following two tests--

00:33:40.190 --> 00:33:44.360
the CTS verifier
and the ACTS test.

00:33:44.360 --> 00:33:51.400
We have written special
tests on CoC for you.

00:33:51.400 --> 00:33:55.000
Now, do approach your
Bluetooth chip vendor

00:33:55.000 --> 00:33:58.360
and make sure they honor
these two parameters.

00:33:58.360 --> 00:34:02.860
They are called Min_CE parameter
and the Max_CE parameters.

00:34:02.860 --> 00:34:06.160
So these two parameters are
used whenever the connection

00:34:06.160 --> 00:34:10.420
parameters are updated, so
it's important they honor it

00:34:10.420 --> 00:34:14.380
so that you have
good quality audio.

00:34:14.380 --> 00:34:17.870
Lastly, for your
audio HAL module,

00:34:17.870 --> 00:34:22.150
please make sure you implement
these two new audio routes that

00:34:22.150 --> 00:34:25.100
is needed for hearing aids.

00:34:25.100 --> 00:34:26.639
That's it.

00:34:26.639 --> 00:34:30.330
I say no new hardware.

00:34:30.330 --> 00:34:33.480
Now, if you are hearing me
because the following slides

00:34:33.480 --> 00:34:36.300
have useful information
on how to build

00:34:36.300 --> 00:34:40.920
an ASHA-compatible device.

00:34:40.920 --> 00:34:46.380
Firstly, go read our open and
publicly available ASHA spec.

00:34:46.380 --> 00:34:48.270
It was posted there
since last August.

00:34:51.150 --> 00:34:56.250
To start building, you need to
obtain a Pixel 3 phone running

00:34:56.250 --> 00:35:01.440
Q, since Pixel 3 will be the
first phone to support ASHA.

00:35:04.660 --> 00:35:07.000
As I've said before,
our implementation

00:35:07.000 --> 00:35:10.660
is open source and in
the AOSP source code.

00:35:10.660 --> 00:35:15.550
Please look at AOSP to see how
we implement the audio source,

00:35:15.550 --> 00:35:20.720
and this should help you
implement your audio sync.

00:35:20.720 --> 00:35:25.100
We have built new
APIs in Android Q

00:35:25.100 --> 00:35:27.610
to make your life easier.

00:35:27.610 --> 00:35:31.980
Remember to use these APIs
when writing your app.

00:35:31.980 --> 00:35:36.220
I'll talk more about
these APIs in a bit.

00:35:36.220 --> 00:35:41.220
Finally, I must stress
test thoroughly.

00:35:41.220 --> 00:35:44.780
We'll be releasing
our test plans

00:35:44.780 --> 00:35:47.630
and will also be
compiling common issues

00:35:47.630 --> 00:35:52.550
and sharing them as FAQ
to make life easier.

00:35:52.550 --> 00:35:56.210
Let's talk about the new APIs.

00:35:56.210 --> 00:36:00.710
So for Android Q, we are
defining a new Bluetooth

00:36:00.710 --> 00:36:05.160
profile called the
hearing aids profile.

00:36:05.160 --> 00:36:08.210
So with this new
profile, your app

00:36:08.210 --> 00:36:14.560
can detect whether the phone
has hearing aid support or not.

00:36:14.560 --> 00:36:19.390
This new API allows your app
to install, manage, configure

00:36:19.390 --> 00:36:21.810
the paired devices.

00:36:21.810 --> 00:36:26.790
Furthermore, the apps can still
continue to use the existing LE

00:36:26.790 --> 00:36:29.590
services on your hearing aids.

00:36:29.590 --> 00:36:32.940
This means that all the special
features and enhancements

00:36:32.940 --> 00:36:35.760
that's available on
your hearing aids

00:36:35.760 --> 00:36:37.550
is still possible with your app.

00:36:40.340 --> 00:36:45.420
Just a small code
segment to demonstrate

00:36:45.420 --> 00:36:48.150
how you could check whether a
phone supports the hearing aid

00:36:48.150 --> 00:36:49.770
profile.

00:36:49.770 --> 00:36:52.440
We have defined
a new profile ID,

00:36:52.440 --> 00:36:55.140
and you can imagine using
this at your app level

00:36:55.140 --> 00:36:58.210
to verify that the
phone is compatible,

00:36:58.210 --> 00:37:01.040
and if not, throw a
notification to the user.

00:37:05.190 --> 00:37:09.060
I'd like to cover a few more
things to watch out for,

00:37:09.060 --> 00:37:12.930
because the Android
device is streaming audio

00:37:12.930 --> 00:37:19.000
to two different hearing devices
on two separate channels.

00:37:19.000 --> 00:37:23.700
There is a need to synchronize
the two audio streams.

00:37:23.700 --> 00:37:30.290
Hearing aid devices must have
their own stereo sync method.

00:37:30.290 --> 00:37:32.960
However, on the
Android side we will

00:37:32.960 --> 00:37:37.310
assist by sending the triggers
to the device whenever

00:37:37.310 --> 00:37:40.070
this sync needs to happen.

00:37:40.070 --> 00:37:42.830
Stay tuned and
check the ASHA spec,

00:37:42.830 --> 00:37:44.810
because we are adding
more details there.

00:37:48.590 --> 00:37:51.930
We are using the LE connection
on the channels, especially

00:37:51.930 --> 00:37:55.000
the credit-based flow control.

00:37:55.000 --> 00:37:59.970
So this credit is controlled
by the hearing devices,

00:37:59.970 --> 00:38:05.080
to let Android know when to
send the next audio data.

00:38:05.080 --> 00:38:07.890
Therefore, this flow control
is an important mechanism

00:38:07.890 --> 00:38:11.760
to regulate the amount of data
that the Android device sends

00:38:11.760 --> 00:38:12.770
to the hearing aids.

00:38:15.570 --> 00:38:19.230
As I said before,
Pixel 3 and Pixel 3 XL

00:38:19.230 --> 00:38:21.915
will be the first devices
is to support ASHA.

00:38:21.915 --> 00:38:23.940
If you are keen on
building quickly,

00:38:23.940 --> 00:38:26.850
go grab one to
start development.

00:38:26.850 --> 00:38:27.600
Thank you.

00:38:27.600 --> 00:38:30.125
Let me hand it back to Brian.

00:38:30.125 --> 00:38:31.500
BRIAN KEMLER:
Thank you, Stanley.

00:38:31.500 --> 00:38:33.840
[APPLAUSE]

00:38:33.840 --> 00:38:38.310
So this feature, I think, is one
of the most important features

00:38:38.310 --> 00:38:40.170
that we're launching,
because it means

00:38:40.170 --> 00:38:46.140
users are going to have the best
possible experience on Android

00:38:46.140 --> 00:38:49.170
with hearing aids to stream
music, stream anything.

00:38:49.170 --> 00:38:53.960
And Stanley was really the prime
mover technically behind this,

00:38:53.960 --> 00:38:56.883
so big shout out to Stanley
for making that happen.

00:38:56.883 --> 00:39:00.334
[APPLAUSE]

00:39:01.320 --> 00:39:03.350
So we talked today
about hearing loss

00:39:03.350 --> 00:39:05.900
and helped you understand
it a little bit better.

00:39:05.900 --> 00:39:08.690
And then Ricardo
dived in and helped

00:39:08.690 --> 00:39:12.410
you understand how to
build your own equalizer

00:39:12.410 --> 00:39:15.560
and effects into your
software and your hardware,

00:39:15.560 --> 00:39:16.966
and that was awesome.

00:39:20.300 --> 00:39:21.570
Running out of time.

00:39:21.570 --> 00:39:23.870
So if you guys
are interested, we

00:39:23.870 --> 00:39:28.190
have another talk tomorrow,
Demystifying Android

00:39:28.190 --> 00:39:29.660
Accessibility
Development, which is

00:39:29.660 --> 00:39:35.410
a very developer-focused talk,
tomorrow at 9:30 AM on stage 7.

00:39:35.410 --> 00:39:38.690
And we also have two
really cool sandboxes,

00:39:38.690 --> 00:39:41.430
the accessibility sandbox
and the experiment sandbox,

00:39:41.430 --> 00:39:43.430
which should be right out there.

00:39:43.430 --> 00:39:47.640
So I hope everybody had a
chance to learn something new.

00:39:47.640 --> 00:39:50.450
And I hope you all have
a great I/O. Thank you

00:39:50.450 --> 00:39:53.980
so much for coming out, and hope
to see you around or next year.

00:39:53.980 --> 00:39:57.330
[MUSIC]

