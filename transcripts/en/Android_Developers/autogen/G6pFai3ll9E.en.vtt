WEBVTT
Kind: captions
Language: en

00:00:02.720 --> 00:00:07.880
 
everyone welcome to the state of media

00:00:07.880 --> 00:00:07.890
everyone welcome to the state of media
 

00:00:07.890 --> 00:00:10.280
everyone welcome to the state of media
playback we'll be talking today about

00:00:10.280 --> 00:00:10.290
playback we'll be talking today about
 

00:00:10.290 --> 00:00:13.690
playback we'll be talking today about
how to do media playback the right way

00:00:13.690 --> 00:00:13.700
how to do media playback the right way
 

00:00:13.700 --> 00:00:16.279
how to do media playback the right way
so things have changed quite a bit over

00:00:16.279 --> 00:00:16.289
so things have changed quite a bit over
 

00:00:16.289 --> 00:00:19.220
so things have changed quite a bit over
time from the earliest Android days to

00:00:19.220 --> 00:00:19.230
time from the earliest Android days to
 

00:00:19.230 --> 00:00:21.740
time from the earliest Android days to
now but we've come up with a pretty good

00:00:21.740 --> 00:00:21.750
now but we've come up with a pretty good
 

00:00:21.750 --> 00:00:23.900
now but we've come up with a pretty good
solution on a lot of these things you

00:00:23.900 --> 00:00:23.910
solution on a lot of these things you
 

00:00:23.910 --> 00:00:26.509
solution on a lot of these things you
actually do need to do to really get the

00:00:26.509 --> 00:00:26.519
actually do need to do to really get the
 

00:00:26.519 --> 00:00:28.880
actually do need to do to really get the
best experience out of media playback

00:00:28.880 --> 00:00:28.890
best experience out of media playback
 

00:00:28.890 --> 00:00:31.070
best experience out of media playback
and we'll be talking through a lot of

00:00:31.070 --> 00:00:31.080
and we'll be talking through a lot of
 

00:00:31.080 --> 00:00:33.729
and we'll be talking through a lot of
the best practices around all of that a

00:00:33.729 --> 00:00:33.739
the best practices around all of that a
 

00:00:33.739 --> 00:00:35.810
the best practices around all of that a
little bit about me I've been doing

00:00:35.810 --> 00:00:35.820
little bit about me I've been doing
 

00:00:35.820 --> 00:00:37.310
little bit about me I've been doing
Android development for about five years

00:00:37.310 --> 00:00:37.320
Android development for about five years
 

00:00:37.320 --> 00:00:40.069
Android development for about five years
now started doing it in my spare time

00:00:40.069 --> 00:00:40.079
now started doing it in my spare time
 

00:00:40.079 --> 00:00:41.869
now started doing it in my spare time
and then moved to doing it full-time

00:00:41.869 --> 00:00:41.879
and then moved to doing it full-time
 

00:00:41.879 --> 00:00:44.660
and then moved to doing it full-time
first at fun where and then at Facebook

00:00:44.660 --> 00:00:44.670
first at fun where and then at Facebook
 

00:00:44.670 --> 00:00:47.690
first at fun where and then at Facebook
and now I work at Google as a developer

00:00:47.690 --> 00:00:47.700
and now I work at Google as a developer
 

00:00:47.700 --> 00:00:51.670
and now I work at Google as a developer
advocate so I'm working on both the

00:00:51.670 --> 00:00:51.680
advocate so I'm working on both the
 

00:00:51.680 --> 00:00:55.040
advocate so I'm working on both the
advanced Android Udacity course which is

00:00:55.040 --> 00:00:55.050
advanced Android Udacity course which is
 

00:00:55.050 --> 00:00:57.319
advanced Android Udacity course which is
online learning to get your learn on as

00:00:57.319 --> 00:00:57.329
online learning to get your learn on as
 

00:00:57.329 --> 00:00:59.360
online learning to get your learn on as
well as a new android development

00:00:59.360 --> 00:00:59.370
well as a new android development
 

00:00:59.370 --> 00:01:01.310
well as a new android development
patterns series of kind of going into

00:01:01.310 --> 00:01:01.320
patterns series of kind of going into
 

00:01:01.320 --> 00:01:04.160
patterns series of kind of going into
all of these best practices my focus has

00:01:04.160 --> 00:01:04.170
all of these best practices my focus has
 

00:01:04.170 --> 00:01:06.620
all of these best practices my focus has
primarily been on the framework and the

00:01:06.620 --> 00:01:06.630
primarily been on the framework and the
 

00:01:06.630 --> 00:01:08.300
primarily been on the framework and the
support library and actually worked

00:01:08.300 --> 00:01:08.310
support library and actually worked
 

00:01:08.310 --> 00:01:10.160
support library and actually worked
really closely with the media framework

00:01:10.160 --> 00:01:10.170
really closely with the media framework
 

00:01:10.170 --> 00:01:12.710
really closely with the media framework
team as well to write a lot of these

00:01:12.710 --> 00:01:12.720
team as well to write a lot of these
 

00:01:12.720 --> 00:01:16.130
team as well to write a lot of these
things I'm going to be talking about now

00:01:16.130 --> 00:01:16.140
things I'm going to be talking about now
 

00:01:16.140 --> 00:01:19.370
things I'm going to be talking about now
media playback can mean a lot to a lot

00:01:19.370 --> 00:01:19.380
media playback can mean a lot to a lot
 

00:01:19.380 --> 00:01:21.740
media playback can mean a lot to a lot
of different people so today we're going

00:01:21.740 --> 00:01:21.750
of different people so today we're going
 

00:01:21.750 --> 00:01:23.600
of different people so today we're going
to be focusing on just one part of that

00:01:23.600 --> 00:01:23.610
to be focusing on just one part of that
 

00:01:23.610 --> 00:01:26.660
to be focusing on just one part of that
specifically audio playback believe me

00:01:26.660 --> 00:01:26.670
specifically audio playback believe me
 

00:01:26.670 --> 00:01:30.890
specifically audio playback believe me
there's enough in the land of media that

00:01:30.890 --> 00:01:30.900
there's enough in the land of media that
 

00:01:30.900 --> 00:01:33.109
there's enough in the land of media that
we could cover a whole presentation a

00:01:33.109 --> 00:01:33.119
we could cover a whole presentation a
 

00:01:33.119 --> 00:01:34.969
we could cover a whole presentation a
whole conference about it but for this

00:01:34.969 --> 00:01:34.979
whole conference about it but for this
 

00:01:34.979 --> 00:01:37.160
whole conference about it but for this
will be focusing solely on audio

00:01:37.160 --> 00:01:37.170
will be focusing solely on audio
 

00:01:37.170 --> 00:01:39.649
will be focusing solely on audio
playback for video you might consider

00:01:39.649 --> 00:01:39.659
playback for video you might consider
 

00:01:39.659 --> 00:01:41.870
playback for video you might consider
looking at the cast companion library

00:01:41.870 --> 00:01:41.880
looking at the cast companion library
 

00:01:41.880 --> 00:01:44.389
looking at the cast companion library
it's up on github it's actually a really

00:01:44.389 --> 00:01:44.399
it's up on github it's actually a really
 

00:01:44.399 --> 00:01:45.800
it's up on github it's actually a really
good example of a lot of the best

00:01:45.800 --> 00:01:45.810
good example of a lot of the best
 

00:01:45.810 --> 00:01:48.340
good example of a lot of the best
practices around video playback

00:01:48.340 --> 00:01:48.350
practices around video playback
 

00:01:48.350 --> 00:01:50.690
practices around video playback
especially with interacting with Google

00:01:50.690 --> 00:01:50.700
especially with interacting with Google
 

00:01:50.700 --> 00:01:55.609
especially with interacting with Google
cast devices so when we talk about any

00:01:55.609 --> 00:01:55.619
cast devices so when we talk about any
 

00:01:55.619 --> 00:01:58.010
cast devices so when we talk about any
app right we really want to start with

00:01:58.010 --> 00:01:58.020
app right we really want to start with
 

00:01:58.020 --> 00:02:00.170
app right we really want to start with
the user right they are the most

00:02:00.170 --> 00:02:00.180
the user right they are the most
 

00:02:00.180 --> 00:02:02.060
the user right they are the most
important part of the app it's really

00:02:02.060 --> 00:02:02.070
important part of the app it's really
 

00:02:02.070 --> 00:02:04.370
important part of the app it's really
our job as developers to give them the

00:02:04.370 --> 00:02:04.380
our job as developers to give them the
 

00:02:04.380 --> 00:02:07.039
our job as developers to give them the
best experience that we can and that

00:02:07.039 --> 00:02:07.049
best experience that we can and that
 

00:02:07.049 --> 00:02:08.869
best experience that we can and that
really starts with what they're

00:02:08.869 --> 00:02:08.879
really starts with what they're
 

00:02:08.879 --> 00:02:10.999
really starts with what they're
expecting from your app right that

00:02:10.999 --> 00:02:11.009
expecting from your app right that
 

00:02:11.009 --> 00:02:12.890
expecting from your app right that
starts with the description and

00:02:12.890 --> 00:02:12.900
starts with the description and
 

00:02:12.900 --> 00:02:13.970
starts with the description and
screenshots and

00:02:13.970 --> 00:02:13.980
screenshots and
 

00:02:13.980 --> 00:02:15.920
screenshots and
into the actual functionality of the app

00:02:15.920 --> 00:02:15.930
into the actual functionality of the app
 

00:02:15.930 --> 00:02:18.470
into the actual functionality of the app
and what we're trying to do is rather

00:02:18.470 --> 00:02:18.480
and what we're trying to do is rather
 

00:02:18.480 --> 00:02:21.020
and what we're trying to do is rather
than just meet those expectations we're

00:02:21.020 --> 00:02:21.030
than just meet those expectations we're
 

00:02:21.030 --> 00:02:22.490
than just meet those expectations we're
really trying to exceed those

00:02:22.490 --> 00:02:22.500
really trying to exceed those
 

00:02:22.500 --> 00:02:24.740
really trying to exceed those
expectations right the worst thing that

00:02:24.740 --> 00:02:24.750
expectations right the worst thing that
 

00:02:24.750 --> 00:02:27.380
expectations right the worst thing that
we can do to users is have them expect

00:02:27.380 --> 00:02:27.390
we can do to users is have them expect
 

00:02:27.390 --> 00:02:29.509
we can do to users is have them expect
that oh this is supposed to do this but

00:02:29.509 --> 00:02:29.519
that oh this is supposed to do this but
 

00:02:29.519 --> 00:02:31.759
that oh this is supposed to do this but
then all of a sudden your app unlike

00:02:31.759 --> 00:02:31.769
then all of a sudden your app unlike
 

00:02:31.769 --> 00:02:33.740
then all of a sudden your app unlike
every other app doesn't do it the right

00:02:33.740 --> 00:02:33.750
every other app doesn't do it the right
 

00:02:33.750 --> 00:02:36.619
every other app doesn't do it the right
way and for media apps especially for

00:02:36.619 --> 00:02:36.629
way and for media apps especially for
 

00:02:36.629 --> 00:02:38.600
way and for media apps especially for
audio playback there are a lot of things

00:02:38.600 --> 00:02:38.610
audio playback there are a lot of things
 

00:02:38.610 --> 00:02:41.630
audio playback there are a lot of things
that do come as kind of preconditions

00:02:41.630 --> 00:02:41.640
that do come as kind of preconditions
 

00:02:41.640 --> 00:02:46.130
that do come as kind of preconditions
and expectations from the user and you

00:02:46.130 --> 00:02:46.140
and expectations from the user and you
 

00:02:46.140 --> 00:02:49.250
and expectations from the user and you
know of course for audio apps the first

00:02:49.250 --> 00:02:49.260
know of course for audio apps the first
 

00:02:49.260 --> 00:02:51.650
know of course for audio apps the first
user expectation is really background

00:02:51.650 --> 00:02:51.660
user expectation is really background
 

00:02:51.660 --> 00:02:54.199
user expectation is really background
playback or if you've ever had a media

00:02:54.199 --> 00:02:54.209
playback or if you've ever had a media
 

00:02:54.209 --> 00:02:56.479
playback or if you've ever had a media
app that like you hit the home button it

00:02:56.479 --> 00:02:56.489
app that like you hit the home button it
 

00:02:56.489 --> 00:02:59.210
app that like you hit the home button it
just stops playing right even for video

00:02:59.210 --> 00:02:59.220
just stops playing right even for video
 

00:02:59.220 --> 00:03:02.000
just stops playing right even for video
apps like YouTube for example now they

00:03:02.000 --> 00:03:02.010
apps like YouTube for example now they
 

00:03:02.010 --> 00:03:03.440
apps like YouTube for example now they
also support kind of that background

00:03:03.440 --> 00:03:03.450
also support kind of that background
 

00:03:03.450 --> 00:03:06.050
also support kind of that background
playback so for audio apps particularly

00:03:06.050 --> 00:03:06.060
playback so for audio apps particularly
 

00:03:06.060 --> 00:03:07.759
playback so for audio apps particularly
this is kind of one of those base

00:03:07.759 --> 00:03:07.769
this is kind of one of those base
 

00:03:07.769 --> 00:03:10.400
this is kind of one of those base
requirements and when we think about

00:03:10.400 --> 00:03:10.410
requirements and when we think about
 

00:03:10.410 --> 00:03:12.619
requirements and when we think about
background playback where you should

00:03:12.619 --> 00:03:12.629
background playback where you should
 

00:03:12.629 --> 00:03:13.789
background playback where you should
really already be thinking about

00:03:13.789 --> 00:03:13.799
really already be thinking about
 

00:03:13.799 --> 00:03:16.550
really already be thinking about
services right these are the top level

00:03:16.550 --> 00:03:16.560
services right these are the top level
 

00:03:16.560 --> 00:03:19.699
services right these are the top level
Android component specifically for doing

00:03:19.699 --> 00:03:19.709
Android component specifically for doing
 

00:03:19.709 --> 00:03:21.650
Android component specifically for doing
work in the background that isn't tied

00:03:21.650 --> 00:03:21.660
work in the background that isn't tied
 

00:03:21.660 --> 00:03:25.009
work in the background that isn't tied
to an activity or short live broadcast

00:03:25.009 --> 00:03:25.019
to an activity or short live broadcast
 

00:03:25.019 --> 00:03:27.440
to an activity or short live broadcast
receiver so it really is kind of the

00:03:27.440 --> 00:03:27.450
receiver so it really is kind of the
 

00:03:27.450 --> 00:03:30.470
receiver so it really is kind of the
natural choice for handling all of our

00:03:30.470 --> 00:03:30.480
natural choice for handling all of our
 

00:03:30.480 --> 00:03:34.729
natural choice for handling all of our
media state so what actually goes into

00:03:34.729 --> 00:03:34.739
media state so what actually goes into
 

00:03:34.739 --> 00:03:37.009
media state so what actually goes into
media playback at just kind of the

00:03:37.009 --> 00:03:37.019
media playback at just kind of the
 

00:03:37.019 --> 00:03:39.710
media playback at just kind of the
10,000 foot level a lot of this comes

00:03:39.710 --> 00:03:39.720
10,000 foot level a lot of this comes
 

00:03:39.720 --> 00:03:42.589
10,000 foot level a lot of this comes
down to kind of this super simplified

00:03:42.589 --> 00:03:42.599
down to kind of this super simplified
 

00:03:42.599 --> 00:03:44.839
down to kind of this super simplified
version of kind of the events in media

00:03:44.839 --> 00:03:44.849
version of kind of the events in media
 

00:03:44.849 --> 00:03:48.650
version of kind of the events in media
playback so for every service right

00:03:48.650 --> 00:03:48.660
playback so for every service right
 

00:03:48.660 --> 00:03:50.509
playback so for every service right
that's running eventually it's going to

00:03:50.509 --> 00:03:50.519
that's running eventually it's going to
 

00:03:50.519 --> 00:03:53.479
that's running eventually it's going to
be created right this may be the start

00:03:53.479 --> 00:03:53.489
be created right this may be the start
 

00:03:53.489 --> 00:03:55.759
be created right this may be the start
of playback or when your app first gets

00:03:55.759 --> 00:03:55.769
of playback or when your app first gets
 

00:03:55.769 --> 00:03:57.849
of playback or when your app first gets
created but we have some one-time

00:03:57.849 --> 00:03:57.859
created but we have some one-time
 

00:03:57.859 --> 00:04:00.409
created but we have some one-time
initialization in the created step and

00:04:00.409 --> 00:04:00.419
initialization in the created step and
 

00:04:00.419 --> 00:04:02.869
initialization in the created step and
then eventually when the put when the

00:04:02.869 --> 00:04:02.879
then eventually when the put when the
 

00:04:02.879 --> 00:04:04.789
then eventually when the put when the
user actually hits that play button

00:04:04.789 --> 00:04:04.799
user actually hits that play button
 

00:04:04.799 --> 00:04:06.530
user actually hits that play button
that's we're going to we're going to go

00:04:06.530 --> 00:04:06.540
that's we're going to we're going to go
 

00:04:06.540 --> 00:04:09.020
that's we're going to we're going to go
into the playing state playing state

00:04:09.020 --> 00:04:09.030
into the playing state playing state
 

00:04:09.030 --> 00:04:12.170
into the playing state playing state
here really means any time when we are

00:04:12.170 --> 00:04:12.180
here really means any time when we are
 

00:04:12.180 --> 00:04:15.800
here really means any time when we are
actually outputting audio right so this

00:04:15.800 --> 00:04:15.810
actually outputting audio right so this
 

00:04:15.810 --> 00:04:17.569
actually outputting audio right so this
is slightly different from the pause

00:04:17.569 --> 00:04:17.579
is slightly different from the pause
 

00:04:17.579 --> 00:04:20.779
is slightly different from the pause
state which would be the reverse of any

00:04:20.779 --> 00:04:20.789
state which would be the reverse of any
 

00:04:20.789 --> 00:04:23.300
state which would be the reverse of any
time that we're ready to play or getting

00:04:23.300 --> 00:04:23.310
time that we're ready to play or getting
 

00:04:23.310 --> 00:04:26.060
time that we're ready to play or getting
ready to play but not actually playing

00:04:26.060 --> 00:04:26.070
ready to play but not actually playing
 

00:04:26.070 --> 00:04:26.960
ready to play but not actually playing
any music

00:04:26.960 --> 00:04:26.970
any music
 

00:04:26.970 --> 00:04:29.540
any music
so from a play/pause perspective

00:04:29.540 --> 00:04:29.550
so from a play/pause perspective
 

00:04:29.550 --> 00:04:32.390
so from a play/pause perspective
obviously for any audio app we're going

00:04:32.390 --> 00:04:32.400
obviously for any audio app we're going
 

00:04:32.400 --> 00:04:34.010
obviously for any audio app we're going
to want to be able to transition back

00:04:34.010 --> 00:04:34.020
to want to be able to transition back
 

00:04:34.020 --> 00:04:36.860
to want to be able to transition back
and forth between those states but at

00:04:36.860 --> 00:04:36.870
and forth between those states but at
 

00:04:36.870 --> 00:04:39.920
and forth between those states but at
some point the user is probably going to

00:04:39.920 --> 00:04:39.930
some point the user is probably going to
 

00:04:39.930 --> 00:04:42.950
some point the user is probably going to
stop playback this may be something like

00:04:42.950 --> 00:04:42.960
stop playback this may be something like
 

00:04:42.960 --> 00:04:45.830
stop playback this may be something like
swiping away the notification or closing

00:04:45.830 --> 00:04:45.840
swiping away the notification or closing
 

00:04:45.840 --> 00:04:47.960
swiping away the notification or closing
your app or rebooting their device or

00:04:47.960 --> 00:04:47.970
your app or rebooting their device or
 

00:04:47.970 --> 00:04:49.940
your app or rebooting their device or
what have you in that case we're going

00:04:49.940 --> 00:04:49.950
what have you in that case we're going
 

00:04:49.950 --> 00:04:52.280
what have you in that case we're going
to move to the stopped state in this

00:04:52.280 --> 00:04:52.290
to move to the stopped state in this
 

00:04:52.290 --> 00:04:54.740
to move to the stopped state in this
case is really the case where we're

00:04:54.740 --> 00:04:54.750
case is really the case where we're
 

00:04:54.750 --> 00:04:57.860
case is really the case where we're
explicitly closed and we can generally

00:04:57.860 --> 00:04:57.870
explicitly closed and we can generally
 

00:04:57.870 --> 00:05:00.830
explicitly closed and we can generally
remove all of our information and say

00:05:00.830 --> 00:05:00.840
remove all of our information and say
 

00:05:00.840 --> 00:05:04.010
remove all of our information and say
hey we're done playing back and where we

00:05:04.010 --> 00:05:04.020
hey we're done playing back and where we
 

00:05:04.020 --> 00:05:05.630
hey we're done playing back and where we
were going to then transition to the

00:05:05.630 --> 00:05:05.640
were going to then transition to the
 

00:05:05.640 --> 00:05:07.250
were going to then transition to the
destroyed state which is where we do

00:05:07.250 --> 00:05:07.260
destroyed state which is where we do
 

00:05:07.260 --> 00:05:09.230
destroyed state which is where we do
kind of that one time cleanup state of

00:05:09.230 --> 00:05:09.240
kind of that one time cleanup state of
 

00:05:09.240 --> 00:05:12.110
kind of that one time cleanup state of
releasing system resources stopping our

00:05:12.110 --> 00:05:12.120
releasing system resources stopping our
 

00:05:12.120 --> 00:05:14.360
releasing system resources stopping our
service that type of thing there may be

00:05:14.360 --> 00:05:14.370
service that type of thing there may be
 

00:05:14.370 --> 00:05:16.100
service that type of thing there may be
some difference between stopped and

00:05:16.100 --> 00:05:16.110
some difference between stopped and
 

00:05:16.110 --> 00:05:20.450
some difference between stopped and
destroyed and we'll get into that so it

00:05:20.450 --> 00:05:20.460
destroyed and we'll get into that so it
 

00:05:20.460 --> 00:05:22.070
destroyed and we'll get into that so it
wouldn't be much of an audio app if it

00:05:22.070 --> 00:05:22.080
wouldn't be much of an audio app if it
 

00:05:22.080 --> 00:05:24.200
wouldn't be much of an audio app if it
didn't actually play audio that's kind

00:05:24.200 --> 00:05:24.210
didn't actually play audio that's kind
 

00:05:24.210 --> 00:05:27.470
didn't actually play audio that's kind
of a big part of it so will be assuming

00:05:27.470 --> 00:05:27.480
of a big part of it so will be assuming
 

00:05:27.480 --> 00:05:28.909
of a big part of it so will be assuming
that you're using something like media

00:05:28.909 --> 00:05:28.919
that you're using something like media
 

00:05:28.919 --> 00:05:30.710
that you're using something like media
player which is built into android but

00:05:30.710 --> 00:05:30.720
player which is built into android but
 

00:05:30.720 --> 00:05:33.680
player which is built into android but
the same talk works actually extremely

00:05:33.680 --> 00:05:33.690
the same talk works actually extremely
 

00:05:33.690 --> 00:05:35.120
the same talk works actually extremely
well if you're using something like

00:05:35.120 --> 00:05:35.130
well if you're using something like
 

00:05:35.130 --> 00:05:37.250
well if you're using something like
exoplayer or any other third-party

00:05:37.250 --> 00:05:37.260
exoplayer or any other third-party
 

00:05:37.260 --> 00:05:40.760
exoplayer or any other third-party
playback system all this is kind of

00:05:40.760 --> 00:05:40.770
playback system all this is kind of
 

00:05:40.770 --> 00:05:43.580
playback system all this is kind of
agnostic to that and really kind of

00:05:43.580 --> 00:05:43.590
agnostic to that and really kind of
 

00:05:43.590 --> 00:05:45.590
agnostic to that and really kind of
building on top of that to say like okay

00:05:45.590 --> 00:05:45.600
building on top of that to say like okay
 

00:05:45.600 --> 00:05:48.460
building on top of that to say like okay
well beyond just let's play some audio

00:05:48.460 --> 00:05:48.470
well beyond just let's play some audio
 

00:05:48.470 --> 00:05:51.560
well beyond just let's play some audio
can we do a little bit more but for

00:05:51.560 --> 00:05:51.570
can we do a little bit more but for
 

00:05:51.570 --> 00:05:53.810
can we do a little bit more but for
media player we can see it has a pretty

00:05:53.810 --> 00:05:53.820
media player we can see it has a pretty
 

00:05:53.820 --> 00:05:56.420
media player we can see it has a pretty
easy straightforward flow for our

00:05:56.420 --> 00:05:56.430
easy straightforward flow for our
 

00:05:56.430 --> 00:05:58.460
easy straightforward flow for our
different event states right you're

00:05:58.460 --> 00:05:58.470
different event states right you're
 

00:05:58.470 --> 00:06:00.320
different event states right you're
created will create a new media player

00:06:00.320 --> 00:06:00.330
created will create a new media player
 

00:06:00.330 --> 00:06:03.350
created will create a new media player
and then of course will prepare and play

00:06:03.350 --> 00:06:03.360
and then of course will prepare and play
 

00:06:03.360 --> 00:06:06.350
and then of course will prepare and play
when we go to playing will pause pause

00:06:06.350 --> 00:06:06.360
when we go to playing will pause pause
 

00:06:06.360 --> 00:06:08.540
when we go to playing will pause pause
we stop when we stop right this should

00:06:08.540 --> 00:06:08.550
we stop when we stop right this should
 

00:06:08.550 --> 00:06:11.390
we stop when we stop right this should
be fairly straightforward from a media

00:06:11.390 --> 00:06:11.400
be fairly straightforward from a media
 

00:06:11.400 --> 00:06:13.969
be fairly straightforward from a media
playback perspective and well we're done

00:06:13.969 --> 00:06:13.979
playback perspective and well we're done
 

00:06:13.979 --> 00:06:17.659
playback perspective and well we're done
it media plays pause and we have lots of

00:06:17.659 --> 00:06:17.669
it media plays pause and we have lots of
 

00:06:17.669 --> 00:06:19.550
it media plays pause and we have lots of
time back for getting ready for lunch

00:06:19.550 --> 00:06:19.560
time back for getting ready for lunch
 

00:06:19.560 --> 00:06:22.640
time back for getting ready for lunch
but maybe we should go into a little bit

00:06:22.640 --> 00:06:22.650
but maybe we should go into a little bit
 

00:06:22.650 --> 00:06:26.060
but maybe we should go into a little bit
more detail so we're really trying to do

00:06:26.060 --> 00:06:26.070
more detail so we're really trying to do
 

00:06:26.070 --> 00:06:28.370
more detail so we're really trying to do
it the right way right in fact just

00:06:28.370 --> 00:06:28.380
it the right way right in fact just
 

00:06:28.380 --> 00:06:31.159
it the right way right in fact just
playing audio in the background with no

00:06:31.159 --> 00:06:31.169
playing audio in the background with no
 

00:06:31.169 --> 00:06:34.850
playing audio in the background with no
controls no information no idea of what

00:06:34.850 --> 00:06:34.860
controls no information no idea of what
 

00:06:34.860 --> 00:06:36.620
controls no information no idea of what
the users doing is probably actually net

00:06:36.620 --> 00:06:36.630
the users doing is probably actually net
 

00:06:36.630 --> 00:06:39.890
the users doing is probably actually net
negative for the user and we want to get

00:06:39.890 --> 00:06:39.900
negative for the user and we want to get
 

00:06:39.900 --> 00:06:40.640
negative for the user and we want to get
on to the

00:06:40.640 --> 00:06:40.650
on to the
 

00:06:40.650 --> 00:06:44.719
on to the
positive side so what can we get to

00:06:44.719 --> 00:06:44.729
positive side so what can we get to
 

00:06:44.729 --> 00:06:46.490
positive side so what can we get to
really kind of bump this up to at least

00:06:46.490 --> 00:06:46.500
really kind of bump this up to at least
 

00:06:46.500 --> 00:06:49.189
really kind of bump this up to at least
an acceptable experience rather than

00:06:49.189 --> 00:06:49.199
an acceptable experience rather than
 

00:06:49.199 --> 00:06:50.960
an acceptable experience rather than
something that is just blasting music

00:06:50.960 --> 00:06:50.970
something that is just blasting music
 

00:06:50.970 --> 00:06:52.700
something that is just blasting music
from your phone with no controls in the

00:06:52.700 --> 00:06:52.710
from your phone with no controls in the
 

00:06:52.710 --> 00:06:54.230
from your phone with no controls in the
background that they can't control and

00:06:54.230 --> 00:06:54.240
background that they can't control and
 

00:06:54.240 --> 00:06:55.629
background that they can't control and
have to find your app to kill it

00:06:55.629 --> 00:06:55.639
have to find your app to kill it
 

00:06:55.639 --> 00:06:58.969
have to find your app to kill it
probably not the best place to be so the

00:06:58.969 --> 00:06:58.979
probably not the best place to be so the
 

00:06:58.979 --> 00:07:01.570
probably not the best place to be so the
first thing we want to do is audio focus

00:07:01.570 --> 00:07:01.580
first thing we want to do is audio focus
 

00:07:01.580 --> 00:07:04.700
first thing we want to do is audio focus
now is really is one of those keys of

00:07:04.700 --> 00:07:04.710
now is really is one of those keys of
 

00:07:04.710 --> 00:07:08.360
now is really is one of those keys of
being a great citizen on Android so it's

00:07:08.360 --> 00:07:08.370
being a great citizen on Android so it's
 

00:07:08.370 --> 00:07:10.279
being a great citizen on Android so it's
the way of getting kind of that heads up

00:07:10.279 --> 00:07:10.289
the way of getting kind of that heads up
 

00:07:10.289 --> 00:07:13.909
the way of getting kind of that heads up
to other apps and to the system that you

00:07:13.909 --> 00:07:13.919
to other apps and to the system that you
 

00:07:13.919 --> 00:07:16.040
to other apps and to the system that you
want to play something right that you

00:07:16.040 --> 00:07:16.050
want to play something right that you
 

00:07:16.050 --> 00:07:20.810
want to play something right that you
are ready to play and at the same point

00:07:20.810 --> 00:07:20.820
are ready to play and at the same point
 

00:07:20.820 --> 00:07:22.610
are ready to play and at the same point
it also means that someone can't

00:07:22.610 --> 00:07:22.620
it also means that someone can't
 

00:07:22.620 --> 00:07:24.770
it also means that someone can't
necessarily take your audio focus right

00:07:24.770 --> 00:07:24.780
necessarily take your audio focus right
 

00:07:24.780 --> 00:07:26.330
necessarily take your audio focus right
what we don't want is we don't want

00:07:26.330 --> 00:07:26.340
what we don't want is we don't want
 

00:07:26.340 --> 00:07:28.969
what we don't want is we don't want
multiple apps playing back on top of one

00:07:28.969 --> 00:07:28.979
multiple apps playing back on top of one
 

00:07:28.979 --> 00:07:32.150
multiple apps playing back on top of one
another and causing issues where you

00:07:32.150 --> 00:07:32.160
another and causing issues where you
 

00:07:32.160 --> 00:07:34.939
another and causing issues where you
can't understand either one of them now

00:07:34.939 --> 00:07:34.949
can't understand either one of them now
 

00:07:34.949 --> 00:07:37.310
can't understand either one of them now
this is slightly distinct from actually

00:07:37.310 --> 00:07:37.320
this is slightly distinct from actually
 

00:07:37.320 --> 00:07:40.370
this is slightly distinct from actually
playing audio it's the intent to play

00:07:40.370 --> 00:07:40.380
playing audio it's the intent to play
 

00:07:40.380 --> 00:07:43.370
playing audio it's the intent to play
audio so we want to continue to have

00:07:43.370 --> 00:07:43.380
audio so we want to continue to have
 

00:07:43.380 --> 00:07:47.629
audio so we want to continue to have
audio focus anytime we're ready to play

00:07:47.629 --> 00:07:47.639
audio focus anytime we're ready to play
 

00:07:47.639 --> 00:07:50.210
audio focus anytime we're ready to play
or going to play or really taking on

00:07:50.210 --> 00:07:50.220
or going to play or really taking on
 

00:07:50.220 --> 00:07:52.820
or going to play or really taking on
that role of the main media playback in

00:07:52.820 --> 00:07:52.830
that role of the main media playback in
 

00:07:52.830 --> 00:07:56.089
that role of the main media playback in
a nap so we can look at some code like

00:07:56.089 --> 00:07:56.099
a nap so we can look at some code like
 

00:07:56.099 --> 00:07:59.180
a nap so we can look at some code like
this to request audio focus will use

00:07:59.180 --> 00:07:59.190
this to request audio focus will use
 

00:07:59.190 --> 00:08:01.700
this to request audio focus will use
audio manager for this and then actually

00:08:01.700 --> 00:08:01.710
audio manager for this and then actually
 

00:08:01.710 --> 00:08:04.430
audio manager for this and then actually
going through and requesting audio focus

00:08:04.430 --> 00:08:04.440
going through and requesting audio focus
 

00:08:04.440 --> 00:08:05.960
going through and requesting audio focus
right in this case looking for the

00:08:05.960 --> 00:08:05.970
right in this case looking for the
 

00:08:05.970 --> 00:08:09.320
right in this case looking for the
stream music right the main playback

00:08:09.320 --> 00:08:09.330
stream music right the main playback
 

00:08:09.330 --> 00:08:12.710
stream music right the main playback
stream for audio playback and hoping to

00:08:12.710 --> 00:08:12.720
stream for audio playback and hoping to
 

00:08:12.720 --> 00:08:15.649
stream for audio playback and hoping to
gain audio focus now one thing to note

00:08:15.649 --> 00:08:15.659
gain audio focus now one thing to note
 

00:08:15.659 --> 00:08:17.839
gain audio focus now one thing to note
is that almost all the time you'll be

00:08:17.839 --> 00:08:17.849
is that almost all the time you'll be
 

00:08:17.849 --> 00:08:19.879
is that almost all the time you'll be
granted audio focus but there are a few

00:08:19.879 --> 00:08:19.889
granted audio focus but there are a few
 

00:08:19.889 --> 00:08:22.640
granted audio focus but there are a few
exceptions where you'll actually not be

00:08:22.640 --> 00:08:22.650
exceptions where you'll actually not be
 

00:08:22.650 --> 00:08:24.890
exceptions where you'll actually not be
granted audio focus one example is maybe

00:08:24.890 --> 00:08:24.900
granted audio focus one example is maybe
 

00:08:24.900 --> 00:08:27.529
granted audio focus one example is maybe
when the users in a phone call and that

00:08:27.529 --> 00:08:27.539
when the users in a phone call and that
 

00:08:27.539 --> 00:08:29.270
when the users in a phone call and that
probably isn't the time to start

00:08:29.270 --> 00:08:29.280
probably isn't the time to start
 

00:08:29.280 --> 00:08:31.070
probably isn't the time to start
blasting music because they're actually

00:08:31.070 --> 00:08:31.080
blasting music because they're actually
 

00:08:31.080 --> 00:08:33.140
blasting music because they're actually
talking with another human which is

00:08:33.140 --> 00:08:33.150
talking with another human which is
 

00:08:33.150 --> 00:08:35.570
talking with another human which is
great but it means that our media

00:08:35.570 --> 00:08:35.580
great but it means that our media
 

00:08:35.580 --> 00:08:37.250
great but it means that our media
playback should probably just work and

00:08:37.250 --> 00:08:37.260
playback should probably just work and
 

00:08:37.260 --> 00:08:38.600
playback should probably just work and
say you know what like we didn't get

00:08:38.600 --> 00:08:38.610
say you know what like we didn't get
 

00:08:38.610 --> 00:08:40.880
say you know what like we didn't get
audio focus so we shouldn't continue but

00:08:40.880 --> 00:08:40.890
audio focus so we shouldn't continue but
 

00:08:40.890 --> 00:08:42.469
audio focus so we shouldn't continue but
most of the time you'll be able to

00:08:42.469 --> 00:08:42.479
most of the time you'll be able to
 

00:08:42.479 --> 00:08:46.180
most of the time you'll be able to
proceed and play your glorious music but

00:08:46.180 --> 00:08:46.190
proceed and play your glorious music but
 

00:08:46.190 --> 00:08:48.710
proceed and play your glorious music but
then of course we need to abandon audio

00:08:48.710 --> 00:08:48.720
then of course we need to abandon audio
 

00:08:48.720 --> 00:08:51.199
then of course we need to abandon audio
focus when we're stopping playback right

00:08:51.199 --> 00:08:51.209
focus when we're stopping playback right
 

00:08:51.209 --> 00:08:53.890
focus when we're stopping playback right
when we get to that final stopped state

00:08:53.890 --> 00:08:53.900
when we get to that final stopped state
 

00:08:53.900 --> 00:08:57.070
when we get to that final stopped state
what is that audio focus change listener

00:08:57.070 --> 00:08:57.080
what is that audio focus change listener
 

00:08:57.080 --> 00:08:58.870
what is that audio focus change listener
thing I just put it in here for no

00:08:58.870 --> 00:08:58.880
thing I just put it in here for no
 

00:08:58.880 --> 00:09:01.720
thing I just put it in here for no
reason well it's actually how you learn

00:09:01.720 --> 00:09:01.730
reason well it's actually how you learn
 

00:09:01.730 --> 00:09:04.120
reason well it's actually how you learn
from other apps what's going on in the

00:09:04.120 --> 00:09:04.130
from other apps what's going on in the
 

00:09:04.130 --> 00:09:06.760
from other apps what's going on in the
system right it's your link to other

00:09:06.760 --> 00:09:06.770
system right it's your link to other
 

00:09:06.770 --> 00:09:09.010
system right it's your link to other
apps and to the system saying like well

00:09:09.010 --> 00:09:09.020
apps and to the system saying like well
 

00:09:09.020 --> 00:09:11.200
apps and to the system saying like well
someone else is requesting audio focus

00:09:11.200 --> 00:09:11.210
someone else is requesting audio focus
 

00:09:11.210 --> 00:09:15.040
someone else is requesting audio focus
and how does your app actually react to

00:09:15.040 --> 00:09:15.050
and how does your app actually react to
 

00:09:15.050 --> 00:09:17.800
and how does your app actually react to
that it's the callback system so you may

00:09:17.800 --> 00:09:17.810
that it's the callback system so you may
 

00:09:17.810 --> 00:09:20.440
that it's the callback system so you may
be getting an audio focus loss now this

00:09:20.440 --> 00:09:20.450
be getting an audio focus loss now this
 

00:09:20.450 --> 00:09:22.240
be getting an audio focus loss now this
is pretty serious this means that the

00:09:22.240 --> 00:09:22.250
is pretty serious this means that the
 

00:09:22.250 --> 00:09:24.520
is pretty serious this means that the
other app is taking over permanent

00:09:24.520 --> 00:09:24.530
other app is taking over permanent
 

00:09:24.530 --> 00:09:26.740
other app is taking over permanent
control of audio focus at least while

00:09:26.740 --> 00:09:26.750
control of audio focus at least while
 

00:09:26.750 --> 00:09:29.440
control of audio focus at least while
it's the first the last one to regress

00:09:29.440 --> 00:09:29.450
it's the first the last one to regress
 

00:09:29.450 --> 00:09:31.750
it's the first the last one to regress
it and your audio focus isn't coming

00:09:31.750 --> 00:09:31.760
it and your audio focus isn't coming
 

00:09:31.760 --> 00:09:34.330
it and your audio focus isn't coming
back you're done it's not your turn yet

00:09:34.330 --> 00:09:34.340
back you're done it's not your turn yet
 

00:09:34.340 --> 00:09:36.790
back you're done it's not your turn yet
so in this case will want to move to the

00:09:36.790 --> 00:09:36.800
so in this case will want to move to the
 

00:09:36.800 --> 00:09:38.920
so in this case will want to move to the
stopped state right your kind of done

00:09:38.920 --> 00:09:38.930
stopped state right your kind of done
 

00:09:38.930 --> 00:09:41.230
stopped state right your kind of done
playing back audio they've moved on to a

00:09:41.230 --> 00:09:41.240
playing back audio they've moved on to a
 

00:09:41.240 --> 00:09:44.020
playing back audio they've moved on to a
different app now one thing to consider

00:09:44.020 --> 00:09:44.030
different app now one thing to consider
 

00:09:44.030 --> 00:09:46.090
different app now one thing to consider
is that maybe you don't want to

00:09:46.090 --> 00:09:46.100
is that maybe you don't want to
 

00:09:46.100 --> 00:09:48.910
is that maybe you don't want to
immediately remove notifications and

00:09:48.910 --> 00:09:48.920
immediately remove notifications and
 

00:09:48.920 --> 00:09:50.620
immediately remove notifications and
delete your service and everything

00:09:50.620 --> 00:09:50.630
delete your service and everything
 

00:09:50.630 --> 00:09:53.140
delete your service and everything
immediately upon audio loss you could

00:09:53.140 --> 00:09:53.150
immediately upon audio loss you could
 

00:09:53.150 --> 00:09:55.540
immediately upon audio loss you could
decide to wait around for 30 seconds

00:09:55.540 --> 00:09:55.550
decide to wait around for 30 seconds
 

00:09:55.550 --> 00:09:57.490
decide to wait around for 30 seconds
just in case they like accidentally hit

00:09:57.490 --> 00:09:57.500
just in case they like accidentally hit
 

00:09:57.500 --> 00:09:59.830
just in case they like accidentally hit
the wrong app but this is really kind of

00:09:59.830 --> 00:09:59.840
the wrong app but this is really kind of
 

00:09:59.840 --> 00:10:01.330
the wrong app but this is really kind of
one of those user experience things

00:10:01.330 --> 00:10:01.340
one of those user experience things
 

00:10:01.340 --> 00:10:03.400
one of those user experience things
where you should test with your users on

00:10:03.400 --> 00:10:03.410
where you should test with your users on
 

00:10:03.410 --> 00:10:05.590
where you should test with your users on
what they expect when they accidentally

00:10:05.590 --> 00:10:05.600
what they expect when they accidentally
 

00:10:05.600 --> 00:10:07.600
what they expect when they accidentally
hit another app for most google apps

00:10:07.600 --> 00:10:07.610
hit another app for most google apps
 

00:10:07.610 --> 00:10:10.450
hit another app for most google apps
when they do lose audio focus you'll see

00:10:10.450 --> 00:10:10.460
when they do lose audio focus you'll see
 

00:10:10.460 --> 00:10:13.050
when they do lose audio focus you'll see
that they immediately stop playback and

00:10:13.050 --> 00:10:13.060
that they immediately stop playback and
 

00:10:13.060 --> 00:10:17.410
that they immediately stop playback and
awaits you know any future concerns now

00:10:17.410 --> 00:10:17.420
awaits you know any future concerns now
 

00:10:17.420 --> 00:10:18.730
awaits you know any future concerns now
there's another one called loss

00:10:18.730 --> 00:10:18.740
there's another one called loss
 

00:10:18.740 --> 00:10:22.060
there's another one called loss
transient now in this case it's not a

00:10:22.060 --> 00:10:22.070
transient now in this case it's not a
 

00:10:22.070 --> 00:10:24.040
transient now in this case it's not a
permanent loss it's just a short-term

00:10:24.040 --> 00:10:24.050
permanent loss it's just a short-term
 

00:10:24.050 --> 00:10:27.040
permanent loss it's just a short-term
loss so this may be a case where you're

00:10:27.040 --> 00:10:27.050
loss so this may be a case where you're
 

00:10:27.050 --> 00:10:28.690
loss so this may be a case where you're
using something like Google Maps and

00:10:28.690 --> 00:10:28.700
using something like Google Maps and
 

00:10:28.700 --> 00:10:30.130
using something like Google Maps and
it's announcing like oh you're going to

00:10:30.130 --> 00:10:30.140
it's announcing like oh you're going to
 

00:10:30.140 --> 00:10:33.070
it's announcing like oh you're going to
be on time right a temporary loss but

00:10:33.070 --> 00:10:33.080
be on time right a temporary loss but
 

00:10:33.080 --> 00:10:36.480
be on time right a temporary loss but
you can expect it back so in this case

00:10:36.480 --> 00:10:36.490
you can expect it back so in this case
 

00:10:36.490 --> 00:10:38.620
you can expect it back so in this case
loss transient means you should just

00:10:38.620 --> 00:10:38.630
loss transient means you should just
 

00:10:38.630 --> 00:10:41.920
loss transient means you should just
pause your media playback now there's

00:10:41.920 --> 00:10:41.930
pause your media playback now there's
 

00:10:41.930 --> 00:10:43.360
pause your media playback now there's
the other one you may be very familiar

00:10:43.360 --> 00:10:43.370
the other one you may be very familiar
 

00:10:43.370 --> 00:10:45.160
the other one you may be very familiar
with which is the loss transient can

00:10:45.160 --> 00:10:45.170
with which is the loss transient can
 

00:10:45.170 --> 00:10:48.730
with which is the loss transient can
duck now this is the basic when like a

00:10:48.730 --> 00:10:48.740
duck now this is the basic when like a
 

00:10:48.740 --> 00:10:51.370
duck now this is the basic when like a
notification sound comes in right and in

00:10:51.370 --> 00:10:51.380
notification sound comes in right and in
 

00:10:51.380 --> 00:10:54.580
notification sound comes in right and in
this case the expectation is that you're

00:10:54.580 --> 00:10:54.590
this case the expectation is that you're
 

00:10:54.590 --> 00:10:56.200
this case the expectation is that you're
going to lower the volume you don't

00:10:56.200 --> 00:10:56.210
going to lower the volume you don't
 

00:10:56.210 --> 00:10:58.780
going to lower the volume you don't
necessarily need to pause completely but

00:10:58.780 --> 00:10:58.790
necessarily need to pause completely but
 

00:10:58.790 --> 00:11:00.520
necessarily need to pause completely but
you just lower the volume so that the

00:11:00.520 --> 00:11:00.530
you just lower the volume so that the
 

00:11:00.530 --> 00:11:02.380
you just lower the volume so that the
other sound can be heard clearly and

00:11:02.380 --> 00:11:02.390
other sound can be heard clearly and
 

00:11:02.390 --> 00:11:05.890
other sound can be heard clearly and
then you'll regain audio focus with

00:11:05.890 --> 00:11:05.900
then you'll regain audio focus with
 

00:11:05.900 --> 00:11:06.800
then you'll regain audio focus with
audio game

00:11:06.800 --> 00:11:06.810
audio game
 

00:11:06.810 --> 00:11:09.140
audio game
now one thing to keep in mind with the

00:11:09.140 --> 00:11:09.150
now one thing to keep in mind with the
 

00:11:09.150 --> 00:11:12.440
now one thing to keep in mind with the
can duck is that you don't have to lower

00:11:12.440 --> 00:11:12.450
can duck is that you don't have to lower
 

00:11:12.450 --> 00:11:15.019
can duck is that you don't have to lower
your volume you can actually pause like

00:11:15.019 --> 00:11:15.029
your volume you can actually pause like
 

00:11:15.029 --> 00:11:16.730
your volume you can actually pause like
for example if you're a podcast playing

00:11:16.730 --> 00:11:16.740
for example if you're a podcast playing
 

00:11:16.740 --> 00:11:19.250
for example if you're a podcast playing
app and you having spoken words it's

00:11:19.250 --> 00:11:19.260
app and you having spoken words it's
 

00:11:19.260 --> 00:11:21.140
app and you having spoken words it's
very important that the user hears

00:11:21.140 --> 00:11:21.150
very important that the user hears
 

00:11:21.150 --> 00:11:23.060
very important that the user hears
everything that's going on and maybe

00:11:23.060 --> 00:11:23.070
everything that's going on and maybe
 

00:11:23.070 --> 00:11:24.950
everything that's going on and maybe
they don't want google maps talking over

00:11:24.950 --> 00:11:24.960
they don't want google maps talking over
 

00:11:24.960 --> 00:11:28.700
they don't want google maps talking over
them you can actually pause for any of

00:11:28.700 --> 00:11:28.710
them you can actually pause for any of
 

00:11:28.710 --> 00:11:32.000
them you can actually pause for any of
these events right and then resume when

00:11:32.000 --> 00:11:32.010
these events right and then resume when
 

00:11:32.010 --> 00:11:33.860
these events right and then resume when
you get audio gain so there aren't

00:11:33.860 --> 00:11:33.870
you get audio gain so there aren't
 

00:11:33.870 --> 00:11:36.769
you get audio gain so there aren't
necessarily requirements to do anything

00:11:36.769 --> 00:11:36.779
necessarily requirements to do anything
 

00:11:36.779 --> 00:11:39.890
necessarily requirements to do anything
but in any case you should be respecting

00:11:39.890 --> 00:11:39.900
but in any case you should be respecting
 

00:11:39.900 --> 00:11:46.640
but in any case you should be respecting
these audio focus changes so what is our

00:11:46.640 --> 00:11:46.650
these audio focus changes so what is our
 

00:11:46.650 --> 00:11:49.280
these audio focus changes so what is our
updated life cycle so we can see here

00:11:49.280 --> 00:11:49.290
updated life cycle so we can see here
 

00:11:49.290 --> 00:11:51.410
updated life cycle so we can see here
now we're requesting focus when we start

00:11:51.410 --> 00:11:51.420
now we're requesting focus when we start
 

00:11:51.420 --> 00:11:54.230
now we're requesting focus when we start
playback and we're removing focus

00:11:54.230 --> 00:11:54.240
playback and we're removing focus
 

00:11:54.240 --> 00:11:56.120
playback and we're removing focus
abandoning focus when we actually

00:11:56.120 --> 00:11:56.130
abandoning focus when we actually
 

00:11:56.130 --> 00:11:58.760
abandoning focus when we actually
stopped now don't this isn't tied to

00:11:58.760 --> 00:11:58.770
stopped now don't this isn't tied to
 

00:11:58.770 --> 00:12:02.000
stopped now don't this isn't tied to
playing audio or back and you know even

00:12:02.000 --> 00:12:02.010
playing audio or back and you know even
 

00:12:02.010 --> 00:12:04.490
playing audio or back and you know even
with just this we already are a lot

00:12:04.490 --> 00:12:04.500
with just this we already are a lot
 

00:12:04.500 --> 00:12:08.000
with just this we already are a lot
better citizen and working well with the

00:12:08.000 --> 00:12:08.010
better citizen and working well with the
 

00:12:08.010 --> 00:12:11.180
better citizen and working well with the
system and other media apps but are we

00:12:11.180 --> 00:12:11.190
system and other media apps but are we
 

00:12:11.190 --> 00:12:14.510
system and other media apps but are we
done done no all right so more more to

00:12:14.510 --> 00:12:14.520
done done no all right so more more to
 

00:12:14.520 --> 00:12:16.790
done done no all right so more more to
go and that's fine because these are

00:12:16.790 --> 00:12:16.800
go and that's fine because these are
 

00:12:16.800 --> 00:12:18.620
go and that's fine because these are
important things that users are going to

00:12:18.620 --> 00:12:18.630
important things that users are going to
 

00:12:18.630 --> 00:12:20.840
important things that users are going to
expect now one of the things and

00:12:20.840 --> 00:12:20.850
expect now one of the things and
 

00:12:20.850 --> 00:12:23.660
expect now one of the things and
probably my favorite named broadcast is

00:12:23.660 --> 00:12:23.670
probably my favorite named broadcast is
 

00:12:23.670 --> 00:12:26.360
probably my favorite named broadcast is
the becoming noisy broadcast which is

00:12:26.360 --> 00:12:26.370
the becoming noisy broadcast which is
 

00:12:26.370 --> 00:12:28.070
the becoming noisy broadcast which is
kind of exactly how it sounds it's

00:12:28.070 --> 00:12:28.080
kind of exactly how it sounds it's
 

00:12:28.080 --> 00:12:29.840
kind of exactly how it sounds it's
actually when you're listening to

00:12:29.840 --> 00:12:29.850
actually when you're listening to
 

00:12:29.850 --> 00:12:31.640
actually when you're listening to
something on headphones or a Bluetooth

00:12:31.640 --> 00:12:31.650
something on headphones or a Bluetooth
 

00:12:31.650 --> 00:12:34.970
something on headphones or a Bluetooth
headset and the bluetooth headset runs

00:12:34.970 --> 00:12:34.980
headset and the bluetooth headset runs
 

00:12:34.980 --> 00:12:36.950
headset and the bluetooth headset runs
out of batteries or the headphone gets

00:12:36.950 --> 00:12:36.960
out of batteries or the headphone gets
 

00:12:36.960 --> 00:12:39.470
out of batteries or the headphone gets
yanked out and all of a sudden it's

00:12:39.470 --> 00:12:39.480
yanked out and all of a sudden it's
 

00:12:39.480 --> 00:12:42.800
yanked out and all of a sudden it's
blaring to the whole crowd to the whole

00:12:42.800 --> 00:12:42.810
blaring to the whole crowd to the whole
 

00:12:42.810 --> 00:12:45.020
blaring to the whole crowd to the whole
audience of wow that's really what

00:12:45.020 --> 00:12:45.030
audience of wow that's really what
 

00:12:45.030 --> 00:12:47.870
audience of wow that's really what
you're listening to right now probably

00:12:47.870 --> 00:12:47.880
you're listening to right now probably
 

00:12:47.880 --> 00:12:51.710
you're listening to right now probably
should have used becoming noisy to be

00:12:51.710 --> 00:12:51.720
should have used becoming noisy to be
 

00:12:51.720 --> 00:12:54.560
should have used becoming noisy to be
able to pause your playback so it's a

00:12:54.560 --> 00:12:54.570
able to pause your playback so it's a
 

00:12:54.570 --> 00:12:56.320
able to pause your playback so it's a
really nice way of saying like okay well

00:12:56.320 --> 00:12:56.330
really nice way of saying like okay well
 

00:12:56.330 --> 00:12:59.900
really nice way of saying like okay well
the user is expecting that there are not

00:12:59.900 --> 00:12:59.910
the user is expecting that there are not
 

00:12:59.910 --> 00:13:02.090
the user is expecting that there are not
blaring out their music to everyone and

00:13:02.090 --> 00:13:02.100
blaring out their music to everyone and
 

00:13:02.100 --> 00:13:04.220
blaring out their music to everyone and
we can register a becoming noisy

00:13:04.220 --> 00:13:04.230
we can register a becoming noisy
 

00:13:04.230 --> 00:13:07.519
we can register a becoming noisy
broadcast very simply with register

00:13:07.519 --> 00:13:07.529
broadcast very simply with register
 

00:13:07.529 --> 00:13:09.160
broadcast very simply with register
receiver and then of course

00:13:09.160 --> 00:13:09.170
receiver and then of course
 

00:13:09.170 --> 00:13:12.860
receiver and then of course
unregistering now in this case because

00:13:12.860 --> 00:13:12.870
unregistering now in this case because
 

00:13:12.870 --> 00:13:15.440
unregistering now in this case because
this is tied to not wanting to blare

00:13:15.440 --> 00:13:15.450
this is tied to not wanting to blare
 

00:13:15.450 --> 00:13:18.740
this is tied to not wanting to blare
music out to the world these events are

00:13:18.740 --> 00:13:18.750
music out to the world these events are
 

00:13:18.750 --> 00:13:20.180
music out to the world these events are
going to be tied

00:13:20.180 --> 00:13:20.190
going to be tied
 

00:13:20.190 --> 00:13:23.480
going to be tied
into the actual playing and pause state

00:13:23.480 --> 00:13:23.490
into the actual playing and pause state
 

00:13:23.490 --> 00:13:26.480
into the actual playing and pause state
so only when we're outputting audio are

00:13:26.480 --> 00:13:26.490
so only when we're outputting audio are
 

00:13:26.490 --> 00:13:29.480
so only when we're outputting audio are
we going to want to register for the

00:13:29.480 --> 00:13:29.490
we going to want to register for the
 

00:13:29.490 --> 00:13:31.940
we going to want to register for the
becoming noisy and then unregister when

00:13:31.940 --> 00:13:31.950
becoming noisy and then unregister when
 

00:13:31.950 --> 00:13:34.850
becoming noisy and then unregister when
we actually pause playback so slightly

00:13:34.850 --> 00:13:34.860
we actually pause playback so slightly
 

00:13:34.860 --> 00:13:36.590
we actually pause playback so slightly
different here and actually at this

00:13:36.590 --> 00:13:36.600
different here and actually at this
 

00:13:36.600 --> 00:13:38.540
different here and actually at this
point we're in a fairly decent state

00:13:38.540 --> 00:13:38.550
point we're in a fairly decent state
 

00:13:38.550 --> 00:13:40.610
point we're in a fairly decent state
we're never going to be playing audio

00:13:40.610 --> 00:13:40.620
we're never going to be playing audio
 

00:13:40.620 --> 00:13:43.970
we're never going to be playing audio
when user is not expecting it and we're

00:13:43.970 --> 00:13:43.980
when user is not expecting it and we're
 

00:13:43.980 --> 00:13:45.860
when user is not expecting it and we're
going to play well with other apps that

00:13:45.860 --> 00:13:45.870
going to play well with other apps that
 

00:13:45.870 --> 00:13:47.480
going to play well with other apps that
are doing notification to other things

00:13:47.480 --> 00:13:47.490
are doing notification to other things
 

00:13:47.490 --> 00:13:51.050
are doing notification to other things
but we're not quite to the best media

00:13:51.050 --> 00:13:51.060
but we're not quite to the best media
 

00:13:51.060 --> 00:13:53.540
but we're not quite to the best media
playback experience in fact we haven't

00:13:53.540 --> 00:13:53.550
playback experience in fact we haven't
 

00:13:53.550 --> 00:13:56.570
playback experience in fact we haven't
talked about controls at all and it's

00:13:56.570 --> 00:13:56.580
talked about controls at all and it's
 

00:13:56.580 --> 00:13:58.340
talked about controls at all and it's
certainly one of those very frustrating

00:13:58.340 --> 00:13:58.350
certainly one of those very frustrating
 

00:13:58.350 --> 00:14:00.350
certainly one of those very frustrating
things when you're trying to find the

00:14:00.350 --> 00:14:00.360
things when you're trying to find the
 

00:14:00.360 --> 00:14:02.300
things when you're trying to find the
pause button or the play button or the

00:14:02.300 --> 00:14:02.310
pause button or the play button or the
 

00:14:02.310 --> 00:14:04.250
pause button or the play button or the
next track button because that track

00:14:04.250 --> 00:14:04.260
next track button because that track
 

00:14:04.260 --> 00:14:05.840
next track button because that track
isn't appropriate for everyone who's in

00:14:05.840 --> 00:14:05.850
isn't appropriate for everyone who's in
 

00:14:05.850 --> 00:14:09.050
isn't appropriate for everyone who's in
the car and you want that control a bit

00:14:09.050 --> 00:14:09.060
the car and you want that control a bit
 

00:14:09.060 --> 00:14:11.180
the car and you want that control a bit
available as many places as possible you

00:14:11.180 --> 00:14:11.190
available as many places as possible you
 

00:14:11.190 --> 00:14:13.040
available as many places as possible you
don't want have to dive into a nap and

00:14:13.040 --> 00:14:13.050
don't want have to dive into a nap and
 

00:14:13.050 --> 00:14:15.100
don't want have to dive into a nap and
find it in your reasons or what have you

00:14:15.100 --> 00:14:15.110
find it in your reasons or what have you
 

00:14:15.110 --> 00:14:18.140
find it in your reasons or what have you
so thankfully Android offers a lot of

00:14:18.140 --> 00:14:18.150
so thankfully Android offers a lot of
 

00:14:18.150 --> 00:14:20.600
so thankfully Android offers a lot of
ways to actually get controls everywhere

00:14:20.600 --> 00:14:20.610
ways to actually get controls everywhere
 

00:14:20.610 --> 00:14:23.060
ways to actually get controls everywhere
and one of the ones that's most

00:14:23.060 --> 00:14:23.070
and one of the ones that's most
 

00:14:23.070 --> 00:14:24.950
and one of the ones that's most
frustrating at work are headphones and

00:14:24.950 --> 00:14:24.960
frustrating at work are headphones and
 

00:14:24.960 --> 00:14:27.890
frustrating at work are headphones and
bluetooth controls the times when you're

00:14:27.890 --> 00:14:27.900
bluetooth controls the times when you're
 

00:14:27.900 --> 00:14:29.960
bluetooth controls the times when you're
really listening music and you don't

00:14:29.960 --> 00:14:29.970
really listening music and you don't
 

00:14:29.970 --> 00:14:31.550
really listening music and you don't
necessarily want to pull off your phone

00:14:31.550 --> 00:14:31.560
necessarily want to pull off your phone
 

00:14:31.560 --> 00:14:33.770
necessarily want to pull off your phone
and they have buttons on them now so we

00:14:33.770 --> 00:14:33.780
and they have buttons on them now so we
 

00:14:33.780 --> 00:14:36.940
and they have buttons on them now so we
should probably get those working and

00:14:36.940 --> 00:14:36.950
should probably get those working and
 

00:14:36.950 --> 00:14:39.170
should probably get those working and
collectively these are called media

00:14:39.170 --> 00:14:39.180
collectively these are called media
 

00:14:39.180 --> 00:14:41.150
collectively these are called media
buttons in fact they're just like any

00:14:41.150 --> 00:14:41.160
buttons in fact they're just like any
 

00:14:41.160 --> 00:14:44.000
buttons in fact they're just like any
other button that has hit on the system

00:14:44.000 --> 00:14:44.010
other button that has hit on the system
 

00:14:44.010 --> 00:14:45.890
other button that has hit on the system
there are key events that are sent to

00:14:45.890 --> 00:14:45.900
there are key events that are sent to
 

00:14:45.900 --> 00:14:49.580
there are key events that are sent to
the system and on to your apps and by

00:14:49.580 --> 00:14:49.590
the system and on to your apps and by
 

00:14:49.590 --> 00:14:51.800
the system and on to your apps and by
default the system is actually going to

00:14:51.800 --> 00:14:51.810
default the system is actually going to
 

00:14:51.810 --> 00:14:53.630
default the system is actually going to
capture all of these and then send them

00:14:53.630 --> 00:14:53.640
capture all of these and then send them
 

00:14:53.640 --> 00:14:56.690
capture all of these and then send them
out as a media button broadcast which of

00:14:56.690 --> 00:14:56.700
out as a media button broadcast which of
 

00:14:56.700 --> 00:14:58.700
out as a media button broadcast which of
course your app can then receive and

00:14:58.700 --> 00:14:58.710
course your app can then receive and
 

00:14:58.710 --> 00:15:01.790
course your app can then receive and
handle and you can build just a simple

00:15:01.790 --> 00:15:01.800
handle and you can build just a simple
 

00:15:01.800 --> 00:15:04.070
handle and you can build just a simple
broadcast receiver that then extracts a

00:15:04.070 --> 00:15:04.080
broadcast receiver that then extracts a
 

00:15:04.080 --> 00:15:06.320
broadcast receiver that then extracts a
key event and then does work on it and

00:15:06.320 --> 00:15:06.330
key event and then does work on it and
 

00:15:06.330 --> 00:15:08.840
key event and then does work on it and
we found that basically all of these

00:15:08.840 --> 00:15:08.850
we found that basically all of these
 

00:15:08.850 --> 00:15:10.880
we found that basically all of these
receivers were doing the exact same

00:15:10.880 --> 00:15:10.890
receivers were doing the exact same
 

00:15:10.890 --> 00:15:13.250
receivers were doing the exact same
thing right they need to look at a key

00:15:13.250 --> 00:15:13.260
thing right they need to look at a key
 

00:15:13.260 --> 00:15:16.040
thing right they need to look at a key
event and then extract from the intent

00:15:16.040 --> 00:15:16.050
event and then extract from the intent
 

00:15:16.050 --> 00:15:17.780
event and then extract from the intent
what the key event was and then somehow

00:15:17.780 --> 00:15:17.790
what the key event was and then somehow
 

00:15:17.790 --> 00:15:20.720
what the key event was and then somehow
transfer that chart service so we built

00:15:20.720 --> 00:15:20.730
transfer that chart service so we built
 

00:15:20.730 --> 00:15:22.670
transfer that chart service so we built
it all for you we built a Media button

00:15:22.670 --> 00:15:22.680
it all for you we built a Media button
 

00:15:22.680 --> 00:15:24.920
it all for you we built a Media button
receiver in the support library version

00:15:24.920 --> 00:15:24.930
receiver in the support library version
 

00:15:24.930 --> 00:15:28.130
receiver in the support library version
23.1 and higher so that it kind of

00:15:28.130 --> 00:15:28.140
23.1 and higher so that it kind of
 

00:15:28.140 --> 00:15:30.280
23.1 and higher so that it kind of
handles a lot of the boilerplate for you

00:15:30.280 --> 00:15:30.290
handles a lot of the boilerplate for you
 

00:15:30.290 --> 00:15:33.490
handles a lot of the boilerplate for you
how does it work you have no

00:15:33.490 --> 00:15:33.500
how does it work you have no
 

00:15:33.500 --> 00:15:35.410
how does it work you have no
whatsoever it's just a few manifests

00:15:35.410 --> 00:15:35.420
whatsoever it's just a few manifests
 

00:15:35.420 --> 00:15:37.810
whatsoever it's just a few manifests
entries you'll add it to your manifest

00:15:37.810 --> 00:15:37.820
entries you'll add it to your manifest
 

00:15:37.820 --> 00:15:40.470
entries you'll add it to your manifest
you'll note our media button

00:15:40.470 --> 00:15:40.480
you'll note our media button
 

00:15:40.480 --> 00:15:44.320
you'll note our media button
intent-filter here and then instead of

00:15:44.320 --> 00:15:44.330
intent-filter here and then instead of
 

00:15:44.330 --> 00:15:46.360
intent-filter here and then instead of
writing all the code yourself what it's

00:15:46.360 --> 00:15:46.370
writing all the code yourself what it's
 

00:15:46.370 --> 00:15:48.340
writing all the code yourself what it's
going to do is it's going to look for a

00:15:48.340 --> 00:15:48.350
going to do is it's going to look for a
 

00:15:48.350 --> 00:15:50.770
going to do is it's going to look for a
service that's also in your manifest

00:15:50.770 --> 00:15:50.780
service that's also in your manifest
 

00:15:50.780 --> 00:15:53.200
service that's also in your manifest
that has that same media button intent

00:15:53.200 --> 00:15:53.210
that has that same media button intent
 

00:15:53.210 --> 00:15:56.320
that has that same media button intent
and what it will do is every time the

00:15:56.320 --> 00:15:56.330
and what it will do is every time the
 

00:15:56.330 --> 00:15:58.210
and what it will do is every time the
broadcast receiver receives a media

00:15:58.210 --> 00:15:58.220
broadcast receiver receives a media
 

00:15:58.220 --> 00:16:00.250
broadcast receiver receives a media
button intent it'll forward that on to

00:16:00.250 --> 00:16:00.260
button intent it'll forward that on to
 

00:16:00.260 --> 00:16:03.340
button intent it'll forward that on to
your service which makes it really nice

00:16:03.340 --> 00:16:03.350
your service which makes it really nice
 

00:16:03.350 --> 00:16:06.010
your service which makes it really nice
because in your service that has your

00:16:06.010 --> 00:16:06.020
because in your service that has your
 

00:16:06.020 --> 00:16:08.260
because in your service that has your
media player and that type of things you

00:16:08.260 --> 00:16:08.270
media player and that type of things you
 

00:16:08.270 --> 00:16:10.750
media player and that type of things you
can actually act on those events the big

00:16:10.750 --> 00:16:10.760
can actually act on those events the big
 

00:16:10.760 --> 00:16:13.330
can actually act on those events the big
problem we found was that in so many

00:16:13.330 --> 00:16:13.340
problem we found was that in so many
 

00:16:13.340 --> 00:16:15.880
problem we found was that in so many
times you'd want the broadcast receiver

00:16:15.880 --> 00:16:15.890
times you'd want the broadcast receiver
 

00:16:15.890 --> 00:16:17.820
times you'd want the broadcast receiver
to see oh you hit the play/pause

00:16:17.820 --> 00:16:17.830
to see oh you hit the play/pause
 

00:16:17.830 --> 00:16:19.900
to see oh you hit the play/pause
play/pause button where you hit the next

00:16:19.900 --> 00:16:19.910
play/pause button where you hit the next
 

00:16:19.910 --> 00:16:21.940
play/pause button where you hit the next
track button now all the sudden just

00:16:21.940 --> 00:16:21.950
track button now all the sudden just
 

00:16:21.950 --> 00:16:23.650
track button now all the sudden just
somehow get that to my service and this

00:16:23.650 --> 00:16:23.660
somehow get that to my service and this
 

00:16:23.660 --> 00:16:26.800
somehow get that to my service and this
really helps in that common case so one

00:16:26.800 --> 00:16:26.810
really helps in that common case so one
 

00:16:26.810 --> 00:16:28.840
really helps in that common case so one
problem though if you add this code it

00:16:28.840 --> 00:16:28.850
problem though if you add this code it
 

00:16:28.850 --> 00:16:34.300
problem though if you add this code it
won't actually work thanks Ian but it

00:16:34.300 --> 00:16:34.310
won't actually work thanks Ian but it
 

00:16:34.310 --> 00:16:36.250
won't actually work thanks Ian but it
turns out that this is an important

00:16:36.250 --> 00:16:36.260
turns out that this is an important
 

00:16:36.260 --> 00:16:38.590
turns out that this is an important
thing for all of Android and that

00:16:38.590 --> 00:16:38.600
thing for all of Android and that
 

00:16:38.600 --> 00:16:40.600
thing for all of Android and that
there's what's called a preferred media

00:16:40.600 --> 00:16:40.610
there's what's called a preferred media
 

00:16:40.610 --> 00:16:43.270
there's what's called a preferred media
button receiver in fact it's probably

00:16:43.270 --> 00:16:43.280
button receiver in fact it's probably
 

00:16:43.280 --> 00:16:45.880
button receiver in fact it's probably
not a very good idea if every media app

00:16:45.880 --> 00:16:45.890
not a very good idea if every media app
 

00:16:45.890 --> 00:16:48.460
not a very good idea if every media app
on your phone all received every media

00:16:48.460 --> 00:16:48.470
on your phone all received every media
 

00:16:48.470 --> 00:16:50.410
on your phone all received every media
button first we'd have many many

00:16:50.410 --> 00:16:50.420
button first we'd have many many
 

00:16:50.420 --> 00:16:52.540
button first we'd have many many
processes starting all at the same time

00:16:52.540 --> 00:16:52.550
processes starting all at the same time
 

00:16:52.550 --> 00:16:54.490
processes starting all at the same time
as well as of course there's usually

00:16:54.490 --> 00:16:54.500
as well as of course there's usually
 

00:16:54.500 --> 00:16:57.310
as well as of course there's usually
only one app that has audio focus that

00:16:57.310 --> 00:16:57.320
only one app that has audio focus that
 

00:16:57.320 --> 00:17:00.160
only one app that has audio focus that
wants to play back apps that is actually

00:17:00.160 --> 00:17:00.170
wants to play back apps that is actually
 

00:17:00.170 --> 00:17:02.829
wants to play back apps that is actually
the one that is the preferred app so

00:17:02.829 --> 00:17:02.839
the one that is the preferred app so
 

00:17:02.839 --> 00:17:04.750
the one that is the preferred app so
it's very similar to audio focus in that

00:17:04.750 --> 00:17:04.760
it's very similar to audio focus in that
 

00:17:04.760 --> 00:17:07.120
it's very similar to audio focus in that
it's a last wins kind of model right if

00:17:07.120 --> 00:17:07.130
it's a last wins kind of model right if
 

00:17:07.130 --> 00:17:08.800
it's a last wins kind of model right if
you're the last one to say I want to be

00:17:08.800 --> 00:17:08.810
you're the last one to say I want to be
 

00:17:08.810 --> 00:17:10.780
you're the last one to say I want to be
the preferred Media button receiver then

00:17:10.780 --> 00:17:10.790
the preferred Media button receiver then
 

00:17:10.790 --> 00:17:12.670
the preferred Media button receiver then
you'll become the preferred Media button

00:17:12.670 --> 00:17:12.680
you'll become the preferred Media button
 

00:17:12.680 --> 00:17:15.100
you'll become the preferred Media button
receiver so if you've ever had like play

00:17:15.100 --> 00:17:15.110
receiver so if you've ever had like play
 

00:17:15.110 --> 00:17:17.500
receiver so if you've ever had like play
music take over when you hit the

00:17:17.500 --> 00:17:17.510
music take over when you hit the
 

00:17:17.510 --> 00:17:19.150
music take over when you hit the
play/pause button or when you get into

00:17:19.150 --> 00:17:19.160
play/pause button or when you get into
 

00:17:19.160 --> 00:17:21.280
play/pause button or when you get into
your car that's usually the app you were

00:17:21.280 --> 00:17:21.290
your car that's usually the app you were
 

00:17:21.290 --> 00:17:23.650
your car that's usually the app you were
expecting not actually handling being

00:17:23.650 --> 00:17:23.660
expecting not actually handling being
 

00:17:23.660 --> 00:17:26.079
expecting not actually handling being
the preferred Media button receiver so

00:17:26.079 --> 00:17:26.089
the preferred Media button receiver so
 

00:17:26.089 --> 00:17:28.240
the preferred Media button receiver so
if all apps do this correctly then when

00:17:28.240 --> 00:17:28.250
if all apps do this correctly then when
 

00:17:28.250 --> 00:17:29.440
if all apps do this correctly then when
you do get in your car and your

00:17:29.440 --> 00:17:29.450
you do get in your car and your
 

00:17:29.450 --> 00:17:31.300
you do get in your car and your
Bluetooth auto connects and it starts

00:17:31.300 --> 00:17:31.310
Bluetooth auto connects and it starts
 

00:17:31.310 --> 00:17:32.740
Bluetooth auto connects and it starts
playback it's actually going to start

00:17:32.740 --> 00:17:32.750
playback it's actually going to start
 

00:17:32.750 --> 00:17:35.080
playback it's actually going to start
the app that you actually last used

00:17:35.080 --> 00:17:35.090
the app that you actually last used
 

00:17:35.090 --> 00:17:37.060
the app that you actually last used
rather than the one that was just last

00:17:37.060 --> 00:17:37.070
rather than the one that was just last
 

00:17:37.070 --> 00:17:40.750
rather than the one that was just last
registered so and that's really where

00:17:40.750 --> 00:17:40.760
registered so and that's really where
 

00:17:40.760 --> 00:17:43.810
registered so and that's really where
media session compat another class comes

00:17:43.810 --> 00:17:43.820
media session compat another class comes
 

00:17:43.820 --> 00:17:46.240
media session compat another class comes
in it's really that consolidated

00:17:46.240 --> 00:17:46.250
in it's really that consolidated
 

00:17:46.250 --> 00:17:46.840
in it's really that consolidated
connection

00:17:46.840 --> 00:17:46.850
connection
 

00:17:46.850 --> 00:17:50.710
connection
in between your app and the system and

00:17:50.710 --> 00:17:50.720
in between your app and the system and
 

00:17:50.720 --> 00:17:52.960
in between your app and the system and
it's actually doing a lot more than you

00:17:52.960 --> 00:17:52.970
it's actually doing a lot more than you
 

00:17:52.970 --> 00:17:55.419
it's actually doing a lot more than you
might imagine so we built the media

00:17:55.419 --> 00:17:55.429
might imagine so we built the media
 

00:17:55.429 --> 00:17:59.860
might imagine so we built the media
session api's in lollipop and media

00:17:59.860 --> 00:17:59.870
session api's in lollipop and media
 

00:17:59.870 --> 00:18:01.810
session api's in lollipop and media
session combat brings that back to every

00:18:01.810 --> 00:18:01.820
session combat brings that back to every
 

00:18:01.820 --> 00:18:04.960
session combat brings that back to every
app even down to v4 if you're that

00:18:04.960 --> 00:18:04.970
app even down to v4 if you're that
 

00:18:04.970 --> 00:18:07.600
app even down to v4 if you're that
person who's still supporting v4 please

00:18:07.600 --> 00:18:07.610
person who's still supporting v4 please
 

00:18:07.610 --> 00:18:11.500
person who's still supporting v4 please
novi force right VA maybe everything

00:18:11.500 --> 00:18:11.510
novi force right VA maybe everything
 

00:18:11.510 --> 00:18:13.990
novi force right VA maybe everything
cool at media starts at about v8 so

00:18:13.990 --> 00:18:14.000
cool at media starts at about v8 so
 

00:18:14.000 --> 00:18:16.000
cool at media starts at about v8 so
we're covering everyone with media

00:18:16.000 --> 00:18:16.010
we're covering everyone with media
 

00:18:16.010 --> 00:18:18.250
we're covering everyone with media
session compat and it's actually doing

00:18:18.250 --> 00:18:18.260
session compat and it's actually doing
 

00:18:18.260 --> 00:18:20.860
session compat and it's actually doing
just about everything for you with just

00:18:20.860 --> 00:18:20.870
just about everything for you with just
 

00:18:20.870 --> 00:18:24.820
just about everything for you with just
a simple few methods but of course we do

00:18:24.820 --> 00:18:24.830
a simple few methods but of course we do
 

00:18:24.830 --> 00:18:27.130
a simple few methods but of course we do
want to create it and there's one thing

00:18:27.130 --> 00:18:27.140
want to create it and there's one thing
 

00:18:27.140 --> 00:18:30.039
want to create it and there's one thing
you want to do especially is make sure

00:18:30.039 --> 00:18:30.049
you want to do especially is make sure
 

00:18:30.049 --> 00:18:32.740
you want to do especially is make sure
you setting flags you want to set the

00:18:32.740 --> 00:18:32.750
you setting flags you want to set the
 

00:18:32.750 --> 00:18:35.049
you setting flags you want to set the
both media buttons and the transport

00:18:35.049 --> 00:18:35.059
both media buttons and the transport
 

00:18:35.059 --> 00:18:36.580
both media buttons and the transport
controls flag this is what actually

00:18:36.580 --> 00:18:36.590
controls flag this is what actually
 

00:18:36.590 --> 00:18:39.130
controls flag this is what actually
allows some of those connections to to

00:18:39.130 --> 00:18:39.140
allows some of those connections to to
 

00:18:39.140 --> 00:18:41.320
allows some of those connections to to
your app now if you're doing like a very

00:18:41.320 --> 00:18:41.330
your app now if you're doing like a very
 

00:18:41.330 --> 00:18:43.659
your app now if you're doing like a very
temporary thing like say showing an

00:18:43.659 --> 00:18:43.669
temporary thing like say showing an
 

00:18:43.669 --> 00:18:45.370
temporary thing like say showing an
advertisement that probably shouldn't

00:18:45.370 --> 00:18:45.380
advertisement that probably shouldn't
 

00:18:45.380 --> 00:18:47.320
advertisement that probably shouldn't
have these actions those flags are

00:18:47.320 --> 00:18:47.330
have these actions those flags are
 

00:18:47.330 --> 00:18:48.789
have these actions those flags are
actually a really good way of turning

00:18:48.789 --> 00:18:48.799
actually a really good way of turning
 

00:18:48.799 --> 00:18:50.740
actually a really good way of turning
those off temporarily and then turning

00:18:50.740 --> 00:18:50.750
those off temporarily and then turning
 

00:18:50.750 --> 00:18:53.080
those off temporarily and then turning
them back on but for the most guard this

00:18:53.080 --> 00:18:53.090
them back on but for the most guard this
 

00:18:53.090 --> 00:18:55.899
them back on but for the most guard this
is for media playback you'll want to

00:18:55.899 --> 00:18:55.909
is for media playback you'll want to
 

00:18:55.909 --> 00:18:58.090
is for media playback you'll want to
just always set those two flags and then

00:18:58.090 --> 00:18:58.100
just always set those two flags and then
 

00:18:58.100 --> 00:19:01.320
just always set those two flags and then
we have this concept of callbacks and

00:19:01.320 --> 00:19:01.330
we have this concept of callbacks and
 

00:19:01.330 --> 00:19:04.600
we have this concept of callbacks and
these callbacks are really the on play

00:19:04.600 --> 00:19:04.610
these callbacks are really the on play
 

00:19:04.610 --> 00:19:07.750
these callbacks are really the on play
on pause basically all of the events

00:19:07.750 --> 00:19:07.760
on pause basically all of the events
 

00:19:07.760 --> 00:19:10.600
on pause basically all of the events
that your app wants to respond to and

00:19:10.600 --> 00:19:10.610
that your app wants to respond to and
 

00:19:10.610 --> 00:19:13.270
that your app wants to respond to and
we'll use our callbacks floor is kind of

00:19:13.270 --> 00:19:13.280
we'll use our callbacks floor is kind of
 

00:19:13.280 --> 00:19:16.539
we'll use our callbacks floor is kind of
the main way of interacting with media

00:19:16.539 --> 00:19:16.549
the main way of interacting with media
 

00:19:16.549 --> 00:19:19.510
the main way of interacting with media
player so everything that's coming into

00:19:19.510 --> 00:19:19.520
player so everything that's coming into
 

00:19:19.520 --> 00:19:21.490
player so everything that's coming into
your service everything that's coming

00:19:21.490 --> 00:19:21.500
your service everything that's coming
 

00:19:21.500 --> 00:19:24.250
your service everything that's coming
into your app then goes through one of

00:19:24.250 --> 00:19:24.260
into your app then goes through one of
 

00:19:24.260 --> 00:19:27.070
into your app then goes through one of
these callbacks to actually then trigger

00:19:27.070 --> 00:19:27.080
these callbacks to actually then trigger
 

00:19:27.080 --> 00:19:29.620
these callbacks to actually then trigger
the media player the nice part about

00:19:29.620 --> 00:19:29.630
the media player the nice part about
 

00:19:29.630 --> 00:19:31.480
the media player the nice part about
this solution is that it works really

00:19:31.480 --> 00:19:31.490
this solution is that it works really
 

00:19:31.490 --> 00:19:33.760
this solution is that it works really
well if you do want to enable cast in

00:19:33.760 --> 00:19:33.770
well if you do want to enable cast in
 

00:19:33.770 --> 00:19:35.230
well if you do want to enable cast in
your media app because you can just

00:19:35.230 --> 00:19:35.240
your media app because you can just
 

00:19:35.240 --> 00:19:37.419
your media app because you can just
switch out your callbacks and switch

00:19:37.419 --> 00:19:37.429
switch out your callbacks and switch
 

00:19:37.429 --> 00:19:40.750
switch out your callbacks and switch
from local callbacks to remote callbacks

00:19:40.750 --> 00:19:40.760
from local callbacks to remote callbacks
 

00:19:40.760 --> 00:19:42.760
from local callbacks to remote callbacks
and not have to actually touch any of

00:19:42.760 --> 00:19:42.770
and not have to actually touch any of
 

00:19:42.770 --> 00:19:44.950
and not have to actually touch any of
the rest of your code just have on play

00:19:44.950 --> 00:19:44.960
the rest of your code just have on play
 

00:19:44.960 --> 00:19:47.649
the rest of your code just have on play
and on pause do a different thing based

00:19:47.649 --> 00:19:47.659
and on pause do a different thing based
 

00:19:47.659 --> 00:19:51.850
and on pause do a different thing based
on whatever the current callback is so

00:19:51.850 --> 00:19:51.860
on whatever the current callback is so
 

00:19:51.860 --> 00:19:54.250
on whatever the current callback is so
the one thing we actually need to really

00:19:54.250 --> 00:19:54.260
the one thing we actually need to really
 

00:19:54.260 --> 00:19:57.100
the one thing we actually need to really
do then to become the preferred media

00:19:57.100 --> 00:19:57.110
do then to become the preferred media
 

00:19:57.110 --> 00:19:59.650
do then to become the preferred media
button playback is called set active

00:19:59.650 --> 00:19:59.660
button playback is called set active
 

00:19:59.660 --> 00:20:02.380
button playback is called set active
and we'll set active to true basically

00:20:02.380 --> 00:20:02.390
and we'll set active to true basically
 

00:20:02.390 --> 00:20:04.150
and we'll set active to true basically
at the same time we're requesting audio

00:20:04.150 --> 00:20:04.160
at the same time we're requesting audio
 

00:20:04.160 --> 00:20:06.070
at the same time we're requesting audio
focus and we've been granted audio focus

00:20:06.070 --> 00:20:06.080
focus and we've been granted audio focus
 

00:20:06.080 --> 00:20:09.310
focus and we've been granted audio focus
and then set active to false when we

00:20:09.310 --> 00:20:09.320
and then set active to false when we
 

00:20:09.320 --> 00:20:12.520
and then set active to false when we
actually stopped so this is kind of the

00:20:12.520 --> 00:20:12.530
actually stopped so this is kind of the
 

00:20:12.530 --> 00:20:14.170
actually stopped so this is kind of the
important part that's actually going to

00:20:14.170 --> 00:20:14.180
important part that's actually going to
 

00:20:14.180 --> 00:20:16.690
important part that's actually going to
get us to the preferred Media button

00:20:16.690 --> 00:20:16.700
get us to the preferred Media button
 

00:20:16.700 --> 00:20:18.730
get us to the preferred Media button
receiver and you'll note that once we

00:20:18.730 --> 00:20:18.740
receiver and you'll note that once we
 

00:20:18.740 --> 00:20:21.430
receiver and you'll note that once we
call these lines then magically all of

00:20:21.430 --> 00:20:21.440
call these lines then magically all of
 

00:20:21.440 --> 00:20:23.400
call these lines then magically all of
our broadcast receivers start working

00:20:23.400 --> 00:20:23.410
our broadcast receivers start working
 

00:20:23.410 --> 00:20:26.560
our broadcast receivers start working
this is also the exact time where we can

00:20:26.560 --> 00:20:26.570
this is also the exact time where we can
 

00:20:26.570 --> 00:20:29.050
this is also the exact time where we can
use Media button receivers other handy

00:20:29.050 --> 00:20:29.060
use Media button receivers other handy
 

00:20:29.060 --> 00:20:32.200
use Media button receivers other handy
method which is handle intent so this

00:20:32.200 --> 00:20:32.210
method which is handle intent so this
 

00:20:32.210 --> 00:20:34.090
method which is handle intent so this
handle intent takes in your media

00:20:34.090 --> 00:20:34.100
handle intent takes in your media
 

00:20:34.100 --> 00:20:37.840
handle intent takes in your media
session compat extracts the key events

00:20:37.840 --> 00:20:37.850
session compat extracts the key events
 

00:20:37.850 --> 00:20:40.090
session compat extracts the key events
and then hands it off to your call backs

00:20:40.090 --> 00:20:40.100
and then hands it off to your call backs
 

00:20:40.100 --> 00:20:41.950
and then hands it off to your call backs
all without having to write any more

00:20:41.950 --> 00:20:41.960
all without having to write any more
 

00:20:41.960 --> 00:20:44.170
all without having to write any more
code it's just one line in your on start

00:20:44.170 --> 00:20:44.180
code it's just one line in your on start
 

00:20:44.180 --> 00:20:46.150
code it's just one line in your on start
command and all of a sudden your call

00:20:46.150 --> 00:20:46.160
command and all of a sudden your call
 

00:20:46.160 --> 00:20:48.400
command and all of a sudden your call
backs are then receiving media button

00:20:48.400 --> 00:20:48.410
backs are then receiving media button
 

00:20:48.410 --> 00:20:50.700
backs are then receiving media button
events without you having to write or

00:20:50.700 --> 00:20:50.710
events without you having to write or
 

00:20:50.710 --> 00:20:53.200
events without you having to write or
decode key events to get through all

00:20:53.200 --> 00:20:53.210
decode key events to get through all
 

00:20:53.210 --> 00:20:55.510
decode key events to get through all
that now there's one wrinkle though

00:20:55.510 --> 00:20:55.520
that now there's one wrinkle though
 

00:20:55.520 --> 00:20:58.000
that now there's one wrinkle though
because how does it know that when you

00:20:58.000 --> 00:20:58.010
because how does it know that when you
 

00:20:58.010 --> 00:20:59.950
because how does it know that when you
hit the play/pause button on your

00:20:59.950 --> 00:20:59.960
hit the play/pause button on your
 

00:20:59.960 --> 00:21:03.370
hit the play/pause button on your
bluetooth remote that you want to play

00:21:03.370 --> 00:21:03.380
bluetooth remote that you want to play
 

00:21:03.380 --> 00:21:05.440
bluetooth remote that you want to play
or you want to pause right we haven't

00:21:05.440 --> 00:21:05.450
or you want to pause right we haven't
 

00:21:05.450 --> 00:21:07.840
or you want to pause right we haven't
actually told you what's going on we

00:21:07.840 --> 00:21:07.850
actually told you what's going on we
 

00:21:07.850 --> 00:21:11.200
actually told you what's going on we
haven't told the system anything so

00:21:11.200 --> 00:21:11.210
haven't told the system anything so
 

00:21:11.210 --> 00:21:14.260
haven't told the system anything so
that's what playback state compat is for

00:21:14.260 --> 00:21:14.270
that's what playback state compat is for
 

00:21:14.270 --> 00:21:16.420
that's what playback state compat is for
it's actually how you tell the system

00:21:16.420 --> 00:21:16.430
it's actually how you tell the system
 

00:21:16.430 --> 00:21:18.220
it's actually how you tell the system
what's currently going on and there's

00:21:18.220 --> 00:21:18.230
what's currently going on and there's
 

00:21:18.230 --> 00:21:20.710
what's currently going on and there's
actually two parts to it one is set

00:21:20.710 --> 00:21:20.720
actually two parts to it one is set
 

00:21:20.720 --> 00:21:22.690
actually two parts to it one is set
state so this is what's currently going

00:21:22.690 --> 00:21:22.700
state so this is what's currently going
 

00:21:22.700 --> 00:21:26.260
state so this is what's currently going
on this is like state playing state

00:21:26.260 --> 00:21:26.270
on this is like state playing state
 

00:21:26.270 --> 00:21:29.110
on this is like state playing state
paused buffering as well as kind of your

00:21:29.110 --> 00:21:29.120
paused buffering as well as kind of your
 

00:21:29.120 --> 00:21:31.570
paused buffering as well as kind of your
position so if you're 30 seconds into a

00:21:31.570 --> 00:21:31.580
position so if you're 30 seconds into a
 

00:21:31.580 --> 00:21:35.080
position so if you're 30 seconds into a
track you'll set the position to 30 the

00:21:35.080 --> 00:21:35.090
track you'll set the position to 30 the
 

00:21:35.090 --> 00:21:37.750
track you'll set the position to 30 the
other part is set actions now set

00:21:37.750 --> 00:21:37.760
other part is set actions now set
 

00:21:37.760 --> 00:21:41.350
other part is set actions now set
actions are what controls we support so

00:21:41.350 --> 00:21:41.360
actions are what controls we support so
 

00:21:41.360 --> 00:21:42.910
actions are what controls we support so
you'll definitely want to support site

00:21:42.910 --> 00:21:42.920
you'll definitely want to support site
 

00:21:42.920 --> 00:21:46.390
you'll definitely want to support site
play pause and stop but of course if you

00:21:46.390 --> 00:21:46.400
play pause and stop but of course if you
 

00:21:46.400 --> 00:21:49.300
play pause and stop but of course if you
support skip to next or not those

00:21:49.300 --> 00:21:49.310
support skip to next or not those
 

00:21:49.310 --> 00:21:51.190
support skip to next or not those
actions are actually going to be really

00:21:51.190 --> 00:21:51.200
actions are actually going to be really
 

00:21:51.200 --> 00:21:53.380
actions are actually going to be really
important to set here if you don't set

00:21:53.380 --> 00:21:53.390
important to set here if you don't set
 

00:21:53.390 --> 00:21:55.630
important to set here if you don't set
those actions here you won't get media

00:21:55.630 --> 00:21:55.640
those actions here you won't get media
 

00:21:55.640 --> 00:21:57.820
those actions here you won't get media
buttons for them and you won't get

00:21:57.820 --> 00:21:57.830
buttons for them and you won't get
 

00:21:57.830 --> 00:22:01.420
buttons for them and you won't get
controls on Android wear and on Android

00:22:01.420 --> 00:22:01.430
controls on Android wear and on Android
 

00:22:01.430 --> 00:22:03.280
controls on Android wear and on Android
auto as well they all rely on kind of

00:22:03.280 --> 00:22:03.290
auto as well they all rely on kind of
 

00:22:03.290 --> 00:22:05.590
auto as well they all rely on kind of
those actions to be set so if you want

00:22:05.590 --> 00:22:05.600
those actions to be set so if you want
 

00:22:05.600 --> 00:22:09.040
those actions to be set so if you want
to support rewind again one of the

00:22:09.040 --> 00:22:09.050
to support rewind again one of the
 

00:22:09.050 --> 00:22:11.890
to support rewind again one of the
actions you need to add so these are

00:22:11.890 --> 00:22:11.900
actions you need to add so these are
 

00:22:11.900 --> 00:22:13.210
actions you need to add so these are
kind of actually grouped together

00:22:13.210 --> 00:22:13.220
kind of actually grouped together
 

00:22:13.220 --> 00:22:16.029
kind of actually grouped together
as many times they change at the same

00:22:16.029 --> 00:22:16.039
as many times they change at the same
 

00:22:16.039 --> 00:22:19.120
as many times they change at the same
time right if you are buffering you

00:22:19.120 --> 00:22:19.130
time right if you are buffering you
 

00:22:19.130 --> 00:22:20.590
time right if you are buffering you
probably don't have a fast forward

00:22:20.590 --> 00:22:20.600
probably don't have a fast forward
 

00:22:20.600 --> 00:22:22.779
probably don't have a fast forward
button if you're paused you probably

00:22:22.779 --> 00:22:22.789
button if you're paused you probably
 

00:22:22.789 --> 00:22:26.289
button if you're paused you probably
don't have a pause button right you want

00:22:26.289 --> 00:22:26.299
don't have a pause button right you want
 

00:22:26.299 --> 00:22:28.360
don't have a pause button right you want
to switch the actions at the same time

00:22:28.360 --> 00:22:28.370
to switch the actions at the same time
 

00:22:28.370 --> 00:22:32.230
to switch the actions at the same time
you're switching your state what about

00:22:32.230 --> 00:22:32.240
you're switching your state what about
 

00:22:32.240 --> 00:22:34.539
you're switching your state what about
those cool lock screen controls we added

00:22:34.539 --> 00:22:34.549
those cool lock screen controls we added
 

00:22:34.549 --> 00:22:37.060
those cool lock screen controls we added
them in ice cream sandwich and you could

00:22:37.060 --> 00:22:37.070
them in ice cream sandwich and you could
 

00:22:37.070 --> 00:22:38.860
them in ice cream sandwich and you could
play pause without unlocking your phone

00:22:38.860 --> 00:22:38.870
play pause without unlocking your phone
 

00:22:38.870 --> 00:22:40.870
play pause without unlocking your phone
it's probably the coolest thing like

00:22:40.870 --> 00:22:40.880
it's probably the coolest thing like
 

00:22:40.880 --> 00:22:42.850
it's probably the coolest thing like
except for the whole combining phones

00:22:42.850 --> 00:22:42.860
except for the whole combining phones
 

00:22:42.860 --> 00:22:44.470
except for the whole combining phones
and tablets together but that's not

00:22:44.470 --> 00:22:44.480
and tablets together but that's not
 

00:22:44.480 --> 00:22:47.590
and tablets together but that's not
important for this talk and it's

00:22:47.590 --> 00:22:47.600
important for this talk and it's
 

00:22:47.600 --> 00:22:50.020
important for this talk and it's
actually pretty easy there requires a

00:22:50.020 --> 00:22:50.030
actually pretty easy there requires a
 

00:22:50.030 --> 00:22:52.570
actually pretty easy there requires a
little bit of metadata in fact a picture

00:22:52.570 --> 00:22:52.580
little bit of metadata in fact a picture
 

00:22:52.580 --> 00:22:55.240
little bit of metadata in fact a picture
right would kind of be required for this

00:22:55.240 --> 00:22:55.250
right would kind of be required for this
 

00:22:55.250 --> 00:22:58.659
right would kind of be required for this
information now this is actually used

00:22:58.659 --> 00:22:58.669
information now this is actually used
 

00:22:58.669 --> 00:23:00.970
information now this is actually used
for a lot more than just lock screen

00:23:00.970 --> 00:23:00.980
for a lot more than just lock screen
 

00:23:00.980 --> 00:23:03.430
for a lot more than just lock screen
controls like Android wear will take the

00:23:03.430 --> 00:23:03.440
controls like Android wear will take the
 

00:23:03.440 --> 00:23:07.870
controls like Android wear will take the
background image from your metadata so

00:23:07.870 --> 00:23:07.880
background image from your metadata so
 

00:23:07.880 --> 00:23:09.909
background image from your metadata so
what kinds of metadata well there's

00:23:09.909 --> 00:23:09.919
what kinds of metadata well there's
 

00:23:09.919 --> 00:23:12.279
what kinds of metadata well there's
actually like 27 different kinds of

00:23:12.279 --> 00:23:12.289
actually like 27 different kinds of
 

00:23:12.289 --> 00:23:14.440
actually like 27 different kinds of
metadata you can add these are kind of

00:23:14.440 --> 00:23:14.450
metadata you can add these are kind of
 

00:23:14.450 --> 00:23:15.850
metadata you can add these are kind of
the most important ones the ones you'd

00:23:15.850 --> 00:23:15.860
the most important ones the ones you'd
 

00:23:15.860 --> 00:23:19.899
the most important ones the ones you'd
expect title album artist album artist

00:23:19.899 --> 00:23:19.909
expect title album artist album artist
 

00:23:19.909 --> 00:23:23.110
expect title album artist album artist
that's a different thing as well as the

00:23:23.110 --> 00:23:23.120
that's a different thing as well as the
 

00:23:23.120 --> 00:23:25.270
that's a different thing as well as the
duration right that goes really well

00:23:25.270 --> 00:23:25.280
duration right that goes really well
 

00:23:25.280 --> 00:23:27.190
duration right that goes really well
with that position we added in playback

00:23:27.190 --> 00:23:27.200
with that position we added in playback
 

00:23:27.200 --> 00:23:30.190
with that position we added in playback
state as well as the actual images

00:23:30.190 --> 00:23:30.200
state as well as the actual images
 

00:23:30.200 --> 00:23:31.870
state as well as the actual images
themselves you can store them as bitmaps

00:23:31.870 --> 00:23:31.880
themselves you can store them as bitmaps
 

00:23:31.880 --> 00:23:35.110
themselves you can store them as bitmaps
or provide your eyes to content your

00:23:35.110 --> 00:23:35.120
or provide your eyes to content your
 

00:23:35.120 --> 00:23:38.549
or provide your eyes to content your
eyes which then the app can read now

00:23:38.549 --> 00:23:38.559
eyes which then the app can read now
 

00:23:38.559 --> 00:23:42.100
eyes which then the app can read now
really really don't store like 4,000 x

00:23:42.100 --> 00:23:42.110
really really don't store like 4,000 x
 

00:23:42.110 --> 00:23:44.950
really really don't store like 4,000 x
4000 pixel bitmaps in this these are

00:23:44.950 --> 00:23:44.960
4000 pixel bitmaps in this these are
 

00:23:44.960 --> 00:23:47.830
4000 pixel bitmaps in this these are
sent to other apps so if you're doing it

00:23:47.830 --> 00:23:47.840
sent to other apps so if you're doing it
 

00:23:47.840 --> 00:23:50.260
sent to other apps so if you're doing it
you probably want to set a smaller image

00:23:50.260 --> 00:23:50.270
you probably want to set a smaller image
 

00:23:50.270 --> 00:23:53.440
you probably want to set a smaller image
in a bitmap and then provide a URI for a

00:23:53.440 --> 00:23:53.450
in a bitmap and then provide a URI for a
 

00:23:53.450 --> 00:23:55.840
in a bitmap and then provide a URI for a
full-size image in case apps really do

00:23:55.840 --> 00:23:55.850
full-size image in case apps really do
 

00:23:55.850 --> 00:24:00.580
full-size image in case apps really do
want that level of information so how

00:24:00.580 --> 00:24:00.590
want that level of information so how
 

00:24:00.590 --> 00:24:01.840
want that level of information so how
does this actually work with our

00:24:01.840 --> 00:24:01.850
does this actually work with our
 

00:24:01.850 --> 00:24:04.149
does this actually work with our
playback with our life cycle well we'll

00:24:04.149 --> 00:24:04.159
playback with our life cycle well we'll
 

00:24:04.159 --> 00:24:07.120
playback with our life cycle well we'll
want to create set flags that call back

00:24:07.120 --> 00:24:07.130
want to create set flags that call back
 

00:24:07.130 --> 00:24:10.390
want to create set flags that call back
in oncreate and then set active make

00:24:10.390 --> 00:24:10.400
in oncreate and then set active make
 

00:24:10.400 --> 00:24:12.250
in oncreate and then set active make
sure our metadata and state are updated

00:24:12.250 --> 00:24:12.260
sure our metadata and state are updated
 

00:24:12.260 --> 00:24:14.080
sure our metadata and state are updated
when we start playing and then of course

00:24:14.080 --> 00:24:14.090
when we start playing and then of course
 

00:24:14.090 --> 00:24:16.409
when we start playing and then of course
when we pause one update our state

00:24:16.409 --> 00:24:16.419
when we pause one update our state
 

00:24:16.419 --> 00:24:19.870
when we pause one update our state
stopped will set active to false right

00:24:19.870 --> 00:24:19.880
stopped will set active to false right
 

00:24:19.880 --> 00:24:21.820
stopped will set active to false right
similarly again along with our audio

00:24:21.820 --> 00:24:21.830
similarly again along with our audio
 

00:24:21.830 --> 00:24:24.130
similarly again along with our audio
focus and then we'll release when we're

00:24:24.130 --> 00:24:24.140
focus and then we'll release when we're
 

00:24:24.140 --> 00:24:26.780
focus and then we'll release when we're
all done so

00:24:26.780 --> 00:24:26.790
all done so
 

00:24:26.790 --> 00:24:29.330
all done so
screen controls like how old are those

00:24:29.330 --> 00:24:29.340
screen controls like how old are those
 

00:24:29.340 --> 00:24:32.960
screen controls like how old are those
right we actually removed all of them so

00:24:32.960 --> 00:24:32.970
right we actually removed all of them so
 

00:24:32.970 --> 00:24:34.910
right we actually removed all of them so
in fact notifications are the new

00:24:34.910 --> 00:24:34.920
in fact notifications are the new
 

00:24:34.920 --> 00:24:37.610
in fact notifications are the new
hotness for the lock screen and in fact

00:24:37.610 --> 00:24:37.620
hotness for the lock screen and in fact
 

00:24:37.620 --> 00:24:38.570
hotness for the lock screen and in fact
we probably should have been using

00:24:38.570 --> 00:24:38.580
we probably should have been using
 

00:24:38.580 --> 00:24:40.760
we probably should have been using
notifications all along they're kind of

00:24:40.760 --> 00:24:40.770
notifications all along they're kind of
 

00:24:40.770 --> 00:24:42.740
notifications all along they're kind of
a big deal doesn't really make sense to

00:24:42.740 --> 00:24:42.750
a big deal doesn't really make sense to
 

00:24:42.750 --> 00:24:45.860
a big deal doesn't really make sense to
lock your phone just to get to media

00:24:45.860 --> 00:24:45.870
lock your phone just to get to media
 

00:24:45.870 --> 00:24:49.040
lock your phone just to get to media
controls so having notifications

00:24:49.040 --> 00:24:49.050
controls so having notifications
 

00:24:49.050 --> 00:24:51.130
controls so having notifications
actually turns out to be really useful

00:24:51.130 --> 00:24:51.140
actually turns out to be really useful
 

00:24:51.140 --> 00:24:54.380
actually turns out to be really useful
but writing a custom notification that

00:24:54.380 --> 00:24:54.390
but writing a custom notification that
 

00:24:54.390 --> 00:24:56.900
but writing a custom notification that
does media controls and have it work

00:24:56.900 --> 00:24:56.910
does media controls and have it work
 

00:24:56.910 --> 00:24:58.910
does media controls and have it work
well on every device it's actually

00:24:58.910 --> 00:24:58.920
well on every device it's actually
 

00:24:58.920 --> 00:25:03.020
well on every device it's actually
really hard so we built it for you we

00:25:03.020 --> 00:25:03.030
really hard so we built it for you we
 

00:25:03.030 --> 00:25:06.220
really hard so we built it for you we
backported kind of the media style

00:25:06.220 --> 00:25:06.230
backported kind of the media style
 

00:25:06.230 --> 00:25:08.900
backported kind of the media style
notification which was added in lollipop

00:25:08.900 --> 00:25:08.910
notification which was added in lollipop
 

00:25:08.910 --> 00:25:10.850
notification which was added in lollipop
so that now you can use it on all

00:25:10.850 --> 00:25:10.860
so that now you can use it on all
 

00:25:10.860 --> 00:25:13.460
so that now you can use it on all
platform burdens but that did come with

00:25:13.460 --> 00:25:13.470
platform burdens but that did come with
 

00:25:13.470 --> 00:25:17.180
platform burdens but that did come with
a few caveats first of all prior to API

00:25:17.180 --> 00:25:17.190
a few caveats first of all prior to API
 

00:25:17.190 --> 00:25:19.490
a few caveats first of all prior to API
14 you couldn't actually have buttons in

00:25:19.490 --> 00:25:19.500
14 you couldn't actually have buttons in
 

00:25:19.500 --> 00:25:21.350
14 you couldn't actually have buttons in
your notification it's just one click

00:25:21.350 --> 00:25:21.360
your notification it's just one click
 

00:25:21.360 --> 00:25:24.170
your notification it's just one click
target and can you imagine like must

00:25:24.170 --> 00:25:24.180
target and can you imagine like must
 

00:25:24.180 --> 00:25:26.840
target and can you imagine like must
have been horrible but we've moved on

00:25:26.840 --> 00:25:26.850
have been horrible but we've moved on
 

00:25:26.850 --> 00:25:29.030
have been horrible but we've moved on
but thankfully media style will just

00:25:29.030 --> 00:25:29.040
but thankfully media style will just
 

00:25:29.040 --> 00:25:30.710
but thankfully media style will just
continue to work it'll give you the best

00:25:30.710 --> 00:25:30.720
continue to work it'll give you the best
 

00:25:30.720 --> 00:25:34.940
continue to work it'll give you the best
effort it can at that level on API 14 we

00:25:34.940 --> 00:25:34.950
effort it can at that level on API 14 we
 

00:25:34.950 --> 00:25:37.520
effort it can at that level on API 14 we
actually can add actions so you'll note

00:25:37.520 --> 00:25:37.530
actually can add actions so you'll note
 

00:25:37.530 --> 00:25:39.740
actually can add actions so you'll note
there can be up to three actions in the

00:25:39.740 --> 00:25:39.750
there can be up to three actions in the
 

00:25:39.750 --> 00:25:41.960
there can be up to three actions in the
collapsed view that single line view of

00:25:41.960 --> 00:25:41.970
collapsed view that single line view of
 

00:25:41.970 --> 00:25:46.270
collapsed view that single line view of
the notification API 16 jellybean added

00:25:46.270 --> 00:25:46.280
the notification API 16 jellybean added
 

00:25:46.280 --> 00:25:48.650
the notification API 16 jellybean added
expanded notifications where now we can

00:25:48.650 --> 00:25:48.660
expanded notifications where now we can
 

00:25:48.660 --> 00:25:51.740
expanded notifications where now we can
have up to five actions and on 5 panel

00:25:51.740 --> 00:25:51.750
have up to five actions and on 5 panel
 

00:25:51.750 --> 00:25:53.480
have up to five actions and on 5 panel
and higher we'll just use the framework

00:25:53.480 --> 00:25:53.490
and higher we'll just use the framework
 

00:25:53.490 --> 00:25:56.360
and higher we'll just use the framework
media style so as we change things and

00:25:56.360 --> 00:25:56.370
media style so as we change things and
 

00:25:56.370 --> 00:25:58.220
media style so as we change things and
things get even better or the styling

00:25:58.220 --> 00:25:58.230
things get even better or the styling
 

00:25:58.230 --> 00:26:01.400
things get even better or the styling
changes you'll always be know that you

00:26:01.400 --> 00:26:01.410
changes you'll always be know that you
 

00:26:01.410 --> 00:26:03.830
changes you'll always be know that you
are in sync with the framework at all

00:26:03.830 --> 00:26:03.840
are in sync with the framework at all
 

00:26:03.840 --> 00:26:09.080
are in sync with the framework at all
api 20 and 1 and higher so i don't like

00:26:09.080 --> 00:26:09.090
api 20 and 1 and higher so i don't like
 

00:26:09.090 --> 00:26:11.990
api 20 and 1 and higher so i don't like
writing boilerplate i'm sure many of you

00:26:11.990 --> 00:26:12.000
writing boilerplate i'm sure many of you
 

00:26:12.000 --> 00:26:13.580
writing boilerplate i'm sure many of you
love writing boilerplate right

00:26:13.580 --> 00:26:13.590
love writing boilerplate right
 

00:26:13.590 --> 00:26:16.490
love writing boilerplate right
boilerplate no wow you all hate what i

00:26:16.490 --> 00:26:16.500
boilerplate no wow you all hate what i
 

00:26:16.500 --> 00:26:18.670
boilerplate no wow you all hate what i
play too so it's ok i wrote it for you

00:26:18.670 --> 00:26:18.680
play too so it's ok i wrote it for you
 

00:26:18.680 --> 00:26:22.040
play too so it's ok i wrote it for you
because i want you guys to save as much

00:26:22.040 --> 00:26:22.050
because i want you guys to save as much
 

00:26:22.050 --> 00:26:25.370
because i want you guys to save as much
time as possible and so i built this

00:26:25.370 --> 00:26:25.380
time as possible and so i built this
 

00:26:25.380 --> 00:26:27.710
time as possible and so i built this
helper that actually takes a media

00:26:27.710 --> 00:26:27.720
helper that actually takes a media
 

00:26:27.720 --> 00:26:29.390
helper that actually takes a media
session compact and builds a

00:26:29.390 --> 00:26:29.400
session compact and builds a
 

00:26:29.400 --> 00:26:32.300
session compact and builds a
notification for you and it all relies

00:26:32.300 --> 00:26:32.310
notification for you and it all relies
 

00:26:32.310 --> 00:26:35.360
notification for you and it all relies
on media metadata is get description so

00:26:35.360 --> 00:26:35.370
on media metadata is get description so
 

00:26:35.370 --> 00:26:37.430
on media metadata is get description so
get description actually looks at all of

00:26:37.430 --> 00:26:37.440
get description actually looks at all of
 

00:26:37.440 --> 00:26:39.410
get description actually looks at all of
those metadata fields that you've added

00:26:39.410 --> 00:26:39.420
those metadata fields that you've added
 

00:26:39.420 --> 00:26:40.159
those metadata fields that you've added
and

00:26:40.159 --> 00:26:40.169
and
 

00:26:40.169 --> 00:26:41.930
and
extracts just the most important

00:26:41.930 --> 00:26:41.940
extracts just the most important
 

00:26:41.940 --> 00:26:44.119
extracts just the most important
information from it it turns out that it

00:26:44.119 --> 00:26:44.129
information from it it turns out that it
 

00:26:44.129 --> 00:26:46.700
information from it it turns out that it
extracts the same information the same

00:26:46.700 --> 00:26:46.710
extracts the same information the same
 

00:26:46.710 --> 00:26:48.680
extracts the same information the same
fields that I already talked about it's

00:26:48.680 --> 00:26:48.690
fields that I already talked about it's
 

00:26:48.690 --> 00:26:51.499
fields that I already talked about it's
like I planned it that way but there's

00:26:51.499 --> 00:26:51.509
like I planned it that way but there's
 

00:26:51.509 --> 00:26:55.609
like I planned it that way but there's
actually display specific metadata items

00:26:55.609 --> 00:26:55.619
actually display specific metadata items
 

00:26:55.619 --> 00:26:57.680
actually display specific metadata items
if you want to specifically override

00:26:57.680 --> 00:26:57.690
if you want to specifically override
 

00:26:57.690 --> 00:26:59.869
if you want to specifically override
this case because this is actually what

00:26:59.869 --> 00:26:59.879
this case because this is actually what
 

00:26:59.879 --> 00:27:03.259
this case because this is actually what
Android wear is also going to use but

00:27:03.259 --> 00:27:03.269
Android wear is also going to use but
 

00:27:03.269 --> 00:27:05.810
Android wear is also going to use but
once we have that description we can

00:27:05.810 --> 00:27:05.820
once we have that description we can
 

00:27:05.820 --> 00:27:08.210
once we have that description we can
actually build most of our notification

00:27:08.210 --> 00:27:08.220
actually build most of our notification
 

00:27:08.220 --> 00:27:10.129
actually build most of our notification
directly from that description getting

00:27:10.129 --> 00:27:10.139
directly from that description getting
 

00:27:10.139 --> 00:27:13.129
directly from that description getting
the title the text and any subtext

00:27:13.129 --> 00:27:13.139
the title the text and any subtext
 

00:27:13.139 --> 00:27:15.889
the title the text and any subtext
that's available as well as a large icon

00:27:15.889 --> 00:27:15.899
that's available as well as a large icon
 

00:27:15.899 --> 00:27:19.369
that's available as well as a large icon
in the actual icon itself we can also

00:27:19.369 --> 00:27:19.379
in the actual icon itself we can also
 

00:27:19.379 --> 00:27:21.349
in the actual icon itself we can also
actually fill out other things like the

00:27:21.349 --> 00:27:21.359
actually fill out other things like the
 

00:27:21.359 --> 00:27:23.720
actually fill out other things like the
cliq intent for going through as long as

00:27:23.720 --> 00:27:23.730
cliq intent for going through as long as
 

00:27:23.730 --> 00:27:26.779
cliq intent for going through as long as
we call set session activity on our

00:27:26.779 --> 00:27:26.789
we call set session activity on our
 

00:27:26.789 --> 00:27:28.729
we call set session activity on our
media session comp at we can then pull

00:27:28.729 --> 00:27:28.739
media session comp at we can then pull
 

00:27:28.739 --> 00:27:31.909
media session comp at we can then pull
it out for our notification additionally

00:27:31.909 --> 00:27:31.919
it out for our notification additionally
 

00:27:31.919 --> 00:27:34.580
it out for our notification additionally
in lollipop there's a concept of hidden

00:27:34.580 --> 00:27:34.590
in lollipop there's a concept of hidden
 

00:27:34.590 --> 00:27:36.710
in lollipop there's a concept of hidden
notifications right you may not want all

00:27:36.710 --> 00:27:36.720
notifications right you may not want all
 

00:27:36.720 --> 00:27:38.359
notifications right you may not want all
of your notifications on the lock screen

00:27:38.359 --> 00:27:38.369
of your notifications on the lock screen
 

00:27:38.369 --> 00:27:42.229
of your notifications on the lock screen
all the time when so for these

00:27:42.229 --> 00:27:42.239
all the time when so for these
 

00:27:42.239 --> 00:27:44.509
all the time when so for these
notifications for media controls you

00:27:44.509 --> 00:27:44.519
notifications for media controls you
 

00:27:44.519 --> 00:27:47.060
notifications for media controls you
probably want to set them to public that

00:27:47.060 --> 00:27:47.070
probably want to set them to public that
 

00:27:47.070 --> 00:27:49.310
probably want to set them to public that
way people can interact even if they've

00:27:49.310 --> 00:27:49.320
way people can interact even if they've
 

00:27:49.320 --> 00:27:51.200
way people can interact even if they've
chosen to hide their other notifications

00:27:51.200 --> 00:27:51.210
chosen to hide their other notifications
 

00:27:51.210 --> 00:27:54.169
chosen to hide their other notifications
and then of course when the

00:27:54.169 --> 00:27:54.179
and then of course when the
 

00:27:54.179 --> 00:27:56.359
and then of course when the
notifications actually removed slapped

00:27:56.359 --> 00:27:56.369
notifications actually removed slapped
 

00:27:56.369 --> 00:27:58.970
notifications actually removed slapped
away will want to stop playback right we

00:27:58.970 --> 00:27:58.980
away will want to stop playback right we
 

00:27:58.980 --> 00:28:00.470
away will want to stop playback right we
don't necessarily want the user to

00:28:00.470 --> 00:28:00.480
don't necessarily want the user to
 

00:28:00.480 --> 00:28:02.989
don't necessarily want the user to
continue to hear music when they

00:28:02.989 --> 00:28:02.999
continue to hear music when they
 

00:28:02.999 --> 00:28:04.580
continue to hear music when they
specifically swiped away our

00:28:04.580 --> 00:28:04.590
specifically swiped away our
 

00:28:04.590 --> 00:28:07.609
specifically swiped away our
notification so you'll note we actually

00:28:07.609 --> 00:28:07.619
notification so you'll note we actually
 

00:28:07.619 --> 00:28:09.710
notification so you'll note we actually
use a different one called get action

00:28:09.710 --> 00:28:09.720
use a different one called get action
 

00:28:09.720 --> 00:28:11.979
use a different one called get action
intent and that's actually fairly easy

00:28:11.979 --> 00:28:11.989
intent and that's actually fairly easy
 

00:28:11.989 --> 00:28:15.830
intent and that's actually fairly easy
it's basically me faking what you'd

00:28:15.830 --> 00:28:15.840
it's basically me faking what you'd
 

00:28:15.840 --> 00:28:18.499
it's basically me faking what you'd
receive as a media button building our

00:28:18.499 --> 00:28:18.509
receive as a media button building our
 

00:28:18.509 --> 00:28:20.029
receive as a media button building our
own key intent and then building a

00:28:20.029 --> 00:28:20.039
own key intent and then building a
 

00:28:20.039 --> 00:28:22.549
own key intent and then building a
broadcast that's just going to trigger

00:28:22.549 --> 00:28:22.559
broadcast that's just going to trigger
 

00:28:22.559 --> 00:28:25.460
broadcast that's just going to trigger
that same media button receiver going to

00:28:25.460 --> 00:28:25.470
that same media button receiver going to
 

00:28:25.470 --> 00:28:27.349
that same media button receiver going to
your service going to your callback so

00:28:27.349 --> 00:28:27.359
your service going to your callback so
 

00:28:27.359 --> 00:28:29.119
your service going to your callback so
again you don't need to write anything

00:28:29.119 --> 00:28:29.129
again you don't need to write anything
 

00:28:29.129 --> 00:28:32.299
again you don't need to write anything
more of all this so I actually have a

00:28:32.299 --> 00:28:32.309
more of all this so I actually have a
 

00:28:32.309 --> 00:28:35.299
more of all this so I actually have a
gist available of all this code so I'm

00:28:35.299 --> 00:28:35.309
gist available of all this code so I'm
 

00:28:35.309 --> 00:28:37.159
gist available of all this code so I'm
sure you're furiously writing there must

00:28:37.159 --> 00:28:37.169
sure you're furiously writing there must
 

00:28:37.169 --> 00:28:39.080
sure you're furiously writing there must
be someone for yours right no I'm just

00:28:39.080 --> 00:28:39.090
be someone for yours right no I'm just
 

00:28:39.090 --> 00:28:41.419
be someone for yours right no I'm just
working on your laptops it's fine it's

00:28:41.419 --> 00:28:41.429
working on your laptops it's fine it's
 

00:28:41.429 --> 00:28:43.849
working on your laptops it's fine it's
fine I understand so let's actually

00:28:43.849 --> 00:28:43.859
fine I understand so let's actually
 

00:28:43.859 --> 00:28:45.710
fine I understand so let's actually
build our notification you'll still need

00:28:45.710 --> 00:28:45.720
build our notification you'll still need
 

00:28:45.720 --> 00:28:48.460
build our notification you'll still need
a small icon for the status bar and

00:28:48.460 --> 00:28:48.470
a small icon for the status bar and
 

00:28:48.470 --> 00:28:50.330
a small icon for the status bar and
there's one thing that's slightly

00:28:50.330 --> 00:28:50.340
there's one thing that's slightly
 

00:28:50.340 --> 00:28:51.799
there's one thing that's slightly
different about media style

00:28:51.799 --> 00:28:51.809
different about media style
 

00:28:51.809 --> 00:28:54.259
different about media style
notifications in that the color

00:28:54.259 --> 00:28:54.269
notifications in that the color
 

00:28:54.269 --> 00:28:55.879
notifications in that the color
rather than just affecting the small

00:28:55.879 --> 00:28:55.889
rather than just affecting the small
 

00:28:55.889 --> 00:28:57.739
rather than just affecting the small
icon it's going to fill the whole

00:28:57.739 --> 00:28:57.749
icon it's going to fill the whole
 

00:28:57.749 --> 00:29:01.009
icon it's going to fill the whole
background of the image so bright orange

00:29:01.009 --> 00:29:01.019
background of the image so bright orange
 

00:29:01.019 --> 00:29:04.519
background of the image so bright orange
not a good idea generally you want to

00:29:04.519 --> 00:29:04.529
not a good idea generally you want to
 

00:29:04.529 --> 00:29:07.430
not a good idea generally you want to
use something branded for your color the

00:29:07.430 --> 00:29:07.440
use something branded for your color the
 

00:29:07.440 --> 00:29:09.320
use something branded for your color the
primary dark is actually a really good

00:29:09.320 --> 00:29:09.330
primary dark is actually a really good
 

00:29:09.330 --> 00:29:11.539
primary dark is actually a really good
example of something to use but you

00:29:11.539 --> 00:29:11.549
example of something to use but you
 

00:29:11.549 --> 00:29:13.639
example of something to use but you
could also use a more neutral color by

00:29:13.639 --> 00:29:13.649
could also use a more neutral color by
 

00:29:13.649 --> 00:29:16.690
could also use a more neutral color by
default it will default to a gray color

00:29:16.690 --> 00:29:16.700
default it will default to a gray color
 

00:29:16.700 --> 00:29:19.699
default it will default to a gray color
so it wouldn't be much of a media

00:29:19.699 --> 00:29:19.709
so it wouldn't be much of a media
 

00:29:19.709 --> 00:29:21.259
so it wouldn't be much of a media
notification if it didn't have any

00:29:21.259 --> 00:29:21.269
notification if it didn't have any
 

00:29:21.269 --> 00:29:23.449
notification if it didn't have any
actions so I'd say a play/pause action

00:29:23.449 --> 00:29:23.459
actions so I'd say a play/pause action
 

00:29:23.459 --> 00:29:26.509
actions so I'd say a play/pause action
and then actually use our get action

00:29:26.509 --> 00:29:26.519
and then actually use our get action
 

00:29:26.519 --> 00:29:28.849
and then actually use our get action
intent to help us build the pending

00:29:28.849 --> 00:29:28.859
intent to help us build the pending
 

00:29:28.859 --> 00:29:31.609
intent to help us build the pending
intent that we need and then we'll

00:29:31.609 --> 00:29:31.619
intent that we need and then we'll
 

00:29:31.619 --> 00:29:35.209
intent that we need and then we'll
actually call creating a media style so

00:29:35.209 --> 00:29:35.219
actually call creating a media style so
 

00:29:35.219 --> 00:29:37.219
actually call creating a media style so
this media style actually requires that

00:29:37.219 --> 00:29:37.229
this media style actually requires that
 

00:29:37.229 --> 00:29:39.469
this media style actually requires that
we then choose which actions zero

00:29:39.469 --> 00:29:39.479
we then choose which actions zero
 

00:29:39.479 --> 00:29:41.539
we then choose which actions zero
indexed you want to display in that

00:29:41.539 --> 00:29:41.549
indexed you want to display in that
 

00:29:41.549 --> 00:29:43.849
indexed you want to display in that
compact view that single line view in

00:29:43.849 --> 00:29:43.859
compact view that single line view in
 

00:29:43.859 --> 00:29:45.499
compact view that single line view in
this case will show our play pause

00:29:45.499 --> 00:29:45.509
this case will show our play pause
 

00:29:45.509 --> 00:29:46.759
this case will show our play pause
button right because that's kind of

00:29:46.759 --> 00:29:46.769
button right because that's kind of
 

00:29:46.769 --> 00:29:48.680
button right because that's kind of
useful right but you may want to show

00:29:48.680 --> 00:29:48.690
useful right but you may want to show
 

00:29:48.690 --> 00:29:50.749
useful right but you may want to show
say a next track button is a really good

00:29:50.749 --> 00:29:50.759
say a next track button is a really good
 

00:29:50.759 --> 00:29:52.249
say a next track button is a really good
example of something you may also want

00:29:52.249 --> 00:29:52.259
example of something you may also want
 

00:29:52.259 --> 00:29:56.299
example of something you may also want
to show in the compact view and then we

00:29:56.299 --> 00:29:56.309
to show in the compact view and then we
 

00:29:56.309 --> 00:29:59.060
to show in the compact view and then we
want to set the media session so this

00:29:59.060 --> 00:29:59.070
want to set the media session so this
 

00:29:59.070 --> 00:30:01.159
want to set the media session so this
session token' it's actually really

00:30:01.159 --> 00:30:01.169
session token' it's actually really
 

00:30:01.169 --> 00:30:03.199
session token' it's actually really
critical to get things like Android

00:30:03.199 --> 00:30:03.209
critical to get things like Android
 

00:30:03.209 --> 00:30:05.449
critical to get things like Android
we're working so Android wear is

00:30:05.449 --> 00:30:05.459
we're working so Android wear is
 

00:30:05.459 --> 00:30:07.459
we're working so Android wear is
actually going to use that session token

00:30:07.459 --> 00:30:07.469
actually going to use that session token
 

00:30:07.469 --> 00:30:10.729
actually going to use that session token
to pass callbacks to you on android 5.1

00:30:10.729 --> 00:30:10.739
to pass callbacks to you on android 5.1
 

00:30:10.739 --> 00:30:12.319
to pass callbacks to you on android 5.1
higher devices so if you forget this

00:30:12.319 --> 00:30:12.329
higher devices so if you forget this
 

00:30:12.329 --> 00:30:14.989
higher devices so if you forget this
line you get a great notification that

00:30:14.989 --> 00:30:14.999
line you get a great notification that
 

00:30:14.999 --> 00:30:16.699
line you get a great notification that
appears on your wrist and you'll hit the

00:30:16.699 --> 00:30:16.709
appears on your wrist and you'll hit the
 

00:30:16.709 --> 00:30:18.259
appears on your wrist and you'll hit the
play/pause button and it won't do

00:30:18.259 --> 00:30:18.269
play/pause button and it won't do
 

00:30:18.269 --> 00:30:20.329
play/pause button and it won't do
anything and your users will be so

00:30:20.329 --> 00:30:20.339
anything and your users will be so
 

00:30:20.339 --> 00:30:22.669
anything and your users will be so
frustrated so thankfully it's just one

00:30:22.669 --> 00:30:22.679
frustrated so thankfully it's just one
 

00:30:22.679 --> 00:30:24.889
frustrated so thankfully it's just one
line super easy to add just make sure

00:30:24.889 --> 00:30:24.899
line super easy to add just make sure
 

00:30:24.899 --> 00:30:28.249
line super easy to add just make sure
you add it so lifecycle wise here we

00:30:28.249 --> 00:30:28.259
you add it so lifecycle wise here we
 

00:30:28.259 --> 00:30:30.829
you add it so lifecycle wise here we
have we're showing our notification when

00:30:30.829 --> 00:30:30.839
have we're showing our notification when
 

00:30:30.839 --> 00:30:32.629
have we're showing our notification when
we start playing will pause it when we

00:30:32.629 --> 00:30:32.639
we start playing will pause it when we
 

00:30:32.639 --> 00:30:34.879
we start playing will pause it when we
update it when we paused anytime we're

00:30:34.879 --> 00:30:34.889
update it when we paused anytime we're
 

00:30:34.889 --> 00:30:36.979
update it when we paused anytime we're
changing the state and then of course

00:30:36.979 --> 00:30:36.989
changing the state and then of course
 

00:30:36.989 --> 00:30:39.259
changing the state and then of course
when we stopped or destroy will want to

00:30:39.259 --> 00:30:39.269
when we stopped or destroy will want to
 

00:30:39.269 --> 00:30:41.930
when we stopped or destroy will want to
clear the notification now one thing you

00:30:41.930 --> 00:30:41.940
clear the notification now one thing you
 

00:30:41.940 --> 00:30:44.299
clear the notification now one thing you
might consider here is sometimes it

00:30:44.299 --> 00:30:44.309
might consider here is sometimes it
 

00:30:44.309 --> 00:30:45.680
might consider here is sometimes it
makes sense to actually keep your

00:30:45.680 --> 00:30:45.690
makes sense to actually keep your
 

00:30:45.690 --> 00:30:47.299
makes sense to actually keep your
notification around just a little bit

00:30:47.299 --> 00:30:47.309
notification around just a little bit
 

00:30:47.309 --> 00:30:49.430
notification around just a little bit
longer before you actually stopped in

00:30:49.430 --> 00:30:49.440
longer before you actually stopped in
 

00:30:49.440 --> 00:30:52.009
longer before you actually stopped in
case the user wants to restart say they

00:30:52.009 --> 00:30:52.019
case the user wants to restart say they
 

00:30:52.019 --> 00:30:54.289
case the user wants to restart say they
reach the end of their playlist so don't

00:30:54.289 --> 00:30:54.299
reach the end of their playlist so don't
 

00:30:54.299 --> 00:30:55.940
reach the end of their playlist so don't
consider it necessarily a hard

00:30:55.940 --> 00:30:55.950
consider it necessarily a hard
 

00:30:55.950 --> 00:30:57.829
consider it necessarily a hard
requirement to remove your notification

00:30:57.829 --> 00:30:57.839
requirement to remove your notification
 

00:30:57.839 --> 00:31:00.049
requirement to remove your notification
but in all cases you should consider

00:31:00.049 --> 00:31:00.059
but in all cases you should consider
 

00:31:00.059 --> 00:31:04.609
but in all cases you should consider
maybe a timeout kind of a system so

00:31:04.609 --> 00:31:04.619
maybe a timeout kind of a system so
 

00:31:04.619 --> 00:31:06.619
maybe a timeout kind of a system so
media playback is actually one of the

00:31:06.619 --> 00:31:06.629
media playback is actually one of the
 

00:31:06.629 --> 00:31:07.560
media playback is actually one of the
things that's

00:31:07.560 --> 00:31:07.570
things that's
 

00:31:07.570 --> 00:31:08.940
things that's
actually going to be a really good

00:31:08.940 --> 00:31:08.950
actually going to be a really good
 

00:31:08.950 --> 00:31:10.770
actually going to be a really good
candidate for foreground services

00:31:10.770 --> 00:31:10.780
candidate for foreground services
 

00:31:10.780 --> 00:31:13.290
candidate for foreground services
foreground services raise the priority

00:31:13.290 --> 00:31:13.300
foreground services raise the priority
 

00:31:13.300 --> 00:31:15.570
foreground services raise the priority
of your background service such that it

00:31:15.570 --> 00:31:15.580
of your background service such that it
 

00:31:15.580 --> 00:31:19.140
of your background service such that it
isn't killed in only the most extreme

00:31:19.140 --> 00:31:19.150
isn't killed in only the most extreme
 

00:31:19.150 --> 00:31:21.420
isn't killed in only the most extreme
memory conditions so this is great

00:31:21.420 --> 00:31:21.430
memory conditions so this is great
 

00:31:21.430 --> 00:31:24.240
memory conditions so this is great
because it's super noticeable when the

00:31:24.240 --> 00:31:24.250
because it's super noticeable when the
 

00:31:24.250 --> 00:31:26.400
because it's super noticeable when the
media playback app is killed in the

00:31:26.400 --> 00:31:26.410
media playback app is killed in the
 

00:31:26.410 --> 00:31:27.960
media playback app is killed in the
background because you know media

00:31:27.960 --> 00:31:27.970
background because you know media
 

00:31:27.970 --> 00:31:32.100
background because you know media
playback stops so foreground services

00:31:32.100 --> 00:31:32.110
playback stops so foreground services
 

00:31:32.110 --> 00:31:34.380
playback stops so foreground services
have a requirement that you have a

00:31:34.380 --> 00:31:34.390
have a requirement that you have a
 

00:31:34.390 --> 00:31:37.110
have a requirement that you have a
notification and thankfully we just

00:31:37.110 --> 00:31:37.120
notification and thankfully we just
 

00:31:37.120 --> 00:31:39.360
notification and thankfully we just
built a notification so it should be

00:31:39.360 --> 00:31:39.370
built a notification so it should be
 

00:31:39.370 --> 00:31:41.160
built a notification so it should be
fairly easy to get this actually started

00:31:41.160 --> 00:31:41.170
fairly easy to get this actually started
 

00:31:41.170 --> 00:31:43.860
fairly easy to get this actually started
as a foreground service now there's one

00:31:43.860 --> 00:31:43.870
as a foreground service now there's one
 

00:31:43.870 --> 00:31:47.280
as a foreground service now there's one
caveat though prior to lollipop if you

00:31:47.280 --> 00:31:47.290
caveat though prior to lollipop if you
 

00:31:47.290 --> 00:31:51.120
caveat though prior to lollipop if you
call start for stop foreground false you

00:31:51.120 --> 00:31:51.130
call start for stop foreground false you
 

00:31:51.130 --> 00:31:53.010
call start for stop foreground false you
actually can't swipe dismiss the

00:31:53.010 --> 00:31:53.020
actually can't swipe dismiss the
 

00:31:53.020 --> 00:31:55.080
actually can't swipe dismiss the
notification and this is actually a

00:31:55.080 --> 00:31:55.090
notification and this is actually a
 

00:31:55.090 --> 00:31:58.020
notification and this is actually a
really common case in media playback

00:31:58.020 --> 00:31:58.030
really common case in media playback
 

00:31:58.030 --> 00:31:59.820
really common case in media playback
apps because you don't necessarily need

00:31:59.820 --> 00:31:59.830
apps because you don't necessarily need
 

00:31:59.830 --> 00:32:01.920
apps because you don't necessarily need
to be a foreground service when you're

00:32:01.920 --> 00:32:01.930
to be a foreground service when you're
 

00:32:01.930 --> 00:32:04.500
to be a foreground service when you're
not playing audio right in theory in the

00:32:04.500 --> 00:32:04.510
not playing audio right in theory in the
 

00:32:04.510 --> 00:32:09.720
not playing audio right in theory in the
most memory hard areas you'll probably

00:32:09.720 --> 00:32:09.730
most memory hard areas you'll probably
 

00:32:09.730 --> 00:32:11.400
most memory hard areas you'll probably
not want to be a foreground service when

00:32:11.400 --> 00:32:11.410
not want to be a foreground service when
 

00:32:11.410 --> 00:32:13.670
not want to be a foreground service when
your plate when you're stopped playback

00:32:13.670 --> 00:32:13.680
your plate when you're stopped playback
 

00:32:13.680 --> 00:32:16.560
your plate when you're stopped playback
so how do I work around this bug we

00:32:16.560 --> 00:32:16.570
so how do I work around this bug we
 

00:32:16.570 --> 00:32:18.540
so how do I work around this bug we
fixed it in lollipop that doesn't help

00:32:18.540 --> 00:32:18.550
fixed it in lollipop that doesn't help
 

00:32:18.550 --> 00:32:22.910
fixed it in lollipop that doesn't help
people who are not min SDK 21 anyone

00:32:22.910 --> 00:32:22.920
people who are not min SDK 21 anyone
 

00:32:22.920 --> 00:32:27.810
people who are not min SDK 21 anyone
know one lucky here so meaty style kind

00:32:27.810 --> 00:32:27.820
know one lucky here so meaty style kind
 

00:32:27.820 --> 00:32:30.450
know one lucky here so meaty style kind
of built something for it cancel button

00:32:30.450 --> 00:32:30.460
of built something for it cancel button
 

00:32:30.460 --> 00:32:33.420
of built something for it cancel button
a simple X in the corner that allows

00:32:33.420 --> 00:32:33.430
a simple X in the corner that allows
 

00:32:33.430 --> 00:32:36.300
a simple X in the corner that allows
users even prior to lollipop to remove

00:32:36.300 --> 00:32:36.310
users even prior to lollipop to remove
 

00:32:36.310 --> 00:32:38.370
users even prior to lollipop to remove
your notification even though they can't

00:32:38.370 --> 00:32:38.380
your notification even though they can't
 

00:32:38.380 --> 00:32:42.750
your notification even though they can't
ever swipe it away so actually extremely

00:32:42.750 --> 00:32:42.760
ever swipe it away so actually extremely
 

00:32:42.760 --> 00:32:46.740
ever swipe it away so actually extremely
easy to add your call site show cancel

00:32:46.740 --> 00:32:46.750
easy to add your call site show cancel
 

00:32:46.750 --> 00:32:48.720
easy to add your call site show cancel
button true and then add the intent to

00:32:48.720 --> 00:32:48.730
button true and then add the intent to
 

00:32:48.730 --> 00:32:51.510
button true and then add the intent to
send stop playback now the nice part is

00:32:51.510 --> 00:32:51.520
send stop playback now the nice part is
 

00:32:51.520 --> 00:32:54.870
send stop playback now the nice part is
is because we fixed it in lollipop these

00:32:54.870 --> 00:32:54.880
is because we fixed it in lollipop these
 

00:32:54.880 --> 00:32:56.700
is because we fixed it in lollipop these
calls won't actually do anything on

00:32:56.700 --> 00:32:56.710
calls won't actually do anything on
 

00:32:56.710 --> 00:32:59.580
calls won't actually do anything on
lollipop and above they're just only for

00:32:59.580 --> 00:32:59.590
lollipop and above they're just only for
 

00:32:59.590 --> 00:33:02.220
lollipop and above they're just only for
backward compatibility reasons on

00:33:02.220 --> 00:33:02.230
backward compatibility reasons on
 

00:33:02.230 --> 00:33:04.350
backward compatibility reasons on
lollipop it above as soon as you hit

00:33:04.350 --> 00:33:04.360
lollipop it above as soon as you hit
 

00:33:04.360 --> 00:33:06.150
lollipop it above as soon as you hit
pause and you set your state to pause

00:33:06.150 --> 00:33:06.160
pause and you set your state to pause
 

00:33:06.160 --> 00:33:07.740
pause and you set your state to pause
and you stop being a foreground service

00:33:07.740 --> 00:33:07.750
and you stop being a foreground service
 

00:33:07.750 --> 00:33:09.690
and you stop being a foreground service
you can swipe away the notification

00:33:09.690 --> 00:33:09.700
you can swipe away the notification
 

00:33:09.700 --> 00:33:12.899
you can swipe away the notification
without a problem

00:33:12.899 --> 00:33:12.909
 
 

00:33:12.909 --> 00:33:15.810
 
so we've updated our notification now

00:33:15.810 --> 00:33:15.820
so we've updated our notification now
 

00:33:15.820 --> 00:33:17.639
so we've updated our notification now
we're going to start foreground stop

00:33:17.639 --> 00:33:17.649
we're going to start foreground stop
 

00:33:17.649 --> 00:33:19.289
we're going to start foreground stop
foreground false to keep the

00:33:19.289 --> 00:33:19.299
foreground false to keep the
 

00:33:19.299 --> 00:33:21.810
foreground false to keep the
notification around but not be a

00:33:21.810 --> 00:33:21.820
notification around but not be a
 

00:33:21.820 --> 00:33:23.430
notification around but not be a
foreground service and then stop

00:33:23.430 --> 00:33:23.440
foreground service and then stop
 

00:33:23.440 --> 00:33:25.440
foreground service and then stop
foreground true to remove our

00:33:25.440 --> 00:33:25.450
foreground true to remove our
 

00:33:25.450 --> 00:33:27.269
foreground true to remove our
notification when we've actually stops

00:33:27.269 --> 00:33:27.279
notification when we've actually stops
 

00:33:27.279 --> 00:33:30.869
notification when we've actually stops
entirely and actually our services this

00:33:30.869 --> 00:33:30.879
entirely and actually our services this
 

00:33:30.879 --> 00:33:33.330
entirely and actually our services this
is about everything right it's a lot but

00:33:33.330 --> 00:33:33.340
is about everything right it's a lot but
 

00:33:33.340 --> 00:33:35.039
is about everything right it's a lot but
we've actually handled all the things

00:33:35.039 --> 00:33:35.049
we've actually handled all the things
 

00:33:35.049 --> 00:33:37.200
we've actually handled all the things
that our service can handle there's just

00:33:37.200 --> 00:33:37.210
that our service can handle there's just
 

00:33:37.210 --> 00:33:40.219
that our service can handle there's just
one thing we still need to do build a UI

00:33:40.219 --> 00:33:40.229
one thing we still need to do build a UI
 

00:33:40.229 --> 00:33:42.570
one thing we still need to do build a UI
right like that's kind of a big deal for

00:33:42.570 --> 00:33:42.580
right like that's kind of a big deal for
 

00:33:42.580 --> 00:33:46.320
right like that's kind of a big deal for
most media playback about apps maybe if

00:33:46.320 --> 00:33:46.330
most media playback about apps maybe if
 

00:33:46.330 --> 00:33:48.960
most media playback about apps maybe if
you had like a single radio station that

00:33:48.960 --> 00:33:48.970
you had like a single radio station that
 

00:33:48.970 --> 00:33:50.909
you had like a single radio station that
would be really boring but could maybe

00:33:50.909 --> 00:33:50.919
would be really boring but could maybe
 

00:33:50.919 --> 00:33:53.849
would be really boring but could maybe
get away with it so we have to figure

00:33:53.849 --> 00:33:53.859
get away with it so we have to figure
 

00:33:53.859 --> 00:33:55.950
get away with it so we have to figure
out some way of connecting our service

00:33:55.950 --> 00:33:55.960
out some way of connecting our service
 

00:33:55.960 --> 00:33:59.849
out some way of connecting our service
to our UI and ideally we'd like to reuse

00:33:59.849 --> 00:33:59.859
to our UI and ideally we'd like to reuse
 

00:33:59.859 --> 00:34:02.219
to our UI and ideally we'd like to reuse
all of those callbacks Leon play on

00:34:02.219 --> 00:34:02.229
all of those callbacks Leon play on
 

00:34:02.229 --> 00:34:05.129
all of those callbacks Leon play on
pause on stop that we already have in

00:34:05.129 --> 00:34:05.139
pause on stop that we already have in
 

00:34:05.139 --> 00:34:07.950
pause on stop that we already have in
our service for hooking up our buttons

00:34:07.950 --> 00:34:07.960
our service for hooking up our buttons
 

00:34:07.960 --> 00:34:10.649
our service for hooking up our buttons
to it so we built one of those it's

00:34:10.649 --> 00:34:10.659
to it so we built one of those it's
 

00:34:10.659 --> 00:34:14.279
to it so we built one of those it's
called media controller compact and it's

00:34:14.279 --> 00:34:14.289
called media controller compact and it's
 

00:34:14.289 --> 00:34:16.500
called media controller compact and it's
actually the way of once you connect you

00:34:16.500 --> 00:34:16.510
actually the way of once you connect you
 

00:34:16.510 --> 00:34:18.539
actually the way of once you connect you
can actually get all of the current meta

00:34:18.539 --> 00:34:18.549
can actually get all of the current meta
 

00:34:18.549 --> 00:34:20.609
can actually get all of the current meta
data so you can update your UI to say

00:34:20.609 --> 00:34:20.619
data so you can update your UI to say
 

00:34:20.619 --> 00:34:22.859
data so you can update your UI to say
what's currently playing you can

00:34:22.859 --> 00:34:22.869
what's currently playing you can
 

00:34:22.869 --> 00:34:24.539
what's currently playing you can
actually get the playback state so

00:34:24.539 --> 00:34:24.549
actually get the playback state so
 

00:34:24.549 --> 00:34:26.490
actually get the playback state so
you'll know hey are we playing are we

00:34:26.490 --> 00:34:26.500
you'll know hey are we playing are we
 

00:34:26.500 --> 00:34:28.889
you'll know hey are we playing are we
paused or rebuffing so you'll be able to

00:34:28.889 --> 00:34:28.899
paused or rebuffing so you'll be able to
 

00:34:28.899 --> 00:34:32.309
paused or rebuffing so you'll be able to
update the UI based on those actions and

00:34:32.309 --> 00:34:32.319
update the UI based on those actions and
 

00:34:32.319 --> 00:34:34.500
update the UI based on those actions and
then there's also a transport controls

00:34:34.500 --> 00:34:34.510
then there's also a transport controls
 

00:34:34.510 --> 00:34:37.139
then there's also a transport controls
callback and here actually gives you

00:34:37.139 --> 00:34:37.149
callback and here actually gives you
 

00:34:37.149 --> 00:34:38.849
callback and here actually gives you
kind of that one to one so it has

00:34:38.849 --> 00:34:38.859
kind of that one to one so it has
 

00:34:38.859 --> 00:34:42.029
kind of that one to one so it has
methods like play pause skip to next

00:34:42.029 --> 00:34:42.039
methods like play pause skip to next
 

00:34:42.039 --> 00:34:45.029
methods like play pause skip to next
that directly correspond with the

00:34:45.029 --> 00:34:45.039
that directly correspond with the
 

00:34:45.039 --> 00:34:46.799
that directly correspond with the
callback we've registered in our media

00:34:46.799 --> 00:34:46.809
callback we've registered in our media
 

00:34:46.809 --> 00:34:49.710
callback we've registered in our media
session combat so you can very easily

00:34:49.710 --> 00:34:49.720
session combat so you can very easily
 

00:34:49.720 --> 00:34:52.909
session combat so you can very easily
hook up then your play button to

00:34:52.909 --> 00:34:52.919
hook up then your play button to
 

00:34:52.919 --> 00:34:56.039
hook up then your play button to
transport controls play and you're done

00:34:56.039 --> 00:34:56.049
transport controls play and you're done
 

00:34:56.049 --> 00:34:58.740
transport controls play and you're done
no additional communication steps you

00:34:58.740 --> 00:34:58.750
no additional communication steps you
 

00:34:58.750 --> 00:35:00.870
no additional communication steps you
need as soon as you have a media

00:35:00.870 --> 00:35:00.880
need as soon as you have a media
 

00:35:00.880 --> 00:35:04.430
need as soon as you have a media
controller compat it's one thing though

00:35:04.430 --> 00:35:04.440
controller compat it's one thing though
 

00:35:04.440 --> 00:35:07.920
controller compat it's one thing though
you actually need to get immediate

00:35:07.920 --> 00:35:07.930
you actually need to get immediate
 

00:35:07.930 --> 00:35:12.029
you actually need to get immediate
controller compat instance and to do

00:35:12.029 --> 00:35:12.039
controller compat instance and to do
 

00:35:12.039 --> 00:35:13.170
controller compat instance and to do
that we're actually going to use that

00:35:13.170 --> 00:35:13.180
that we're actually going to use that
 

00:35:13.180 --> 00:35:15.569
that we're actually going to use that
same session token that we added to our

00:35:15.569 --> 00:35:15.579
same session token that we added to our
 

00:35:15.579 --> 00:35:18.029
same session token that we added to our
notification we just somehow need to get

00:35:18.029 --> 00:35:18.039
notification we just somehow need to get
 

00:35:18.039 --> 00:35:22.829
notification we just somehow need to get
that from our service to our UI so

00:35:22.829 --> 00:35:22.839
that from our service to our UI so
 

00:35:22.839 --> 00:35:24.569
that from our service to our UI so
there's a really nice class that does

00:35:24.569 --> 00:35:24.579
there's a really nice class that does
 

00:35:24.579 --> 00:35:25.460
there's a really nice class that does
that too

00:35:25.460 --> 00:35:25.470
that too
 

00:35:25.470 --> 00:35:27.589
that too
it's like thought of everything it's

00:35:27.589 --> 00:35:27.599
it's like thought of everything it's
 

00:35:27.599 --> 00:35:30.470
it's like thought of everything it's
called Media Browser service and the

00:35:30.470 --> 00:35:30.480
called Media Browser service and the
 

00:35:30.480 --> 00:35:33.920
called Media Browser service and the
Media Browser and when you create a

00:35:33.920 --> 00:35:33.930
Media Browser and when you create a
 

00:35:33.930 --> 00:35:36.290
Media Browser and when you create a
media browser service rather than just a

00:35:36.290 --> 00:35:36.300
media browser service rather than just a
 

00:35:36.300 --> 00:35:39.560
media browser service rather than just a
service it actually gives you mechanisms

00:35:39.560 --> 00:35:39.570
service it actually gives you mechanisms
 

00:35:39.570 --> 00:35:42.589
service it actually gives you mechanisms
to connect to your service from your UI

00:35:42.589 --> 00:35:42.599
to connect to your service from your UI
 

00:35:42.599 --> 00:35:46.010
to connect to your service from your UI
and then retrieve the token as well as

00:35:46.010 --> 00:35:46.020
and then retrieve the token as well as
 

00:35:46.020 --> 00:35:48.800
and then retrieve the token as well as
get new api's which you guessed it

00:35:48.800 --> 00:35:48.810
get new api's which you guessed it
 

00:35:48.810 --> 00:35:52.010
get new api's which you guessed it
allows you to browse media on your

00:35:52.010 --> 00:35:52.020
allows you to browse media on your
 

00:35:52.020 --> 00:35:53.960
allows you to browse media on your
device so this may be able to easily

00:35:53.960 --> 00:35:53.970
device so this may be able to easily
 

00:35:53.970 --> 00:35:57.740
device so this may be able to easily
build out your UI based on say a list of

00:35:57.740 --> 00:35:57.750
build out your UI based on say a list of
 

00:35:57.750 --> 00:36:00.560
build out your UI based on say a list of
tracks or a list of albums and any other

00:36:00.560 --> 00:36:00.570
tracks or a list of albums and any other
 

00:36:00.570 --> 00:36:02.359
tracks or a list of albums and any other
kind of things you want there's actually

00:36:02.359 --> 00:36:02.369
kind of things you want there's actually
 

00:36:02.369 --> 00:36:05.210
kind of things you want there's actually
required for Android auto integration if

00:36:05.210 --> 00:36:05.220
required for Android auto integration if
 

00:36:05.220 --> 00:36:07.040
required for Android auto integration if
you think about Android auto you don't

00:36:07.040 --> 00:36:07.050
you think about Android auto you don't
 

00:36:07.050 --> 00:36:09.740
you think about Android auto you don't
have control over the UI itself because

00:36:09.740 --> 00:36:09.750
have control over the UI itself because
 

00:36:09.750 --> 00:36:12.589
have control over the UI itself because
of car safety but you do have control

00:36:12.589 --> 00:36:12.599
of car safety but you do have control
 

00:36:12.599 --> 00:36:15.109
of car safety but you do have control
over what audio tracks appear in your

00:36:15.109 --> 00:36:15.119
over what audio tracks appear in your
 

00:36:15.119 --> 00:36:17.030
over what audio tracks appear in your
media playback and that's all done

00:36:17.030 --> 00:36:17.040
media playback and that's all done
 

00:36:17.040 --> 00:36:19.339
media playback and that's all done
through Media Browser service it also

00:36:19.339 --> 00:36:19.349
through Media Browser service it also
 

00:36:19.349 --> 00:36:22.339
through Media Browser service it also
adds a browse action on Android wear

00:36:22.339 --> 00:36:22.349
adds a browse action on Android wear
 

00:36:22.349 --> 00:36:24.859
adds a browse action on Android wear
which if you scroll all the way over

00:36:24.859 --> 00:36:24.869
which if you scroll all the way over
 

00:36:24.869 --> 00:36:26.210
which if you scroll all the way over
from a playback action you'll see a

00:36:26.210 --> 00:36:26.220
from a playback action you'll see a
 

00:36:26.220 --> 00:36:27.589
from a playback action you'll see a
browse button you'll actually be able to

00:36:27.589 --> 00:36:27.599
browse button you'll actually be able to
 

00:36:27.599 --> 00:36:30.380
browse button you'll actually be able to
collect select the next track directly

00:36:30.380 --> 00:36:30.390
collect select the next track directly
 

00:36:30.390 --> 00:36:34.040
collect select the next track directly
from there so it's really simple to

00:36:34.040 --> 00:36:34.050
from there so it's really simple to
 

00:36:34.050 --> 00:36:36.190
from there so it's really simple to
actually use Media Browser service

00:36:36.190 --> 00:36:36.200
actually use Media Browser service
 

00:36:36.200 --> 00:36:38.720
actually use Media Browser service
instead of extending service you extend

00:36:38.720 --> 00:36:38.730
instead of extending service you extend
 

00:36:38.730 --> 00:36:41.000
instead of extending service you extend
Media Browser service and there was just

00:36:41.000 --> 00:36:41.010
Media Browser service and there was just
 

00:36:41.010 --> 00:36:43.640
Media Browser service and there was just
one method to do set session token' in

00:36:43.640 --> 00:36:43.650
one method to do set session token' in
 

00:36:43.650 --> 00:36:45.859
one method to do set session token' in
your oncreate this is what ties in that

00:36:45.859 --> 00:36:45.869
your oncreate this is what ties in that
 

00:36:45.869 --> 00:36:48.109
your oncreate this is what ties in that
session token' so that your media

00:36:48.109 --> 00:36:48.119
session token' so that your media
 

00:36:48.119 --> 00:36:50.270
session token' so that your media
browser service knows alright well what

00:36:50.270 --> 00:36:50.280
browser service knows alright well what
 

00:36:50.280 --> 00:36:53.240
browser service knows alright well what
is that token I need of course there are

00:36:53.240 --> 00:36:53.250
is that token I need of course there are
 

00:36:53.250 --> 00:36:55.520
is that token I need of course there are
the new methods on get root which is

00:36:55.520 --> 00:36:55.530
the new methods on get root which is
 

00:36:55.530 --> 00:36:56.750
the new methods on get root which is
kind of the root of your whole

00:36:56.750 --> 00:36:56.760
kind of the root of your whole
 

00:36:56.760 --> 00:36:59.510
kind of the root of your whole
application as well as onload children

00:36:59.510 --> 00:36:59.520
application as well as onload children
 

00:36:59.520 --> 00:37:01.250
application as well as onload children
on load item which you could expect

00:37:01.250 --> 00:37:01.260
on load item which you could expect
 

00:37:01.260 --> 00:37:04.130
on load item which you could expect
loads a list of tracks or a single track

00:37:04.130 --> 00:37:04.140
loads a list of tracks or a single track
 

00:37:04.140 --> 00:37:08.030
loads a list of tracks or a single track
and we actually have an example the

00:37:08.030 --> 00:37:08.040
and we actually have an example the
 

00:37:08.040 --> 00:37:10.190
and we actually have an example the
universal Android music player you amp

00:37:10.190 --> 00:37:10.200
universal Android music player you amp
 

00:37:10.200 --> 00:37:12.770
universal Android music player you amp
which goes through this entire flow and

00:37:12.770 --> 00:37:12.780
which goes through this entire flow and
 

00:37:12.780 --> 00:37:15.770
which goes through this entire flow and
has a lot more code it goes through

00:37:15.770 --> 00:37:15.780
has a lot more code it goes through
 

00:37:15.780 --> 00:37:17.570
has a lot more code it goes through
basically everything we've talked about

00:37:17.570 --> 00:37:17.580
basically everything we've talked about
 

00:37:17.580 --> 00:37:22.310
basically everything we've talked about
here today now one downside is that

00:37:22.310 --> 00:37:22.320
here today now one downside is that
 

00:37:22.320 --> 00:37:25.640
here today now one downside is that
Media Browser service is API 21 and

00:37:25.640 --> 00:37:25.650
Media Browser service is API 21 and
 

00:37:25.650 --> 00:37:28.040
Media Browser service is API 21 and
above so we're actually working on back

00:37:28.040 --> 00:37:28.050
above so we're actually working on back
 

00:37:28.050 --> 00:37:29.750
above so we're actually working on back
boarding it right now we have a version

00:37:29.750 --> 00:37:29.760
boarding it right now we have a version
 

00:37:29.760 --> 00:37:31.310
boarding it right now we have a version
that works it's going to be in the next

00:37:31.310 --> 00:37:31.320
that works it's going to be in the next
 

00:37:31.320 --> 00:37:33.500
that works it's going to be in the next
version support library but if you can't

00:37:33.500 --> 00:37:33.510
version support library but if you can't
 

00:37:33.510 --> 00:37:35.450
version support library but if you can't
wait there's a few things you can do in

00:37:35.450 --> 00:37:35.460
wait there's a few things you can do in
 

00:37:35.460 --> 00:37:37.130
wait there's a few things you can do in
the meantime because remember all we

00:37:37.130 --> 00:37:37.140
the meantime because remember all we
 

00:37:37.140 --> 00:37:38.900
the meantime because remember all we
need is just a token in are you

00:37:38.900 --> 00:37:38.910
need is just a token in are you
 

00:37:38.910 --> 00:37:43.039
need is just a token in are you
line so we could actually just use a

00:37:43.039 --> 00:37:43.049
line so we could actually just use a
 

00:37:43.049 --> 00:37:46.670
line so we could actually just use a
static method and called get session

00:37:46.670 --> 00:37:46.680
static method and called get session
 

00:37:46.680 --> 00:37:48.589
static method and called get session
token which then retrieves the token

00:37:48.589 --> 00:37:48.599
token which then retrieves the token
 

00:37:48.599 --> 00:37:51.410
token which then retrieves the token
right if you have your favorite event

00:37:51.410 --> 00:37:51.420
right if you have your favorite event
 

00:37:51.420 --> 00:37:54.650
right if you have your favorite event
bus application of choice there's

00:37:54.650 --> 00:37:54.660
bus application of choice there's
 

00:37:54.660 --> 00:37:56.480
bus application of choice there's
certainly very many ways of getting a

00:37:56.480 --> 00:37:56.490
certainly very many ways of getting a
 

00:37:56.490 --> 00:37:59.720
certainly very many ways of getting a
random item from one to the other it do

00:37:59.720 --> 00:37:59.730
random item from one to the other it do
 

00:37:59.730 --> 00:38:01.549
random item from one to the other it do
note that the session token is parcel

00:38:01.549 --> 00:38:01.559
note that the session token is parcel
 

00:38:01.559 --> 00:38:03.589
note that the session token is parcel
able so you can send it over broadcasts

00:38:03.589 --> 00:38:03.599
able so you can send it over broadcasts
 

00:38:03.599 --> 00:38:06.700
able so you can send it over broadcasts
or between processes without a problem

00:38:06.700 --> 00:38:06.710
or between processes without a problem
 

00:38:06.710 --> 00:38:10.430
or between processes without a problem
the other choice is to kind of build a

00:38:10.430 --> 00:38:10.440
the other choice is to kind of build a
 

00:38:10.440 --> 00:38:13.220
the other choice is to kind of build a
media browser service light basically do

00:38:13.220 --> 00:38:13.230
media browser service light basically do
 

00:38:13.230 --> 00:38:16.339
media browser service light basically do
your own binding to the service and then

00:38:16.339 --> 00:38:16.349
your own binding to the service and then
 

00:38:16.349 --> 00:38:19.520
your own binding to the service and then
actually just have the get token as part

00:38:19.520 --> 00:38:19.530
actually just have the get token as part
 

00:38:19.530 --> 00:38:22.069
actually just have the get token as part
of that bind or API so it's a little bit

00:38:22.069 --> 00:38:22.079
of that bind or API so it's a little bit
 

00:38:22.079 --> 00:38:24.049
of that bind or API so it's a little bit
more complicated to get through that but

00:38:24.049 --> 00:38:24.059
more complicated to get through that but
 

00:38:24.059 --> 00:38:25.460
more complicated to get through that but
we have a nice article about bound

00:38:25.460 --> 00:38:25.470
we have a nice article about bound
 

00:38:25.470 --> 00:38:27.289
we have a nice article about bound
services if you're interested in going

00:38:27.289 --> 00:38:27.299
services if you're interested in going
 

00:38:27.299 --> 00:38:31.250
services if you're interested in going
through that approach well and so that's

00:38:31.250 --> 00:38:31.260
through that approach well and so that's
 

00:38:31.260 --> 00:38:34.160
through that approach well and so that's
about everything this this is the slide

00:38:34.160 --> 00:38:34.170
about everything this this is the slide
 

00:38:34.170 --> 00:38:35.480
about everything this this is the slide
I could have just given to you this at

00:38:35.480 --> 00:38:35.490
I could have just given to you this at
 

00:38:35.490 --> 00:38:37.609
I could have just given to you this at
the beginning but I would have felt a

00:38:37.609 --> 00:38:37.619
the beginning but I would have felt a
 

00:38:37.619 --> 00:38:40.370
the beginning but I would have felt a
little anti-climactic but this is

00:38:40.370 --> 00:38:40.380
little anti-climactic but this is
 

00:38:40.380 --> 00:38:42.920
little anti-climactic but this is
actually everything that we need to get

00:38:42.920 --> 00:38:42.930
actually everything that we need to get
 

00:38:42.930 --> 00:38:44.720
actually everything that we need to get
our service to be doing literally

00:38:44.720 --> 00:38:44.730
our service to be doing literally
 

00:38:44.730 --> 00:38:47.000
our service to be doing literally
everything it possibly can to give the

00:38:47.000 --> 00:38:47.010
everything it possibly can to give the
 

00:38:47.010 --> 00:38:50.329
everything it possibly can to give the
best user experience for our users that

00:38:50.329 --> 00:38:50.339
best user experience for our users that
 

00:38:50.339 --> 00:38:52.059
best user experience for our users that
means playing well with audio playback

00:38:52.059 --> 00:38:52.069
means playing well with audio playback
 

00:38:52.069 --> 00:38:55.269
means playing well with audio playback
having controls everywhere possible

00:38:55.269 --> 00:38:55.279
having controls everywhere possible
 

00:38:55.279 --> 00:38:57.829
having controls everywhere possible
using notifications and using a

00:38:57.829 --> 00:38:57.839
using notifications and using a
 

00:38:57.839 --> 00:38:59.299
using notifications and using a
foreground service to make sure we're

00:38:59.299 --> 00:38:59.309
foreground service to make sure we're
 

00:38:59.309 --> 00:39:01.849
foreground service to make sure we're
not killed in the background as well as

00:39:01.849 --> 00:39:01.859
not killed in the background as well as
 

00:39:01.859 --> 00:39:04.400
not killed in the background as well as
doing Android wear and Android auto

00:39:04.400 --> 00:39:04.410
doing Android wear and Android auto
 

00:39:04.410 --> 00:39:06.740
doing Android wear and Android auto
integrations so that your media playback

00:39:06.740 --> 00:39:06.750
integrations so that your media playback
 

00:39:06.750 --> 00:39:10.069
integrations so that your media playback
works perfectly everywhere so if you

00:39:10.069 --> 00:39:10.079
works perfectly everywhere so if you
 

00:39:10.079 --> 00:39:11.960
works perfectly everywhere so if you
have any questions for me feel free to

00:39:11.960 --> 00:39:11.970
have any questions for me feel free to
 

00:39:11.970 --> 00:39:14.559
have any questions for me feel free to
reach out to me on Google+ or Twitter

00:39:14.559 --> 00:39:14.569
reach out to me on Google+ or Twitter
 

00:39:14.569 --> 00:39:17.120
reach out to me on Google+ or Twitter
happy to answer your questions thanks

00:39:17.120 --> 00:39:17.130
happy to answer your questions thanks
 

00:39:17.130 --> 00:39:29.280
happy to answer your questions thanks
again

00:39:29.280 --> 00:39:29.290
 
 

00:39:29.290 --> 00:39:31.590
 
love

