WEBVTT
Kind: captions
Language: en

00:00:00.060 --> 00:00:02.480
my name is Tim Murray I'm from the

00:00:02.480 --> 00:00:02.490
my name is Tim Murray I'm from the
 

00:00:02.490 --> 00:00:04.970
my name is Tim Murray I'm from the
Android performance team and I'm gonna

00:00:04.970 --> 00:00:04.980
Android performance team and I'm gonna
 

00:00:04.980 --> 00:00:07.550
Android performance team and I'm gonna
talk about systrace which we were to

00:00:07.550 --> 00:00:07.560
talk about systrace which we were to
 

00:00:07.560 --> 00:00:09.379
talk about systrace which we were to
talked about a bit earlier with the

00:00:09.379 --> 00:00:09.389
talked about a bit earlier with the
 

00:00:09.389 --> 00:00:12.259
talked about a bit earlier with the
system tracing and Android studio but

00:00:12.259 --> 00:00:12.269
system tracing and Android studio but
 

00:00:12.269 --> 00:00:15.259
system tracing and Android studio but
I'm going to talk more about the old

00:00:15.259 --> 00:00:15.269
I'm going to talk more about the old
 

00:00:15.269 --> 00:00:19.700
I'm going to talk more about the old
style of looking at traces as well as

00:00:19.700 --> 00:00:19.710
style of looking at traces as well as
 

00:00:19.710 --> 00:00:23.890
style of looking at traces as well as
what you actually do with a trace so

00:00:23.890 --> 00:00:23.900
what you actually do with a trace so
 

00:00:23.900 --> 00:00:26.660
what you actually do with a trace so
what are the big performance goals for a

00:00:26.660 --> 00:00:26.670
what are the big performance goals for a
 

00:00:26.670 --> 00:00:33.380
what are the big performance goals for a
game they're really two big ones number

00:00:33.380 --> 00:00:33.390
game they're really two big ones number
 

00:00:33.390 --> 00:00:35.299
game they're really two big ones number
one you need to get the gameplay fast

00:00:35.299 --> 00:00:35.309
one you need to get the gameplay fast
 

00:00:35.309 --> 00:00:39.410
one you need to get the gameplay fast
the user has to wait 10 20 30 seconds to

00:00:39.410 --> 00:00:39.420
the user has to wait 10 20 30 seconds to
 

00:00:39.420 --> 00:00:44.090
the user has to wait 10 20 30 seconds to
launch a game then you know they're

00:00:44.090 --> 00:00:44.100
launch a game then you know they're
 

00:00:44.100 --> 00:00:45.650
launch a game then you know they're
gonna they're gonna quit they're not

00:00:45.650 --> 00:00:45.660
gonna they're gonna quit they're not
 

00:00:45.660 --> 00:00:46.819
gonna they're gonna quit they're not
gonna be happy with your game they're

00:00:46.819 --> 00:00:46.829
gonna be happy with your game they're
 

00:00:46.829 --> 00:00:49.220
gonna be happy with your game they're
gonna find another game the other thing

00:00:49.220 --> 00:00:49.230
gonna find another game the other thing
 

00:00:49.230 --> 00:00:51.260
gonna find another game the other thing
is you need to maintain interactivity

00:00:51.260 --> 00:00:51.270
is you need to maintain interactivity
 

00:00:51.270 --> 00:00:54.590
is you need to maintain interactivity
during gameplay it's great if you get

00:00:54.590 --> 00:00:54.600
during gameplay it's great if you get
 

00:00:54.600 --> 00:00:55.910
during gameplay it's great if you get
some gameplay fast but if the gameplay

00:00:55.910 --> 00:00:55.920
some gameplay fast but if the gameplay
 

00:00:55.920 --> 00:00:59.060
some gameplay fast but if the gameplay
is super janky dropping frames all over

00:00:59.060 --> 00:00:59.070
is super janky dropping frames all over
 

00:00:59.070 --> 00:01:02.110
is super janky dropping frames all over
the place it's really bad

00:01:02.110 --> 00:01:02.120
the place it's really bad
 

00:01:02.120 --> 00:01:05.929
the place it's really bad
so the problem is mobile devices are

00:01:05.929 --> 00:01:05.939
so the problem is mobile devices are
 

00:01:05.939 --> 00:01:07.820
so the problem is mobile devices are
really complicated you know you look at

00:01:07.820 --> 00:01:07.830
really complicated you know you look at
 

00:01:07.830 --> 00:01:10.429
really complicated you know you look at
a current flagship phone and it's an 8

00:01:10.429 --> 00:01:10.439
a current flagship phone and it's an 8
 

00:01:10.439 --> 00:01:14.950
a current flagship phone and it's an 8
core CPU with heterogeneous CPU cores

00:01:14.950 --> 00:01:14.960
core CPU with heterogeneous CPU cores
 

00:01:14.960 --> 00:01:20.480
core CPU with heterogeneous CPU cores
and there's a giant GPU and your flash

00:01:20.480 --> 00:01:20.490
and there's a giant GPU and your flash
 

00:01:20.490 --> 00:01:22.940
and there's a giant GPU and your flash
performance is totally different than

00:01:22.940 --> 00:01:22.950
performance is totally different than
 

00:01:22.950 --> 00:01:25.340
performance is totally different than
what you would expect on a PC there's a

00:01:25.340 --> 00:01:25.350
what you would expect on a PC there's a
 

00:01:25.350 --> 00:01:29.510
what you would expect on a PC there's a
lot going on you really can't assume

00:01:29.510 --> 00:01:29.520
lot going on you really can't assume
 

00:01:29.520 --> 00:01:33.319
lot going on you really can't assume
anything about how your code runs I've

00:01:33.319 --> 00:01:33.329
anything about how your code runs I've
 

00:01:33.329 --> 00:01:35.270
anything about how your code runs I've
been looking at performance for years

00:01:35.270 --> 00:01:35.280
been looking at performance for years
 

00:01:35.280 --> 00:01:39.410
been looking at performance for years
now I can't predict how Cobra no one

00:01:39.410 --> 00:01:39.420
now I can't predict how Cobra no one
 

00:01:39.420 --> 00:01:42.230
now I can't predict how Cobra no one
should have seen how their code runs so

00:01:42.230 --> 00:01:42.240
should have seen how their code runs so
 

00:01:42.240 --> 00:01:44.920
should have seen how their code runs so
that's why we have systrace it shows you

00:01:44.920 --> 00:01:44.930
that's why we have systrace it shows you
 

00:01:44.930 --> 00:01:48.469
that's why we have systrace it shows you
what actually is running it is sort of

00:01:48.469 --> 00:01:48.479
what actually is running it is sort of
 

00:01:48.479 --> 00:01:51.980
what actually is running it is sort of
truth like capital P truth assist ray

00:01:51.980 --> 00:01:51.990
truth like capital P truth assist ray
 

00:01:51.990 --> 00:01:54.230
truth like capital P truth assist ray
says something ran at a certain time it

00:01:54.230 --> 00:01:54.240
says something ran at a certain time it
 

00:01:54.240 --> 00:01:57.200
says something ran at a certain time it
ran at a certain time you cannot lie to

00:01:57.200 --> 00:01:57.210
ran at a certain time you cannot lie to
 

00:01:57.210 --> 00:02:00.289
ran at a certain time you cannot lie to
it you cannot trick it it's outputting

00:02:00.289 --> 00:02:00.299
it you cannot trick it it's outputting
 

00:02:00.299 --> 00:02:03.230
it you cannot trick it it's outputting
events from the kernel directly whatever

00:02:03.230 --> 00:02:03.240
events from the kernel directly whatever
 

00:02:03.240 --> 00:02:04.910
events from the kernel directly whatever
systrace says is happening is actually

00:02:04.910 --> 00:02:04.920
systrace says is happening is actually
 

00:02:04.920 --> 00:02:06.950
systrace says is happening is actually
happening which makes it really great

00:02:06.950 --> 00:02:06.960
happening which makes it really great
 

00:02:06.960 --> 00:02:09.139
happening which makes it really great
the other great thing about it because

00:02:09.139 --> 00:02:09.149
the other great thing about it because
 

00:02:09.149 --> 00:02:11.600
the other great thing about it because
it's so low level the overhead is

00:02:11.600 --> 00:02:11.610
it's so low level the overhead is
 

00:02:11.610 --> 00:02:14.320
it's so low level the overhead is
basically zero

00:02:14.320 --> 00:02:14.330
basically zero
 

00:02:14.330 --> 00:02:17.510
basically zero
we will just turn on systrace and let it

00:02:17.510 --> 00:02:17.520
we will just turn on systrace and let it
 

00:02:17.520 --> 00:02:19.640
we will just turn on systrace and let it
stream into a buffer like a in memory

00:02:19.640 --> 00:02:19.650
stream into a buffer like a in memory
 

00:02:19.650 --> 00:02:23.120
stream into a buffer like a in memory
buffer so you know you record you can

00:02:23.120 --> 00:02:23.130
buffer so you know you record you can
 

00:02:23.130 --> 00:02:25.070
buffer so you know you record you can
get the last 10 or 20 seconds out of it

00:02:25.070 --> 00:02:25.080
get the last 10 or 20 seconds out of it
 

00:02:25.080 --> 00:02:29.530
get the last 10 or 20 seconds out of it
it has no measurable overhead its sub 1%

00:02:29.530 --> 00:02:29.540
it has no measurable overhead its sub 1%
 

00:02:29.540 --> 00:02:32.330
it has no measurable overhead its sub 1%
so we do that and we find a ton of

00:02:32.330 --> 00:02:32.340
so we do that and we find a ton of
 

00:02:32.340 --> 00:02:36.440
so we do that and we find a ton of
performance bugs that way it's great so

00:02:36.440 --> 00:02:36.450
performance bugs that way it's great so
 

00:02:36.450 --> 00:02:37.490
performance bugs that way it's great so
first of all let's talk about how to

00:02:37.490 --> 00:02:37.500
first of all let's talk about how to
 

00:02:37.500 --> 00:02:40.040
first of all let's talk about how to
take a trace and I'm gonna not talk

00:02:40.040 --> 00:02:40.050
take a trace and I'm gonna not talk
 

00:02:40.050 --> 00:02:41.750
take a trace and I'm gonna not talk
about the Android studio side of things

00:02:41.750 --> 00:02:41.760
about the Android studio side of things
 

00:02:41.760 --> 00:02:44.090
about the Android studio side of things
because we already talked about that I'm

00:02:44.090 --> 00:02:44.100
because we already talked about that I'm
 

00:02:44.100 --> 00:02:47.330
because we already talked about that I'm
gonna talk about the two other ways we

00:02:47.330 --> 00:02:47.340
gonna talk about the two other ways we
 

00:02:47.340 --> 00:02:50.840
gonna talk about the two other ways we
have to take a trace so first of all

00:02:50.840 --> 00:02:50.850
have to take a trace so first of all
 

00:02:50.850 --> 00:02:55.280
have to take a trace so first of all
most of the tools for tracing other than

00:02:55.280 --> 00:02:55.290
most of the tools for tracing other than
 

00:02:55.290 --> 00:02:57.110
most of the tools for tracing other than
Android studio exist in this open source

00:02:57.110 --> 00:02:57.120
Android studio exist in this open source
 

00:02:57.120 --> 00:02:59.540
Android studio exist in this open source
project called catapult it's maintained

00:02:59.540 --> 00:02:59.550
project called catapult it's maintained
 

00:02:59.550 --> 00:03:02.810
project called catapult it's maintained
by people from the Android team and the

00:03:02.810 --> 00:03:02.820
by people from the Android team and the
 

00:03:02.820 --> 00:03:05.360
by people from the Android team and the
chrome team and it lives on github so

00:03:05.360 --> 00:03:05.370
chrome team and it lives on github so
 

00:03:05.370 --> 00:03:08.199
chrome team and it lives on github so
you grab the git repo for catapult and

00:03:08.199 --> 00:03:08.209
you grab the git repo for catapult and
 

00:03:08.209 --> 00:03:11.420
you grab the git repo for catapult and
you end up with a sister a spy thon

00:03:11.420 --> 00:03:11.430
you end up with a sister a spy thon
 

00:03:11.430 --> 00:03:14.030
you end up with a sister a spy thon
binary in that directory catapults

00:03:14.030 --> 00:03:14.040
binary in that directory catapults
 

00:03:14.040 --> 00:03:17.720
binary in that directory catapults
distress baton systrace and that's kind

00:03:17.720 --> 00:03:17.730
distress baton systrace and that's kind
 

00:03:17.730 --> 00:03:21.310
distress baton systrace and that's kind
of the the main shell to using systrace

00:03:21.310 --> 00:03:21.320
of the the main shell to using systrace
 

00:03:21.320 --> 00:03:23.240
of the the main shell to using systrace
if you want to take a trace in the

00:03:23.240 --> 00:03:23.250
if you want to take a trace in the
 

00:03:23.250 --> 00:03:25.009
if you want to take a trace in the
command line essentially you run that

00:03:25.009 --> 00:03:25.019
command line essentially you run that
 

00:03:25.019 --> 00:03:28.070
command line essentially you run that
and you pass a bunch of they're called

00:03:28.070 --> 00:03:28.080
and you pass a bunch of they're called
 

00:03:28.080 --> 00:03:32.840
and you pass a bunch of they're called
tags to assist trace and this will

00:03:32.840 --> 00:03:32.850
tags to assist trace and this will
 

00:03:32.850 --> 00:03:35.270
tags to assist trace and this will
determine the kind of output you get in

00:03:35.270 --> 00:03:35.280
determine the kind of output you get in
 

00:03:35.280 --> 00:03:39.620
determine the kind of output you get in
the trace so here it's going to take a

00:03:39.620 --> 00:03:39.630
the trace so here it's going to take a
 

00:03:39.630 --> 00:03:41.630
the trace so here it's going to take a
trace containing scheduler information

00:03:41.630 --> 00:03:41.640
trace containing scheduler information
 

00:03:41.640 --> 00:03:44.120
trace containing scheduler information
so like exactly what the scheduler is

00:03:44.120 --> 00:03:44.130
so like exactly what the scheduler is
 

00:03:44.130 --> 00:03:47.900
so like exactly what the scheduler is
doing at any given time CPU frequency

00:03:47.900 --> 00:03:47.910
doing at any given time CPU frequency
 

00:03:47.910 --> 00:03:51.800
doing at any given time CPU frequency
and CPU idle information some Android

00:03:51.800 --> 00:03:51.810
and CPU idle information some Android
 

00:03:51.810 --> 00:03:53.300
and CPU idle information some Android
activity manager and window manager

00:03:53.300 --> 00:03:53.310
activity manager and window manager
 

00:03:53.310 --> 00:03:55.880
activity manager and window manager
information then a bunch of information

00:03:55.880 --> 00:03:55.890
information then a bunch of information
 

00:03:55.890 --> 00:03:57.920
information then a bunch of information
about the graphics stack and then a

00:03:57.920 --> 00:03:57.930
about the graphics stack and then a
 

00:03:57.930 --> 00:04:00.440
about the graphics stack and then a
bunch more things well input is useful

00:04:00.440 --> 00:04:00.450
bunch more things well input is useful
 

00:04:00.450 --> 00:04:01.819
bunch more things well input is useful
for game devs but the other ones aren't

00:04:01.819 --> 00:04:01.829
for game devs but the other ones aren't
 

00:04:01.829 --> 00:04:05.840
for game devs but the other ones aren't
too useful input shows you when actual

00:04:05.840 --> 00:04:05.850
too useful input shows you when actual
 

00:04:05.850 --> 00:04:07.580
too useful input shows you when actual
touch event happens so that's really

00:04:07.580 --> 00:04:07.590
touch event happens so that's really
 

00:04:07.590 --> 00:04:09.830
touch event happens so that's really
useful for game developers the last

00:04:09.830 --> 00:04:09.840
useful for game developers the last
 

00:04:09.840 --> 00:04:14.060
useful for game developers the last
three options are not tags so - B is the

00:04:14.060 --> 00:04:14.070
three options are not tags so - B is the
 

00:04:14.070 --> 00:04:17.680
three options are not tags so - B is the
buffer size the buffer size determines

00:04:17.680 --> 00:04:17.690
buffer size the buffer size determines
 

00:04:17.690 --> 00:04:19.969
buffer size the buffer size determines
how much you can actually record in a

00:04:19.969 --> 00:04:19.979
how much you can actually record in a
 

00:04:19.979 --> 00:04:25.840
how much you can actually record in a
trace so it's a per CPU ring buffer in

00:04:25.840 --> 00:04:25.850
trace so it's a per CPU ring buffer in
 

00:04:25.850 --> 00:04:30.280
trace so it's a per CPU ring buffer in
so here this is in kilobytes so on this

00:04:30.280 --> 00:04:30.290
so here this is in kilobytes so on this
 

00:04:30.290 --> 00:04:32.140
so here this is in kilobytes so on this
device I get 16 Meg's

00:04:32.140 --> 00:04:32.150
device I get 16 Meg's
 

00:04:32.150 --> 00:04:38.470
device I get 16 Meg's
per CPU generally you know 10 Meg's or

00:04:38.470 --> 00:04:38.480
per CPU generally you know 10 Meg's or
 

00:04:38.480 --> 00:04:40.840
per CPU generally you know 10 Meg's or
so per CPU is totally fun on a high-end

00:04:40.840 --> 00:04:40.850
so per CPU is totally fun on a high-end
 

00:04:40.850 --> 00:04:43.330
so per CPU is totally fun on a high-end
device it kind of depends how much

00:04:43.330 --> 00:04:43.340
device it kind of depends how much
 

00:04:43.340 --> 00:04:44.650
device it kind of depends how much
context switching you're doing because

00:04:44.650 --> 00:04:44.660
context switching you're doing because
 

00:04:44.660 --> 00:04:48.880
context switching you're doing because
that is probably what what occupies the

00:04:48.880 --> 00:04:48.890
that is probably what what occupies the
 

00:04:48.890 --> 00:04:52.240
that is probably what what occupies the
most space most of the time you can get

00:04:52.240 --> 00:04:52.250
most space most of the time you can get
 

00:04:52.250 --> 00:04:56.080
most space most of the time you can get
about I would say it's about 1 Meg gets

00:04:56.080 --> 00:04:56.090
about I would say it's about 1 Meg gets
 

00:04:56.090 --> 00:04:58.300
about I would say it's about 1 Meg gets
you about 2 seconds of a trace so you

00:04:58.300 --> 00:04:58.310
you about 2 seconds of a trace so you
 

00:04:58.310 --> 00:05:00.600
you about 2 seconds of a trace so you
can record a pretty long trace with this

00:05:00.600 --> 00:05:00.610
can record a pretty long trace with this
 

00:05:00.610 --> 00:05:05.850
can record a pretty long trace with this
- T is an optional argument it tells you

00:05:05.850 --> 00:05:05.860
- T is an optional argument it tells you
 

00:05:05.860 --> 00:05:08.680
- T is an optional argument it tells you
how long to record the trace for if you

00:05:08.680 --> 00:05:08.690
how long to record the trace for if you
 

00:05:08.690 --> 00:05:11.830
how long to record the trace for if you
don't pass - T you just press ENTER to

00:05:11.830 --> 00:05:11.840
don't pass - T you just press ENTER to
 

00:05:11.840 --> 00:05:14.980
don't pass - T you just press ENTER to
stop the trace and then - o is where to

00:05:14.980 --> 00:05:14.990
stop the trace and then - o is where to
 

00:05:14.990 --> 00:05:16.600
stop the trace and then - o is where to
write the trace if you don't pass that

00:05:16.600 --> 00:05:16.610
write the trace if you don't pass that
 

00:05:16.610 --> 00:05:18.340
write the trace if you don't pass that
show it defaults to trace dot html'

00:05:18.340 --> 00:05:18.350
show it defaults to trace dot html'
 

00:05:18.350 --> 00:05:21.100
show it defaults to trace dot html'
which is fine but also very annoying

00:05:21.100 --> 00:05:21.110
which is fine but also very annoying
 

00:05:21.110 --> 00:05:22.600
which is fine but also very annoying
when you start taking hundreds of traces

00:05:22.600 --> 00:05:22.610
when you start taking hundreds of traces
 

00:05:22.610 --> 00:05:26.740
when you start taking hundreds of traces
and they're all named trace on HTML so

00:05:26.740 --> 00:05:26.750
and they're all named trace on HTML so
 

00:05:26.750 --> 00:05:28.720
and they're all named trace on HTML so
here's the cool new thing in Android P

00:05:28.720 --> 00:05:28.730
here's the cool new thing in Android P
 

00:05:28.730 --> 00:05:33.490
here's the cool new thing in Android P
which is actually incredibly useful so

00:05:33.490 --> 00:05:33.500
which is actually incredibly useful so
 

00:05:33.500 --> 00:05:35.680
which is actually incredibly useful so
it's really annoying to have to have

00:05:35.680 --> 00:05:35.690
it's really annoying to have to have
 

00:05:35.690 --> 00:05:37.090
it's really annoying to have to have
your phone plugged in to take a trace

00:05:37.090 --> 00:05:37.100
your phone plugged in to take a trace
 

00:05:37.100 --> 00:05:39.580
your phone plugged in to take a trace
and most does this trace actually lives

00:05:39.580 --> 00:05:39.590
and most does this trace actually lives
 

00:05:39.590 --> 00:05:42.610
and most does this trace actually lives
on the device these trace binary is

00:05:42.610 --> 00:05:42.620
on the device these trace binary is
 

00:05:42.620 --> 00:05:44.320
on the device these trace binary is
basically just talking to device ID

00:05:44.320 --> 00:05:44.330
basically just talking to device ID
 

00:05:44.330 --> 00:05:47.290
basically just talking to device ID
stuff so in Android P we made it so you

00:05:47.290 --> 00:05:47.300
stuff so in Android P we made it so you
 

00:05:47.300 --> 00:05:52.180
stuff so in Android P we made it so you
can take a trace from the device the

00:05:52.180 --> 00:05:52.190
can take a trace from the device the
 

00:05:52.190 --> 00:05:55.510
can take a trace from the device the
great thing about this is that you turn

00:05:55.510 --> 00:05:55.520
great thing about this is that you turn
 

00:05:55.520 --> 00:05:57.250
great thing about this is that you turn
on developer options and you get this

00:05:57.250 --> 00:05:57.260
on developer options and you get this
 

00:05:57.260 --> 00:06:00.850
on developer options and you get this
quick settings tile once you turn it on

00:06:00.850 --> 00:06:00.860
quick settings tile once you turn it on
 

00:06:00.860 --> 00:06:02.530
quick settings tile once you turn it on
you can start taking a trace and it will

00:06:02.530 --> 00:06:02.540
you can start taking a trace and it will
 

00:06:02.540 --> 00:06:04.780
you can start taking a trace and it will
stream into that in memory buffer so you

00:06:04.780 --> 00:06:04.790
stream into that in memory buffer so you
 

00:06:04.790 --> 00:06:06.970
stream into that in memory buffer so you
can turn on a trace it has super low

00:06:06.970 --> 00:06:06.980
can turn on a trace it has super low
 

00:06:06.980 --> 00:06:08.500
can turn on a trace it has super low
overhead so you can just leave it on to

00:06:08.500 --> 00:06:08.510
overhead so you can just leave it on to
 

00:06:08.510 --> 00:06:10.660
overhead so you can just leave it on to
do your thing and play your game and

00:06:10.660 --> 00:06:10.670
do your thing and play your game and
 

00:06:10.670 --> 00:06:12.820
do your thing and play your game and
then you see like hey that seemed like

00:06:12.820 --> 00:06:12.830
then you see like hey that seemed like
 

00:06:12.830 --> 00:06:14.200
then you see like hey that seemed like
it took a long time or hey I just

00:06:14.200 --> 00:06:14.210
it took a long time or hey I just
 

00:06:14.210 --> 00:06:16.060
it took a long time or hey I just
dropped a bunch of frames you pull down

00:06:16.060 --> 00:06:16.070
dropped a bunch of frames you pull down
 

00:06:16.070 --> 00:06:18.490
dropped a bunch of frames you pull down
quick settings stop the trace and you've

00:06:18.490 --> 00:06:18.500
quick settings stop the trace and you've
 

00:06:18.500 --> 00:06:20.470
quick settings stop the trace and you've
just captured exactly what the problem

00:06:20.470 --> 00:06:20.480
just captured exactly what the problem
 

00:06:20.480 --> 00:06:22.810
just captured exactly what the problem
is and you can just pull it off or email

00:06:22.810 --> 00:06:22.820
is and you can just pull it off or email
 

00:06:22.820 --> 00:06:26.070
is and you can just pull it off or email
it to yourself and see what's going on

00:06:26.070 --> 00:06:26.080
it to yourself and see what's going on
 

00:06:26.080 --> 00:06:28.690
it to yourself and see what's going on
it will pop up a dialog that allows you

00:06:28.690 --> 00:06:28.700
it will pop up a dialog that allows you
 

00:06:28.700 --> 00:06:31.090
it will pop up a dialog that allows you
to email it or share it to drive or

00:06:31.090 --> 00:06:31.100
to email it or share it to drive or
 

00:06:31.100 --> 00:06:34.420
to email it or share it to drive or
dropbox or whatever it's also saved to

00:06:34.420 --> 00:06:34.430
dropbox or whatever it's also saved to
 

00:06:34.430 --> 00:06:37.630
dropbox or whatever it's also saved to
the device in data local traces if you

00:06:37.630 --> 00:06:37.640
the device in data local traces if you
 

00:06:37.640 --> 00:06:38.559
the device in data local traces if you
do want to pull it off the

00:06:38.559 --> 00:06:38.569
do want to pull it off the
 

00:06:38.569 --> 00:06:44.859
do want to pull it off the
ATB the only special thing about the the

00:06:44.859 --> 00:06:44.869
ATB the only special thing about the the
 

00:06:44.869 --> 00:06:47.499
ATB the only special thing about the the
system tracing like quick settings that

00:06:47.499 --> 00:06:47.509
system tracing like quick settings that
 

00:06:47.509 --> 00:06:49.839
system tracing like quick settings that
approach is that they are compressed on

00:06:49.839 --> 00:06:49.849
approach is that they are compressed on
 

00:06:49.849 --> 00:06:53.290
approach is that they are compressed on
the device so you have to do some

00:06:53.290 --> 00:06:53.300
the device so you have to do some
 

00:06:53.300 --> 00:06:55.359
the device so you have to do some
post-processing with systrace and

00:06:55.359 --> 00:06:55.369
post-processing with systrace and
 

00:06:55.369 --> 00:06:57.429
post-processing with systrace and
catapult and I think and rescue is

00:06:57.429 --> 00:06:57.439
catapult and I think and rescue is
 

00:06:57.439 --> 00:06:59.199
catapult and I think and rescue is
adding support for this soon so you can

00:06:59.199 --> 00:06:59.209
adding support for this soon so you can
 

00:06:59.209 --> 00:07:02.230
adding support for this soon so you can
import to Android studio as well but you

00:07:02.230 --> 00:07:02.240
import to Android studio as well but you
 

00:07:02.240 --> 00:07:05.999
import to Android studio as well but you
process with the firm file argument and

00:07:05.999 --> 00:07:06.009
process with the firm file argument and
 

00:07:06.009 --> 00:07:09.760
process with the firm file argument and
you will get a trace out of it a normal

00:07:09.760 --> 00:07:09.770
you will get a trace out of it a normal
 

00:07:09.770 --> 00:07:14.499
you will get a trace out of it a normal
HTML trace so okay you got a trace what

00:07:14.499 --> 00:07:14.509
HTML trace so okay you got a trace what
 

00:07:14.509 --> 00:07:16.600
HTML trace so okay you got a trace what
do you do with a trace because it's kind

00:07:16.600 --> 00:07:16.610
do you do with a trace because it's kind
 

00:07:16.610 --> 00:07:19.149
do you do with a trace because it's kind
of a lot let's go through a pretty

00:07:19.149 --> 00:07:19.159
of a lot let's go through a pretty
 

00:07:19.159 --> 00:07:20.320
of a lot let's go through a pretty
simple one and then we'll go through

00:07:20.320 --> 00:07:20.330
simple one and then we'll go through
 

00:07:20.330 --> 00:07:25.389
simple one and then we'll go through
some gaming ones so I don't know how

00:07:25.389 --> 00:07:25.399
some gaming ones so I don't know how
 

00:07:25.399 --> 00:07:27.309
some gaming ones so I don't know how
legible this is this trace doesn't

00:07:27.309 --> 00:07:27.319
legible this is this trace doesn't
 

00:07:27.319 --> 00:07:32.799
legible this is this trace doesn't
really present well but essentially you

00:07:32.799 --> 00:07:32.809
really present well but essentially you
 

00:07:32.809 --> 00:07:36.100
really present well but essentially you
have a big timeline view here so I took

00:07:36.100 --> 00:07:36.110
have a big timeline view here so I took
 

00:07:36.110 --> 00:07:39.219
have a big timeline view here so I took
a trace of application startup I think

00:07:39.219 --> 00:07:39.229
a trace of application startup I think
 

00:07:39.229 --> 00:07:43.089
a trace of application startup I think
calculators start up and at the top

00:07:43.089 --> 00:07:43.099
calculators start up and at the top
 

00:07:43.099 --> 00:07:44.859
calculators start up and at the top
there's some basic information about the

00:07:44.859 --> 00:07:44.869
there's some basic information about the
 

00:07:44.869 --> 00:07:45.969
there's some basic information about the
overall state of the device this

00:07:45.969 --> 00:07:45.979
overall state of the device this
 

00:07:45.979 --> 00:07:48.519
overall state of the device this
interactions and alert stuff the kernel

00:07:48.519 --> 00:07:48.529
interactions and alert stuff the kernel
 

00:07:48.529 --> 00:07:50.949
interactions and alert stuff the kernel
line is where we can see what is

00:07:50.949 --> 00:07:50.959
line is where we can see what is
 

00:07:50.959 --> 00:07:53.769
line is where we can see what is
actually running on every CPU core at

00:07:53.769 --> 00:07:53.779
actually running on every CPU core at
 

00:07:53.779 --> 00:07:56.499
actually running on every CPU core at
any particular time and then we start

00:07:56.499 --> 00:07:56.509
any particular time and then we start
 

00:07:56.509 --> 00:07:58.449
any particular time and then we start
getting into a lot of per thread

00:07:58.449 --> 00:07:58.459
getting into a lot of per thread
 

00:07:58.459 --> 00:08:00.129
getting into a lot of per thread
information below that well that will go

00:08:00.129 --> 00:08:00.139
information below that well that will go
 

00:08:00.139 --> 00:08:05.920
information below that well that will go
into more detail about in a moment so

00:08:05.920 --> 00:08:05.930
into more detail about in a moment so
 

00:08:05.930 --> 00:08:08.109
into more detail about in a moment so
there's a lot more info than fits on the

00:08:08.109 --> 00:08:08.119
there's a lot more info than fits on the
 

00:08:08.119 --> 00:08:10.299
there's a lot more info than fits on the
screen so it does scroll up and down so

00:08:10.299 --> 00:08:10.309
screen so it does scroll up and down so
 

00:08:10.309 --> 00:08:14.109
screen so it does scroll up and down so
make sure you scroll you also can

00:08:14.109 --> 00:08:14.119
make sure you scroll you also can
 

00:08:14.119 --> 00:08:18.149
make sure you scroll you also can
navigate around the trace with WASD so

00:08:18.149 --> 00:08:18.159
navigate around the trace with WASD so
 

00:08:18.159 --> 00:08:22.269
navigate around the trace with WASD so
Andy to move left and right and W and s

00:08:22.269 --> 00:08:22.279
Andy to move left and right and W and s
 

00:08:22.279 --> 00:08:26.679
Andy to move left and right and W and s
to zoom in and out you also have this

00:08:26.679 --> 00:08:26.689
to zoom in and out you also have this
 

00:08:26.689 --> 00:08:28.989
to zoom in and out you also have this
palette this floating palette that's

00:08:28.989 --> 00:08:28.999
palette this floating palette that's
 

00:08:28.999 --> 00:08:30.969
palette this floating palette that's
that the upper right hand that contains

00:08:30.969 --> 00:08:30.979
that the upper right hand that contains
 

00:08:30.979 --> 00:08:34.029
that the upper right hand that contains
four tools the first tool is the pointer

00:08:34.029 --> 00:08:34.039
four tools the first tool is the pointer
 

00:08:34.039 --> 00:08:36.399
four tools the first tool is the pointer
the pointer lets you click stuff in the

00:08:36.399 --> 00:08:36.409
the pointer lets you click stuff in the
 

00:08:36.409 --> 00:08:40.749
the pointer lets you click stuff in the
trace and see what it is so here I

00:08:40.749 --> 00:08:40.759
trace and see what it is so here I
 

00:08:40.759 --> 00:08:42.670
trace and see what it is so here I
clicked one of the calculator time

00:08:42.670 --> 00:08:42.680
clicked one of the calculator time
 

00:08:42.680 --> 00:08:45.519
clicked one of the calculator time
slices and I now get more information

00:08:45.519 --> 00:08:45.529
slices and I now get more information
 

00:08:45.529 --> 00:08:50.710
slices and I now get more information
about that particular instance that it

00:08:50.710 --> 00:08:50.720
about that particular instance that it
 

00:08:50.720 --> 00:08:51.850
about that particular instance that it
was running

00:08:51.850 --> 00:08:51.860
was running
 

00:08:51.860 --> 00:08:53.650
was running
and the bottom half of screen so I can

00:08:53.650 --> 00:08:53.660
and the bottom half of screen so I can
 

00:08:53.660 --> 00:08:57.550
and the bottom half of screen so I can
see here's its PID here's the tid here's

00:08:57.550 --> 00:08:57.560
see here's its PID here's the tid here's
 

00:08:57.560 --> 00:08:59.920
see here's its PID here's the tid here's
the priority here's how long it was

00:08:59.920 --> 00:08:59.930
the priority here's how long it was
 

00:08:59.930 --> 00:09:04.510
the priority here's how long it was
actually running on the on the CPU so

00:09:04.510 --> 00:09:04.520
actually running on the on the CPU so
 

00:09:04.520 --> 00:09:07.480
actually running on the on the CPU so
you will use the pointer a lot the other

00:09:07.480 --> 00:09:07.490
you will use the pointer a lot the other
 

00:09:07.490 --> 00:09:08.650
you will use the pointer a lot the other
thing you can do if a pointer is you can

00:09:08.650 --> 00:09:08.660
thing you can do if a pointer is you can
 

00:09:08.660 --> 00:09:10.150
thing you can do if a pointer is you can
select a bunch of stuff you can just

00:09:10.150 --> 00:09:10.160
select a bunch of stuff you can just
 

00:09:10.160 --> 00:09:13.270
select a bunch of stuff you can just
draw a rectangle and after you draw the

00:09:13.270 --> 00:09:13.280
draw a rectangle and after you draw the
 

00:09:13.280 --> 00:09:15.550
draw a rectangle and after you draw the
rectangle you get an aggregate view so

00:09:15.550 --> 00:09:15.560
rectangle you get an aggregate view so
 

00:09:15.560 --> 00:09:17.740
rectangle you get an aggregate view so
you can look and see like what was

00:09:17.740 --> 00:09:17.750
you can look and see like what was
 

00:09:17.750 --> 00:09:19.600
you can look and see like what was
running during this time and you can

00:09:19.600 --> 00:09:19.610
running during this time and you can
 

00:09:19.610 --> 00:09:22.090
running during this time and you can
sort these and you know the normal stuff

00:09:22.090 --> 00:09:22.100
sort these and you know the normal stuff
 

00:09:22.100 --> 00:09:28.120
sort these and you know the normal stuff
that you would expect the fourth tool on

00:09:28.120 --> 00:09:28.130
that you would expect the fourth tool on
 

00:09:28.130 --> 00:09:33.730
that you would expect the fourth tool on
here is called I think the ruler but

00:09:33.730 --> 00:09:33.740
here is called I think the ruler but
 

00:09:33.740 --> 00:09:36.640
here is called I think the ruler but
essentially it is it allows you to mark

00:09:36.640 --> 00:09:36.650
essentially it is it allows you to mark
 

00:09:36.650 --> 00:09:39.970
essentially it is it allows you to mark
a section of the trace and you highlight

00:09:39.970 --> 00:09:39.980
a section of the trace and you highlight
 

00:09:39.980 --> 00:09:43.270
a section of the trace and you highlight
it and you can scroll up and down the

00:09:43.270 --> 00:09:43.280
it and you can scroll up and down the
 

00:09:43.280 --> 00:09:46.150
it and you can scroll up and down the
the trace view and that highlight will

00:09:46.150 --> 00:09:46.160
the trace view and that highlight will
 

00:09:46.160 --> 00:09:48.460
the trace view and that highlight will
remain so if you know like I've dropped

00:09:48.460 --> 00:09:48.470
remain so if you know like I've dropped
 

00:09:48.470 --> 00:09:50.800
remain so if you know like I've dropped
a frame around here I need to go look

00:09:50.800 --> 00:09:50.810
a frame around here I need to go look
 

00:09:50.810 --> 00:09:52.060
a frame around here I need to go look
around the rest of the trace to see

00:09:52.060 --> 00:09:52.070
around the rest of the trace to see
 

00:09:52.070 --> 00:09:53.920
around the rest of the trace to see
what's going on you can highlight that

00:09:53.920 --> 00:09:53.930
what's going on you can highlight that
 

00:09:53.930 --> 00:09:55.600
what's going on you can highlight that
and scroll up and down and know exactly

00:09:55.600 --> 00:09:55.610
and scroll up and down and know exactly
 

00:09:55.610 --> 00:09:58.960
and scroll up and down and know exactly
where you are the second and third

00:09:58.960 --> 00:09:58.970
where you are the second and third
 

00:09:58.970 --> 00:10:01.990
where you are the second and third
things on the palette are a panning tool

00:10:01.990 --> 00:10:02.000
things on the palette are a panning tool
 

00:10:02.000 --> 00:10:05.800
things on the palette are a panning tool
and a zooming tool but they're

00:10:05.800 --> 00:10:05.810
and a zooming tool but they're
 

00:10:05.810 --> 00:10:08.830
and a zooming tool but they're
equivalent to the Toit's D so you can

00:10:08.830 --> 00:10:08.840
equivalent to the Toit's D so you can
 

00:10:08.840 --> 00:10:10.330
equivalent to the Toit's D so you can
use the pallet tools if you want you can

00:10:10.330 --> 00:10:10.340
use the pallet tools if you want you can
 

00:10:10.340 --> 00:10:11.980
use the pallet tools if you want you can
use huazi if you want it doesn't really

00:10:11.980 --> 00:10:11.990
use huazi if you want it doesn't really
 

00:10:11.990 --> 00:10:16.200
use huazi if you want it doesn't really
matter so if we scroll down we can see

00:10:16.200 --> 00:10:16.210
matter so if we scroll down we can see
 

00:10:16.210 --> 00:10:19.240
matter so if we scroll down we can see
per thread information and we can see

00:10:19.240 --> 00:10:19.250
per thread information and we can see
 

00:10:19.250 --> 00:10:22.450
per thread information and we can see
information about each threads current

00:10:22.450 --> 00:10:22.460
information about each threads current
 

00:10:22.460 --> 00:10:25.990
information about each threads current
state so the first thing that you'll see

00:10:25.990 --> 00:10:26.000
state so the first thing that you'll see
 

00:10:26.000 --> 00:10:29.130
state so the first thing that you'll see
and it's hard to read and I apologize I

00:10:29.130 --> 00:10:29.140
and it's hard to read and I apologize I
 

00:10:29.140 --> 00:10:33.130
and it's hard to read and I apologize I
have an errant I do have an arrow so

00:10:33.130 --> 00:10:33.140
have an errant I do have an arrow so
 

00:10:33.140 --> 00:10:37.120
have an errant I do have an arrow so
there's this stack of of boxes so

00:10:37.120 --> 00:10:37.130
there's this stack of of boxes so
 

00:10:37.130 --> 00:10:41.200
there's this stack of of boxes so
essentially the trace sections for a

00:10:41.200 --> 00:10:41.210
essentially the trace sections for a
 

00:10:41.210 --> 00:10:44.170
essentially the trace sections for a
given thread are a stack so you'll say

00:10:44.170 --> 00:10:44.180
given thread are a stack so you'll say
 

00:10:44.180 --> 00:10:47.920
given thread are a stack so you'll say
like trace begin section activity start

00:10:47.920 --> 00:10:47.930
like trace begin section activity start
 

00:10:47.930 --> 00:10:49.870
like trace begin section activity start
and then something else will say trace

00:10:49.870 --> 00:10:49.880
and then something else will say trace
 

00:10:49.880 --> 00:10:52.450
and then something else will say trace
begin session inflate for you know

00:10:52.450 --> 00:10:52.460
begin session inflate for you know
 

00:10:52.460 --> 00:10:55.000
begin session inflate for you know
inflated view and so they appear as a

00:10:55.000 --> 00:10:55.010
inflated view and so they appear as a
 

00:10:55.010 --> 00:11:00.450
inflated view and so they appear as a
stack in the trace the other thing about

00:11:00.450 --> 00:11:00.460
stack in the trace the other thing about
 

00:11:00.460 --> 00:11:03.510
stack in the trace the other thing about
that is at least as important for

00:11:03.510 --> 00:11:03.520
that is at least as important for
 

00:11:03.520 --> 00:11:05.850
that is at least as important for
reading a trace is the

00:11:05.850 --> 00:11:05.860
reading a trace is the
 

00:11:05.860 --> 00:11:09.220
reading a trace is the
kind of multicolored bar above each

00:11:09.220 --> 00:11:09.230
kind of multicolored bar above each
 

00:11:09.230 --> 00:11:12.400
kind of multicolored bar above each
thread and you can kind of see it it's

00:11:12.400 --> 00:11:12.410
thread and you can kind of see it it's
 

00:11:12.410 --> 00:11:15.129
thread and you can kind of see it it's
hard to see but that tells you

00:11:15.129 --> 00:11:15.139
hard to see but that tells you
 

00:11:15.139 --> 00:11:18.069
hard to see but that tells you
information about the state of the

00:11:18.069 --> 00:11:18.079
information about the state of the
 

00:11:18.079 --> 00:11:22.990
information about the state of the
thread at any given time oh you can see

00:11:22.990 --> 00:11:23.000
thread at any given time oh you can see
 

00:11:23.000 --> 00:11:25.180
thread at any given time oh you can see
it in more detail there so you can see

00:11:25.180 --> 00:11:25.190
it in more detail there so you can see
 

00:11:25.190 --> 00:11:27.069
it in more detail there so you can see
there we've got a bunch of green

00:11:27.069 --> 00:11:27.079
there we've got a bunch of green
 

00:11:27.079 --> 00:11:29.350
there we've got a bunch of green
sections we've got some orange section

00:11:29.350 --> 00:11:29.360
sections we've got some orange section
 

00:11:29.360 --> 00:11:31.090
sections we've got some orange section
we've got some red we've got some blue

00:11:31.090 --> 00:11:31.100
we've got some red we've got some blue
 

00:11:31.100 --> 00:11:36.720
we've got some red we've got some blue
and sections where it's just not colored

00:11:36.720 --> 00:11:36.730
 

00:11:36.730 --> 00:11:41.740
so yeah there's some green and if you

00:11:41.740 --> 00:11:41.750
so yeah there's some green and if you
 

00:11:41.750 --> 00:11:44.980
so yeah there's some green and if you
actually click that that green bar it

00:11:44.980 --> 00:11:44.990
actually click that that green bar it
 

00:11:44.990 --> 00:11:47.769
actually click that that green bar it
will tell you that it was running and it

00:11:47.769 --> 00:11:47.779
will tell you that it was running and it
 

00:11:47.779 --> 00:11:49.210
will tell you that it was running and it
will tell you how long was running and

00:11:49.210 --> 00:11:49.220
will tell you how long was running and
 

00:11:49.220 --> 00:11:51.040
will tell you how long was running and
which CP it was running on so you can

00:11:51.040 --> 00:11:51.050
which CP it was running on so you can
 

00:11:51.050 --> 00:11:54.759
which CP it was running on so you can
track your threads progress through the

00:11:54.759 --> 00:11:54.769
track your threads progress through the
 

00:11:54.769 --> 00:11:58.180
track your threads progress through the
system that way you can see okay it was

00:11:58.180 --> 00:11:58.190
system that way you can see okay it was
 

00:11:58.190 --> 00:11:59.620
system that way you can see okay it was
running here for this time and then it

00:11:59.620 --> 00:11:59.630
running here for this time and then it
 

00:11:59.630 --> 00:12:02.590
running here for this time and then it
was blocked on something else and then

00:12:02.590 --> 00:12:02.600
was blocked on something else and then
 

00:12:02.600 --> 00:12:05.079
was blocked on something else and then
it woke up and figure out what's going

00:12:05.079 --> 00:12:05.089
it woke up and figure out what's going
 

00:12:05.089 --> 00:12:08.050
it woke up and figure out what's going
on there so the different colors are

00:12:08.050 --> 00:12:08.060
on there so the different colors are
 

00:12:08.060 --> 00:12:11.740
on there so the different colors are
there five colors number one is green it

00:12:11.740 --> 00:12:11.750
there five colors number one is green it
 

00:12:11.750 --> 00:12:14.410
there five colors number one is green it
just means the thread isn't running it's

00:12:14.410 --> 00:12:14.420
just means the thread isn't running it's
 

00:12:14.420 --> 00:12:16.750
just means the thread isn't running it's
currently running on a CPU you know it's

00:12:16.750 --> 00:12:16.760
currently running on a CPU you know it's
 

00:12:16.760 --> 00:12:18.699
currently running on a CPU you know it's
actually making progress during that

00:12:18.699 --> 00:12:18.709
actually making progress during that
 

00:12:18.709 --> 00:12:22.210
actually making progress during that
time the only thing that could run when

00:12:22.210 --> 00:12:22.220
time the only thing that could run when
 

00:12:22.220 --> 00:12:24.610
time the only thing that could run when
a thread is in the running state is an

00:12:24.610 --> 00:12:24.620
a thread is in the running state is an
 

00:12:24.620 --> 00:12:28.240
a thread is in the running state is an
interrupt and that last you know stub

00:12:28.240 --> 00:12:28.250
interrupt and that last you know stub
 

00:12:28.250 --> 00:12:32.199
interrupt and that last you know stub
microsecond most of the time so if your

00:12:32.199 --> 00:12:32.209
microsecond most of the time so if your
 

00:12:32.209 --> 00:12:33.670
microsecond most of the time so if your
thread is running it's actually on the

00:12:33.670 --> 00:12:33.680
thread is running it's actually on the
 

00:12:33.680 --> 00:12:36.220
thread is running it's actually on the
CPU doing work if it's runnable that can

00:12:36.220 --> 00:12:36.230
CPU doing work if it's runnable that can
 

00:12:36.230 --> 00:12:39.850
CPU doing work if it's runnable that can
mean one of two things a thread will

00:12:39.850 --> 00:12:39.860
mean one of two things a thread will
 

00:12:39.860 --> 00:12:41.949
mean one of two things a thread will
become runnable when it's been sleeping

00:12:41.949 --> 00:12:41.959
become runnable when it's been sleeping
 

00:12:41.959 --> 00:12:44.590
become runnable when it's been sleeping
and something wakes it up or if your

00:12:44.590 --> 00:12:44.600
and something wakes it up or if your
 

00:12:44.600 --> 00:12:46.509
and something wakes it up or if your
thread is just like let's say you have a

00:12:46.509 --> 00:12:46.519
thread is just like let's say you have a
 

00:12:46.519 --> 00:12:50.579
thread is just like let's say you have a
spin loop just while one do nothing

00:12:50.579 --> 00:12:50.589
spin loop just while one do nothing
 

00:12:50.589 --> 00:12:52.809
spin loop just while one do nothing
eventually the scheduler will say okay

00:12:52.809 --> 00:12:52.819
eventually the scheduler will say okay
 

00:12:52.819 --> 00:12:54.819
eventually the scheduler will say okay
you've you've exceeded the amount of CPU

00:12:54.819 --> 00:12:54.829
you've you've exceeded the amount of CPU
 

00:12:54.829 --> 00:12:57.160
you've you've exceeded the amount of CPU
time you can have right now I'm going to

00:12:57.160 --> 00:12:57.170
time you can have right now I'm going to
 

00:12:57.170 --> 00:12:58.540
time you can have right now I'm going to
D schedule you and that's something else

00:12:58.540 --> 00:12:58.550
D schedule you and that's something else
 

00:12:58.550 --> 00:13:02.439
D schedule you and that's something else
run then your thread will be made

00:13:02.439 --> 00:13:02.449
run then your thread will be made
 

00:13:02.449 --> 00:13:04.749
run then your thread will be made
runnable and that it is it could be

00:13:04.749 --> 00:13:04.759
runnable and that it is it could be
 

00:13:04.759 --> 00:13:06.370
runnable and that it is it could be
running there's nothing blocking it from

00:13:06.370 --> 00:13:06.380
running there's nothing blocking it from
 

00:13:06.380 --> 00:13:07.870
running there's nothing blocking it from
running but the scheduler has not

00:13:07.870 --> 00:13:07.880
running but the scheduler has not
 

00:13:07.880 --> 00:13:13.480
running but the scheduler has not
selected it to run the third state is

00:13:13.480 --> 00:13:13.490
selected it to run the third state is
 

00:13:13.490 --> 00:13:16.689
selected it to run the third state is
sleeping sleeping just means there's no

00:13:16.689 --> 00:13:16.699
sleeping sleeping just means there's no
 

00:13:16.699 --> 00:13:19.000
sleeping sleeping just means there's no
work for this to do so it's

00:13:19.000 --> 00:13:19.010
work for this to do so it's
 

00:13:19.010 --> 00:13:21.540
work for this to do so it's
running usually means you're blocked on

00:13:21.540 --> 00:13:21.550
running usually means you're blocked on
 

00:13:21.550 --> 00:13:23.680
running usually means you're blocked on
like if you expect that your thread

00:13:23.680 --> 00:13:23.690
like if you expect that your thread
 

00:13:23.690 --> 00:13:25.240
like if you expect that your thread
should be running but you see it's

00:13:25.240 --> 00:13:25.250
should be running but you see it's
 

00:13:25.250 --> 00:13:26.650
should be running but you see it's
sleeping it's probably actually blocked

00:13:26.650 --> 00:13:26.660
sleeping it's probably actually blocked
 

00:13:26.660 --> 00:13:29.860
sleeping it's probably actually blocked
on a mutex somewhere because lock

00:13:29.860 --> 00:13:29.870
on a mutex somewhere because lock
 

00:13:29.870 --> 00:13:32.170
on a mutex somewhere because lock
contention in userspace does show up as

00:13:32.170 --> 00:13:32.180
contention in userspace does show up as
 

00:13:32.180 --> 00:13:36.310
contention in userspace does show up as
sleeping the last two are kinds of sleep

00:13:36.310 --> 00:13:36.320
sleeping the last two are kinds of sleep
 

00:13:36.320 --> 00:13:40.860
sleeping the last two are kinds of sleep
inside the kernel the orange is

00:13:40.860 --> 00:13:40.870
inside the kernel the orange is
 

00:13:40.870 --> 00:13:43.570
inside the kernel the orange is
uninterruptible sleep in block IO which

00:13:43.570 --> 00:13:43.580
uninterruptible sleep in block IO which
 

00:13:43.580 --> 00:13:46.870
uninterruptible sleep in block IO which
means you are waiting on disk so if you

00:13:46.870 --> 00:13:46.880
means you are waiting on disk so if you
 

00:13:46.880 --> 00:13:48.190
means you are waiting on disk so if you
see that a lot it means you are loading

00:13:48.190 --> 00:13:48.200
see that a lot it means you are loading
 

00:13:48.200 --> 00:13:50.740
see that a lot it means you are loading
a ton of data from disk and maybe you

00:13:50.740 --> 00:13:50.750
a ton of data from disk and maybe you
 

00:13:50.750 --> 00:13:53.410
a ton of data from disk and maybe you
shouldn't do that the last one

00:13:53.410 --> 00:13:53.420
shouldn't do that the last one
 

00:13:53.420 --> 00:13:56.260
shouldn't do that the last one
red is uninterruptible sleep this means

00:13:56.260 --> 00:13:56.270
red is uninterruptible sleep this means
 

00:13:56.270 --> 00:13:58.300
red is uninterruptible sleep this means
you are blocked somewhere else in the

00:13:58.300 --> 00:13:58.310
you are blocked somewhere else in the
 

00:13:58.310 --> 00:14:01.150
you are blocked somewhere else in the
kernel it's probably not IO it's

00:14:01.150 --> 00:14:01.160
kernel it's probably not IO it's
 

00:14:01.160 --> 00:14:02.860
kernel it's probably not IO it's
probably related to memory management

00:14:02.860 --> 00:14:02.870
probably related to memory management
 

00:14:02.870 --> 00:14:05.050
probably related to memory management
because we do see that the vast majority

00:14:05.050 --> 00:14:05.060
because we do see that the vast majority
 

00:14:05.060 --> 00:14:07.210
because we do see that the vast majority
of time and uninterruptible sleep is

00:14:07.210 --> 00:14:07.220
of time and uninterruptible sleep is
 

00:14:07.220 --> 00:14:12.150
of time and uninterruptible sleep is
actually because of memory management

00:14:12.150 --> 00:14:12.160
 

00:14:12.160 --> 00:14:16.810
and so a kind of easy quick thing that I

00:14:16.810 --> 00:14:16.820
and so a kind of easy quick thing that I
 

00:14:16.820 --> 00:14:19.990
and so a kind of easy quick thing that I
do as the first part of reading any

00:14:19.990 --> 00:14:20.000
do as the first part of reading any
 

00:14:20.000 --> 00:14:24.250
do as the first part of reading any
trace is you can select all of these

00:14:24.250 --> 00:14:24.260
trace is you can select all of these
 

00:14:24.260 --> 00:14:26.620
trace is you can select all of these
bars above a thread and get an aggregate

00:14:26.620 --> 00:14:26.630
bars above a thread and get an aggregate
 

00:14:26.630 --> 00:14:29.710
bars above a thread and get an aggregate
view so here I can see that this

00:14:29.710 --> 00:14:29.720
view so here I can see that this
 

00:14:29.720 --> 00:14:32.110
view so here I can see that this
particular thread was sleeping for 12

00:14:32.110 --> 00:14:32.120
particular thread was sleeping for 12
 

00:14:32.120 --> 00:14:35.140
particular thread was sleeping for 12
milliseconds is runnable for you know

00:14:35.140 --> 00:14:35.150
milliseconds is runnable for you know
 

00:14:35.150 --> 00:14:39.400
milliseconds is runnable for you know
0.6 milliseconds running for 3.1 you

00:14:39.400 --> 00:14:39.410
0.6 milliseconds running for 3.1 you
 

00:14:39.410 --> 00:14:40.780
0.6 milliseconds running for 3.1 you
know it looks it looks totally normal

00:14:40.780 --> 00:14:40.790
know it looks it looks totally normal
 

00:14:40.790 --> 00:14:44.110
know it looks it looks totally normal
totally fun but you can use this to get

00:14:44.110 --> 00:14:44.120
totally fun but you can use this to get
 

00:14:44.120 --> 00:14:45.850
totally fun but you can use this to get
a sense of where your bottlenecks may be

00:14:45.850 --> 00:14:45.860
a sense of where your bottlenecks may be
 

00:14:45.860 --> 00:14:48.790
a sense of where your bottlenecks may be
if you are if your thread is always

00:14:48.790 --> 00:14:48.800
if you are if your thread is always
 

00:14:48.800 --> 00:14:51.040
if you are if your thread is always
running and you're still not meeting

00:14:51.040 --> 00:14:51.050
running and you're still not meeting
 

00:14:51.050 --> 00:14:53.080
running and you're still not meeting
your performance targets you're probably

00:14:53.080 --> 00:14:53.090
your performance targets you're probably
 

00:14:53.090 --> 00:14:57.400
your performance targets you're probably
CPU bound that's probably a good bet if

00:14:57.400 --> 00:14:57.410
CPU bound that's probably a good bet if
 

00:14:57.410 --> 00:15:00.310
CPU bound that's probably a good bet if
you see that your thread is sleeping and

00:15:00.310 --> 00:15:00.320
you see that your thread is sleeping and
 

00:15:00.320 --> 00:15:01.570
you see that your thread is sleeping and
never running maybe there's some lock

00:15:01.570 --> 00:15:01.580
never running maybe there's some lock
 

00:15:01.580 --> 00:15:03.160
never running maybe there's some lock
contention maybe you're waiting on GPU

00:15:03.160 --> 00:15:03.170
contention maybe you're waiting on GPU
 

00:15:03.170 --> 00:15:07.120
contention maybe you're waiting on GPU
activity it's not your the bottleneck is

00:15:07.120 --> 00:15:07.130
activity it's not your the bottleneck is
 

00:15:07.130 --> 00:15:10.750
activity it's not your the bottleneck is
not that the CPU for that thread the

00:15:10.750 --> 00:15:10.760
not that the CPU for that thread the
 

00:15:10.760 --> 00:15:13.300
not that the CPU for that thread the
bottleneck is somewhere else if you're

00:15:13.300 --> 00:15:13.310
bottleneck is somewhere else if you're
 

00:15:13.310 --> 00:15:16.420
bottleneck is somewhere else if you're
seeing a ton of block i/o then you're

00:15:16.420 --> 00:15:16.430
seeing a ton of block i/o then you're
 

00:15:16.430 --> 00:15:18.880
seeing a ton of block i/o then you're
probably reading too much from the disk

00:15:18.880 --> 00:15:18.890
probably reading too much from the disk
 

00:15:18.890 --> 00:15:22.090
probably reading too much from the disk
at any given time and the thread can't

00:15:22.090 --> 00:15:22.100
at any given time and the thread can't
 

00:15:22.100 --> 00:15:23.350
at any given time and the thread can't
make progress because it's waiting for

00:15:23.350 --> 00:15:23.360
make progress because it's waiting for
 

00:15:23.360 --> 00:15:25.390
make progress because it's waiting for
dead from the disk so that's kind of a

00:15:25.390 --> 00:15:25.400
dead from the disk so that's kind of a
 

00:15:25.400 --> 00:15:27.640
dead from the disk so that's kind of a
good first check for where your

00:15:27.640 --> 00:15:27.650
good first check for where your
 

00:15:27.650 --> 00:15:32.060
good first check for where your
bottlenecks maybe

00:15:32.060 --> 00:15:32.070
 

00:15:32.070 --> 00:15:35.420
one other really helpful thing here yeah

00:15:35.420 --> 00:15:35.430
one other really helpful thing here yeah
 

00:15:35.430 --> 00:15:39.740
one other really helpful thing here yeah
I didn't era up at the very top this

00:15:39.740 --> 00:15:39.750
I didn't era up at the very top this
 

00:15:39.750 --> 00:15:43.970
I didn't era up at the very top this
interactions and alerts area it's really

00:15:43.970 --> 00:15:43.980
interactions and alerts area it's really
 

00:15:43.980 --> 00:15:46.150
interactions and alerts area it's really
hard to read but you can actually see

00:15:46.150 --> 00:15:46.160
hard to read but you can actually see
 

00:15:46.160 --> 00:15:49.520
hard to read but you can actually see
when the user touched the screen this

00:15:49.520 --> 00:15:49.530
when the user touched the screen this
 

00:15:49.530 --> 00:15:54.380
when the user touched the screen this
input thing so you can tell like when

00:15:54.380 --> 00:15:54.390
input thing so you can tell like when
 

00:15:54.390 --> 00:15:56.930
input thing so you can tell like when
you have a trace and you know I tap the

00:15:56.930 --> 00:15:56.940
you have a trace and you know I tap the
 

00:15:56.940 --> 00:15:59.210
you have a trace and you know I tap the
screen once and something happened and

00:15:59.210 --> 00:15:59.220
screen once and something happened and
 

00:15:59.220 --> 00:16:01.100
screen once and something happened and
it was slow this gives you a really good

00:16:01.100 --> 00:16:01.110
it was slow this gives you a really good
 

00:16:01.110 --> 00:16:03.830
it was slow this gives you a really good
way to orient yourself in the trace you

00:16:03.830 --> 00:16:03.840
way to orient yourself in the trace you
 

00:16:03.840 --> 00:16:06.350
way to orient yourself in the trace you
can tell okay well this is the bad

00:16:06.350 --> 00:16:06.360
can tell okay well this is the bad
 

00:16:06.360 --> 00:16:12.320
can tell okay well this is the bad
behavior must be around here so one of

00:16:12.320 --> 00:16:12.330
behavior must be around here so one of
 

00:16:12.330 --> 00:16:14.300
behavior must be around here so one of
the most important things to do with the

00:16:14.300 --> 00:16:14.310
the most important things to do with the
 

00:16:14.310 --> 00:16:18.410
the most important things to do with the
trace is to add your own try sections

00:16:18.410 --> 00:16:18.420
trace is to add your own try sections
 

00:16:18.420 --> 00:16:21.320
trace is to add your own try sections
you can debug a lot of issues without

00:16:21.320 --> 00:16:21.330
you can debug a lot of issues without
 

00:16:21.330 --> 00:16:23.630
you can debug a lot of issues without
having your own try sections where you

00:16:23.630 --> 00:16:23.640
having your own try sections where you
 

00:16:23.640 --> 00:16:25.640
having your own try sections where you
as the app developer know what your app

00:16:25.640 --> 00:16:25.650
as the app developer know what your app
 

00:16:25.650 --> 00:16:30.980
as the app developer know what your app
is trying to do but if you add your own

00:16:30.980 --> 00:16:30.990
is trying to do but if you add your own
 

00:16:30.990 --> 00:16:33.560
is trying to do but if you add your own
trace sections life gets so much easier

00:16:33.560 --> 00:16:33.570
trace sections life gets so much easier
 

00:16:33.570 --> 00:16:36.860
trace sections life gets so much easier
it's really five to ten times faster to

00:16:36.860 --> 00:16:36.870
it's really five to ten times faster to
 

00:16:36.870 --> 00:16:38.210
it's really five to ten times faster to
debug if you have your own trace

00:16:38.210 --> 00:16:38.220
debug if you have your own trace
 

00:16:38.220 --> 00:16:42.530
debug if you have your own trace
sections so from Java you include this

00:16:42.530 --> 00:16:42.540
sections so from Java you include this
 

00:16:42.540 --> 00:16:44.630
sections so from Java you include this
package it's traced up against session

00:16:44.630 --> 00:16:44.640
package it's traced up against session
 

00:16:44.640 --> 00:16:45.980
package it's traced up against session
and trace that end section the only

00:16:45.980 --> 00:16:45.990
and trace that end section the only
 

00:16:45.990 --> 00:16:47.330
and trace that end section the only
thing you have to do is because it is a

00:16:47.330 --> 00:16:47.340
thing you have to do is because it is a
 

00:16:47.340 --> 00:16:49.400
thing you have to do is because it is a
stack you need to actually make sure

00:16:49.400 --> 00:16:49.410
stack you need to actually make sure
 

00:16:49.410 --> 00:16:51.200
stack you need to actually make sure
that every begins section has an end

00:16:51.200 --> 00:16:51.210
that every begins section has an end
 

00:16:51.210 --> 00:16:54.980
that every begins section has an end
section otherwise this trace the trace

00:16:54.980 --> 00:16:54.990
section otherwise this trace the trace
 

00:16:54.990 --> 00:16:57.110
section otherwise this trace the trace
gets really weird and it's bad and you

00:16:57.110 --> 00:16:57.120
gets really weird and it's bad and you
 

00:16:57.120 --> 00:16:59.300
gets really weird and it's bad and you
won't like it

00:16:59.300 --> 00:16:59.310
won't like it
 

00:16:59.310 --> 00:17:01.250
won't like it
but of course nobody in here really

00:17:01.250 --> 00:17:01.260
but of course nobody in here really
 

00:17:01.260 --> 00:17:03.500
but of course nobody in here really
cares that much about Java so for the

00:17:03.500 --> 00:17:03.510
cares that much about Java so for the
 

00:17:03.510 --> 00:17:07.010
cares that much about Java so for the
NDK you include Android trace that h/h

00:17:07.010 --> 00:17:07.020
NDK you include Android trace that h/h
 

00:17:07.020 --> 00:17:09.319
NDK you include Android trace that h/h
race begins section a trace end section

00:17:09.319 --> 00:17:09.329
race begins section a trace end section
 

00:17:09.329 --> 00:17:11.990
race begins section a trace end section
and I believe that is supported on API

00:17:11.990 --> 00:17:12.000
and I believe that is supported on API
 

00:17:12.000 --> 00:17:18.710
and I believe that is supported on API
23 and up so when you actually want to

00:17:18.710 --> 00:17:18.720
23 and up so when you actually want to
 

00:17:18.720 --> 00:17:20.300
23 and up so when you actually want to
take a nap trace all you have to do is

00:17:20.300 --> 00:17:20.310
take a nap trace all you have to do is
 

00:17:20.310 --> 00:17:24.199
take a nap trace all you have to do is
you take a trace you add dash a and your

00:17:24.199 --> 00:17:24.209
you take a trace you add dash a and your
 

00:17:24.209 --> 00:17:26.689
you take a trace you add dash a and your
package name and that will turn on app

00:17:26.689 --> 00:17:26.699
package name and that will turn on app
 

00:17:26.699 --> 00:17:29.530
package name and that will turn on app
tracing for your app and you will just

00:17:29.530 --> 00:17:29.540
tracing for your app and you will just
 

00:17:29.540 --> 00:17:32.510
tracing for your app and you will just
get results you like there is a trace

00:17:32.510 --> 00:17:32.520
get results you like there is a trace
 

00:17:32.520 --> 00:17:34.430
get results you like there is a trace
section that I added to a random app at

00:17:34.430 --> 00:17:34.440
section that I added to a random app at
 

00:17:34.440 --> 00:17:37.880
section that I added to a random app at
one point and it just shows up as any

00:17:37.880 --> 00:17:37.890
one point and it just shows up as any
 

00:17:37.890 --> 00:17:39.980
one point and it just shows up as any
other trace section but it's really good

00:17:39.980 --> 00:17:39.990
other trace section but it's really good
 

00:17:39.990 --> 00:17:42.500
other trace section but it's really good
for you know when you say you're loading

00:17:42.500 --> 00:17:42.510
for you know when you say you're loading
 

00:17:42.510 --> 00:17:44.750
for you know when you say you're loading
something or waiting on network

00:17:44.750 --> 00:17:44.760
something or waiting on network
 

00:17:44.760 --> 00:17:48.020
something or waiting on network
you know semantically what your app is

00:17:48.020 --> 00:17:48.030
you know semantically what your app is
 

00:17:48.030 --> 00:17:50.900
you know semantically what your app is
attempting to do you can express that

00:17:50.900 --> 00:17:50.910
attempting to do you can express that
 

00:17:50.910 --> 00:17:52.580
attempting to do you can express that
information in the trace and combined

00:17:52.580 --> 00:17:52.590
information in the trace and combined
 

00:17:52.590 --> 00:17:54.110
information in the trace and combined
with everything the system thinks is

00:17:54.110 --> 00:17:54.120
with everything the system thinks is
 

00:17:54.120 --> 00:17:56.090
with everything the system thinks is
going on you can get a much better view

00:17:56.090 --> 00:17:56.100
going on you can get a much better view
 

00:17:56.100 --> 00:18:00.279
going on you can get a much better view
of how your app performs

00:18:00.279 --> 00:18:00.289
of how your app performs
 

00:18:00.289 --> 00:18:08.360
of how your app performs
okay so game traces because that's why

00:18:08.360 --> 00:18:08.370
okay so game traces because that's why
 

00:18:08.370 --> 00:18:08.779
okay so game traces because that's why
we're here

00:18:08.779 --> 00:18:08.789
we're here
 

00:18:08.789 --> 00:18:11.029
we're here
let's look at a couple actual game

00:18:11.029 --> 00:18:11.039
let's look at a couple actual game
 

00:18:11.039 --> 00:18:14.360
let's look at a couple actual game
traces so just out of curiosity how many

00:18:14.360 --> 00:18:14.370
traces so just out of curiosity how many
 

00:18:14.370 --> 00:18:18.919
traces so just out of curiosity how many
people in here use unity okay pretty

00:18:18.919 --> 00:18:18.929
people in here use unity okay pretty
 

00:18:18.929 --> 00:18:24.620
people in here use unity okay pretty
large number what about unreal okay and

00:18:24.620 --> 00:18:24.630
large number what about unreal okay and
 

00:18:24.630 --> 00:18:27.230
large number what about unreal okay and
what about custom engine it's not unity

00:18:27.230 --> 00:18:27.240
what about custom engine it's not unity
 

00:18:27.240 --> 00:18:31.909
what about custom engine it's not unity
around okay cool so I took two traces

00:18:31.909 --> 00:18:31.919
around okay cool so I took two traces
 

00:18:31.919 --> 00:18:34.940
around okay cool so I took two traces
each from two popular games I like

00:18:34.940 --> 00:18:34.950
each from two popular games I like
 

00:18:34.950 --> 00:18:39.039
each from two popular games I like
current top twenty maybe and I

00:18:39.039 --> 00:18:39.049
current top twenty maybe and I
 

00:18:39.049 --> 00:18:43.610
current top twenty maybe and I
anonymized them to not kind of you know

00:18:43.610 --> 00:18:43.620
anonymized them to not kind of you know
 

00:18:43.620 --> 00:18:48.919
anonymized them to not kind of you know
put them on edge and first uses a custom

00:18:48.919 --> 00:18:48.929
put them on edge and first uses a custom
 

00:18:48.929 --> 00:18:52.909
put them on edge and first uses a custom
image in the second is a Unity game so

00:18:52.909 --> 00:18:52.919
image in the second is a Unity game so
 

00:18:52.919 --> 00:18:55.610
image in the second is a Unity game so
let's look at that first one so this is

00:18:55.610 --> 00:18:55.620
let's look at that first one so this is
 

00:18:55.620 --> 00:18:57.740
let's look at that first one so this is
app startup and I don't have my notes

00:18:57.740 --> 00:18:57.750
app startup and I don't have my notes
 

00:18:57.750 --> 00:19:03.470
app startup and I don't have my notes
and that's really annoying so this is

00:19:03.470 --> 00:19:03.480
and that's really annoying so this is
 

00:19:03.480 --> 00:19:04.909
and that's really annoying so this is
what it looks like when we after I took

00:19:04.909 --> 00:19:04.919
what it looks like when we after I took
 

00:19:04.919 --> 00:19:06.380
what it looks like when we after I took
the trace I figured out my pixel to

00:19:06.380 --> 00:19:06.390
the trace I figured out my pixel to
 

00:19:06.390 --> 00:19:11.299
the trace I figured out my pixel to
excel running key and so I open it up

00:19:11.299 --> 00:19:11.309
excel running key and so I open it up
 

00:19:11.309 --> 00:19:14.930
excel running key and so I open it up
and I can see this is so this was

00:19:14.930 --> 00:19:14.940
and I can see this is so this was
 

00:19:14.940 --> 00:19:17.720
and I can see this is so this was
launching a game so at some point here I

00:19:17.720 --> 00:19:17.730
launching a game so at some point here I
 

00:19:17.730 --> 00:19:19.460
launching a game so at some point here I
click the screen and I think you can see

00:19:19.460 --> 00:19:19.470
click the screen and I think you can see
 

00:19:19.470 --> 00:19:22.340
click the screen and I think you can see
it up at the very top there's that that

00:19:22.340 --> 00:19:22.350
it up at the very top there's that that
 

00:19:22.350 --> 00:19:26.390
it up at the very top there's that that
one place where the second row on in the

00:19:26.390 --> 00:19:26.400
one place where the second row on in the
 

00:19:26.400 --> 00:19:29.539
one place where the second row on in the
interactions section is lit up and that

00:19:29.539 --> 00:19:29.549
interactions section is lit up and that
 

00:19:29.549 --> 00:19:32.380
interactions section is lit up and that
is where I actually touched the screen

00:19:32.380 --> 00:19:32.390
is where I actually touched the screen
 

00:19:32.390 --> 00:19:35.000
is where I actually touched the screen
so I started this game and I wanted to

00:19:35.000 --> 00:19:35.010
so I started this game and I wanted to
 

00:19:35.010 --> 00:19:38.330
so I started this game and I wanted to
see you know is it fast is it good and

00:19:38.330 --> 00:19:38.340
see you know is it fast is it good and
 

00:19:38.340 --> 00:19:40.460
see you know is it fast is it good and
it took a few seconds it wasn't too bad

00:19:40.460 --> 00:19:40.470
it took a few seconds it wasn't too bad
 

00:19:40.470 --> 00:19:42.380
it took a few seconds it wasn't too bad
but you know I thought it could probably

00:19:42.380 --> 00:19:42.390
but you know I thought it could probably
 

00:19:42.390 --> 00:19:48.409
but you know I thought it could probably
be better so here's the actual startup

00:19:48.409 --> 00:19:48.419
be better so here's the actual startup
 

00:19:48.419 --> 00:19:54.500
be better so here's the actual startup
section for a game and it looks a little

00:19:54.500 --> 00:19:54.510
section for a game and it looks a little
 

00:19:54.510 --> 00:19:57.590
section for a game and it looks a little
weird because the UI thread is

00:19:57.590 --> 00:19:57.600
weird because the UI thread is
 

00:19:57.600 --> 00:19:58.849
weird because the UI thread is
it's called the UI thread and catapult

00:19:58.849 --> 00:19:58.859
it's called the UI thread and catapult
 

00:19:58.859 --> 00:20:01.190
it's called the UI thread and catapult
it's actually just the main thread is

00:20:01.190 --> 00:20:01.200
it's actually just the main thread is
 

00:20:01.200 --> 00:20:04.129
it's actually just the main thread is
the first thread so that starts up first

00:20:04.129 --> 00:20:04.139
the first thread so that starts up first
 

00:20:04.139 --> 00:20:06.830
the first thread so that starts up first
that's where app code usually runs the

00:20:06.830 --> 00:20:06.840
that's where app code usually runs the
 

00:20:06.840 --> 00:20:08.930
that's where app code usually runs the
UI thread just kind of goes idle for a

00:20:08.930 --> 00:20:08.940
UI thread just kind of goes idle for a
 

00:20:08.940 --> 00:20:11.719
UI thread just kind of goes idle for a
second in the middle they're like

00:20:11.719 --> 00:20:11.729
second in the middle they're like
 

00:20:11.729 --> 00:20:15.320
second in the middle they're like
actually yeah it's 1.4 ish seconds it

00:20:15.320 --> 00:20:15.330
actually yeah it's 1.4 ish seconds it
 

00:20:15.330 --> 00:20:17.479
actually yeah it's 1.4 ish seconds it
just doesn't run anything it's asleep

00:20:17.479 --> 00:20:17.489
just doesn't run anything it's asleep
 

00:20:17.489 --> 00:20:19.879
just doesn't run anything it's asleep
it's not waiting on anything I looked at

00:20:19.879 --> 00:20:19.889
it's not waiting on anything I looked at
 

00:20:19.889 --> 00:20:21.940
it's not waiting on anything I looked at
other threads nothing else is running

00:20:21.940 --> 00:20:21.950
other threads nothing else is running
 

00:20:21.950 --> 00:20:28.789
other threads nothing else is running
that's weird so you know if you look at

00:20:28.789 --> 00:20:28.799
that's weird so you know if you look at
 

00:20:28.799 --> 00:20:31.580
that's weird so you know if you look at
what else is running on the system it's

00:20:31.580 --> 00:20:31.590
what else is running on the system it's
 

00:20:31.590 --> 00:20:35.299
what else is running on the system it's
actually like it doesn't look it might

00:20:35.299 --> 00:20:35.309
actually like it doesn't look it might
 

00:20:35.309 --> 00:20:38.810
actually like it doesn't look it might
not look that idle it's pretty idle like

00:20:38.810 --> 00:20:38.820
not look that idle it's pretty idle like
 

00:20:38.820 --> 00:20:40.820
not look that idle it's pretty idle like
there's some stuff running at the

00:20:40.820 --> 00:20:40.830
there's some stuff running at the
 

00:20:40.830 --> 00:20:43.099
there's some stuff running at the
beginning of that time as probably like

00:20:43.099 --> 00:20:43.109
beginning of that time as probably like
 

00:20:43.109 --> 00:20:46.279
beginning of that time as probably like
rendering the transition to like draw

00:20:46.279 --> 00:20:46.289
rendering the transition to like draw
 

00:20:46.289 --> 00:20:48.889
rendering the transition to like draw
the window for the app but by the end

00:20:48.889 --> 00:20:48.899
the window for the app but by the end
 

00:20:48.899 --> 00:20:52.430
the window for the app but by the end
like nothing's running that's just kind

00:20:52.430 --> 00:20:52.440
like nothing's running that's just kind
 

00:20:52.440 --> 00:20:55.310
like nothing's running that's just kind
of waiting so we can go and see what

00:20:55.310 --> 00:20:55.320
of waiting so we can go and see what
 

00:20:55.320 --> 00:20:57.950
of waiting so we can go and see what
actually woke up the app and here I've

00:20:57.950 --> 00:20:57.960
actually woke up the app and here I've
 

00:20:57.960 --> 00:21:02.419
actually woke up the app and here I've
zoomed in to the very edge of that 1.4

00:21:02.419 --> 00:21:02.429
zoomed in to the very edge of that 1.4
 

00:21:02.429 --> 00:21:05.149
zoomed in to the very edge of that 1.4
second time and there's a tiny little

00:21:05.149 --> 00:21:05.159
second time and there's a tiny little
 

00:21:05.159 --> 00:21:08.419
second time and there's a tiny little
blue block at the end of that where that

00:21:08.419 --> 00:21:08.429
blue block at the end of that where that
 

00:21:08.429 --> 00:21:11.749
blue block at the end of that where that
main thread becomes runnable and here I

00:21:11.749 --> 00:21:11.759
main thread becomes runnable and here I
 

00:21:11.759 --> 00:21:14.869
main thread becomes runnable and here I
can see waken from tid 0 and so wake up

00:21:14.869 --> 00:21:14.879
can see waken from tid 0 and so wake up
 

00:21:14.879 --> 00:21:17.149
can see waken from tid 0 and so wake up
from tid tells you what thread made

00:21:17.149 --> 00:21:17.159
from tid tells you what thread made
 

00:21:17.159 --> 00:21:19.039
from tid tells you what thread made
something runnable which is really great

00:21:19.039 --> 00:21:19.049
something runnable which is really great
 

00:21:19.049 --> 00:21:20.799
something runnable which is really great
because you can actually get into

00:21:20.799 --> 00:21:20.809
because you can actually get into
 

00:21:20.809 --> 00:21:23.810
because you can actually get into
causation you can say this thread caused

00:21:23.810 --> 00:21:23.820
causation you can say this thread caused
 

00:21:23.820 --> 00:21:26.810
causation you can say this thread caused
this other thing to happen and you know

00:21:26.810 --> 00:21:26.820
this other thing to happen and you know
 

00:21:26.820 --> 00:21:30.379
this other thing to happen and you know
it's it's real it's true but tid 0 means

00:21:30.379 --> 00:21:30.389
it's it's real it's true but tid 0 means
 

00:21:30.389 --> 00:21:32.839
it's it's real it's true but tid 0 means
it's an interrupt and that's really

00:21:32.839 --> 00:21:32.849
it's an interrupt and that's really
 

00:21:32.849 --> 00:21:35.450
it's an interrupt and that's really
weird because apps usually don't see

00:21:35.450 --> 00:21:35.460
weird because apps usually don't see
 

00:21:35.460 --> 00:21:37.609
weird because apps usually don't see
interrupts directly the only interrupt

00:21:37.609 --> 00:21:37.619
interrupts directly the only interrupt
 

00:21:37.619 --> 00:21:39.440
interrupts directly the only interrupt
they ever really see is a timer

00:21:39.440 --> 00:21:39.450
they ever really see is a timer
 

00:21:39.450 --> 00:21:43.430
they ever really see is a timer
interrupt but let's just be careful and

00:21:43.430 --> 00:21:43.440
interrupt but let's just be careful and
 

00:21:43.440 --> 00:21:46.460
interrupt but let's just be careful and
sure and scroll up and look and yeah

00:21:46.460 --> 00:21:46.470
sure and scroll up and look and yeah
 

00:21:46.470 --> 00:21:48.739
sure and scroll up and look and yeah
during the I don't know 20 or 30

00:21:48.739 --> 00:21:48.749
during the I don't know 20 or 30
 

00:21:48.749 --> 00:21:50.719
during the I don't know 20 or 30
milliseconds before there's nothing

00:21:50.719 --> 00:21:50.729
milliseconds before there's nothing
 

00:21:50.729 --> 00:21:51.979
milliseconds before there's nothing
really running and we don't have

00:21:51.979 --> 00:21:51.989
really running and we don't have
 

00:21:51.989 --> 00:21:54.169
really running and we don't have
interrupt latency of 20 or 30

00:21:54.169 --> 00:21:54.179
interrupt latency of 20 or 30
 

00:21:54.179 --> 00:21:58.489
interrupt latency of 20 or 30
milliseconds that meet that be wild so I

00:21:58.489 --> 00:21:58.499
milliseconds that meet that be wild so I
 

00:21:58.499 --> 00:22:00.289
milliseconds that meet that be wild so I
kind of wonder if the app is sleeping

00:22:00.289 --> 00:22:00.299
kind of wonder if the app is sleeping
 

00:22:00.299 --> 00:22:01.669
kind of wonder if the app is sleeping
for 1.4 seconds

00:22:01.669 --> 00:22:01.679
for 1.4 seconds
 

00:22:01.679 --> 00:22:04.820
for 1.4 seconds
I think it's possible this wouldn't show

00:22:04.820 --> 00:22:04.830
I think it's possible this wouldn't show
 

00:22:04.830 --> 00:22:06.499
I think it's possible this wouldn't show
up on a profiler because you wouldn't

00:22:06.499 --> 00:22:06.509
up on a profiler because you wouldn't
 

00:22:06.509 --> 00:22:10.399
up on a profiler because you wouldn't
see sleep and a profiler but it really

00:22:10.399 --> 00:22:10.409
see sleep and a profiler but it really
 

00:22:10.409 --> 00:22:11.379
see sleep and a profiler but it really
does look like the

00:22:11.379 --> 00:22:11.389
does look like the
 

00:22:11.389 --> 00:22:15.129
does look like the
just sleeping during app startup so

00:22:15.129 --> 00:22:15.139
just sleeping during app startup so
 

00:22:15.139 --> 00:22:17.229
just sleeping during app startup so
let's go into the next try so this is

00:22:17.229 --> 00:22:17.239
let's go into the next try so this is
 

00:22:17.239 --> 00:22:21.219
let's go into the next try so this is
gameplay and gameplay here it has some

00:22:21.219 --> 00:22:21.229
gameplay and gameplay here it has some
 

00:22:21.229 --> 00:22:25.029
gameplay and gameplay here it has some
load screens kind of in the middle and I

00:22:25.029 --> 00:22:25.039
load screens kind of in the middle and I
 

00:22:25.039 --> 00:22:26.199
load screens kind of in the middle and I
wondered what was happening during that

00:22:26.199 --> 00:22:26.209
wondered what was happening during that
 

00:22:26.209 --> 00:22:35.649
wondered what was happening during that
time so the thing about gameplay and why

00:22:35.649 --> 00:22:35.659
time so the thing about gameplay and why
 

00:22:35.659 --> 00:22:37.569
time so the thing about gameplay and why
I still use catapult instead of Android

00:22:37.569 --> 00:22:37.579
I still use catapult instead of Android
 

00:22:37.579 --> 00:22:42.639
I still use catapult instead of Android
studio catapult will show you every

00:22:42.639 --> 00:22:42.649
studio catapult will show you every
 

00:22:42.649 --> 00:22:44.829
studio catapult will show you every
process on the system which is a ton of

00:22:44.829 --> 00:22:44.839
process on the system which is a ton of
 

00:22:44.839 --> 00:22:47.379
process on the system which is a ton of
data but it will also show you things

00:22:47.379 --> 00:22:47.389
data but it will also show you things
 

00:22:47.389 --> 00:22:49.419
data but it will also show you things
like surface flinger and surface flinger

00:22:49.419 --> 00:22:49.429
like surface flinger and surface flinger
 

00:22:49.429 --> 00:22:51.399
like surface flinger and surface flinger
is great and if you have no idea what

00:22:51.399 --> 00:22:51.409
is great and if you have no idea what
 

00:22:51.409 --> 00:22:52.389
is great and if you have no idea what
I'm talking about when I say surface

00:22:52.389 --> 00:22:52.399
I'm talking about when I say surface
 

00:22:52.399 --> 00:22:54.159
I'm talking about when I say surface
flinger let's talk about how a frame

00:22:54.159 --> 00:22:54.169
flinger let's talk about how a frame
 

00:22:54.169 --> 00:22:55.829
flinger let's talk about how a frame
actually makes it to the display on

00:22:55.829 --> 00:22:55.839
actually makes it to the display on
 

00:22:55.839 --> 00:23:01.060
actually makes it to the display on
Android so what is the basic lifecycle

00:23:01.060 --> 00:23:01.070
Android so what is the basic lifecycle
 

00:23:01.070 --> 00:23:04.959
Android so what is the basic lifecycle
of a frame number one apps will render a

00:23:04.959 --> 00:23:04.969
of a frame number one apps will render a
 

00:23:04.969 --> 00:23:06.909
of a frame number one apps will render a
frame so your your game will render a

00:23:06.909 --> 00:23:06.919
frame so your your game will render a
 

00:23:06.919 --> 00:23:10.239
frame so your your game will render a
frame and it will send a message to

00:23:10.239 --> 00:23:10.249
frame and it will send a message to
 

00:23:10.249 --> 00:23:13.389
frame and it will send a message to
surface flinger saying I have I have a

00:23:13.389 --> 00:23:13.399
surface flinger saying I have I have a
 

00:23:13.399 --> 00:23:16.119
surface flinger saying I have I have a
frame ready for you to display surface

00:23:16.119 --> 00:23:16.129
frame ready for you to display surface
 

00:23:16.129 --> 00:23:19.149
frame ready for you to display surface
flinger will wake up every like a 60

00:23:19.149 --> 00:23:19.159
flinger will wake up every like a 60
 

00:23:19.159 --> 00:23:21.940
flinger will wake up every like a 60
Hertz I guess and figure out which apps

00:23:21.940 --> 00:23:21.950
Hertz I guess and figure out which apps
 

00:23:21.950 --> 00:23:25.149
Hertz I guess and figure out which apps
are visible and it will build a list of

00:23:25.149 --> 00:23:25.159
are visible and it will build a list of
 

00:23:25.159 --> 00:23:29.169
are visible and it will build a list of
all the frames to be combined into a

00:23:29.169 --> 00:23:29.179
all the frames to be combined into a
 

00:23:29.179 --> 00:23:32.139
all the frames to be combined into a
form that the underlying hardware can

00:23:32.139 --> 00:23:32.149
form that the underlying hardware can
 

00:23:32.149 --> 00:23:35.649
form that the underlying hardware can
deal with so that list makes its way to

00:23:35.649 --> 00:23:35.659
deal with so that list makes its way to
 

00:23:35.659 --> 00:23:38.319
deal with so that list makes its way to
a vendor driver and vendor hardware

00:23:38.319 --> 00:23:38.329
a vendor driver and vendor hardware
 

00:23:38.329 --> 00:23:41.169
a vendor driver and vendor hardware
called the harbor composer and it will

00:23:41.169 --> 00:23:41.179
called the harbor composer and it will
 

00:23:41.179 --> 00:23:43.269
called the harbor composer and it will
take like maybe you have the status bar

00:23:43.269 --> 00:23:43.279
take like maybe you have the status bar
 

00:23:43.279 --> 00:23:49.209
take like maybe you have the status bar
up or the home and back buttons and all

00:23:49.209 --> 00:23:49.219
up or the home and back buttons and all
 

00:23:49.219 --> 00:23:51.009
up or the home and back buttons and all
of that will get overlaid and turn into

00:23:51.009 --> 00:23:51.019
of that will get overlaid and turn into
 

00:23:51.019 --> 00:23:53.560
of that will get overlaid and turn into
one frame buffer and that final frame

00:23:53.560 --> 00:23:53.570
one frame buffer and that final frame
 

00:23:53.570 --> 00:23:56.889
one frame buffer and that final frame
will be sensitive to the display the

00:23:56.889 --> 00:23:56.899
will be sensitive to the display the
 

00:23:56.899 --> 00:23:59.069
will be sensitive to the display the
great thing here is that surface flinger

00:23:59.069 --> 00:23:59.079
great thing here is that surface flinger
 

00:23:59.079 --> 00:24:02.919
great thing here is that surface flinger
tracks every app and every frame so if

00:24:02.919 --> 00:24:02.929
tracks every app and every frame so if
 

00:24:02.929 --> 00:24:04.599
tracks every app and every frame so if
we look at surface flinger state we can

00:24:04.599 --> 00:24:04.609
we look at surface flinger state we can
 

00:24:04.609 --> 00:24:09.249
we look at surface flinger state we can
see exactly what is arriving when from

00:24:09.249 --> 00:24:09.259
see exactly what is arriving when from
 

00:24:09.259 --> 00:24:13.299
see exactly what is arriving when from
any particular application so let's go

00:24:13.299 --> 00:24:13.309
any particular application so let's go
 

00:24:13.309 --> 00:24:15.279
any particular application so let's go
back and look at game play and look at

00:24:15.279 --> 00:24:15.289
back and look at game play and look at
 

00:24:15.289 --> 00:24:19.509
back and look at game play and look at
surface flinger so here we have this

00:24:19.509 --> 00:24:19.519
surface flinger so here we have this
 

00:24:19.519 --> 00:24:22.389
surface flinger so here we have this
line this surface view row and it's a

00:24:22.389 --> 00:24:22.399
line this surface view row and it's a
 

00:24:22.399 --> 00:24:23.510
line this surface view row and it's a
counter

00:24:23.510 --> 00:24:23.520
counter
 

00:24:23.520 --> 00:24:26.480
counter
so the surface view is triple buffered

00:24:26.480 --> 00:24:26.490
so the surface view is triple buffered
 

00:24:26.490 --> 00:24:28.700
so the surface view is triple buffered
so you either have zero frames pending

00:24:28.700 --> 00:24:28.710
so you either have zero frames pending
 

00:24:28.710 --> 00:24:33.169
so you either have zero frames pending
or one or two frames and you can see

00:24:33.169 --> 00:24:33.179
or one or two frames and you can see
 

00:24:33.179 --> 00:24:34.669
or one or two frames and you can see
it's usually bouncing around which means

00:24:34.669 --> 00:24:34.679
it's usually bouncing around which means
 

00:24:34.679 --> 00:24:36.740
it's usually bouncing around which means
we are getting frames from the app but

00:24:36.740 --> 00:24:36.750
we are getting frames from the app but
 

00:24:36.750 --> 00:24:40.250
we are getting frames from the app but
again there's a gap here and it's about

00:24:40.250 --> 00:24:40.260
again there's a gap here and it's about
 

00:24:40.260 --> 00:24:42.410
again there's a gap here and it's about
700 milliseconds and the game does do

00:24:42.410 --> 00:24:42.420
700 milliseconds and the game does do
 

00:24:42.420 --> 00:24:45.560
700 milliseconds and the game does do
something with load screens so let's go

00:24:45.560 --> 00:24:45.570
something with load screens so let's go
 

00:24:45.570 --> 00:24:47.180
something with load screens so let's go
see what the app is doing because this

00:24:47.180 --> 00:24:47.190
see what the app is doing because this
 

00:24:47.190 --> 00:24:51.620
see what the app is doing because this
is probably a load screen and here yeah

00:24:51.620 --> 00:24:51.630
is probably a load screen and here yeah
 

00:24:51.630 --> 00:24:53.990
is probably a load screen and here yeah
we have this long 700 millisecond on

00:24:53.990 --> 00:24:54.000
we have this long 700 millisecond on
 

00:24:54.000 --> 00:25:00.620
we have this long 700 millisecond on
draw frame section and if we look and

00:25:00.620 --> 00:25:00.630
draw frame section and if we look and
 

00:25:00.630 --> 00:25:02.000
draw frame section and if we look and
see what's actually happening yeah it's

00:25:02.000 --> 00:25:02.010
see what's actually happening yeah it's
 

00:25:02.010 --> 00:25:04.549
see what's actually happening yeah it's
running for about what is that 190

00:25:04.549 --> 00:25:04.559
running for about what is that 190
 

00:25:04.559 --> 00:25:07.910
running for about what is that 190
milliseconds and sleeping for five

00:25:07.910 --> 00:25:07.920
milliseconds and sleeping for five
 

00:25:07.920 --> 00:25:11.870
milliseconds and sleeping for five
hundred odd milliseconds so it's waiting

00:25:11.870 --> 00:25:11.880
hundred odd milliseconds so it's waiting
 

00:25:11.880 --> 00:25:13.970
hundred odd milliseconds so it's waiting
on other work that happen now there are

00:25:13.970 --> 00:25:13.980
on other work that happen now there are
 

00:25:13.980 --> 00:25:15.560
on other work that happen now there are
these other two threads nearby that seem

00:25:15.560 --> 00:25:15.570
these other two threads nearby that seem
 

00:25:15.570 --> 00:25:19.510
these other two threads nearby that seem
to be doing work what's up with them

00:25:19.510 --> 00:25:19.520
to be doing work what's up with them
 

00:25:19.520 --> 00:25:22.250
to be doing work what's up with them
well they're running and sleeping and

00:25:22.250 --> 00:25:22.260
well they're running and sleeping and
 

00:25:22.260 --> 00:25:25.640
well they're running and sleeping and
runnable for some of it so I let's say

00:25:25.640 --> 00:25:25.650
runnable for some of it so I let's say
 

00:25:25.650 --> 00:25:28.940
runnable for some of it so I let's say
said okay yeah so if you actually look

00:25:28.940 --> 00:25:28.950
said okay yeah so if you actually look
 

00:25:28.950 --> 00:25:32.770
said okay yeah so if you actually look
at what these thread sections are it is

00:25:32.770 --> 00:25:32.780
at what these thread sections are it is
 

00:25:32.780 --> 00:25:36.320
at what these thread sections are it is
they're tagged with IO MX which I know

00:25:36.320 --> 00:25:36.330
they're tagged with IO MX which I know
 

00:25:36.330 --> 00:25:38.900
they're tagged with IO MX which I know
from other Android things is sound stuff

00:25:38.900 --> 00:25:38.910
from other Android things is sound stuff
 

00:25:38.910 --> 00:25:40.880
from other Android things is sound stuff
so I think what's actually happening

00:25:40.880 --> 00:25:40.890
so I think what's actually happening
 

00:25:40.890 --> 00:25:43.700
so I think what's actually happening
here is the game is pausing it's loading

00:25:43.700 --> 00:25:43.710
here is the game is pausing it's loading
 

00:25:43.710 --> 00:25:48.880
here is the game is pausing it's loading
or pausing you know displaying frames in

00:25:48.880 --> 00:25:48.890
or pausing you know displaying frames in
 

00:25:48.890 --> 00:25:52.970
or pausing you know displaying frames in
order to lure load more sounds but you

00:25:52.970 --> 00:25:52.980
order to lure load more sounds but you
 

00:25:52.980 --> 00:25:55.490
order to lure load more sounds but you
can see kind of before this big loading

00:25:55.490 --> 00:25:55.500
can see kind of before this big loading
 

00:25:55.500 --> 00:25:58.669
can see kind of before this big loading
section there's a lot of free CPU cycles

00:25:58.669 --> 00:25:58.679
section there's a lot of free CPU cycles
 

00:25:58.679 --> 00:26:03.230
section there's a lot of free CPU cycles
like the game is not keeping the device

00:26:03.230 --> 00:26:03.240
like the game is not keeping the device
 

00:26:03.240 --> 00:26:08.030
like the game is not keeping the device
that dizzy this load screen can probably

00:26:08.030 --> 00:26:08.040
that dizzy this load screen can probably
 

00:26:08.040 --> 00:26:11.180
that dizzy this load screen can probably
be fixed like removed completely just by

00:26:11.180 --> 00:26:11.190
be fixed like removed completely just by
 

00:26:11.190 --> 00:26:13.190
be fixed like removed completely just by
moving a lot of this loading ahead of

00:26:13.190 --> 00:26:13.200
moving a lot of this loading ahead of
 

00:26:13.200 --> 00:26:18.460
moving a lot of this loading ahead of
time to overlap with actual gameplay

00:26:18.460 --> 00:26:18.470
time to overlap with actual gameplay
 

00:26:18.470 --> 00:26:21.919
time to overlap with actual gameplay
because this there's enough CPU time to

00:26:21.919 --> 00:26:21.929
because this there's enough CPU time to
 

00:26:21.929 --> 00:26:24.530
because this there's enough CPU time to
do it so that's the kind of stuff you

00:26:24.530 --> 00:26:24.540
do it so that's the kind of stuff you
 

00:26:24.540 --> 00:26:27.590
do it so that's the kind of stuff you
can get out of systrace in kind of less

00:26:27.590 --> 00:26:27.600
can get out of systrace in kind of less
 

00:26:27.600 --> 00:26:29.180
can get out of systrace in kind of less
graphically intensive games now let's

00:26:29.180 --> 00:26:29.190
graphically intensive games now let's
 

00:26:29.190 --> 00:26:31.580
graphically intensive games now let's
look at a really graphically intensive

00:26:31.580 --> 00:26:31.590
look at a really graphically intensive
 

00:26:31.590 --> 00:26:35.780
look at a really graphically intensive
game so this one uses unity as well and

00:26:35.780 --> 00:26:35.790
game so this one uses unity as well and
 

00:26:35.790 --> 00:26:37.340
game so this one uses unity as well and
let's see I think I had

00:26:37.340 --> 00:26:37.350
let's see I think I had
 

00:26:37.350 --> 00:26:40.879
let's see I think I had
i level start here and then we have

00:26:40.879 --> 00:26:40.889
i level start here and then we have
 

00:26:40.889 --> 00:26:44.899
i level start here and then we have
actual gameplay next so for my level

00:26:44.899 --> 00:26:44.909
actual gameplay next so for my level
 

00:26:44.909 --> 00:26:49.129
actual gameplay next so for my level
start trace this is what I see when I

00:26:49.129 --> 00:26:49.139
start trace this is what I see when I
 

00:26:49.139 --> 00:26:52.820
start trace this is what I see when I
first open it up and you can see the

00:26:52.820 --> 00:26:52.830
first open it up and you can see the
 

00:26:52.830 --> 00:26:56.029
first open it up and you can see the
surface view in the center there and it

00:26:56.029 --> 00:26:56.039
surface view in the center there and it
 

00:26:56.039 --> 00:26:57.799
surface view in the center there and it
does have a big chunk where surface

00:26:57.799 --> 00:26:57.809
does have a big chunk where surface
 

00:26:57.809 --> 00:26:59.779
does have a big chunk where surface
planer is not displaying anything

00:26:59.779 --> 00:26:59.789
planer is not displaying anything
 

00:26:59.789 --> 00:27:03.019
planer is not displaying anything
because no friends are really arriving

00:27:03.019 --> 00:27:03.029
because no friends are really arriving
 

00:27:03.029 --> 00:27:07.789
because no friends are really arriving
from the game and if we actually trace

00:27:07.789 --> 00:27:07.799
from the game and if we actually trace
 

00:27:07.799 --> 00:27:12.110
from the game and if we actually trace
from like highlight from where frames

00:27:12.110 --> 00:27:12.120
from like highlight from where frames
 

00:27:12.120 --> 00:27:14.269
from like highlight from where frames
are being consistently delivered in

00:27:14.269 --> 00:27:14.279
are being consistently delivered in
 

00:27:14.279 --> 00:27:17.029
are being consistently delivered in
other words before I started the level 2

00:27:17.029 --> 00:27:17.039
other words before I started the level 2
 

00:27:17.039 --> 00:27:18.529
other words before I started the level 2
when they are being consistently

00:27:18.529 --> 00:27:18.539
when they are being consistently
 

00:27:18.539 --> 00:27:20.960
when they are being consistently
delivered again that's probably after

00:27:20.960 --> 00:27:20.970
delivered again that's probably after
 

00:27:20.970 --> 00:27:24.649
delivered again that's probably after
the game is really displaying stuff it's

00:27:24.649 --> 00:27:24.659
the game is really displaying stuff it's
 

00:27:24.659 --> 00:27:28.460
the game is really displaying stuff it's
about 5.7 seconds it's pretty long as a

00:27:28.460 --> 00:27:28.470
about 5.7 seconds it's pretty long as a
 

00:27:28.470 --> 00:27:34.129
about 5.7 seconds it's pretty long as a
as a player to see that so let's go see

00:27:34.129 --> 00:27:34.139
as a player to see that so let's go see
 

00:27:34.139 --> 00:27:37.700
as a player to see that so let's go see
what the game is actually doing so here

00:27:37.700 --> 00:27:37.710
what the game is actually doing so here
 

00:27:37.710 --> 00:27:42.230
what the game is actually doing so here
is the unity main thread and the unity

00:27:42.230 --> 00:27:42.240
is the unity main thread and the unity
 

00:27:42.240 --> 00:27:43.940
is the unity main thread and the unity
main thread if you look at unity apps

00:27:43.940 --> 00:27:43.950
main thread if you look at unity apps
 

00:27:43.950 --> 00:27:45.259
main thread if you look at unity apps
you're gonna be looking at the in demand

00:27:45.259 --> 00:27:45.269
you're gonna be looking at the in demand
 

00:27:45.269 --> 00:27:47.690
you're gonna be looking at the in demand
thread a whole lot but you can see it is

00:27:47.690 --> 00:27:47.700
thread a whole lot but you can see it is
 

00:27:47.700 --> 00:27:52.279
thread a whole lot but you can see it is
not super busy which is weird and not

00:27:52.279 --> 00:27:52.289
not super busy which is weird and not
 

00:27:52.289 --> 00:27:56.899
not super busy which is weird and not
great so what is it actually doing well

00:27:56.899 --> 00:27:56.909
great so what is it actually doing well
 

00:27:56.909 --> 00:28:00.289
great so what is it actually doing well
it's running for where's it 3.1 seconds

00:28:00.289 --> 00:28:00.299
it's running for where's it 3.1 seconds
 

00:28:00.299 --> 00:28:04.509
it's running for where's it 3.1 seconds
and it's sleeping for 2.5 seconds so

00:28:04.509 --> 00:28:04.519
and it's sleeping for 2.5 seconds so
 

00:28:04.519 --> 00:28:06.740
and it's sleeping for 2.5 seconds so
what's actually happening during this

00:28:06.740 --> 00:28:06.750
what's actually happening during this
 

00:28:06.750 --> 00:28:12.350
what's actually happening during this
sleep so if we zoom in a lot and now

00:28:12.350 --> 00:28:12.360
sleep so if we zoom in a lot and now
 

00:28:12.360 --> 00:28:13.730
sleep so if we zoom in a lot and now
we're looking at a three hundred

00:28:13.730 --> 00:28:13.740
we're looking at a three hundred
 

00:28:13.740 --> 00:28:17.119
we're looking at a three hundred
millisecond period that you like I saw

00:28:17.119 --> 00:28:17.129
millisecond period that you like I saw
 

00:28:17.129 --> 00:28:20.330
millisecond period that you like I saw
this 300 millisecond pattern repeat kind

00:28:20.330 --> 00:28:20.340
this 300 millisecond pattern repeat kind
 

00:28:20.340 --> 00:28:22.820
this 300 millisecond pattern repeat kind
of consistently throughout this unity

00:28:22.820 --> 00:28:22.830
of consistently throughout this unity
 

00:28:22.830 --> 00:28:27.320
of consistently throughout this unity
main section you see that it runs for a

00:28:27.320 --> 00:28:27.330
main section you see that it runs for a
 

00:28:27.330 --> 00:28:28.820
main section you see that it runs for a
bit and then goes to sleep and runs for

00:28:28.820 --> 00:28:28.830
bit and then goes to sleep and runs for
 

00:28:28.830 --> 00:28:31.340
bit and then goes to sleep and runs for
bit and goes to sleep and repeat and it

00:28:31.340 --> 00:28:31.350
bit and goes to sleep and repeat and it
 

00:28:31.350 --> 00:28:33.680
bit and goes to sleep and repeat and it
looks really periodic it looks like it's

00:28:33.680 --> 00:28:33.690
looks really periodic it looks like it's
 

00:28:33.690 --> 00:28:37.879
looks really periodic it looks like it's
happening on frame boundaries so let's

00:28:37.879 --> 00:28:37.889
happening on frame boundaries so let's
 

00:28:37.889 --> 00:28:40.159
happening on frame boundaries so let's
see what's actually waking it up so once

00:28:40.159 --> 00:28:40.169
see what's actually waking it up so once
 

00:28:40.169 --> 00:28:42.769
see what's actually waking it up so once
again we can zoom in and there's a tiny

00:28:42.769 --> 00:28:42.779
again we can zoom in and there's a tiny
 

00:28:42.779 --> 00:28:44.810
again we can zoom in and there's a tiny
little blue bar that is probably not

00:28:44.810 --> 00:28:44.820
little blue bar that is probably not
 

00:28:44.820 --> 00:28:48.500
little blue bar that is probably not
visible from this but we can see the

00:28:48.500 --> 00:28:48.510
visible from this but we can see the
 

00:28:48.510 --> 00:28:50.520
visible from this but we can see the
wake up from tid

00:28:50.520 --> 00:28:50.530
wake up from tid
 

00:28:50.530 --> 00:28:53.300
wake up from tid
three one five two six which is

00:28:53.300 --> 00:28:53.310
three one five two six which is
 

00:28:53.310 --> 00:28:55.980
three one five two six which is
something so we can go scroll to the top

00:28:55.980 --> 00:28:55.990
something so we can go scroll to the top
 

00:28:55.990 --> 00:28:59.850
something so we can go scroll to the top
of the the trace now and figure out what

00:28:59.850 --> 00:28:59.860
of the the trace now and figure out what
 

00:28:59.860 --> 00:29:00.200
of the the trace now and figure out what
that is

00:29:00.200 --> 00:29:00.210
that is
 

00:29:00.210 --> 00:29:02.960
that is
hey it's the unity choreographer thread

00:29:02.960 --> 00:29:02.970
hey it's the unity choreographer thread
 

00:29:02.970 --> 00:29:05.760
hey it's the unity choreographer thread
so what I think is happening here is

00:29:05.760 --> 00:29:05.770
so what I think is happening here is
 

00:29:05.770 --> 00:29:11.010
so what I think is happening here is
that the game is running some unity

00:29:11.010 --> 00:29:11.020
that the game is running some unity
 

00:29:11.020 --> 00:29:13.440
that the game is running some unity
script and in that unity script they're

00:29:13.440 --> 00:29:13.450
script and in that unity script they're
 

00:29:13.450 --> 00:29:16.680
script and in that unity script they're
saying like they're trying to be be nice

00:29:16.680 --> 00:29:16.690
saying like they're trying to be be nice
 

00:29:16.690 --> 00:29:20.910
saying like they're trying to be be nice
and not like block rendering and saying

00:29:20.910 --> 00:29:20.920
and not like block rendering and saying
 

00:29:20.920 --> 00:29:25.950
and not like block rendering and saying
wait until next frame but this is

00:29:25.950 --> 00:29:25.960
wait until next frame but this is
 

00:29:25.960 --> 00:29:28.320
wait until next frame but this is
causing their load times to suffer a lot

00:29:28.320 --> 00:29:28.330
causing their load times to suffer a lot
 

00:29:28.330 --> 00:29:30.300
causing their load times to suffer a lot
there's probably a good one and a half

00:29:30.300 --> 00:29:30.310
there's probably a good one and a half
 

00:29:30.310 --> 00:29:33.240
there's probably a good one and a half
two seconds that get back by not doing

00:29:33.240 --> 00:29:33.250
two seconds that get back by not doing
 

00:29:33.250 --> 00:29:38.100
two seconds that get back by not doing
this during the actual load just because

00:29:38.100 --> 00:29:38.110
this during the actual load just because
 

00:29:38.110 --> 00:29:40.320
this during the actual load just because
there is so much free time on that

00:29:40.320 --> 00:29:40.330
there is so much free time on that
 

00:29:40.330 --> 00:29:42.210
there is so much free time on that
thread and that is the that is the

00:29:42.210 --> 00:29:42.220
thread and that is the that is the
 

00:29:42.220 --> 00:29:43.860
thread and that is the that is the
bottleneck for the load here there's

00:29:43.860 --> 00:29:43.870
bottleneck for the load here there's
 

00:29:43.870 --> 00:29:48.300
bottleneck for the load here there's
actually very little IO done here one of

00:29:48.300 --> 00:29:48.310
actually very little IO done here one of
 

00:29:48.310 --> 00:29:51.000
actually very little IO done here one of
the things we see in general on Android

00:29:51.000 --> 00:29:51.010
the things we see in general on Android
 

00:29:51.010 --> 00:29:54.770
the things we see in general on Android
is that you're generally not IO bound

00:29:54.770 --> 00:29:54.780
is that you're generally not IO bound
 

00:29:54.780 --> 00:29:57.360
is that you're generally not IO bound
especially on high-end devices low-end

00:29:57.360 --> 00:29:57.370
especially on high-end devices low-end
 

00:29:57.370 --> 00:29:59.100
especially on high-end devices low-end
devices like really low-end device is

00:29:59.100 --> 00:29:59.110
devices like really low-end device is
 

00:29:59.110 --> 00:30:00.930
devices like really low-end device is
very different but if you're talking mid

00:30:00.930 --> 00:30:00.940
very different but if you're talking mid
 

00:30:00.940 --> 00:30:02.790
very different but if you're talking mid
or high-end in the past few years

00:30:02.790 --> 00:30:02.800
or high-end in the past few years
 

00:30:02.800 --> 00:30:05.100
or high-end in the past few years
flash performance has increased

00:30:05.100 --> 00:30:05.110
flash performance has increased
 

00:30:05.110 --> 00:30:07.950
flash performance has increased
dramatically to the point that it's

00:30:07.950 --> 00:30:07.960
dramatically to the point that it's
 

00:30:07.960 --> 00:30:09.510
dramatically to the point that it's
faster than a lot of desktop machines

00:30:09.510 --> 00:30:09.520
faster than a lot of desktop machines
 

00:30:09.520 --> 00:30:14.880
faster than a lot of desktop machines
and you're not that I Oh bound knows the

00:30:14.880 --> 00:30:14.890
and you're not that I Oh bound knows the
 

00:30:14.890 --> 00:30:16.410
and you're not that I Oh bound knows the
time the biggest bottleneck is

00:30:16.410 --> 00:30:16.420
time the biggest bottleneck is
 

00:30:16.420 --> 00:30:18.210
time the biggest bottleneck is
definitely the CPU and that's what we

00:30:18.210 --> 00:30:18.220
definitely the CPU and that's what we
 

00:30:18.220 --> 00:30:21.450
definitely the CPU and that's what we
see like even in this very graphically

00:30:21.450 --> 00:30:21.460
see like even in this very graphically
 

00:30:21.460 --> 00:30:22.290
see like even in this very graphically
intensive game

00:30:22.290 --> 00:30:22.300
intensive game
 

00:30:22.300 --> 00:30:25.740
intensive game
it's bottleneck by the CPU let's look at

00:30:25.740 --> 00:30:25.750
it's bottleneck by the CPU let's look at
 

00:30:25.750 --> 00:30:28.260
it's bottleneck by the CPU let's look at
gameplay because there's some

00:30:28.260 --> 00:30:28.270
gameplay because there's some
 

00:30:28.270 --> 00:30:31.890
gameplay because there's some
interesting stuff there too so once

00:30:31.890 --> 00:30:31.900
interesting stuff there too so once
 

00:30:31.900 --> 00:30:34.190
interesting stuff there too so once
again there's the the surface view and

00:30:34.190 --> 00:30:34.200
again there's the the surface view and
 

00:30:34.200 --> 00:30:36.780
again there's the the surface view and
you can see it's kind of taking back and

00:30:36.780 --> 00:30:36.790
you can see it's kind of taking back and
 

00:30:36.790 --> 00:30:39.480
you can see it's kind of taking back and
forth in the middle there and overall it

00:30:39.480 --> 00:30:39.490
forth in the middle there and overall it
 

00:30:39.490 --> 00:30:42.120
forth in the middle there and overall it
looks pretty good I have very few

00:30:42.120 --> 00:30:42.130
looks pretty good I have very few
 

00:30:42.130 --> 00:30:44.220
looks pretty good I have very few
complaints about this but I can always

00:30:44.220 --> 00:30:44.230
complaints about this but I can always
 

00:30:44.230 --> 00:30:47.130
complaints about this but I can always
be pretty commit picky so let's find

00:30:47.130 --> 00:30:47.140
be pretty commit picky so let's find
 

00:30:47.140 --> 00:30:51.900
be pretty commit picky so let's find
something that is wrong so it did drop a

00:30:51.900 --> 00:30:51.910
something that is wrong so it did drop a
 

00:30:51.910 --> 00:30:54.120
something that is wrong so it did drop a
frame in the middle here there is a

00:30:54.120 --> 00:30:54.130
frame in the middle here there is a
 

00:30:54.130 --> 00:30:56.610
frame in the middle here there is a
place where it should have rendered a

00:30:56.610 --> 00:30:56.620
place where it should have rendered a
 

00:30:56.620 --> 00:30:58.710
place where it should have rendered a
friend and it just didn't

00:30:58.710 --> 00:30:58.720
friend and it just didn't
 

00:30:58.720 --> 00:31:01.140
friend and it just didn't
like no frame was ready for surface

00:31:01.140 --> 00:31:01.150
like no frame was ready for surface
 

00:31:01.150 --> 00:31:04.320
like no frame was ready for surface
flinger so the app probably did not

00:31:04.320 --> 00:31:04.330
flinger so the app probably did not
 

00:31:04.330 --> 00:31:07.680
flinger so the app probably did not
complete a frame on time so let's scroll

00:31:07.680 --> 00:31:07.690
complete a frame on time so let's scroll
 

00:31:07.690 --> 00:31:09.450
complete a frame on time so let's scroll
down and see what happened in the app to

00:31:09.450 --> 00:31:09.460
down and see what happened in the app to
 

00:31:09.460 --> 00:31:13.830
down and see what happened in the app to
make it not complete a frame on time so

00:31:13.830 --> 00:31:13.840
make it not complete a frame on time so
 

00:31:13.840 --> 00:31:16.980
make it not complete a frame on time so
here is the unity GFX device three which

00:31:16.980 --> 00:31:16.990
here is the unity GFX device three which
 

00:31:16.990 --> 00:31:18.390
here is the unity GFX device three which
is actually dispatching the render calls

00:31:18.390 --> 00:31:18.400
is actually dispatching the render calls
 

00:31:18.400 --> 00:31:19.680
is actually dispatching the render calls
it looks like at one point it just

00:31:19.680 --> 00:31:19.690
it looks like at one point it just
 

00:31:19.690 --> 00:31:23.910
it looks like at one point it just
skipped so it just missed like something

00:31:23.910 --> 00:31:23.920
skipped so it just missed like something
 

00:31:23.920 --> 00:31:25.470
skipped so it just missed like something
missed a deadline somewhere and it

00:31:25.470 --> 00:31:25.480
missed a deadline somewhere and it
 

00:31:25.480 --> 00:31:27.630
missed a deadline somewhere and it
decided hey just drop the frame we're

00:31:27.630 --> 00:31:27.640
decided hey just drop the frame we're
 

00:31:27.640 --> 00:31:30.510
decided hey just drop the frame we're
not gonna make it so let's look at the

00:31:30.510 --> 00:31:30.520
not gonna make it so let's look at the
 

00:31:30.520 --> 00:31:32.010
not gonna make it so let's look at the
Unity main thread and see what's going

00:31:32.010 --> 00:31:32.020
Unity main thread and see what's going
 

00:31:32.020 --> 00:31:32.540
Unity main thread and see what's going
on

00:31:32.540 --> 00:31:32.550
on
 

00:31:32.550 --> 00:31:37.190
on
aha there is the kind of smoking gun

00:31:37.190 --> 00:31:37.200
aha there is the kind of smoking gun
 

00:31:37.200 --> 00:31:41.280
aha there is the kind of smoking gun
immediately before that dropped frame

00:31:41.280 --> 00:31:41.290
immediately before that dropped frame
 

00:31:41.290 --> 00:31:44.160
immediately before that dropped frame
from the unity GFX device we see a bunch

00:31:44.160 --> 00:31:44.170
from the unity GFX device we see a bunch
 

00:31:44.170 --> 00:31:47.310
from the unity GFX device we see a bunch
of i/o on the unity main thread that's a

00:31:47.310 --> 00:31:47.320
of i/o on the unity main thread that's a
 

00:31:47.320 --> 00:31:49.290
of i/o on the unity main thread that's a
little weird I wonder why that happened

00:31:49.290 --> 00:31:49.300
little weird I wonder why that happened
 

00:31:49.300 --> 00:31:51.540
little weird I wonder why that happened
but then I scroll up and realized that

00:31:51.540 --> 00:31:51.550
but then I scroll up and realized that
 

00:31:51.550 --> 00:31:53.790
but then I scroll up and realized that
is exactly when I touched the screen to

00:31:53.790 --> 00:31:53.800
is exactly when I touched the screen to
 

00:31:53.800 --> 00:31:55.850
is exactly when I touched the screen to
trigger some special thing in the game

00:31:55.850 --> 00:31:55.860
trigger some special thing in the game
 

00:31:55.860 --> 00:32:01.830
trigger some special thing in the game
so my guess is that I pressed the button

00:32:01.830 --> 00:32:01.840
so my guess is that I pressed the button
 

00:32:01.840 --> 00:32:04.140
so my guess is that I pressed the button
in the game there was something on the

00:32:04.140 --> 00:32:04.150
in the game there was something on the
 

00:32:04.150 --> 00:32:06.300
in the game there was something on the
disk that was not loaded and even though

00:32:06.300 --> 00:32:06.310
disk that was not loaded and even though
 

00:32:06.310 --> 00:32:08.400
disk that was not loaded and even though
our just throughput is really high it's

00:32:08.400 --> 00:32:08.410
our just throughput is really high it's
 

00:32:08.410 --> 00:32:10.320
our just throughput is really high it's
still disk latency so it takes a while

00:32:10.320 --> 00:32:10.330
still disk latency so it takes a while
 

00:32:10.330 --> 00:32:12.840
still disk latency so it takes a while
for you know even if it was 20 bytes it

00:32:12.840 --> 00:32:12.850
for you know even if it was 20 bytes it
 

00:32:12.850 --> 00:32:14.430
for you know even if it was 20 bytes it
will still take a while to get those 20

00:32:14.430 --> 00:32:14.440
will still take a while to get those 20
 

00:32:14.440 --> 00:32:17.220
will still take a while to get those 20
bytes off of disk that blocked the unity

00:32:17.220 --> 00:32:17.230
bytes off of disk that blocked the unity
 

00:32:17.230 --> 00:32:19.650
bytes off of disk that blocked the unity
main thread which in turn caused the

00:32:19.650 --> 00:32:19.660
main thread which in turn caused the
 

00:32:19.660 --> 00:32:22.620
main thread which in turn caused the
unity GFX the device thread to not

00:32:22.620 --> 00:32:22.630
unity GFX the device thread to not
 

00:32:22.630 --> 00:32:25.680
unity GFX the device thread to not
render a frame and that was seen as a

00:32:25.680 --> 00:32:25.690
render a frame and that was seen as a
 

00:32:25.690 --> 00:32:29.730
render a frame and that was seen as a
frame drop but overall this is actually

00:32:29.730 --> 00:32:29.740
frame drop but overall this is actually
 

00:32:29.740 --> 00:32:31.800
frame drop but overall this is actually
a pretty good game it's running pretty

00:32:31.800 --> 00:32:31.810
a pretty good game it's running pretty
 

00:32:31.810 --> 00:32:36.300
a pretty good game it's running pretty
close to you know a solid thirty Phipps

00:32:36.300 --> 00:32:36.310
close to you know a solid thirty Phipps
 

00:32:36.310 --> 00:32:39.600
close to you know a solid thirty Phipps
I think but it is actually you know

00:32:39.600 --> 00:32:39.610
I think but it is actually you know
 

00:32:39.610 --> 00:32:43.430
I think but it is actually you know
maintaining it and working really well

00:32:43.430 --> 00:32:43.440
maintaining it and working really well
 

00:32:43.440 --> 00:32:45.900
maintaining it and working really well
but you know there's always something

00:32:45.900 --> 00:32:45.910
but you know there's always something
 

00:32:45.910 --> 00:32:50.160
but you know there's always something
you can improve with performance you you

00:32:50.160 --> 00:32:50.170
you can improve with performance you you
 

00:32:50.170 --> 00:32:53.130
you can improve with performance you you
can always be harsher on yourself

00:32:53.130 --> 00:32:53.140
can always be harsher on yourself
 

00:32:53.140 --> 00:32:55.650
can always be harsher on yourself
but that's why that's kind of the data

00:32:55.650 --> 00:32:55.660
but that's why that's kind of the data
 

00:32:55.660 --> 00:32:58.080
but that's why that's kind of the data
we get out of systrace it's exactly what

00:32:58.080 --> 00:32:58.090
we get out of systrace it's exactly what
 

00:32:58.090 --> 00:33:00.030
we get out of systrace it's exactly what
happened and it allows you to tie it

00:33:00.030 --> 00:33:00.040
happened and it allows you to tie it
 

00:33:00.040 --> 00:33:02.100
happened and it allows you to tie it
together across the system to figure out

00:33:02.100 --> 00:33:02.110
together across the system to figure out
 

00:33:02.110 --> 00:33:04.920
together across the system to figure out
what actually went wrong and coupled

00:33:04.920 --> 00:33:04.930
what actually went wrong and coupled
 

00:33:04.930 --> 00:33:08.940
what actually went wrong and coupled
with the new support and Android P for

00:33:08.940 --> 00:33:08.950
with the new support and Android P for
 

00:33:08.950 --> 00:33:11.700
with the new support and Android P for
triggering a trace on device

00:33:11.700 --> 00:33:11.710
triggering a trace on device
 

00:33:11.710 --> 00:33:15.150
triggering a trace on device
it's easier than ever to actually I'd

00:33:15.150 --> 00:33:15.160
it's easier than ever to actually I'd
 

00:33:15.160 --> 00:33:18.660
it's easier than ever to actually I'd
like spots performance issues and figure

00:33:18.660 --> 00:33:18.670
like spots performance issues and figure
 

00:33:18.670 --> 00:33:22.710
like spots performance issues and figure
out what's going on so yeah I guess

00:33:22.710 --> 00:33:22.720
out what's going on so yeah I guess
 

00:33:22.720 --> 00:33:35.160
out what's going on so yeah I guess
questions you just mentioned that most

00:33:35.160 --> 00:33:35.170
questions you just mentioned that most
 

00:33:35.170 --> 00:33:37.430
questions you just mentioned that most
of the games are not IO bound right yeah

00:33:37.430 --> 00:33:37.440
of the games are not IO bound right yeah
 

00:33:37.440 --> 00:33:40.980
of the games are not IO bound right yeah
so basically it's true when the assets

00:33:40.980 --> 00:33:40.990
so basically it's true when the assets
 

00:33:40.990 --> 00:33:44.040
so basically it's true when the assets
are uncompressed but the apk is

00:33:44.040 --> 00:33:44.050
are uncompressed but the apk is
 

00:33:44.050 --> 00:33:45.680
are uncompressed but the apk is
compressed itself of course you can

00:33:45.680 --> 00:33:45.690
compressed itself of course you can
 

00:33:45.690 --> 00:33:48.120
compressed itself of course you can
store some of the things without this

00:33:48.120 --> 00:33:48.130
store some of the things without this
 

00:33:48.130 --> 00:33:50.670
store some of the things without this
deflate compression there but in that

00:33:50.670 --> 00:33:50.680
deflate compression there but in that
 

00:33:50.680 --> 00:33:52.670
deflate compression there but in that
case the size is going to probably

00:33:52.670 --> 00:33:52.680
case the size is going to probably
 

00:33:52.680 --> 00:33:55.500
case the size is going to probably
bypass the hundred megabyte limit yeah

00:33:55.500 --> 00:33:55.510
bypass the hundred megabyte limit yeah
 

00:33:55.510 --> 00:33:58.740
bypass the hundred megabyte limit yeah
so if you want to read 20 bytes from the

00:33:58.740 --> 00:33:58.750
so if you want to read 20 bytes from the
 

00:33:58.750 --> 00:34:00.810
so if you want to read 20 bytes from the
disk it's not like reading 20 bytes from

00:34:00.810 --> 00:34:00.820
disk it's not like reading 20 bytes from
 

00:34:00.820 --> 00:34:02.370
disk it's not like reading 20 bytes from
the disk we have to read a whole block

00:34:02.370 --> 00:34:02.380
the disk we have to read a whole block
 

00:34:02.380 --> 00:34:05.130
the disk we have to read a whole block
of a zip compressed file then decompress

00:34:05.130 --> 00:34:05.140
of a zip compressed file then decompress
 

00:34:05.140 --> 00:34:07.200
of a zip compressed file then decompress
it and then you have access to these 20

00:34:07.200 --> 00:34:07.210
it and then you have access to these 20
 

00:34:07.210 --> 00:34:10.290
it and then you have access to these 20
bytes and that actually is something

00:34:10.290 --> 00:34:10.300
bytes and that actually is something
 

00:34:10.300 --> 00:34:12.510
bytes and that actually is something
which you probably can't even solve with

00:34:12.510 --> 00:34:12.520
which you probably can't even solve with
 

00:34:12.520 --> 00:34:16.020
which you probably can't even solve with
the higher speeds of the flesh sure but

00:34:16.020 --> 00:34:16.030
the higher speeds of the flesh sure but
 

00:34:16.030 --> 00:34:19.290
the higher speeds of the flesh sure but
with the flash I mean even the latency

00:34:19.290 --> 00:34:19.300
with the flash I mean even the latency
 

00:34:19.300 --> 00:34:23.730
with the flash I mean even the latency
is still poor compared to you know it's

00:34:23.730 --> 00:34:23.740
is still poor compared to you know it's
 

00:34:23.740 --> 00:34:25.860
is still poor compared to you know it's
not like you know spinning disk poor but

00:34:25.860 --> 00:34:25.870
not like you know spinning disk poor but
 

00:34:25.870 --> 00:34:28.560
not like you know spinning disk poor but
compared to something that's already a

00:34:28.560 --> 00:34:28.570
compared to something that's already a
 

00:34:28.570 --> 00:34:31.500
compared to something that's already a
memory it's it's dramatically higher and

00:34:31.500 --> 00:34:31.510
memory it's it's dramatically higher and
 

00:34:31.510 --> 00:34:34.500
memory it's it's dramatically higher and
you're always going to read some fixed

00:34:34.500 --> 00:34:34.510
you're always going to read some fixed
 

00:34:34.510 --> 00:34:36.330
you're always going to read some fixed
amount like there's a I forgot the

00:34:36.330 --> 00:34:36.340
amount like there's a I forgot the
 

00:34:36.340 --> 00:34:39.270
amount like there's a I forgot the
minimum granularity you can read from

00:34:39.270 --> 00:34:39.280
minimum granularity you can read from
 

00:34:39.280 --> 00:34:41.190
minimum granularity you can read from
the flashes but you're always going to

00:34:41.190 --> 00:34:41.200
the flashes but you're always going to
 

00:34:41.200 --> 00:34:45.899
the flashes but you're always going to
read some block size from the flash so

00:34:45.899 --> 00:34:45.909
read some block size from the flash so
 

00:34:45.909 --> 00:34:47.639
read some block size from the flash so
it doesn't really matter if you have 4k

00:34:47.639 --> 00:34:47.649
it doesn't really matter if you have 4k
 

00:34:47.649 --> 00:34:50.340
it doesn't really matter if you have 4k
to read or you know three bytes to read

00:34:50.340 --> 00:34:50.350
to read or you know three bytes to read
 

00:34:50.350 --> 00:34:51.690
to read or you know three bytes to read
you're gonna read the same amount of

00:34:51.690 --> 00:34:51.700
you're gonna read the same amount of
 

00:34:51.700 --> 00:34:53.340
you're gonna read the same amount of
data yeah there are multiple layers of

00:34:53.340 --> 00:34:53.350
data yeah there are multiple layers of
 

00:34:53.350 --> 00:34:54.899
data yeah there are multiple layers of
cache in everywhere so we have to

00:34:54.899 --> 00:34:54.909
cache in everywhere so we have to
 

00:34:54.909 --> 00:34:57.480
cache in everywhere so we have to
invalidate all the caches then relief

00:34:57.480 --> 00:34:57.490
invalidate all the caches then relief
 

00:34:57.490 --> 00:35:00.390
invalidate all the caches then relief
from the flash have it loaded into the

00:35:00.390 --> 00:35:00.400
from the flash have it loaded into the
 

00:35:00.400 --> 00:35:02.700
from the flash have it loaded into the
cache of the flash and then throw the

00:35:02.700 --> 00:35:02.710
cache of the flash and then throw the
 

00:35:02.710 --> 00:35:04.410
cache of the flash and then throw the
file levels do you think it makes sense

00:35:04.410 --> 00:35:04.420
file levels do you think it makes sense
 

00:35:04.420 --> 00:35:07.140
file levels do you think it makes sense
to store more assets uncompressed in

00:35:07.140 --> 00:35:07.150
to store more assets uncompressed in
 

00:35:07.150 --> 00:35:12.630
to store more assets uncompressed in
order to reduce the whole overhead so

00:35:12.630 --> 00:35:12.640
order to reduce the whole overhead so
 

00:35:12.640 --> 00:35:14.640
order to reduce the whole overhead so
sorry so talking from the perspective is

00:35:14.640 --> 00:35:14.650
sorry so talking from the perspective is
 

00:35:14.650 --> 00:35:17.250
sorry so talking from the perspective is
like on iOS the assets are stored on

00:35:17.250 --> 00:35:17.260
like on iOS the assets are stored on
 

00:35:17.260 --> 00:35:20.070
like on iOS the assets are stored on
compress of the device right and that

00:35:20.070 --> 00:35:20.080
compress of the device right and that
 

00:35:20.080 --> 00:35:23.480
compress of the device right and that
could be one of the reasons why

00:35:23.480 --> 00:35:23.490
could be one of the reasons why
 

00:35:23.490 --> 00:35:25.220
could be one of the reasons why
the loading performance or the

00:35:25.220 --> 00:35:25.230
the loading performance or the
 

00:35:25.230 --> 00:35:26.630
the loading performance or the
performance when you're loading next

00:35:26.630 --> 00:35:26.640
performance when you're loading next
 

00:35:26.640 --> 00:35:28.160
performance when you're loading next
level sounds like that is much higher

00:35:28.160 --> 00:35:28.170
level sounds like that is much higher
 

00:35:28.170 --> 00:35:30.440
level sounds like that is much higher
because you don't have to uncompress

00:35:30.440 --> 00:35:30.450
because you don't have to uncompress
 

00:35:30.450 --> 00:35:32.720
because you don't have to uncompress
itself so I don't actually think that's

00:35:32.720 --> 00:35:32.730
itself so I don't actually think that's
 

00:35:32.730 --> 00:35:34.870
itself so I don't actually think that's
the the reason for the difference in

00:35:34.870 --> 00:35:34.880
the the reason for the difference in
 

00:35:34.880 --> 00:35:39.530
the the reason for the difference in
like loading performance it looks pretty

00:35:39.530 --> 00:35:39.540
like loading performance it looks pretty
 

00:35:39.540 --> 00:35:41.060
like loading performance it looks pretty
much like the difference in

00:35:41.060 --> 00:35:41.070
much like the difference in
 

00:35:41.070 --> 00:35:43.250
much like the difference in
single-threaded cpu performance it

00:35:43.250 --> 00:35:43.260
single-threaded cpu performance it
 

00:35:43.260 --> 00:35:45.260
single-threaded cpu performance it
matches pretty closely with the

00:35:45.260 --> 00:35:45.270
matches pretty closely with the
 

00:35:45.270 --> 00:35:46.490
matches pretty closely with the
difference in single threaded CPU

00:35:46.490 --> 00:35:46.500
difference in single threaded CPU
 

00:35:46.500 --> 00:35:48.859
difference in single threaded CPU
performance what we see I mean

00:35:48.859 --> 00:35:48.869
performance what we see I mean
 

00:35:48.869 --> 00:35:52.190
performance what we see I mean
especially in unity apps is that now you

00:35:52.190 --> 00:35:52.200
especially in unity apps is that now you
 

00:35:52.200 --> 00:35:54.500
especially in unity apps is that now you
do have some five six or something like

00:35:54.500 --> 00:35:54.510
do have some five six or something like
 

00:35:54.510 --> 00:35:57.400
do have some five six or something like
that are still primarily single threaded

00:35:57.400 --> 00:35:57.410
that are still primarily single threaded
 

00:35:57.410 --> 00:36:02.300
that are still primarily single threaded
especially around load times and there's

00:36:02.300 --> 00:36:02.310
especially around load times and there's
 

00:36:02.310 --> 00:36:04.609
especially around load times and there's
AP bound on Android I bet they're still

00:36:04.609 --> 00:36:04.619
AP bound on Android I bet they're still
 

00:36:04.619 --> 00:36:06.859
AP bound on Android I bet they're still
probably CPU bound a lot of the time on

00:36:06.859 --> 00:36:06.869
probably CPU bound a lot of the time on
 

00:36:06.869 --> 00:36:11.120
probably CPU bound a lot of the time on
iOS iOS has generally has higher single

00:36:11.120 --> 00:36:11.130
iOS iOS has generally has higher single
 

00:36:11.130 --> 00:36:13.070
iOS iOS has generally has higher single
threaded CPU performance so load times

00:36:13.070 --> 00:36:13.080
threaded CPU performance so load times
 

00:36:13.080 --> 00:36:16.640
threaded CPU performance so load times
are better so more multi-threading I

00:36:16.640 --> 00:36:16.650
are better so more multi-threading I
 

00:36:16.650 --> 00:36:19.070
are better so more multi-threading I
mean you know we've got eight core

00:36:19.070 --> 00:36:19.080
mean you know we've got eight core
 

00:36:19.080 --> 00:36:21.770
mean you know we've got eight core
devices that are pretty common and

00:36:21.770 --> 00:36:21.780
devices that are pretty common and
 

00:36:21.780 --> 00:36:23.060
devices that are pretty common and
they're kind of mid and high in demand

00:36:23.060 --> 00:36:23.070
they're kind of mid and high in demand
 

00:36:23.070 --> 00:36:27.200
they're kind of mid and high in demand
right now more multi-threading is is

00:36:27.200 --> 00:36:27.210
right now more multi-threading is is
 

00:36:27.210 --> 00:36:30.020
right now more multi-threading is is
better essentially right but then you

00:36:30.020 --> 00:36:30.030
better essentially right but then you
 

00:36:30.030 --> 00:36:33.700
better essentially right but then you
get into power and thermal issues you do

00:36:33.700 --> 00:36:33.710
get into power and thermal issues you do
 

00:36:33.710 --> 00:36:41.089
get into power and thermal issues you do
but you to some extent yeah I mean the

00:36:41.089 --> 00:36:41.099
but you to some extent yeah I mean the
 

00:36:41.099 --> 00:36:43.250
but you to some extent yeah I mean the
CPU is the the dominant power consumer

00:36:43.250 --> 00:36:43.260
CPU is the the dominant power consumer
 

00:36:43.260 --> 00:36:44.690
CPU is the the dominant power consumer
on the system it's not the display it's

00:36:44.690 --> 00:36:44.700
on the system it's not the display it's
 

00:36:44.700 --> 00:36:47.480
on the system it's not the display it's
not the GPU it's the CPU so you do have

00:36:47.480 --> 00:36:47.490
not the GPU it's the CPU so you do have
 

00:36:47.490 --> 00:36:51.980
not the GPU it's the CPU so you do have
to be careful with CPU power consumption

