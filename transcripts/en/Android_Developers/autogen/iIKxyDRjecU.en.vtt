WEBVTT
Kind: captions
Language: en

00:00:00.060 --> 00:00:08.210
hi everyone let's get started I'm

00:00:08.210 --> 00:00:08.220
hi everyone let's get started I'm
 

00:00:08.220 --> 00:00:09.980
hi everyone let's get started I'm
there's like four more seats right here

00:00:09.980 --> 00:00:09.990
there's like four more seats right here
 

00:00:09.990 --> 00:00:13.700
there's like four more seats right here
in the front an on-stage I'm not gonna

00:00:13.700 --> 00:00:13.710
in the front an on-stage I'm not gonna
 

00:00:13.710 --> 00:00:16.150
in the front an on-stage I'm not gonna
bite anymore it's fine

00:00:16.150 --> 00:00:16.160
bite anymore it's fine
 

00:00:16.160 --> 00:00:19.220
bite anymore it's fine
hi my name is Ian Lake I'm a developer

00:00:19.220 --> 00:00:19.230
hi my name is Ian Lake I'm a developer
 

00:00:19.230 --> 00:00:21.560
hi my name is Ian Lake I'm a developer
advocate at Google I focused primarily

00:00:21.560 --> 00:00:21.570
advocate at Google I focused primarily
 

00:00:21.570 --> 00:00:23.630
advocate at Google I focused primarily
on the android framework and support

00:00:23.630 --> 00:00:23.640
on the android framework and support
 

00:00:23.640 --> 00:00:26.390
on the android framework and support
library but more specifically on the

00:00:26.390 --> 00:00:26.400
library but more specifically on the
 

00:00:26.400 --> 00:00:29.210
library but more specifically on the
Android media framework I'm here to talk

00:00:29.210 --> 00:00:29.220
Android media framework I'm here to talk
 

00:00:29.220 --> 00:00:31.550
Android media framework I'm here to talk
to you about best practices in media

00:00:31.550 --> 00:00:31.560
to you about best practices in media
 

00:00:31.560 --> 00:00:36.650
to you about best practices in media
playback so a very simple goal today and

00:00:36.650 --> 00:00:36.660
playback so a very simple goal today and
 

00:00:36.660 --> 00:00:38.990
playback so a very simple goal today and
that's basically just to tell you when

00:00:38.990 --> 00:00:39.000
that's basically just to tell you when
 

00:00:39.000 --> 00:00:42.709
that's basically just to tell you when
choose the right api's to build the best

00:00:42.709 --> 00:00:42.719
choose the right api's to build the best
 

00:00:42.719 --> 00:00:48.319
choose the right api's to build the best
audio or video playback app possible so

00:00:48.319 --> 00:00:48.329
audio or video playback app possible so
 

00:00:48.329 --> 00:00:49.940
audio or video playback app possible so
throughout this talk I'm gonna be

00:00:49.940 --> 00:00:49.950
throughout this talk I'm gonna be
 

00:00:49.950 --> 00:00:52.130
throughout this talk I'm gonna be
talking about a lot of these things in

00:00:52.130 --> 00:00:52.140
talking about a lot of these things in
 

00:00:52.140 --> 00:00:54.319
talking about a lot of these things in
terms of certain events in your media

00:00:54.319 --> 00:00:54.329
terms of certain events in your media
 

00:00:54.329 --> 00:00:57.560
terms of certain events in your media
playback lifecycle so you can imagine

00:00:57.560 --> 00:00:57.570
playback lifecycle so you can imagine
 

00:00:57.570 --> 00:01:00.349
playback lifecycle so you can imagine
you have any kind of media app is gonna

00:01:00.349 --> 00:01:00.359
you have any kind of media app is gonna
 

00:01:00.359 --> 00:01:02.720
you have any kind of media app is gonna
go through all of these phases at some

00:01:02.720 --> 00:01:02.730
go through all of these phases at some
 

00:01:02.730 --> 00:01:05.750
go through all of these phases at some
point so created it's obviously kind of

00:01:05.750 --> 00:01:05.760
point so created it's obviously kind of
 

00:01:05.760 --> 00:01:08.030
point so created it's obviously kind of
our one-time initialization step and

00:01:08.030 --> 00:01:08.040
our one-time initialization step and
 

00:01:08.040 --> 00:01:11.120
our one-time initialization step and
then we go into playing and for playing

00:01:11.120 --> 00:01:11.130
then we go into playing and for playing
 

00:01:11.130 --> 00:01:13.520
then we go into playing and for playing
what we're gonna talk about in playing

00:01:13.520 --> 00:01:13.530
what we're gonna talk about in playing
 

00:01:13.530 --> 00:01:16.640
what we're gonna talk about in playing
is actually outputting sound right

00:01:16.640 --> 00:01:16.650
is actually outputting sound right
 

00:01:16.650 --> 00:01:19.370
is actually outputting sound right
playing a video playing audio that's the

00:01:19.370 --> 00:01:19.380
playing a video playing audio that's the
 

00:01:19.380 --> 00:01:21.920
playing a video playing audio that's the
playing state and on the opposite side

00:01:21.920 --> 00:01:21.930
playing state and on the opposite side
 

00:01:21.930 --> 00:01:24.679
playing state and on the opposite side
is paused so pause is gonna be our

00:01:24.679 --> 00:01:24.689
is paused so pause is gonna be our
 

00:01:24.689 --> 00:01:27.020
is paused so pause is gonna be our
shorthand for basically any temporary

00:01:27.020 --> 00:01:27.030
shorthand for basically any temporary
 

00:01:27.030 --> 00:01:28.070
shorthand for basically any temporary
state where we're not actually

00:01:28.070 --> 00:01:28.080
state where we're not actually
 

00:01:28.080 --> 00:01:31.520
state where we're not actually
outputting any audio right or any video

00:01:31.520 --> 00:01:31.530
outputting any audio right or any video
 

00:01:31.530 --> 00:01:35.990
outputting any audio right or any video
and at some point in our life cycle sad

00:01:35.990 --> 00:01:36.000
and at some point in our life cycle sad
 

00:01:36.000 --> 00:01:38.630
and at some point in our life cycle sad
as it may be the user may actually exit

00:01:38.630 --> 00:01:38.640
as it may be the user may actually exit
 

00:01:38.640 --> 00:01:41.179
as it may be the user may actually exit
out of our app and at that point or

00:01:41.179 --> 00:01:41.189
out of our app and at that point or
 

00:01:41.189 --> 00:01:43.399
out of our app and at that point or
you're going to go into the stopped

00:01:43.399 --> 00:01:43.409
you're going to go into the stopped
 

00:01:43.409 --> 00:01:45.109
you're going to go into the stopped
States right that's kind of the

00:01:45.109 --> 00:01:45.119
States right that's kind of the
 

00:01:45.119 --> 00:01:47.210
States right that's kind of the
permanent state route the user has moved

00:01:47.210 --> 00:01:47.220
permanent state route the user has moved
 

00:01:47.220 --> 00:01:49.219
permanent state route the user has moved
on from your app to maybe a different

00:01:49.219 --> 00:01:49.229
on from your app to maybe a different
 

00:01:49.229 --> 00:01:50.870
on from your app to maybe a different
app or they've just stop playback

00:01:50.870 --> 00:01:50.880
app or they've just stop playback
 

00:01:50.880 --> 00:01:53.780
app or they've just stop playback
entirely and of course that triggers

00:01:53.780 --> 00:01:53.790
entirely and of course that triggers
 

00:01:53.790 --> 00:01:55.550
entirely and of course that triggers
then ondestroy

00:01:55.550 --> 00:01:55.560
then ondestroy
 

00:01:55.560 --> 00:01:57.560
then ondestroy
which would then clean up all of our

00:01:57.560 --> 00:01:57.570
which would then clean up all of our
 

00:01:57.570 --> 00:02:02.270
which would then clean up all of our
resources now I was talking about media

00:02:02.270 --> 00:02:02.280
resources now I was talking about media
 

00:02:02.280 --> 00:02:03.950
resources now I was talking about media
States right and those are slightly

00:02:03.950 --> 00:02:03.960
States right and those are slightly
 

00:02:03.960 --> 00:02:06.469
States right and those are slightly
different than our Android lifecycle

00:02:06.469 --> 00:02:06.479
different than our Android lifecycle
 

00:02:06.479 --> 00:02:11.630
different than our Android lifecycle
events I know but so there's two cases

00:02:11.630 --> 00:02:11.640
events I know but so there's two cases
 

00:02:11.640 --> 00:02:13.220
events I know but so there's two cases
one if you are a video

00:02:13.220 --> 00:02:13.230
one if you are a video
 

00:02:13.230 --> 00:02:15.710
one if you are a video
and how many people here are doing video

00:02:15.710 --> 00:02:15.720
and how many people here are doing video
 

00:02:15.720 --> 00:02:20.350
and how many people here are doing video
apps alright quite a few and audio apps

00:02:20.350 --> 00:02:20.360
apps alright quite a few and audio apps
 

00:02:20.360 --> 00:02:23.510
apps alright quite a few and audio apps
nice nighttime both who's the

00:02:23.510 --> 00:02:23.520
nice nighttime both who's the
 

00:02:23.520 --> 00:02:26.710
nice nighttime both who's the
overachievers yeah you guys nicely done

00:02:26.710 --> 00:02:26.720
overachievers yeah you guys nicely done
 

00:02:26.720 --> 00:02:29.720
overachievers yeah you guys nicely done
so for video you're gonna be sleek aynd

00:02:29.720 --> 00:02:29.730
so for video you're gonna be sleek aynd
 

00:02:29.730 --> 00:02:32.120
so for video you're gonna be sleek aynd
of tied to the activity lifecycle and in

00:02:32.120 --> 00:02:32.130
of tied to the activity lifecycle and in
 

00:02:32.130 --> 00:02:34.760
of tied to the activity lifecycle and in
this case of course when I'm create is a

00:02:34.760 --> 00:02:34.770
this case of course when I'm create is a
 

00:02:34.770 --> 00:02:36.290
this case of course when I'm create is a
great place to do our one-time

00:02:36.290 --> 00:02:36.300
great place to do our one-time
 

00:02:36.300 --> 00:02:39.290
great place to do our one-time
initialization destroy for our cleanup

00:02:39.290 --> 00:02:39.300
initialization destroy for our cleanup
 

00:02:39.300 --> 00:02:40.670
initialization destroy for our cleanup
that makes sense

00:02:40.670 --> 00:02:40.680
that makes sense
 

00:02:40.680 --> 00:02:43.130
that makes sense
things have changed slightly with the

00:02:43.130 --> 00:02:43.140
things have changed slightly with the
 

00:02:43.140 --> 00:02:45.199
things have changed slightly with the
introduction of multi window for Android

00:02:45.199 --> 00:02:45.209
introduction of multi window for Android
 

00:02:45.209 --> 00:02:50.660
introduction of multi window for Android
n here previously 2n actually the on

00:02:50.660 --> 00:02:50.670
n here previously 2n actually the on
 

00:02:50.670 --> 00:02:53.930
n here previously 2n actually the on
stop command might not be called

00:02:53.930 --> 00:02:53.940
stop command might not be called
 

00:02:53.940 --> 00:02:56.720
stop command might not be called
immediately after your activity ends so

00:02:56.720 --> 00:02:56.730
immediately after your activity ends so
 

00:02:56.730 --> 00:02:58.790
immediately after your activity ends so
some might hit the home button and you

00:02:58.790 --> 00:02:58.800
some might hit the home button and you
 

00:02:58.800 --> 00:03:01.729
some might hit the home button and you
might actually not get on stop for 5

00:03:01.729 --> 00:03:01.739
might actually not get on stop for 5
 

00:03:01.739 --> 00:03:04.580
might actually not get on stop for 5
seconds afterwards and if you're a video

00:03:04.580 --> 00:03:04.590
seconds afterwards and if you're a video
 

00:03:04.590 --> 00:03:07.100
seconds afterwards and if you're a video
playing app you may not want to be

00:03:07.100 --> 00:03:07.110
playing app you may not want to be
 

00:03:07.110 --> 00:03:10.729
playing app you may not want to be
playing audio and assuming to play video

00:03:10.729 --> 00:03:10.739
playing audio and assuming to play video
 

00:03:10.739 --> 00:03:13.670
playing audio and assuming to play video
for 5 seconds while your apps in the

00:03:13.670 --> 00:03:13.680
for 5 seconds while your apps in the
 

00:03:13.680 --> 00:03:15.650
for 5 seconds while your apps in the
background so in this case we probably

00:03:15.650 --> 00:03:15.660
background so in this case we probably
 

00:03:15.660 --> 00:03:18.440
background so in this case we probably
actually want to stop playback in on

00:03:18.440 --> 00:03:18.450
actually want to stop playback in on
 

00:03:18.450 --> 00:03:20.330
actually want to stop playback in on
pause right because this will be called

00:03:20.330 --> 00:03:20.340
pause right because this will be called
 

00:03:20.340 --> 00:03:23.630
pause right because this will be called
immediately when you become not visible

00:03:23.630 --> 00:03:23.640
immediately when you become not visible
 

00:03:23.640 --> 00:03:27.860
immediately when you become not visible
or at least in the background now on and

00:03:27.860 --> 00:03:27.870
or at least in the background now on and
 

00:03:27.870 --> 00:03:29.780
or at least in the background now on and
plus obviously that'd be a disastrous

00:03:29.780 --> 00:03:29.790
plus obviously that'd be a disastrous
 

00:03:29.790 --> 00:03:33.380
plus obviously that'd be a disastrous
idea because things running side by side

00:03:33.380 --> 00:03:33.390
idea because things running side by side
 

00:03:33.390 --> 00:03:35.840
idea because things running side by side
you'll be paused but not stopped

00:03:35.840 --> 00:03:35.850
you'll be paused but not stopped
 

00:03:35.850 --> 00:03:37.819
you'll be paused but not stopped
remember stopped is when you become not

00:03:37.819 --> 00:03:37.829
remember stopped is when you become not
 

00:03:37.829 --> 00:03:40.699
remember stopped is when you become not
visible so we've actually increased the

00:03:40.699 --> 00:03:40.709
visible so we've actually increased the
 

00:03:40.709 --> 00:03:42.500
visible so we've actually increased the
guarantee that on stop will be called

00:03:42.500 --> 00:03:42.510
guarantee that on stop will be called
 

00:03:42.510 --> 00:03:44.660
guarantee that on stop will be called
immediately so that makes it the perfect

00:03:44.660 --> 00:03:44.670
immediately so that makes it the perfect
 

00:03:44.670 --> 00:03:48.380
immediately so that makes it the perfect
place to actually stop playback is on on

00:03:48.380 --> 00:03:48.390
place to actually stop playback is on on
 

00:03:48.390 --> 00:03:52.370
place to actually stop playback is on on
stop now for audio apps or if you're

00:03:52.370 --> 00:03:52.380
stop now for audio apps or if you're
 

00:03:52.380 --> 00:03:54.910
stop now for audio apps or if you're
doing remote playback feel Google cast

00:03:54.910 --> 00:03:54.920
doing remote playback feel Google cast
 

00:03:54.920 --> 00:03:57.710
doing remote playback feel Google cast
you're going to be in a service but

00:03:57.710 --> 00:03:57.720
you're going to be in a service but
 

00:03:57.720 --> 00:03:58.789
you're going to be in a service but
that's kind of where we do background

00:03:58.789 --> 00:03:58.799
that's kind of where we do background
 

00:03:58.799 --> 00:04:01.580
that's kind of where we do background
work in Android and here we have kind of

00:04:01.580 --> 00:04:01.590
work in Android and here we have kind of
 

00:04:01.590 --> 00:04:04.490
work in Android and here we have kind of
on create or created on destroy run

00:04:04.490 --> 00:04:04.500
on create or created on destroy run
 

00:04:04.500 --> 00:04:07.550
on create or created on destroy run
destroy so in all these cases these are

00:04:07.550 --> 00:04:07.560
destroy so in all these cases these are
 

00:04:07.560 --> 00:04:09.890
destroy so in all these cases these are
Android lifecycle events that are going

00:04:09.890 --> 00:04:09.900
Android lifecycle events that are going
 

00:04:09.900 --> 00:04:12.920
Android lifecycle events that are going
to be triggering a change in your media

00:04:12.920 --> 00:04:12.930
to be triggering a change in your media
 

00:04:12.930 --> 00:04:15.920
to be triggering a change in your media
playback all right so you know we didn't

00:04:15.920 --> 00:04:15.930
playback all right so you know we didn't
 

00:04:15.930 --> 00:04:18.170
playback all right so you know we didn't
have anything in the play and paused

00:04:18.170 --> 00:04:18.180
have anything in the play and paused
 

00:04:18.180 --> 00:04:19.880
have anything in the play and paused
States for this that's because those

00:04:19.880 --> 00:04:19.890
States for this that's because those
 

00:04:19.890 --> 00:04:22.099
States for this that's because those
aren't actually tied to Android life

00:04:22.099 --> 00:04:22.109
aren't actually tied to Android life
 

00:04:22.109 --> 00:04:23.839
aren't actually tied to Android life
cycle things those are tied to user

00:04:23.839 --> 00:04:23.849
cycle things those are tied to user
 

00:04:23.849 --> 00:04:24.980
cycle things those are tied to user
interaction

00:04:24.980 --> 00:04:24.990
interaction
 

00:04:24.990 --> 00:04:26.330
interaction
that's where we were gonna spend the

00:04:26.330 --> 00:04:26.340
that's where we were gonna spend the
 

00:04:26.340 --> 00:04:30.880
that's where we were gonna spend the
vast majority of our time here today so

00:04:30.880 --> 00:04:30.890
vast majority of our time here today so
 

00:04:30.890 --> 00:04:33.230
vast majority of our time here today so
wouldn't be much of a media playing app

00:04:33.230 --> 00:04:33.240
wouldn't be much of a media playing app
 

00:04:33.240 --> 00:04:35.840
wouldn't be much of a media playing app
if it didn't actually play media so

00:04:35.840 --> 00:04:35.850
if it didn't actually play media so
 

00:04:35.850 --> 00:04:38.420
if it didn't actually play media so
everyone went to the exoplayer talk know

00:04:38.420 --> 00:04:38.430
everyone went to the exoplayer talk know
 

00:04:38.430 --> 00:04:40.430
everyone went to the exoplayer talk know
the lines was huge fine

00:04:40.430 --> 00:04:40.440
the lines was huge fine
 

00:04:40.440 --> 00:04:43.450
the lines was huge fine
I understand it's okay because

00:04:43.450 --> 00:04:43.460
I understand it's okay because
 

00:04:43.460 --> 00:04:45.560
I understand it's okay because
everything else in this talk is not

00:04:45.560 --> 00:04:45.570
everything else in this talk is not
 

00:04:45.570 --> 00:04:47.720
everything else in this talk is not
going to depend on you knowing exoplayer

00:04:47.720 --> 00:04:47.730
going to depend on you knowing exoplayer
 

00:04:47.730 --> 00:04:50.180
going to depend on you knowing exoplayer
actually everything is here is player

00:04:50.180 --> 00:04:50.190
actually everything is here is player
 

00:04:50.190 --> 00:04:53.180
actually everything is here is player
agnostic so from the Android media

00:04:53.180 --> 00:04:53.190
agnostic so from the Android media
 

00:04:53.190 --> 00:04:55.520
agnostic so from the Android media
framework perspective it actually

00:04:55.520 --> 00:04:55.530
framework perspective it actually
 

00:04:55.530 --> 00:04:58.220
framework perspective it actually
doesn't care if using exoplayer or media

00:04:58.220 --> 00:04:58.230
doesn't care if using exoplayer or media
 

00:04:58.230 --> 00:05:00.470
doesn't care if using exoplayer or media
player or some custom player that you're

00:05:00.470 --> 00:05:00.480
player or some custom player that you're
 

00:05:00.480 --> 00:05:04.240
player or some custom player that you're
forced to use it's fine they all work so

00:05:04.240 --> 00:05:04.250
forced to use it's fine they all work so
 

00:05:04.250 --> 00:05:06.410
forced to use it's fine they all work so
for example if we were using media

00:05:06.410 --> 00:05:06.420
for example if we were using media
 

00:05:06.420 --> 00:05:08.860
for example if we were using media
player mapping this on to kind of our

00:05:08.860 --> 00:05:08.870
player mapping this on to kind of our
 

00:05:08.870 --> 00:05:12.590
player mapping this on to kind of our
state for media playback it's very

00:05:12.590 --> 00:05:12.600
state for media playback it's very
 

00:05:12.600 --> 00:05:15.200
state for media playback it's very
simple right on create we're going to

00:05:15.200 --> 00:05:15.210
simple right on create we're going to
 

00:05:15.210 --> 00:05:17.780
simple right on create we're going to
then create a new media player playing

00:05:17.780 --> 00:05:17.790
then create a new media player playing
 

00:05:17.790 --> 00:05:19.940
then create a new media player playing
we're gonna prepare pause pause pause

00:05:19.940 --> 00:05:19.950
we're gonna prepare pause pause pause
 

00:05:19.950 --> 00:05:23.540
we're gonna prepare pause pause pause
stop stop destroy it release right so in

00:05:23.540 --> 00:05:23.550
stop stop destroy it release right so in
 

00:05:23.550 --> 00:05:26.030
stop stop destroy it release right so in
this case it's a very simple flow this

00:05:26.030 --> 00:05:26.040
this case it's a very simple flow this
 

00:05:26.040 --> 00:05:28.130
this case it's a very simple flow this
kind of gets us in the idea of what

00:05:28.130 --> 00:05:28.140
kind of gets us in the idea of what
 

00:05:28.140 --> 00:05:30.730
kind of gets us in the idea of what
these media events are actually meaning

00:05:30.730 --> 00:05:30.740
these media events are actually meaning
 

00:05:30.740 --> 00:05:34.490
these media events are actually meaning
so we'll it plays the pause we're done

00:05:34.490 --> 00:05:34.500
so we'll it plays the pause we're done
 

00:05:34.500 --> 00:05:38.060
so we'll it plays the pause we're done
right wouldn't you all go home well like

00:05:38.060 --> 00:05:38.070
right wouldn't you all go home well like
 

00:05:38.070 --> 00:05:40.190
right wouldn't you all go home well like
I said everything is player agnostic

00:05:40.190 --> 00:05:40.200
I said everything is player agnostic
 

00:05:40.200 --> 00:05:42.560
I said everything is player agnostic
right so this actually doesn't tell

00:05:42.560 --> 00:05:42.570
right so this actually doesn't tell
 

00:05:42.570 --> 00:05:44.990
right so this actually doesn't tell
anyone anything about what you're doing

00:05:44.990 --> 00:05:45.000
anyone anything about what you're doing
 

00:05:45.000 --> 00:05:47.720
anyone anything about what you're doing
right and really we're trying to do this

00:05:47.720 --> 00:05:47.730
right and really we're trying to do this
 

00:05:47.730 --> 00:05:50.990
right and really we're trying to do this
the right way right this isn't just

00:05:50.990 --> 00:05:51.000
the right way right this isn't just
 

00:05:51.000 --> 00:05:53.210
the right way right this isn't just
playing audio this is making a great

00:05:53.210 --> 00:05:53.220
playing audio this is making a great
 

00:05:53.220 --> 00:05:55.460
playing audio this is making a great
user experience for users right we want

00:05:55.460 --> 00:05:55.470
user experience for users right we want
 

00:05:55.470 --> 00:05:57.380
user experience for users right we want
all of our guys to be happy like that

00:05:57.380 --> 00:05:57.390
all of our guys to be happy like that
 

00:05:57.390 --> 00:05:59.630
all of our guys to be happy like that
guy right you don't want any sad

00:05:59.630 --> 00:05:59.640
guy right you don't want any sad
 

00:05:59.640 --> 00:06:03.110
guy right you don't want any sad
sunburned faces here but happy people

00:06:03.110 --> 00:06:03.120
sunburned faces here but happy people
 

00:06:03.120 --> 00:06:04.960
sunburned faces here but happy people
right so let's do a little bit better

00:06:04.960 --> 00:06:04.970
right so let's do a little bit better
 

00:06:04.970 --> 00:06:07.610
right so let's do a little bit better
and there's actually a whole bunch of

00:06:07.610 --> 00:06:07.620
and there's actually a whole bunch of
 

00:06:07.620 --> 00:06:10.430
and there's actually a whole bunch of
things that we're gonna cover today that

00:06:10.430 --> 00:06:10.440
things that we're gonna cover today that
 

00:06:10.440 --> 00:06:11.990
things that we're gonna cover today that
actually makes for a better user

00:06:11.990 --> 00:06:12.000
actually makes for a better user
 

00:06:12.000 --> 00:06:15.170
actually makes for a better user
experience now these first two audio

00:06:15.170 --> 00:06:15.180
experience now these first two audio
 

00:06:15.180 --> 00:06:17.510
experience now these first two audio
focus and action becoming noisy are

00:06:17.510 --> 00:06:17.520
focus and action becoming noisy are
 

00:06:17.520 --> 00:06:20.000
focus and action becoming noisy are
really important for local playback so

00:06:20.000 --> 00:06:20.010
really important for local playback so
 

00:06:20.010 --> 00:06:22.340
really important for local playback so
if you're playing a video or audio on

00:06:22.340 --> 00:06:22.350
if you're playing a video or audio on
 

00:06:22.350 --> 00:06:24.740
if you're playing a video or audio on
the device itself these things are the

00:06:24.740 --> 00:06:24.750
the device itself these things are the
 

00:06:24.750 --> 00:06:26.060
the device itself these things are the
type of things that are going to make

00:06:26.060 --> 00:06:26.070
type of things that are going to make
 

00:06:26.070 --> 00:06:28.160
type of things that are going to make
sure that you're only actually putting

00:06:28.160 --> 00:06:28.170
sure that you're only actually putting
 

00:06:28.170 --> 00:06:31.310
sure that you're only actually putting
out sound when you mean to now the other

00:06:31.310 --> 00:06:31.320
out sound when you mean to now the other
 

00:06:31.320 --> 00:06:33.620
out sound when you mean to now the other
two media session the notifications are

00:06:33.620 --> 00:06:33.630
two media session the notifications are
 

00:06:33.630 --> 00:06:35.510
two media session the notifications are
something you should always do whether

00:06:35.510 --> 00:06:35.520
something you should always do whether
 

00:06:35.520 --> 00:06:37.880
something you should always do whether
you're playing on a device or if you're

00:06:37.880 --> 00:06:37.890
you're playing on a device or if you're
 

00:06:37.890 --> 00:06:38.150
you're playing on a device or if you're
you

00:06:38.150 --> 00:06:38.160
you
 

00:06:38.160 --> 00:06:40.400
you
caste and these are the things they're

00:06:40.400 --> 00:06:40.410
caste and these are the things they're
 

00:06:40.410 --> 00:06:42.260
caste and these are the things they're
actually going to tell the system what's

00:06:42.260 --> 00:06:42.270
actually going to tell the system what's
 

00:06:42.270 --> 00:06:44.900
actually going to tell the system what's
going on in your world so it can tell

00:06:44.900 --> 00:06:44.910
going on in your world so it can tell
 

00:06:44.910 --> 00:06:47.090
going on in your world so it can tell
other apps and other apps can do the

00:06:47.090 --> 00:06:47.100
other apps and other apps can do the
 

00:06:47.100 --> 00:06:49.610
other apps and other apps can do the
type of controls that Android provides

00:06:49.610 --> 00:06:49.620
type of controls that Android provides
 

00:06:49.620 --> 00:06:53.840
type of controls that Android provides
by default so the first thing is audio

00:06:53.840 --> 00:06:53.850
by default so the first thing is audio
 

00:06:53.850 --> 00:06:57.110
by default so the first thing is audio
focus it's kind of the key to good

00:06:57.110 --> 00:06:57.120
focus it's kind of the key to good
 

00:06:57.120 --> 00:06:59.210
focus it's kind of the key to good
citizenship in Android when it comes to

00:06:59.210 --> 00:06:59.220
citizenship in Android when it comes to
 

00:06:59.220 --> 00:07:02.000
citizenship in Android when it comes to
media playback and it's really all about

00:07:02.000 --> 00:07:02.010
media playback and it's really all about
 

00:07:02.010 --> 00:07:05.390
media playback and it's really all about
having apps not talk over one another if

00:07:05.390 --> 00:07:05.400
having apps not talk over one another if
 

00:07:05.400 --> 00:07:07.700
having apps not talk over one another if
you could imagine it kind of the conch

00:07:07.700 --> 00:07:07.710
you could imagine it kind of the conch
 

00:07:07.710 --> 00:07:10.010
you could imagine it kind of the conch
shell that you pass from app to app

00:07:10.010 --> 00:07:10.020
shell that you pass from app to app
 

00:07:10.020 --> 00:07:13.130
shell that you pass from app to app
saying you shall now speak and now you

00:07:13.130 --> 00:07:13.140
saying you shall now speak and now you
 

00:07:13.140 --> 00:07:15.230
saying you shall now speak and now you
can speak right so this is very much a

00:07:15.230 --> 00:07:15.240
can speak right so this is very much a
 

00:07:15.240 --> 00:07:18.560
can speak right so this is very much a
last one wins kind of a model so the

00:07:18.560 --> 00:07:18.570
last one wins kind of a model so the
 

00:07:18.570 --> 00:07:20.270
last one wins kind of a model so the
last version of the request audio focus

00:07:20.270 --> 00:07:20.280
last version of the request audio focus
 

00:07:20.280 --> 00:07:22.280
last version of the request audio focus
should be the one that the user is

00:07:22.280 --> 00:07:22.290
should be the one that the user is
 

00:07:22.290 --> 00:07:25.970
should be the one that the user is
interacting with now this is slightly

00:07:25.970 --> 00:07:25.980
interacting with now this is slightly
 

00:07:25.980 --> 00:07:29.210
interacting with now this is slightly
different than actually playing audio

00:07:29.210 --> 00:07:29.220
different than actually playing audio
 

00:07:29.220 --> 00:07:31.100
different than actually playing audio
we're actually gonna want to hold on to

00:07:31.100 --> 00:07:31.110
we're actually gonna want to hold on to
 

00:07:31.110 --> 00:07:33.860
we're actually gonna want to hold on to
audio focus through both those playing

00:07:33.860 --> 00:07:33.870
audio focus through both those playing
 

00:07:33.870 --> 00:07:37.040
audio focus through both those playing
and paused state all the way until we're

00:07:37.040 --> 00:07:37.050
and paused state all the way until we're
 

00:07:37.050 --> 00:07:39.890
and paused state all the way until we're
actually stopped so it's really think of

00:07:39.890 --> 00:07:39.900
actually stopped so it's really think of
 

00:07:39.900 --> 00:07:43.280
actually stopped so it's really think of
it more of us and intent to play versus

00:07:43.280 --> 00:07:43.290
it more of us and intent to play versus
 

00:07:43.290 --> 00:07:46.220
it more of us and intent to play versus
actually play a slight difference here

00:07:46.220 --> 00:07:46.230
actually play a slight difference here
 

00:07:46.230 --> 00:07:49.370
actually play a slight difference here
so I'm gonna go through a lot of code I

00:07:49.370 --> 00:07:49.380
so I'm gonna go through a lot of code I
 

00:07:49.380 --> 00:07:50.450
so I'm gonna go through a lot of code I
hope you're okay with that

00:07:50.450 --> 00:07:50.460
hope you're okay with that
 

00:07:50.460 --> 00:07:53.120
hope you're okay with that
I like code it's nice and easy the

00:07:53.120 --> 00:07:53.130
I like code it's nice and easy the
 

00:07:53.130 --> 00:07:54.950
I like code it's nice and easy the
slides will be available afterwards so

00:07:54.950 --> 00:07:54.960
slides will be available afterwards so
 

00:07:54.960 --> 00:07:58.250
slides will be available afterwards so
don't worry about taking pictures it's

00:07:58.250 --> 00:07:58.260
don't worry about taking pictures it's
 

00:07:58.260 --> 00:08:01.090
don't worry about taking pictures it's
okay you know pictures are great I'm

00:08:01.090 --> 00:08:01.100
okay you know pictures are great I'm
 

00:08:01.100 --> 00:08:04.550
okay you know pictures are great I'm
okay with pictures but it'll all be

00:08:04.550 --> 00:08:04.560
okay with pictures but it'll all be
 

00:08:04.560 --> 00:08:07.070
okay with pictures but it'll all be
available online don't worry and all you

00:08:07.070 --> 00:08:07.080
available online don't worry and all you
 

00:08:07.080 --> 00:08:08.840
available online don't worry and all you
focus pretty straightforward you called

00:08:08.840 --> 00:08:08.850
focus pretty straightforward you called
 

00:08:08.850 --> 00:08:10.970
focus pretty straightforward you called
request audio focus when you want to

00:08:10.970 --> 00:08:10.980
request audio focus when you want to
 

00:08:10.980 --> 00:08:14.120
request audio focus when you want to
request audio focus and then you really

00:08:14.120 --> 00:08:14.130
request audio focus and then you really
 

00:08:14.130 --> 00:08:15.920
request audio focus and then you really
want to check to make sure it's actually

00:08:15.920 --> 00:08:15.930
want to check to make sure it's actually
 

00:08:15.930 --> 00:08:20.120
want to check to make sure it's actually
granted now in 98% of the times it will

00:08:20.120 --> 00:08:20.130
granted now in 98% of the times it will
 

00:08:20.130 --> 00:08:21.860
granted now in 98% of the times it will
just be granted and you're fine and you

00:08:21.860 --> 00:08:21.870
just be granted and you're fine and you
 

00:08:21.870 --> 00:08:25.340
just be granted and you're fine and you
can go play music play your videos but

00:08:25.340 --> 00:08:25.350
can go play music play your videos but
 

00:08:25.350 --> 00:08:28.040
can go play music play your videos but
there are a few special cases where it

00:08:28.040 --> 00:08:28.050
there are a few special cases where it
 

00:08:28.050 --> 00:08:30.590
there are a few special cases where it
actually isn't granted so for example if

00:08:30.590 --> 00:08:30.600
actually isn't granted so for example if
 

00:08:30.600 --> 00:08:33.800
actually isn't granted so for example if
you are in a phone call other apps won't

00:08:33.800 --> 00:08:33.810
you are in a phone call other apps won't
 

00:08:33.810 --> 00:08:37.010
you are in a phone call other apps won't
be able to get audio focus right when

00:08:37.010 --> 00:08:37.020
be able to get audio focus right when
 

00:08:37.020 --> 00:08:38.570
be able to get audio focus right when
you're in a phone call it's a very

00:08:38.570 --> 00:08:38.580
you're in a phone call it's a very
 

00:08:38.580 --> 00:08:41.600
you're in a phone call it's a very
specific case where there's generally a

00:08:41.600 --> 00:08:41.610
specific case where there's generally a
 

00:08:41.610 --> 00:08:44.180
specific case where there's generally a
two-way dialogue going on hopefully the

00:08:44.180 --> 00:08:44.190
two-way dialogue going on hopefully the
 

00:08:44.190 --> 00:08:46.370
two-way dialogue going on hopefully the
entire time no awkward pauses or

00:08:46.370 --> 00:08:46.380
entire time no awkward pauses or
 

00:08:46.380 --> 00:08:46.730
entire time no awkward pauses or
anything

00:08:46.730 --> 00:08:46.740
anything
 

00:08:46.740 --> 00:08:48.889
anything
like that so in that case you're

00:08:48.889 --> 00:08:48.899
like that so in that case you're
 

00:08:48.899 --> 00:08:50.120
like that so in that case you're
actually not going to be granted

00:08:50.120 --> 00:08:50.130
actually not going to be granted
 

00:08:50.130 --> 00:08:51.980
actually not going to be granted
audiofocus so make sure you actually

00:08:51.980 --> 00:08:51.990
audiofocus so make sure you actually
 

00:08:51.990 --> 00:08:54.500
audiofocus so make sure you actually
check the results at all times and then

00:08:54.500 --> 00:08:54.510
check the results at all times and then
 

00:08:54.510 --> 00:08:55.880
check the results at all times and then
of course when we're stopped we're gonna

00:08:55.880 --> 00:08:55.890
of course when we're stopped we're gonna
 

00:08:55.890 --> 00:09:01.070
of course when we're stopped we're gonna
call abandon audiofocus now there is an

00:09:01.070 --> 00:09:01.080
call abandon audiofocus now there is an
 

00:09:01.080 --> 00:09:04.370
call abandon audiofocus now there is an
audio focus change listener and like the

00:09:04.370 --> 00:09:04.380
audio focus change listener and like the
 

00:09:04.380 --> 00:09:05.860
audio focus change listener and like the
name should be fairly self-explanatory

00:09:05.860 --> 00:09:05.870
name should be fairly self-explanatory
 

00:09:05.870 --> 00:09:09.410
name should be fairly self-explanatory
but it's all of the events that happen

00:09:09.410 --> 00:09:09.420
but it's all of the events that happen
 

00:09:09.420 --> 00:09:11.780
but it's all of the events that happen
around audio focus so this is actually

00:09:11.780 --> 00:09:11.790
around audio focus so this is actually
 

00:09:11.790 --> 00:09:15.079
around audio focus so this is actually
how other apps tell you what's going on

00:09:15.079 --> 00:09:15.089
how other apps tell you what's going on
 

00:09:15.089 --> 00:09:18.290
how other apps tell you what's going on
so for example if another media app has

00:09:18.290 --> 00:09:18.300
so for example if another media app has
 

00:09:18.300 --> 00:09:22.010
so for example if another media app has
requested audio focus and said I want to

00:09:22.010 --> 00:09:22.020
requested audio focus and said I want to
 

00:09:22.020 --> 00:09:24.650
requested audio focus and said I want to
gain permanent audio focus you'll

00:09:24.650 --> 00:09:24.660
gain permanent audio focus you'll
 

00:09:24.660 --> 00:09:26.290
gain permanent audio focus you'll
actually get an audio focus loss

00:09:26.290 --> 00:09:26.300
actually get an audio focus loss
 

00:09:26.300 --> 00:09:29.720
actually get an audio focus loss
callback and this is like the hammer

00:09:29.720 --> 00:09:29.730
callback and this is like the hammer
 

00:09:29.730 --> 00:09:32.810
callback and this is like the hammer
that says you're done the user has moved

00:09:32.810 --> 00:09:32.820
that says you're done the user has moved
 

00:09:32.820 --> 00:09:35.000
that says you're done the user has moved
on they're in the new app they want to

00:09:35.000 --> 00:09:35.010
on they're in the new app they want to
 

00:09:35.010 --> 00:09:38.000
on they're in the new app they want to
play audio in that app so in this case

00:09:38.000 --> 00:09:38.010
play audio in that app so in this case
 

00:09:38.010 --> 00:09:40.670
play audio in that app so in this case
we're just gonna stop playback we're

00:09:40.670 --> 00:09:40.680
we're just gonna stop playback we're
 

00:09:40.680 --> 00:09:42.949
we're just gonna stop playback we're
done we want to respect the users wish

00:09:42.949 --> 00:09:42.959
done we want to respect the users wish
 

00:09:42.959 --> 00:09:45.199
done we want to respect the users wish
to say hey they've moved on to a

00:09:45.199 --> 00:09:45.209
to say hey they've moved on to a
 

00:09:45.209 --> 00:09:47.690
to say hey they've moved on to a
different app that has said they're

00:09:47.690 --> 00:09:47.700
different app that has said they're
 

00:09:47.700 --> 00:09:51.530
different app that has said they're
requesting audio focus now it's not

00:09:51.530 --> 00:09:51.540
requesting audio focus now it's not
 

00:09:51.540 --> 00:09:53.900
requesting audio focus now it's not
always a permanent loss right there's

00:09:53.900 --> 00:09:53.910
always a permanent loss right there's
 

00:09:53.910 --> 00:09:56.889
always a permanent loss right there's
more transient losses so in this case

00:09:56.889 --> 00:09:56.899
more transient losses so in this case
 

00:09:56.899 --> 00:10:00.170
more transient losses so in this case
transient loss means that another app

00:10:00.170 --> 00:10:00.180
transient loss means that another app
 

00:10:00.180 --> 00:10:04.460
transient loss means that another app
wants access to play audio and they want

00:10:04.460 --> 00:10:04.470
wants access to play audio and they want
 

00:10:04.470 --> 00:10:07.550
wants access to play audio and they want
you to pause they want you to not play

00:10:07.550 --> 00:10:07.560
you to pause they want you to not play
 

00:10:07.560 --> 00:10:10.340
you to pause they want you to not play
anymore media adjust during that time

00:10:10.340 --> 00:10:10.350
anymore media adjust during that time
 

00:10:10.350 --> 00:10:11.750
anymore media adjust during that time
you can imagine they had something

00:10:11.750 --> 00:10:11.760
you can imagine they had something
 

00:10:11.760 --> 00:10:14.139
you can imagine they had something
really important to say for a second or

00:10:14.139 --> 00:10:14.149
really important to say for a second or
 

00:10:14.149 --> 00:10:18.530
really important to say for a second or
the voice search and things like that

00:10:18.530 --> 00:10:18.540
the voice search and things like that
 

00:10:18.540 --> 00:10:21.710
the voice search and things like that
use lost transient so then you have kind

00:10:21.710 --> 00:10:21.720
use lost transient so then you have kind
 

00:10:21.720 --> 00:10:24.470
use lost transient so then you have kind
of a full dialogue with Google just

00:10:24.470 --> 00:10:24.480
of a full dialogue with Google just
 

00:10:24.480 --> 00:10:27.470
of a full dialogue with Google just
temporarily without having to have audio

00:10:27.470 --> 00:10:27.480
temporarily without having to have audio
 

00:10:27.480 --> 00:10:29.720
temporarily without having to have audio
being output at the same time as you're

00:10:29.720 --> 00:10:29.730
being output at the same time as you're
 

00:10:29.730 --> 00:10:32.560
being output at the same time as you're
trying to give a voice query into Google

00:10:32.560 --> 00:10:32.570
trying to give a voice query into Google
 

00:10:32.570 --> 00:10:34.550
trying to give a voice query into Google
now the one you're probably most

00:10:34.550 --> 00:10:34.560
now the one you're probably most
 

00:10:34.560 --> 00:10:36.530
now the one you're probably most
familiar with particularly from a user

00:10:36.530 --> 00:10:36.540
familiar with particularly from a user
 

00:10:36.540 --> 00:10:40.220
familiar with particularly from a user
perspective is transient can duck these

00:10:40.220 --> 00:10:40.230
perspective is transient can duck these
 

00:10:40.230 --> 00:10:42.470
perspective is transient can duck these
aren't the clack-clack ducks these are

00:10:42.470 --> 00:10:42.480
aren't the clack-clack ducks these are
 

00:10:42.480 --> 00:10:45.440
aren't the clack-clack ducks these are
the lowering volume ducks as in ducking

00:10:45.440 --> 00:10:45.450
the lowering volume ducks as in ducking
 

00:10:45.450 --> 00:10:48.410
the lowering volume ducks as in ducking
your volume so in this case you're

00:10:48.410 --> 00:10:48.420
your volume so in this case you're
 

00:10:48.420 --> 00:10:50.449
your volume so in this case you're
actually going to just lower your volume

00:10:50.449 --> 00:10:50.459
actually going to just lower your volume
 

00:10:50.459 --> 00:10:53.360
actually going to just lower your volume
but you can keep playing now if you're

00:10:53.360 --> 00:10:53.370
but you can keep playing now if you're
 

00:10:53.370 --> 00:10:55.220
but you can keep playing now if you're
an app that's really important that

00:10:55.220 --> 00:10:55.230
an app that's really important that
 

00:10:55.230 --> 00:10:57.199
an app that's really important that
you're not missing any words say

00:10:57.199 --> 00:10:57.209
you're not missing any words say
 

00:10:57.209 --> 00:11:00.739
you're not missing any words say
Podcast up you can't actually pause it's

00:11:00.739 --> 00:11:00.749
Podcast up you can't actually pause it's
 

00:11:00.749 --> 00:11:02.660
Podcast up you can't actually pause it's
okay to pause in these cases right it's

00:11:02.660 --> 00:11:02.670
okay to pause in these cases right it's
 

00:11:02.670 --> 00:11:05.540
okay to pause in these cases right it's
important you have spoken words this is

00:11:05.540 --> 00:11:05.550
important you have spoken words this is
 

00:11:05.550 --> 00:11:08.119
important you have spoken words this is
just a suggestion

00:11:08.119 --> 00:11:08.129
just a suggestion
 

00:11:08.129 --> 00:11:10.910
just a suggestion
that you can duck but in any case

00:11:10.910 --> 00:11:10.920
that you can duck but in any case
 

00:11:10.920 --> 00:11:13.400
that you can duck but in any case
whether it's lost transient or transient

00:11:13.400 --> 00:11:13.410
whether it's lost transient or transient
 

00:11:13.410 --> 00:11:16.509
whether it's lost transient or transient
can duck you'll get an audio focus gain

00:11:16.509 --> 00:11:16.519
can duck you'll get an audio focus gain
 

00:11:16.519 --> 00:11:19.509
can duck you'll get an audio focus gain
when the other app abandons audio focus

00:11:19.509 --> 00:11:19.519
when the other app abandons audio focus
 

00:11:19.519 --> 00:11:21.949
when the other app abandons audio focus
this kind of brings you back to where

00:11:21.949 --> 00:11:21.959
this kind of brings you back to where
 

00:11:21.959 --> 00:11:23.629
this kind of brings you back to where
you were where you can start playing

00:11:23.629 --> 00:11:23.639
you were where you can start playing
 

00:11:23.639 --> 00:11:28.129
you were where you can start playing
audio or video at full speed now for

00:11:28.129 --> 00:11:28.139
audio or video at full speed now for
 

00:11:28.139 --> 00:11:30.199
audio or video at full speed now for
video things are maybe slightly

00:11:30.199 --> 00:11:30.209
video things are maybe slightly
 

00:11:30.209 --> 00:11:33.829
video things are maybe slightly
different in that pausing video every

00:11:33.829 --> 00:11:33.839
different in that pausing video every
 

00:11:33.839 --> 00:11:36.199
different in that pausing video every
time you get a notification could be

00:11:36.199 --> 00:11:36.209
time you get a notification could be
 

00:11:36.209 --> 00:11:38.660
time you get a notification could be
weird so you might consider actually

00:11:38.660 --> 00:11:38.670
weird so you might consider actually
 

00:11:38.670 --> 00:11:41.509
weird so you might consider actually
just muting rather than pausing it kind

00:11:41.509 --> 00:11:41.519
just muting rather than pausing it kind
 

00:11:41.519 --> 00:11:43.309
just muting rather than pausing it kind
of depends on your use case if it's

00:11:43.309 --> 00:11:43.319
of depends on your use case if it's
 

00:11:43.319 --> 00:11:45.049
of depends on your use case if it's
really important that the words and

00:11:45.049 --> 00:11:45.059
really important that the words and
 

00:11:45.059 --> 00:11:47.389
really important that the words and
audio are in sync or if it's okay if it

00:11:47.389 --> 00:11:47.399
audio are in sync or if it's okay if it
 

00:11:47.399 --> 00:11:50.119
audio are in sync or if it's okay if it
cuts out for that loss transient so a

00:11:50.119 --> 00:11:50.129
cuts out for that loss transient so a
 

00:11:50.129 --> 00:11:52.879
cuts out for that loss transient so a
good way to test this is say like you're

00:11:52.879 --> 00:11:52.889
good way to test this is say like you're
 

00:11:52.889 --> 00:11:55.730
good way to test this is say like you're
okay Google to your device wall of

00:11:55.730 --> 00:11:55.740
okay Google to your device wall of
 

00:11:55.740 --> 00:11:58.309
okay Google to your device wall of
videos playing and try and decide what

00:11:58.309 --> 00:11:58.319
videos playing and try and decide what
 

00:11:58.319 --> 00:12:00.259
videos playing and try and decide what
makes more sense there in a lot of cases

00:12:00.259 --> 00:12:00.269
makes more sense there in a lot of cases
 

00:12:00.269 --> 00:12:02.210
makes more sense there in a lot of cases
it is pause but if you're doing

00:12:02.210 --> 00:12:02.220
it is pause but if you're doing
 

00:12:02.220 --> 00:12:05.689
it is pause but if you're doing
something I like Android TV maybe muting

00:12:05.689 --> 00:12:05.699
something I like Android TV maybe muting
 

00:12:05.699 --> 00:12:11.150
something I like Android TV maybe muting
temporarily makes more sense so the

00:12:11.150 --> 00:12:11.160
temporarily makes more sense so the
 

00:12:11.160 --> 00:12:14.269
temporarily makes more sense so the
other one is action audio becoming noisy

00:12:14.269 --> 00:12:14.279
other one is action audio becoming noisy
 

00:12:14.279 --> 00:12:16.249
other one is action audio becoming noisy
and it's probably one of my favorite

00:12:16.249 --> 00:12:16.259
and it's probably one of my favorite
 

00:12:16.259 --> 00:12:19.340
and it's probably one of my favorite
names from a like totally ridiculous

00:12:19.340 --> 00:12:19.350
names from a like totally ridiculous
 

00:12:19.350 --> 00:12:21.559
names from a like totally ridiculous
kind of a name that actually is exactly

00:12:21.559 --> 00:12:21.569
kind of a name that actually is exactly
 

00:12:21.569 --> 00:12:23.869
kind of a name that actually is exactly
what's happening these are lens like you

00:12:23.869 --> 00:12:23.879
what's happening these are lens like you
 

00:12:23.879 --> 00:12:26.150
what's happening these are lens like you
have headphones plugged in and they

00:12:26.150 --> 00:12:26.160
have headphones plugged in and they
 

00:12:26.160 --> 00:12:29.480
have headphones plugged in and they
become unplugged and it's becoming noisy

00:12:29.480 --> 00:12:29.490
become unplugged and it's becoming noisy
 

00:12:29.490 --> 00:12:32.569
become unplugged and it's becoming noisy
I like this actually makes sense when

00:12:32.569 --> 00:12:32.579
I like this actually makes sense when
 

00:12:32.579 --> 00:12:34.039
I like this actually makes sense when
you think about it right all of a sudden

00:12:34.039 --> 00:12:34.049
you think about it right all of a sudden
 

00:12:34.049 --> 00:12:36.319
you think about it right all of a sudden
we're switching from headphones to

00:12:36.319 --> 00:12:36.329
we're switching from headphones to
 

00:12:36.329 --> 00:12:39.859
we're switching from headphones to
basically the speaker on your device now

00:12:39.859 --> 00:12:39.869
basically the speaker on your device now
 

00:12:39.869 --> 00:12:42.769
basically the speaker on your device now
in this case you'd rather not surprise

00:12:42.769 --> 00:12:42.779
in this case you'd rather not surprise
 

00:12:42.779 --> 00:12:46.100
in this case you'd rather not surprise
your user right in almost all cases this

00:12:46.100 --> 00:12:46.110
your user right in almost all cases this
 

00:12:46.110 --> 00:12:49.549
your user right in almost all cases this
maybe isn't an intentional thing you can

00:12:49.549 --> 00:12:49.559
maybe isn't an intentional thing you can
 

00:12:49.559 --> 00:12:51.199
maybe isn't an intentional thing you can
imagine someone has it in their pocket

00:12:51.199 --> 00:12:51.209
imagine someone has it in their pocket
 

00:12:51.209 --> 00:12:53.900
imagine someone has it in their pocket
and it gets unplugged it's not

00:12:53.900 --> 00:12:53.910
and it gets unplugged it's not
 

00:12:53.910 --> 00:12:55.970
and it gets unplugged it's not
necessarily the best idea especially if

00:12:55.970 --> 00:12:55.980
necessarily the best idea especially if
 

00:12:55.980 --> 00:12:58.460
necessarily the best idea especially if
it's you know audio playback so in this

00:12:58.460 --> 00:12:58.470
it's you know audio playback so in this
 

00:12:58.470 --> 00:13:01.369
it's you know audio playback so in this
case we're just gonna pause and then

00:13:01.369 --> 00:13:01.379
case we're just gonna pause and then
 

00:13:01.379 --> 00:13:03.039
case we're just gonna pause and then
they can at the play button if they want

00:13:03.039 --> 00:13:03.049
they can at the play button if they want
 

00:13:03.049 --> 00:13:05.960
they can at the play button if they want
now in this case we're creating this

00:13:05.960 --> 00:13:05.970
now in this case we're creating this
 

00:13:05.970 --> 00:13:08.539
now in this case we're creating this
broadcast receiver programmatically it's

00:13:08.539 --> 00:13:08.549
broadcast receiver programmatically it's
 

00:13:08.549 --> 00:13:09.670
broadcast receiver programmatically it's
not in our manifest

00:13:09.670 --> 00:13:09.680
not in our manifest
 

00:13:09.680 --> 00:13:12.040
not in our manifest
and actually we can't use manifest ones

00:13:12.040 --> 00:13:12.050
and actually we can't use manifest ones
 

00:13:12.050 --> 00:13:15.970
and actually we can't use manifest ones
or these and that's okay because audio

00:13:15.970 --> 00:13:15.980
or these and that's okay because audio
 

00:13:15.980 --> 00:13:20.079
or these and that's okay because audio
the becoming noisy is actually tied to

00:13:20.079 --> 00:13:20.089
the becoming noisy is actually tied to
 

00:13:20.089 --> 00:13:23.650
the becoming noisy is actually tied to
when you're outputting sound right this

00:13:23.650 --> 00:13:23.660
when you're outputting sound right this
 

00:13:23.660 --> 00:13:26.829
when you're outputting sound right this
is only in the playing State it's you in

00:13:26.829 --> 00:13:26.839
is only in the playing State it's you in
 

00:13:26.839 --> 00:13:29.170
is only in the playing State it's you in
this case as soon as we pause right

00:13:29.170 --> 00:13:29.180
this case as soon as we pause right
 

00:13:29.180 --> 00:13:32.590
this case as soon as we pause right
we're not actually playing any audio or

00:13:32.590 --> 00:13:32.600
we're not actually playing any audio or
 

00:13:32.600 --> 00:13:37.060
we're not actually playing any audio or
video then it's okay to unregister over

00:13:37.060 --> 00:13:37.070
video then it's okay to unregister over
 

00:13:37.070 --> 00:13:39.460
video then it's okay to unregister over
here right like unplugging it when it's

00:13:39.460 --> 00:13:39.470
here right like unplugging it when it's
 

00:13:39.470 --> 00:13:41.680
here right like unplugging it when it's
not actually outputting anything it's

00:13:41.680 --> 00:13:41.690
not actually outputting anything it's
 

00:13:41.690 --> 00:13:45.340
not actually outputting anything it's
not something we actually care about so

00:13:45.340 --> 00:13:45.350
not something we actually care about so
 

00:13:45.350 --> 00:13:47.050
not something we actually care about so
now we can update our chart we have a

00:13:47.050 --> 00:13:47.060
now we can update our chart we have a
 

00:13:47.060 --> 00:13:49.510
now we can update our chart we have a
few more items in here so we can see how

00:13:49.510 --> 00:13:49.520
few more items in here so we can see how
 

00:13:49.520 --> 00:13:51.460
few more items in here so we can see how
the life cycle is slightly different

00:13:51.460 --> 00:13:51.470
the life cycle is slightly different
 

00:13:51.470 --> 00:13:53.920
the life cycle is slightly different
between audio focus which goes all the

00:13:53.920 --> 00:13:53.930
between audio focus which goes all the
 

00:13:53.930 --> 00:13:56.019
between audio focus which goes all the
way until we're stopped and becoming

00:13:56.019 --> 00:13:56.029
way until we're stopped and becoming
 

00:13:56.029 --> 00:13:58.389
way until we're stopped and becoming
noisy which is only when we're actually

00:13:58.389 --> 00:13:58.399
noisy which is only when we're actually
 

00:13:58.399 --> 00:14:02.050
noisy which is only when we're actually
outputting sound now at this point this

00:14:02.050 --> 00:14:02.060
outputting sound now at this point this
 

00:14:02.060 --> 00:14:04.600
outputting sound now at this point this
is everything we need well if we're

00:14:04.600 --> 00:14:04.610
is everything we need well if we're
 

00:14:04.610 --> 00:14:08.650
is everything we need well if we're
running on API 7 devices who has a 2.1

00:14:08.650 --> 00:14:08.660
running on API 7 devices who has a 2.1
 

00:14:08.660 --> 00:14:12.160
running on API 7 devices who has a 2.1
device nobody we're we have to do a

00:14:12.160 --> 00:14:12.170
device nobody we're we have to do a
 

00:14:12.170 --> 00:14:14.170
device nobody we're we have to do a
little bit more if you actually want to

00:14:14.170 --> 00:14:14.180
little bit more if you actually want to
 

00:14:14.180 --> 00:14:15.850
little bit more if you actually want to
take advantage of everything that

00:14:15.850 --> 00:14:15.860
take advantage of everything that
 

00:14:15.860 --> 00:14:21.130
take advantage of everything that
androids offered since 2.1 and a lot of

00:14:21.130 --> 00:14:21.140
androids offered since 2.1 and a lot of
 

00:14:21.140 --> 00:14:23.470
androids offered since 2.1 and a lot of
this is just because user expectations

00:14:23.470 --> 00:14:23.480
this is just because user expectations
 

00:14:23.480 --> 00:14:25.930
this is just because user expectations
have changed androids changed things

00:14:25.930 --> 00:14:25.940
have changed androids changed things
 

00:14:25.940 --> 00:14:28.600
have changed androids changed things
have changed a lot you can imagine now

00:14:28.600 --> 00:14:28.610
have changed a lot you can imagine now
 

00:14:28.610 --> 00:14:32.280
have changed a lot you can imagine now
with Android wear and Android auto and

00:14:32.280 --> 00:14:32.290
with Android wear and Android auto and
 

00:14:32.290 --> 00:14:35.290
with Android wear and Android auto and
Bluetooth headsets actually taking your

00:14:35.290 --> 00:14:35.300
Bluetooth headsets actually taking your
 

00:14:35.300 --> 00:14:38.650
Bluetooth headsets actually taking your
phone out of your pocket to pause might

00:14:38.650 --> 00:14:38.660
phone out of your pocket to pause might
 

00:14:38.660 --> 00:14:40.990
phone out of your pocket to pause might
actually not be the thing that users are

00:14:40.990 --> 00:14:41.000
actually not be the thing that users are
 

00:14:41.000 --> 00:14:43.660
actually not be the thing that users are
used to if they're out on a run it's not

00:14:43.660 --> 00:14:43.670
used to if they're out on a run it's not
 

00:14:43.670 --> 00:14:45.340
used to if they're out on a run it's not
something they're going to do alright

00:14:45.340 --> 00:14:45.350
something they're going to do alright
 

00:14:45.350 --> 00:14:47.800
something they're going to do alright
similarly if you have controls on the

00:14:47.800 --> 00:14:47.810
similarly if you have controls on the
 

00:14:47.810 --> 00:14:50.620
similarly if you have controls on the
android TV remote they want that play

00:14:50.620 --> 00:14:50.630
android TV remote they want that play
 

00:14:50.630 --> 00:14:52.990
android TV remote they want that play
pause button to actually work right

00:14:52.990 --> 00:14:53.000
pause button to actually work right
 

00:14:53.000 --> 00:14:54.910
pause button to actually work right
similarly like they may not actually

00:14:54.910 --> 00:14:54.920
similarly like they may not actually
 

00:14:54.920 --> 00:14:57.100
similarly like they may not actually
want to unlock their device right aren't

00:14:57.100 --> 00:14:57.110
want to unlock their device right aren't
 

00:14:57.110 --> 00:14:59.170
want to unlock their device right aren't
they expecting controls on their lock

00:14:59.170 --> 00:14:59.180
they expecting controls on their lock
 

00:14:59.180 --> 00:15:01.480
they expecting controls on their lock
screen similarly do they even need to

00:15:01.480 --> 00:15:01.490
screen similarly do they even need to
 

00:15:01.490 --> 00:15:03.550
screen similarly do they even need to
enter your app at all if you have

00:15:03.550 --> 00:15:03.560
enter your app at all if you have
 

00:15:03.560 --> 00:15:06.340
enter your app at all if you have
notifications there's actually little

00:15:06.340 --> 00:15:06.350
notifications there's actually little
 

00:15:06.350 --> 00:15:09.100
notifications there's actually little
reason to go into your app specifically

00:15:09.100 --> 00:15:09.110
reason to go into your app specifically
 

00:15:09.110 --> 00:15:12.310
reason to go into your app specifically
just to pause or play or skip to the

00:15:12.310 --> 00:15:12.320
just to pause or play or skip to the
 

00:15:12.320 --> 00:15:15.100
just to pause or play or skip to the
next track all right none of this is

00:15:15.100 --> 00:15:15.110
next track all right none of this is
 

00:15:15.110 --> 00:15:17.199
next track all right none of this is
even counting Google cast and remote

00:15:17.199 --> 00:15:17.209
even counting Google cast and remote
 

00:15:17.209 --> 00:15:19.269
even counting Google cast and remote
playback which wasn't even close to

00:15:19.269 --> 00:15:19.279
playback which wasn't even close to
 

00:15:19.279 --> 00:15:19.980
playback which wasn't even close to
being a thing

00:15:19.980 --> 00:15:19.990
being a thing
 

00:15:19.990 --> 00:15:22.920
being a thing
the 2.1 there so we have to go a little

00:15:22.920 --> 00:15:22.930
the 2.1 there so we have to go a little
 

00:15:22.930 --> 00:15:26.550
the 2.1 there so we have to go a little
bit front and in lollipop

00:15:26.550 --> 00:15:26.560
bit front and in lollipop
 

00:15:26.560 --> 00:15:29.010
bit front and in lollipop
despite like redoing the whole you lie

00:15:29.010 --> 00:15:29.020
despite like redoing the whole you lie
 

00:15:29.020 --> 00:15:31.280
despite like redoing the whole you lie
thing which whatever is so minor thing

00:15:31.280 --> 00:15:31.290
thing which whatever is so minor thing
 

00:15:31.290 --> 00:15:33.780
thing which whatever is so minor thing
also introduced this fancy class called

00:15:33.780 --> 00:15:33.790
also introduced this fancy class called
 

00:15:33.790 --> 00:15:37.199
also introduced this fancy class called
media session so media session is kind

00:15:37.199 --> 00:15:37.209
media session so media session is kind
 

00:15:37.209 --> 00:15:39.870
media session so media session is kind
of the one-stop shop between your app

00:15:39.870 --> 00:15:39.880
of the one-stop shop between your app
 

00:15:39.880 --> 00:15:42.600
of the one-stop shop between your app
and the rest of the Android media

00:15:42.600 --> 00:15:42.610
and the rest of the Android media
 

00:15:42.610 --> 00:15:46.530
and the rest of the Android media
framework so it was so useful to have

00:15:46.530 --> 00:15:46.540
framework so it was so useful to have
 

00:15:46.540 --> 00:15:49.620
framework so it was so useful to have
just a single point for both sending

00:15:49.620 --> 00:15:49.630
just a single point for both sending
 

00:15:49.630 --> 00:15:52.470
just a single point for both sending
commands to your app from say Bluetooth

00:15:52.470 --> 00:15:52.480
commands to your app from say Bluetooth
 

00:15:52.480 --> 00:15:54.900
commands to your app from say Bluetooth
headsets as well as giving information

00:15:54.900 --> 00:15:54.910
headsets as well as giving information
 

00:15:54.910 --> 00:15:58.260
headsets as well as giving information
to the system that we deprecated a whole

00:15:58.260 --> 00:15:58.270
to the system that we deprecated a whole
 

00:15:58.270 --> 00:16:01.019
to the system that we deprecated a whole
bunch of api's so no more remote control

00:16:01.019 --> 00:16:01.029
bunch of api's so no more remote control
 

00:16:01.029 --> 00:16:04.590
bunch of api's so no more remote control
client yeah all right all right no one's

00:16:04.590 --> 00:16:04.600
client yeah all right all right no one's
 

00:16:04.600 --> 00:16:06.180
client yeah all right all right no one's
excited about all right maybe it was

00:16:06.180 --> 00:16:06.190
excited about all right maybe it was
 

00:16:06.190 --> 00:16:08.930
excited about all right maybe it was
before your time it's okay it's great

00:16:08.930 --> 00:16:08.940
before your time it's okay it's great
 

00:16:08.940 --> 00:16:11.910
before your time it's okay it's great
but we still want to support older

00:16:11.910 --> 00:16:11.920
but we still want to support older
 

00:16:11.920 --> 00:16:15.030
but we still want to support older
devices free lollipop so we built media

00:16:15.030 --> 00:16:15.040
devices free lollipop so we built media
 

00:16:15.040 --> 00:16:18.269
devices free lollipop so we built media
session compact a backward compatible

00:16:18.269 --> 00:16:18.279
session compact a backward compatible
 

00:16:18.279 --> 00:16:22.019
session compact a backward compatible
back to API for before any of this stuff

00:16:22.019 --> 00:16:22.029
back to API for before any of this stuff
 

00:16:22.029 --> 00:16:24.540
back to API for before any of this stuff
actually existed you can still use media

00:16:24.540 --> 00:16:24.550
actually existed you can still use media
 

00:16:24.550 --> 00:16:26.699
actually existed you can still use media
session and it does nothing that's okay

00:16:26.699 --> 00:16:26.709
session and it does nothing that's okay
 

00:16:26.709 --> 00:16:28.350
session and it does nothing that's okay
because it also does all the

00:16:28.350 --> 00:16:28.360
because it also does all the
 

00:16:28.360 --> 00:16:31.380
because it also does all the
translations to a remote control client

00:16:31.380 --> 00:16:31.390
translations to a remote control client
 

00:16:31.390 --> 00:16:33.060
translations to a remote control client
which would be the Ice Cream Sandwich

00:16:33.060 --> 00:16:33.070
which would be the Ice Cream Sandwich
 

00:16:33.070 --> 00:16:36.480
which would be the Ice Cream Sandwich
through KitKat era of Android does all

00:16:36.480 --> 00:16:36.490
through KitKat era of Android does all
 

00:16:36.490 --> 00:16:38.490
through KitKat era of Android does all
of that translation for you so you get

00:16:38.490 --> 00:16:38.500
of that translation for you so you get
 

00:16:38.500 --> 00:16:41.790
of that translation for you so you get
one API to write across all Android

00:16:41.790 --> 00:16:41.800
one API to write across all Android
 

00:16:41.800 --> 00:16:44.460
one API to write across all Android
versions which is pretty sweet it's kind

00:16:44.460 --> 00:16:44.470
versions which is pretty sweet it's kind
 

00:16:44.470 --> 00:16:45.960
versions which is pretty sweet it's kind
of where we want all of our API eyes to

00:16:45.960 --> 00:16:45.970
of where we want all of our API eyes to
 

00:16:45.970 --> 00:16:50.220
of where we want all of our API eyes to
be so when you're actually creating a

00:16:50.220 --> 00:16:50.230
be so when you're actually creating a
 

00:16:50.230 --> 00:16:52.680
be so when you're actually creating a
mediasessioncompat it's actually doing a

00:16:52.680 --> 00:16:52.690
mediasessioncompat it's actually doing a
 

00:16:52.690 --> 00:16:56.360
mediasessioncompat it's actually doing a
lot more for you than you might think so

00:16:56.360 --> 00:16:56.370
lot more for you than you might think so
 

00:16:56.370 --> 00:16:59.519
lot more for you than you might think so
it's actually creating what's called a

00:16:59.519 --> 00:16:59.529
it's actually creating what's called a
 

00:16:59.529 --> 00:17:02.550
it's actually creating what's called a
token which is actually just a parcel

00:17:02.550 --> 00:17:02.560
token which is actually just a parcel
 

00:17:02.560 --> 00:17:05.689
token which is actually just a parcel
wrapper around the binder but allows

00:17:05.689 --> 00:17:05.699
wrapper around the binder but allows
 

00:17:05.699 --> 00:17:08.460
wrapper around the binder but allows
anyone whether it's the Android system

00:17:08.460 --> 00:17:08.470
anyone whether it's the Android system
 

00:17:08.470 --> 00:17:12.720
anyone whether it's the Android system
for Android wear or Android auto or even

00:17:12.720 --> 00:17:12.730
for Android wear or Android auto or even
 

00:17:12.730 --> 00:17:15.840
for Android wear or Android auto or even
your own app to build media controller

00:17:15.840 --> 00:17:15.850
your own app to build media controller
 

00:17:15.850 --> 00:17:18.750
your own app to build media controller
commands and these instances actually

00:17:18.750 --> 00:17:18.760
commands and these instances actually
 

00:17:18.760 --> 00:17:21.689
commands and these instances actually
allow them to send media buttons to you

00:17:21.689 --> 00:17:21.699
allow them to send media buttons to you
 

00:17:21.699 --> 00:17:24.120
allow them to send media buttons to you
to send controls to you as well as read

00:17:24.120 --> 00:17:24.130
to send controls to you as well as read
 

00:17:24.130 --> 00:17:26.880
to send controls to you as well as read
what kind of metadata or playback state

00:17:26.880 --> 00:17:26.890
what kind of metadata or playback state
 

00:17:26.890 --> 00:17:28.530
what kind of metadata or playback state
like are you actually playing something

00:17:28.530 --> 00:17:28.540
like are you actually playing something
 

00:17:28.540 --> 00:17:28.780
like are you actually playing something
right

00:17:28.780 --> 00:17:28.790
right
 

00:17:28.790 --> 00:17:31.390
right
now or are you buffering these are the

00:17:31.390 --> 00:17:31.400
now or are you buffering these are the
 

00:17:31.400 --> 00:17:33.580
now or are you buffering these are the
important things the system needs snow

00:17:33.580 --> 00:17:33.590
important things the system needs snow
 

00:17:33.590 --> 00:17:36.550
important things the system needs snow
about and things like Android wear you

00:17:36.550 --> 00:17:36.560
about and things like Android wear you
 

00:17:36.560 --> 00:17:38.140
about and things like Android wear you
need to know about to actually get your

00:17:38.140 --> 00:17:38.150
need to know about to actually get your
 

00:17:38.150 --> 00:17:42.550
need to know about to actually get your
media everywhere so this is also

00:17:42.550 --> 00:17:42.560
media everywhere so this is also
 

00:17:42.560 --> 00:17:43.930
media everywhere so this is also
something you can use in your own app

00:17:43.930 --> 00:17:43.940
something you can use in your own app
 

00:17:43.940 --> 00:17:46.510
something you can use in your own app
for building your UI and we'll get back

00:17:46.510 --> 00:17:46.520
for building your UI and we'll get back
 

00:17:46.520 --> 00:17:49.540
for building your UI and we'll get back
to that of them a little bit so when

00:17:49.540 --> 00:17:49.550
to that of them a little bit so when
 

00:17:49.550 --> 00:17:51.490
to that of them a little bit so when
someone's actually sending you a command

00:17:51.490 --> 00:17:51.500
someone's actually sending you a command
 

00:17:51.500 --> 00:17:53.620
someone's actually sending you a command
through this token it's actually going

00:17:53.620 --> 00:17:53.630
through this token it's actually going
 

00:17:53.630 --> 00:17:56.380
through this token it's actually going
through your mediasessioncompat and into

00:17:56.380 --> 00:17:56.390
through your mediasessioncompat and into
 

00:17:56.390 --> 00:18:00.970
through your mediasessioncompat and into
your callback class now you can imagine

00:18:00.970 --> 00:18:00.980
your callback class now you can imagine
 

00:18:00.980 --> 00:18:04.060
your callback class now you can imagine
with all these events coming in the

00:18:04.060 --> 00:18:04.070
with all these events coming in the
 

00:18:04.070 --> 00:18:05.860
with all these events coming in the
callback class is kind of a big deal

00:18:05.860 --> 00:18:05.870
callback class is kind of a big deal
 

00:18:05.870 --> 00:18:10.180
callback class is kind of a big deal
and it is it basically has all of the on

00:18:10.180 --> 00:18:10.190
and it is it basically has all of the on
 

00:18:10.190 --> 00:18:14.050
and it is it basically has all of the on
play on pause on skipped next on play

00:18:14.050 --> 00:18:14.060
play on pause on skipped next on play
 

00:18:14.060 --> 00:18:17.350
play on pause on skipped next on play
track from search it's got all of the

00:18:17.350 --> 00:18:17.360
track from search it's got all of the
 

00:18:17.360 --> 00:18:19.180
track from search it's got all of the
methods you'd expect for every one of

00:18:19.180 --> 00:18:19.190
methods you'd expect for every one of
 

00:18:19.190 --> 00:18:21.130
methods you'd expect for every one of
the actions that could be sent to your

00:18:21.130 --> 00:18:21.140
the actions that could be sent to your
 

00:18:21.140 --> 00:18:23.620
the actions that could be sent to your
app as well as even custom actions all

00:18:23.620 --> 00:18:23.630
app as well as even custom actions all
 

00:18:23.630 --> 00:18:26.950
app as well as even custom actions all
come in to your callback class so it's

00:18:26.950 --> 00:18:26.960
come in to your callback class so it's
 

00:18:26.960 --> 00:18:29.050
come in to your callback class so it's
actually a really great place in your

00:18:29.050 --> 00:18:29.060
actually a really great place in your
 

00:18:29.060 --> 00:18:32.230
actually a really great place in your
app to encapsulate all of the media

00:18:32.230 --> 00:18:32.240
app to encapsulate all of the media
 

00:18:32.240 --> 00:18:35.260
app to encapsulate all of the media
player calls right all of the exo player

00:18:35.260 --> 00:18:35.270
player calls right all of the exo player
 

00:18:35.270 --> 00:18:37.690
player calls right all of the exo player
calls all of the Google cast calls can

00:18:37.690 --> 00:18:37.700
calls all of the Google cast calls can
 

00:18:37.700 --> 00:18:39.730
calls all of the Google cast calls can
all be put into that one callback class

00:18:39.730 --> 00:18:39.740
all be put into that one callback class
 

00:18:39.740 --> 00:18:42.130
all be put into that one callback class
because you know when you get an on play

00:18:42.130 --> 00:18:42.140
because you know when you get an on play
 

00:18:42.140 --> 00:18:44.410
because you know when you get an on play
into your callback no matter where it

00:18:44.410 --> 00:18:44.420
into your callback no matter where it
 

00:18:44.420 --> 00:18:46.090
into your callback no matter where it
came from whether it was tapping on a

00:18:46.090 --> 00:18:46.100
came from whether it was tapping on a
 

00:18:46.100 --> 00:18:47.950
came from whether it was tapping on a
button on your device or hitting a

00:18:47.950 --> 00:18:47.960
button on your device or hitting a
 

00:18:47.960 --> 00:18:50.410
button on your device or hitting a
Bluetooth headset it all is going to go

00:18:50.410 --> 00:18:50.420
Bluetooth headset it all is going to go
 

00:18:50.420 --> 00:18:52.900
Bluetooth headset it all is going to go
to that one place this makes it really

00:18:52.900 --> 00:18:52.910
to that one place this makes it really
 

00:18:52.910 --> 00:18:55.390
to that one place this makes it really
powerful in a way to actually swap

00:18:55.390 --> 00:18:55.400
powerful in a way to actually swap
 

00:18:55.400 --> 00:18:57.790
powerful in a way to actually swap
between these things say you have to

00:18:57.790 --> 00:18:57.800
between these things say you have to
 

00:18:57.800 --> 00:19:00.250
between these things say you have to
support less than API 16 and you can't

00:19:00.250 --> 00:19:00.260
support less than API 16 and you can't
 

00:19:00.260 --> 00:19:02.340
support less than API 16 and you can't
live in the beautiful exoplayer world

00:19:02.340 --> 00:19:02.350
live in the beautiful exoplayer world
 

00:19:02.350 --> 00:19:05.110
live in the beautiful exoplayer world
you can't actually switch those

00:19:05.110 --> 00:19:05.120
you can't actually switch those
 

00:19:05.120 --> 00:19:07.630
you can't actually switch those
callbacks or choose at runtime

00:19:07.630 --> 00:19:07.640
callbacks or choose at runtime
 

00:19:07.640 --> 00:19:10.630
callbacks or choose at runtime
what callback you want to add it's that

00:19:10.630 --> 00:19:10.640
what callback you want to add it's that
 

00:19:10.640 --> 00:19:12.340
what callback you want to add it's that
way you can use media player or

00:19:12.340 --> 00:19:12.350
way you can use media player or
 

00:19:12.350 --> 00:19:15.340
way you can use media player or
something separate pre API 16 an EXO

00:19:15.340 --> 00:19:15.350
something separate pre API 16 an EXO
 

00:19:15.350 --> 00:19:18.490
something separate pre API 16 an EXO
player on 16 plus and not have to re are

00:19:18.490 --> 00:19:18.500
player on 16 plus and not have to re are
 

00:19:18.500 --> 00:19:21.220
player on 16 plus and not have to re are
koteki or whole app around just swapping

00:19:21.220 --> 00:19:21.230
koteki or whole app around just swapping
 

00:19:21.230 --> 00:19:25.570
koteki or whole app around just swapping
between these two and swapping out calls

00:19:25.570 --> 00:19:25.580
 

00:19:25.580 --> 00:19:27.070
so let's get started with

00:19:27.070 --> 00:19:27.080
so let's get started with
 

00:19:27.080 --> 00:19:30.970
so let's get started with
mediasessioncompat so we created and one

00:19:30.970 --> 00:19:30.980
mediasessioncompat so we created and one
 

00:19:30.980 --> 00:19:32.560
mediasessioncompat so we created and one
thing to keep in mind throughout all of

00:19:32.560 --> 00:19:32.570
thing to keep in mind throughout all of
 

00:19:32.570 --> 00:19:33.549
thing to keep in mind throughout all of
mediasessioncompat

00:19:33.549 --> 00:19:33.559
mediasessioncompat
 

00:19:33.559 --> 00:19:37.149
mediasessioncompat
is it's very cautious it assumes you

00:19:37.149 --> 00:19:37.159
is it's very cautious it assumes you
 

00:19:37.159 --> 00:19:40.029
is it's very cautious it assumes you
support nothing until you actually tell

00:19:40.029 --> 00:19:40.039
support nothing until you actually tell
 

00:19:40.039 --> 00:19:42.609
support nothing until you actually tell
it so we have to set a few flags you

00:19:42.609 --> 00:19:42.619
it so we have to set a few flags you
 

00:19:42.619 --> 00:19:45.070
it so we have to set a few flags you
have to say yes I actually do want media

00:19:45.070 --> 00:19:45.080
have to say yes I actually do want media
 

00:19:45.080 --> 00:19:47.529
have to say yes I actually do want media
buttons from Bluetooth headsets or heads

00:19:47.529 --> 00:19:47.539
buttons from Bluetooth headsets or heads
 

00:19:47.539 --> 00:19:51.039
buttons from Bluetooth headsets or heads
and wired headsets as well as transport

00:19:51.039 --> 00:19:51.049
and wired headsets as well as transport
 

00:19:51.049 --> 00:19:52.180
and wired headsets as well as transport
controls so used to be things like

00:19:52.180 --> 00:19:52.190
controls so used to be things like
 

00:19:52.190 --> 00:19:55.629
controls so used to be things like
Android wear and Android auto so we have

00:19:55.629 --> 00:19:55.639
Android wear and Android auto so we have
 

00:19:55.639 --> 00:19:57.310
Android wear and Android auto so we have
to actually tell it every time don't

00:19:57.310 --> 00:19:57.320
to actually tell it every time don't
 

00:19:57.320 --> 00:19:59.109
to actually tell it every time don't
forget these two lines or else things

00:19:59.109 --> 00:19:59.119
forget these two lines or else things
 

00:19:59.119 --> 00:20:01.060
forget these two lines or else things
will magically fail and you will not

00:20:01.060 --> 00:20:01.070
will magically fail and you will not
 

00:20:01.070 --> 00:20:03.509
will magically fail and you will not
know why it's these two lines and

00:20:03.509 --> 00:20:03.519
know why it's these two lines and
 

00:20:03.519 --> 00:20:07.389
know why it's these two lines and
similar to audio focus this is an intent

00:20:07.389 --> 00:20:07.399
similar to audio focus this is an intent
 

00:20:07.399 --> 00:20:11.049
similar to audio focus this is an intent
to play audio right so in this case

00:20:11.049 --> 00:20:11.059
to play audio right so in this case
 

00:20:11.059 --> 00:20:12.820
to play audio right so in this case
we're actually going to call set active

00:20:12.820 --> 00:20:12.830
we're actually going to call set active
 

00:20:12.830 --> 00:20:14.710
we're actually going to call set active
which says hey I actually do want to

00:20:14.710 --> 00:20:14.720
which says hey I actually do want to
 

00:20:14.720 --> 00:20:17.499
which says hey I actually do want to
receive media buttons now when we

00:20:17.499 --> 00:20:17.509
receive media buttons now when we
 

00:20:17.509 --> 00:20:20.379
receive media buttons now when we
receive audio focus and then once we

00:20:20.379 --> 00:20:20.389
receive audio focus and then once we
 

00:20:20.389 --> 00:20:22.419
receive audio focus and then once we
stopped we can actually say no I no

00:20:22.419 --> 00:20:22.429
stopped we can actually say no I no
 

00:20:22.429 --> 00:20:24.820
stopped we can actually say no I no
longer is he need any more events I'm

00:20:24.820 --> 00:20:24.830
longer is he need any more events I'm
 

00:20:24.830 --> 00:20:26.889
longer is he need any more events I'm
good I'm not going to playback anything

00:20:26.889 --> 00:20:26.899
good I'm not going to playback anything
 

00:20:26.899 --> 00:20:31.779
good I'm not going to playback anything
else so we haven't actually told the

00:20:31.779 --> 00:20:31.789
else so we haven't actually told the
 

00:20:31.789 --> 00:20:33.909
else so we haven't actually told the
system anything right again very

00:20:33.909 --> 00:20:33.919
system anything right again very
 

00:20:33.919 --> 00:20:36.340
system anything right again very
cautious so we actually do need to tell

00:20:36.340 --> 00:20:36.350
cautious so we actually do need to tell
 

00:20:36.350 --> 00:20:39.310
cautious so we actually do need to tell
the system what we're doing right and

00:20:39.310 --> 00:20:39.320
the system what we're doing right and
 

00:20:39.320 --> 00:20:42.340
the system what we're doing right and
this comes first across in playback

00:20:42.340 --> 00:20:42.350
this comes first across in playback
 

00:20:42.350 --> 00:20:45.129
this comes first across in playback
state now playback state is built off of

00:20:45.129 --> 00:20:45.139
state now playback state is built off of
 

00:20:45.139 --> 00:20:48.159
state now playback state is built off of
two separate pieces one is the actual

00:20:48.159 --> 00:20:48.169
two separate pieces one is the actual
 

00:20:48.169 --> 00:20:51.279
two separate pieces one is the actual
set state itself these are like I am

00:20:51.279 --> 00:20:51.289
set state itself these are like I am
 

00:20:51.289 --> 00:20:54.759
set state itself these are like I am
playing I am buffering I am paused and

00:20:54.759 --> 00:20:54.769
playing I am buffering I am paused and
 

00:20:54.769 --> 00:20:56.889
playing I am buffering I am paused and
this is what gives kind of the control

00:20:56.889 --> 00:20:56.899
this is what gives kind of the control
 

00:20:56.899 --> 00:21:00.039
this is what gives kind of the control
to say like oh by the way you should

00:21:00.039 --> 00:21:00.049
to say like oh by the way you should
 

00:21:00.049 --> 00:21:01.779
to say like oh by the way you should
display a play button rather than a

00:21:01.779 --> 00:21:01.789
display a play button rather than a
 

00:21:01.789 --> 00:21:03.729
display a play button rather than a
pause button right or you should display

00:21:03.729 --> 00:21:03.739
pause button right or you should display
 

00:21:03.739 --> 00:21:05.470
pause button right or you should display
a buffering circle if your buffering

00:21:05.470 --> 00:21:05.480
a buffering circle if your buffering
 

00:21:05.480 --> 00:21:07.690
a buffering circle if your buffering
right this all makes a lot of sense to

00:21:07.690 --> 00:21:07.700
right this all makes a lot of sense to
 

00:21:07.700 --> 00:21:11.379
right this all makes a lot of sense to
tell the system what's going on then the

00:21:11.379 --> 00:21:11.389
tell the system what's going on then the
 

00:21:11.389 --> 00:21:14.109
tell the system what's going on then the
other half of it is set actions now

00:21:14.109 --> 00:21:14.119
other half of it is set actions now
 

00:21:14.119 --> 00:21:16.720
other half of it is set actions now
here's where you actually declare yes I

00:21:16.720 --> 00:21:16.730
here's where you actually declare yes I
 

00:21:16.730 --> 00:21:17.889
here's where you actually declare yes I
do solemnly swear

00:21:17.889 --> 00:21:17.899
do solemnly swear
 

00:21:17.899 --> 00:21:21.639
do solemnly swear
I support play pause or I support skip

00:21:21.639 --> 00:21:21.649
I support play pause or I support skip
 

00:21:21.649 --> 00:21:23.499
I support play pause or I support skip
to next right not every app needs to

00:21:23.499 --> 00:21:23.509
to next right not every app needs to
 

00:21:23.509 --> 00:21:26.349
to next right not every app needs to
have a skip to next button okay so in

00:21:26.349 --> 00:21:26.359
have a skip to next button okay so in
 

00:21:26.359 --> 00:21:29.320
have a skip to next button okay so in
this case you need to call sentence for

00:21:29.320 --> 00:21:29.330
this case you need to call sentence for
 

00:21:29.330 --> 00:21:30.909
this case you need to call sentence for
each and every one of the actions you

00:21:30.909 --> 00:21:30.919
each and every one of the actions you
 

00:21:30.919 --> 00:21:33.970
each and every one of the actions you
want otherwise that callback or that

00:21:33.970 --> 00:21:33.980
want otherwise that callback or that
 

00:21:33.980 --> 00:21:36.009
want otherwise that callback or that
specific class won't actually ever be

00:21:36.009 --> 00:21:36.019
specific class won't actually ever be
 

00:21:36.019 --> 00:21:39.500
specific class won't actually ever be
called so you never say I support

00:21:39.500 --> 00:21:39.510
called so you never say I support
 

00:21:39.510 --> 00:21:42.380
called so you never say I support
there will be no pause button event sent

00:21:42.380 --> 00:21:42.390
there will be no pause button event sent
 

00:21:42.390 --> 00:21:44.270
there will be no pause button event sent
to you which is probably not actually

00:21:44.270 --> 00:21:44.280
to you which is probably not actually
 

00:21:44.280 --> 00:21:45.650
to you which is probably not actually
what you want but you have to just make

00:21:45.650 --> 00:21:45.660
what you want but you have to just make
 

00:21:45.660 --> 00:21:49.070
what you want but you have to just make
sure that these stay in sync now of

00:21:49.070 --> 00:21:49.080
sure that these stay in sync now of
 

00:21:49.080 --> 00:21:50.330
sure that these stay in sync now of
course these are kind of coupled

00:21:50.330 --> 00:21:50.340
course these are kind of coupled
 

00:21:50.340 --> 00:21:52.370
course these are kind of coupled
together which at first you're like okay

00:21:52.370 --> 00:21:52.380
together which at first you're like okay
 

00:21:52.380 --> 00:21:54.470
together which at first you're like okay
these are all coupled together for some

00:21:54.470 --> 00:21:54.480
these are all coupled together for some
 

00:21:54.480 --> 00:21:57.260
these are all coupled together for some
reason turns out that many times when

00:21:57.260 --> 00:21:57.270
reason turns out that many times when
 

00:21:57.270 --> 00:21:58.670
reason turns out that many times when
you're changing your state you're also

00:21:58.670 --> 00:21:58.680
you're changing your state you're also
 

00:21:58.680 --> 00:22:01.520
you're changing your state you're also
changing your actions I fast-forwarding

00:22:01.520 --> 00:22:01.530
changing your actions I fast-forwarding
 

00:22:01.530 --> 00:22:03.710
changing your actions I fast-forwarding
while you're buffering probably actually

00:22:03.710 --> 00:22:03.720
while you're buffering probably actually
 

00:22:03.720 --> 00:22:05.600
while you're buffering probably actually
doesn't make a whole lot of sense maybe

00:22:05.600 --> 00:22:05.610
doesn't make a whole lot of sense maybe
 

00:22:05.610 --> 00:22:09.110
doesn't make a whole lot of sense maybe
it does but at any point you can't just

00:22:09.110 --> 00:22:09.120
it does but at any point you can't just
 

00:22:09.120 --> 00:22:10.640
it does but at any point you can't just
create these things together this is the

00:22:10.640 --> 00:22:10.650
create these things together this is the
 

00:22:10.650 --> 00:22:12.380
create these things together this is the
Builder kind of pattern so you actually

00:22:12.380 --> 00:22:12.390
Builder kind of pattern so you actually
 

00:22:12.390 --> 00:22:14.750
Builder kind of pattern so you actually
curate a playback state to compact

00:22:14.750 --> 00:22:14.760
curate a playback state to compact
 

00:22:14.760 --> 00:22:17.480
curate a playback state to compact
builder so don't throw away the Builder

00:22:17.480 --> 00:22:17.490
builder so don't throw away the Builder
 

00:22:17.490 --> 00:22:19.610
builder so don't throw away the Builder
every time you can just reuse the same

00:22:19.610 --> 00:22:19.620
every time you can just reuse the same
 

00:22:19.620 --> 00:22:21.770
every time you can just reuse the same
builder and change just the one thing

00:22:21.770 --> 00:22:21.780
builder and change just the one thing
 

00:22:21.780 --> 00:22:24.470
builder and change just the one thing
you need to I can't just change that

00:22:24.470 --> 00:22:24.480
you need to I can't just change that
 

00:22:24.480 --> 00:22:27.080
you need to I can't just change that
state and not call set actions and then

00:22:27.080 --> 00:22:27.090
state and not call set actions and then
 

00:22:27.090 --> 00:22:30.350
state and not call set actions and then
just call build and call set state so

00:22:30.350 --> 00:22:30.360
just call build and call set state so
 

00:22:30.360 --> 00:22:34.750
just call build and call set state so
with this all of our media buttons work

00:22:34.750 --> 00:22:34.760
 

00:22:34.760 --> 00:22:39.110
well okay my line it works great on API

00:22:39.110 --> 00:22:39.120
well okay my line it works great on API
 

00:22:39.120 --> 00:22:42.860
well okay my line it works great on API
21 + turns out it fails completely on

00:22:42.860 --> 00:22:42.870
21 + turns out it fails completely on
 

00:22:42.870 --> 00:22:45.920
21 + turns out it fails completely on
pre API 21 with a nice handy error

00:22:45.920 --> 00:22:45.930
pre API 21 with a nice handy error
 

00:22:45.930 --> 00:22:47.800
pre API 21 with a nice handy error
message saying Media button receiver

00:22:47.800 --> 00:22:47.810
message saying Media button receiver
 

00:22:47.810 --> 00:22:53.060
message saying Media button receiver
component may not be null okay I'll take

00:22:53.060 --> 00:22:53.070
component may not be null okay I'll take
 

00:22:53.070 --> 00:22:55.880
component may not be null okay I'll take
your word on it but what is the media

00:22:55.880 --> 00:22:55.890
your word on it but what is the media
 

00:22:55.890 --> 00:22:58.280
your word on it but what is the media
button receiver component and why do I

00:22:58.280 --> 00:22:58.290
button receiver component and why do I
 

00:22:58.290 --> 00:23:01.190
button receiver component and why do I
need it well turns out that media button

00:23:01.190 --> 00:23:01.200
need it well turns out that media button
 

00:23:01.200 --> 00:23:03.560
need it well turns out that media button
receivers have a long history in Android

00:23:03.560 --> 00:23:03.570
receivers have a long history in Android
 

00:23:03.570 --> 00:23:05.680
receivers have a long history in Android
but it's something that's changed a lot

00:23:05.680 --> 00:23:05.690
but it's something that's changed a lot
 

00:23:05.690 --> 00:23:09.440
but it's something that's changed a lot
so it's just a broadcast receiver in

00:23:09.440 --> 00:23:09.450
so it's just a broadcast receiver in
 

00:23:09.450 --> 00:23:11.990
so it's just a broadcast receiver in
your manifest that receives the media

00:23:11.990 --> 00:23:12.000
your manifest that receives the media
 

00:23:12.000 --> 00:23:16.760
your manifest that receives the media
button action that's all it does but how

00:23:16.760 --> 00:23:16.770
button action that's all it does but how
 

00:23:16.770 --> 00:23:20.780
button action that's all it does but how
it was used changed before lollipop was

00:23:20.780 --> 00:23:20.790
it was used changed before lollipop was
 

00:23:20.790 --> 00:23:23.630
it was used changed before lollipop was
actually required for basically all of

00:23:23.630 --> 00:23:23.640
actually required for basically all of
 

00:23:23.640 --> 00:23:27.530
actually required for basically all of
the Android media framework api's so if

00:23:27.530 --> 00:23:27.540
the Android media framework api's so if
 

00:23:27.540 --> 00:23:30.020
the Android media framework api's so if
you didn't say I have a Media button

00:23:30.020 --> 00:23:30.030
you didn't say I have a Media button
 

00:23:30.030 --> 00:23:33.380
you didn't say I have a Media button
receiver with the component then all the

00:23:33.380 --> 00:23:33.390
receiver with the component then all the
 

00:23:33.390 --> 00:23:34.820
receiver with the component then all the
system wouldn't actually route to any

00:23:34.820 --> 00:23:34.830
system wouldn't actually route to any
 

00:23:34.830 --> 00:23:36.440
system wouldn't actually route to any
buttons to you you wouldn't show up on

00:23:36.440 --> 00:23:36.450
buttons to you you wouldn't show up on
 

00:23:36.450 --> 00:23:37.370
buttons to you you wouldn't show up on
the lockscreen

00:23:37.370 --> 00:23:37.380
the lockscreen
 

00:23:37.380 --> 00:23:39.530
the lockscreen
you basically weren't using any of the

00:23:39.530 --> 00:23:39.540
you basically weren't using any of the
 

00:23:39.540 --> 00:23:42.470
you basically weren't using any of the
system now technically you could have

00:23:42.470 --> 00:23:42.480
system now technically you could have
 

00:23:42.480 --> 00:23:44.990
system now technically you could have
used the pending intent on API 18 and

00:23:44.990 --> 00:23:45.000
used the pending intent on API 18 and
 

00:23:45.000 --> 00:23:48.460
used the pending intent on API 18 and
higher so like 18 am 19 and

00:23:48.460 --> 00:23:48.470
higher so like 18 am 19 and
 

00:23:48.470 --> 00:23:51.549
higher so like 18 am 19 and
it was all gone but we actually didn't

00:23:51.549 --> 00:23:51.559
it was all gone but we actually didn't
 

00:23:51.559 --> 00:23:56.110
it was all gone but we actually didn't
add any CTS tests so it fails on certain

00:23:56.110 --> 00:23:56.120
add any CTS tests so it fails on certain
 

00:23:56.120 --> 00:24:00.370
add any CTS tests so it fails on certain
manufacturers so for mediasessioncompat

00:24:00.370 --> 00:24:00.380
manufacturers so for mediasessioncompat
 

00:24:00.380 --> 00:24:01.570
manufacturers so for mediasessioncompat
sper spective

00:24:01.570 --> 00:24:01.580
sper spective
 

00:24:01.580 --> 00:24:04.720
sper spective
it will always need a component in your

00:24:04.720 --> 00:24:04.730
it will always need a component in your
 

00:24:04.730 --> 00:24:07.450
it will always need a component in your
manifest registered if you want to use

00:24:07.450 --> 00:24:07.460
manifest registered if you want to use
 

00:24:07.460 --> 00:24:11.110
manifest registered if you want to use
me to a shrink about prior to API 21 now

00:24:11.110 --> 00:24:11.120
me to a shrink about prior to API 21 now
 

00:24:11.120 --> 00:24:13.630
me to a shrink about prior to API 21 now
it's actually still kind of useful in

00:24:13.630 --> 00:24:13.640
it's actually still kind of useful in
 

00:24:13.640 --> 00:24:16.480
it's actually still kind of useful in
lollipop plus even though we have a

00:24:16.480 --> 00:24:16.490
lollipop plus even though we have a
 

00:24:16.490 --> 00:24:20.020
lollipop plus even though we have a
media session which on lollipop is going

00:24:20.020 --> 00:24:20.030
media session which on lollipop is going
 

00:24:20.030 --> 00:24:22.360
media session which on lollipop is going
to be sending you media buttons directly

00:24:22.360 --> 00:24:22.370
to be sending you media buttons directly
 

00:24:22.370 --> 00:24:26.289
to be sending you media buttons directly
to your callback in this case the actual

00:24:26.289 --> 00:24:26.299
to your callback in this case the actual
 

00:24:26.299 --> 00:24:29.260
to your callback in this case the actual
component in your manifest kind of as a

00:24:29.260 --> 00:24:29.270
component in your manifest kind of as a
 

00:24:29.270 --> 00:24:32.799
component in your manifest kind of as a
secondary optional aspect where it's

00:24:32.799 --> 00:24:32.809
secondary optional aspect where it's
 

00:24:32.809 --> 00:24:36.430
secondary optional aspect where it's
only used to restart playback so if

00:24:36.430 --> 00:24:36.440
only used to restart playback so if
 

00:24:36.440 --> 00:24:37.990
only used to restart playback so if
you've ever listened to Google Play

00:24:37.990 --> 00:24:38.000
you've ever listened to Google Play
 

00:24:38.000 --> 00:24:40.960
you've ever listened to Google Play
Music and then stopped playback and then

00:24:40.960 --> 00:24:40.970
Music and then stopped playback and then
 

00:24:40.970 --> 00:24:43.120
Music and then stopped playback and then
got into your car and hit the play

00:24:43.120 --> 00:24:43.130
got into your car and hit the play
 

00:24:43.130 --> 00:24:45.430
got into your car and hit the play
button you'll note that Google Play

00:24:45.430 --> 00:24:45.440
button you'll note that Google Play
 

00:24:45.440 --> 00:24:49.029
button you'll note that Google Play
Music was the one to start I didn't knew

00:24:49.029 --> 00:24:49.039
Music was the one to start I didn't knew
 

00:24:49.039 --> 00:24:51.370
Music was the one to start I didn't knew
that it would get a start command and

00:24:51.370 --> 00:24:51.380
that it would get a start command and
 

00:24:51.380 --> 00:24:53.770
that it would get a start command and
actually start playback that's because

00:24:53.770 --> 00:24:53.780
actually start playback that's because
 

00:24:53.780 --> 00:24:55.750
actually start playback that's because
it had registered a Media button

00:24:55.750 --> 00:24:55.760
it had registered a Media button
 

00:24:55.760 --> 00:24:59.950
it had registered a Media button
receiver so I really strongly suggest if

00:24:59.950 --> 00:24:59.960
receiver so I really strongly suggest if
 

00:24:59.960 --> 00:25:02.020
receiver so I really strongly suggest if
you're doing anything with background

00:25:02.020 --> 00:25:02.030
you're doing anything with background
 

00:25:02.030 --> 00:25:03.850
you're doing anything with background
playback or something that should

00:25:03.850 --> 00:25:03.860
playback or something that should
 

00:25:03.860 --> 00:25:07.000
playback or something that should
restart you should still register a

00:25:07.000 --> 00:25:07.010
restart you should still register a
 

00:25:07.010 --> 00:25:09.220
restart you should still register a
Media button receiver on lollipop and

00:25:09.220 --> 00:25:09.230
Media button receiver on lollipop and
 

00:25:09.230 --> 00:25:12.279
Media button receiver on lollipop and
higher because otherwise it will be

00:25:12.279 --> 00:25:12.289
higher because otherwise it will be
 

00:25:12.289 --> 00:25:15.190
higher because otherwise it will be
Google Play Music it starts up even

00:25:15.190 --> 00:25:15.200
Google Play Music it starts up even
 

00:25:15.200 --> 00:25:16.810
Google Play Music it starts up even
though it may have been your app that

00:25:16.810 --> 00:25:16.820
though it may have been your app that
 

00:25:16.820 --> 00:25:19.390
though it may have been your app that
the user was last listening to so just

00:25:19.390 --> 00:25:19.400
the user was last listening to so just
 

00:25:19.400 --> 00:25:23.169
the user was last listening to so just
keep that in mind so we want to make

00:25:23.169 --> 00:25:23.179
keep that in mind so we want to make
 

00:25:23.179 --> 00:25:25.590
keep that in mind so we want to make
this real easy so we go to class for

00:25:25.590 --> 00:25:25.600
this real easy so we go to class for
 

00:25:25.600 --> 00:25:28.210
this real easy so we go to class for
called Media button receiver fancy

00:25:28.210 --> 00:25:28.220
called Media button receiver fancy
 

00:25:28.220 --> 00:25:32.100
called Media button receiver fancy
enough again also in the support before

00:25:32.100 --> 00:25:32.110
enough again also in the support before
 

00:25:32.110 --> 00:25:35.590
enough again also in the support before
sport library and as kind of two main

00:25:35.590 --> 00:25:35.600
sport library and as kind of two main
 

00:25:35.600 --> 00:25:38.200
sport library and as kind of two main
purposes the first is kind of

00:25:38.200 --> 00:25:38.210
purposes the first is kind of
 

00:25:38.210 --> 00:25:40.029
purposes the first is kind of
specifically around that background case

00:25:40.029 --> 00:25:40.039
specifically around that background case
 

00:25:40.039 --> 00:25:42.340
specifically around that background case
where if you have a service that's

00:25:42.340 --> 00:25:42.350
where if you have a service that's
 

00:25:42.350 --> 00:25:45.610
where if you have a service that's
handling your media session which is of

00:25:45.610 --> 00:25:45.620
handling your media session which is of
 

00:25:45.620 --> 00:25:48.760
handling your media session which is of
course very common for audio apps it

00:25:48.760 --> 00:25:48.770
course very common for audio apps it
 

00:25:48.770 --> 00:25:52.419
course very common for audio apps it
will auto forward any Media button

00:25:52.419 --> 00:25:52.429
will auto forward any Media button
 

00:25:52.429 --> 00:25:54.940
will auto forward any Media button
intents onto your service where you can

00:25:54.940 --> 00:25:54.950
intents onto your service where you can
 

00:25:54.950 --> 00:25:56.620
intents onto your service where you can
like to actually do something with it

00:25:56.620 --> 00:25:56.630
like to actually do something with it
 

00:25:56.630 --> 00:26:00.399
like to actually do something with it
and it'll choose between two things one

00:26:00.399 --> 00:26:00.409
and it'll choose between two things one
 

00:26:00.409 --> 00:26:01.160
and it'll choose between two things one
if you have any

00:26:01.160 --> 00:26:01.170
if you have any
 

00:26:01.170 --> 00:26:03.740
if you have any
Media Browser service in your app it'll

00:26:03.740 --> 00:26:03.750
Media Browser service in your app it'll
 

00:26:03.750 --> 00:26:05.870
Media Browser service in your app it'll
choose that first and if you don't have

00:26:05.870 --> 00:26:05.880
choose that first and if you don't have
 

00:26:05.880 --> 00:26:07.850
choose that first and if you don't have
one of those you can actually add the

00:26:07.850 --> 00:26:07.860
one of those you can actually add the
 

00:26:07.860 --> 00:26:10.520
one of those you can actually add the
same media button intent filter to your

00:26:10.520 --> 00:26:10.530
same media button intent filter to your
 

00:26:10.530 --> 00:26:12.800
same media button intent filter to your
service and Media button receiver will

00:26:12.800 --> 00:26:12.810
service and Media button receiver will
 

00:26:12.810 --> 00:26:15.620
service and Media button receiver will
automatically route it to that now the

00:26:15.620 --> 00:26:15.630
automatically route it to that now the
 

00:26:15.630 --> 00:26:17.360
automatically route it to that now the
nice part about this is that you don't

00:26:17.360 --> 00:26:17.370
nice part about this is that you don't
 

00:26:17.370 --> 00:26:18.890
nice part about this is that you don't
actually have to write any Media button

00:26:18.890 --> 00:26:18.900
actually have to write any Media button
 

00:26:18.900 --> 00:26:21.800
actually have to write any Media button
receiver code you just add it to your

00:26:21.800 --> 00:26:21.810
receiver code you just add it to your
 

00:26:21.810 --> 00:26:24.950
receiver code you just add it to your
manifest and that's it you're done right

00:26:24.950 --> 00:26:24.960
manifest and that's it you're done right
 

00:26:24.960 --> 00:26:28.010
manifest and that's it you're done right
but that's pretty nice because who wants

00:26:28.010 --> 00:26:28.020
but that's pretty nice because who wants
 

00:26:28.020 --> 00:26:32.090
but that's pretty nice because who wants
to write code right no everyone okay but

00:26:32.090 --> 00:26:32.100
to write code right no everyone okay but
 

00:26:32.100 --> 00:26:34.670
to write code right no everyone okay but
the important part is once you get that

00:26:34.670 --> 00:26:34.680
the important part is once you get that
 

00:26:34.680 --> 00:26:37.160
the important part is once you get that
intent in your service or in your

00:26:37.160 --> 00:26:37.170
intent in your service or in your
 

00:26:37.170 --> 00:26:39.100
intent in your service or in your
activity if you're doing video playback

00:26:39.100 --> 00:26:39.110
activity if you're doing video playback
 

00:26:39.110 --> 00:26:41.890
activity if you're doing video playback
wherever your actual media session is

00:26:41.890 --> 00:26:41.900
wherever your actual media session is
 

00:26:41.900 --> 00:26:44.960
wherever your actual media session is
then we have a simple one-line command

00:26:44.960 --> 00:26:44.970
then we have a simple one-line command
 

00:26:44.970 --> 00:26:47.150
then we have a simple one-line command
to actually take in your

00:26:47.150 --> 00:26:47.160
to actually take in your
 

00:26:47.160 --> 00:26:50.210
to actually take in your
mediasessioncompat and the intent and

00:26:50.210 --> 00:26:50.220
mediasessioncompat and the intent and
 

00:26:50.220 --> 00:26:53.450
mediasessioncompat and the intent and
then go through all of the process of

00:26:53.450 --> 00:26:53.460
then go through all of the process of
 

00:26:53.460 --> 00:26:55.640
then go through all of the process of
extracting the key event figuring out

00:26:55.640 --> 00:26:55.650
extracting the key event figuring out
 

00:26:55.650 --> 00:26:57.980
extracting the key event figuring out
what event that is and then passing it

00:26:57.980 --> 00:26:57.990
what event that is and then passing it
 

00:26:57.990 --> 00:27:01.760
what event that is and then passing it
on to your callback for you so with just

00:27:01.760 --> 00:27:01.770
on to your callback for you so with just
 

00:27:01.770 --> 00:27:04.220
on to your callback for you so with just
adding it to your manifest and doing one

00:27:04.220 --> 00:27:04.230
adding it to your manifest and doing one
 

00:27:04.230 --> 00:27:06.920
adding it to your manifest and doing one
line of handle intent all of a sudden

00:27:06.920 --> 00:27:06.930
line of handle intent all of a sudden
 

00:27:06.930 --> 00:27:09.470
line of handle intent all of a sudden
you can now use your callback class

00:27:09.470 --> 00:27:09.480
you can now use your callback class
 

00:27:09.480 --> 00:27:11.930
you can now use your callback class
normally something that would be API 21

00:27:11.930 --> 00:27:11.940
normally something that would be API 21
 

00:27:11.940 --> 00:27:16.160
normally something that would be API 21
plus now for all API levels so whether

00:27:16.160 --> 00:27:16.170
plus now for all API levels so whether
 

00:27:16.170 --> 00:27:18.260
plus now for all API levels so whether
you're using Media button receiver on

00:27:18.260 --> 00:27:18.270
you're using Media button receiver on
 

00:27:18.270 --> 00:27:20.930
you're using Media button receiver on
older versions or the native media

00:27:20.930 --> 00:27:20.940
older versions or the native media
 

00:27:20.940 --> 00:27:26.990
older versions or the native media
session stuff on 21 plus now it's

00:27:26.990 --> 00:27:27.000
session stuff on 21 plus now it's
 

00:27:27.000 --> 00:27:29.300
session stuff on 21 plus now it's
actually more code to enable it on API

00:27:29.300 --> 00:27:29.310
actually more code to enable it on API
 

00:27:29.310 --> 00:27:33.350
actually more code to enable it on API
21 plus so the 23 versions of the

00:27:33.350 --> 00:27:33.360
21 plus so the 23 versions of the
 

00:27:33.360 --> 00:27:35.150
21 plus so the 23 versions of the
support library actually did this for

00:27:35.150 --> 00:27:35.160
support library actually did this for
 

00:27:35.160 --> 00:27:38.870
support library actually did this for
you but as of the 24 versions of the

00:27:38.870 --> 00:27:38.880
you but as of the 24 versions of the
 

00:27:38.880 --> 00:27:40.310
you but as of the 24 versions of the
spotlight the Android end versions

00:27:40.310 --> 00:27:40.320
spotlight the Android end versions
 

00:27:40.320 --> 00:27:42.770
spotlight the Android end versions
you'll have to do this manually if you

00:27:42.770 --> 00:27:42.780
you'll have to do this manually if you
 

00:27:42.780 --> 00:27:44.330
you'll have to do this manually if you
want to do it it's pretty

00:27:44.330 --> 00:27:44.340
want to do it it's pretty
 

00:27:44.340 --> 00:27:45.770
want to do it it's pretty
straightforward you create a pending

00:27:45.770 --> 00:27:45.780
straightforward you create a pending
 

00:27:45.780 --> 00:27:49.700
straightforward you create a pending
intent and to your action Media button

00:27:49.700 --> 00:27:49.710
intent and to your action Media button
 

00:27:49.710 --> 00:27:53.450
intent and to your action Media button
receiver so then you called Media button

00:27:53.450 --> 00:27:53.460
receiver so then you called Media button
 

00:27:53.460 --> 00:27:55.630
receiver so then you called Media button
receiver fancy enough

00:27:55.630 --> 00:27:55.640
receiver fancy enough
 

00:27:55.640 --> 00:27:59.230
receiver fancy enough
so now all of our commands work but

00:27:59.230 --> 00:27:59.240
so now all of our commands work but
 

00:27:59.240 --> 00:28:03.080
so now all of our commands work but
there's more to just commands right

00:28:03.080 --> 00:28:03.090
there's more to just commands right
 

00:28:03.090 --> 00:28:04.130
there's more to just commands right
there's another part of

00:28:04.130 --> 00:28:04.140
there's another part of
 

00:28:04.140 --> 00:28:05.750
there's another part of
mediasessioncompat and that's around

00:28:05.750 --> 00:28:05.760
mediasessioncompat and that's around
 

00:28:05.760 --> 00:28:08.930
mediasessioncompat and that's around
metadata now metadata comes in a lot of

00:28:08.930 --> 00:28:08.940
metadata now metadata comes in a lot of
 

00:28:08.940 --> 00:28:11.029
metadata now metadata comes in a lot of
different formats but it's basically the

00:28:11.029 --> 00:28:11.039
different formats but it's basically the
 

00:28:11.039 --> 00:28:14.060
different formats but it's basically the
what's playing aspect of telling the

00:28:14.060 --> 00:28:14.070
what's playing aspect of telling the
 

00:28:14.070 --> 00:28:16.190
what's playing aspect of telling the
system what's going on all right so this

00:28:16.190 --> 00:28:16.200
system what's going on all right so this
 

00:28:16.200 --> 00:28:18.470
system what's going on all right so this
is how like Android wear gets all of

00:28:18.470 --> 00:28:18.480
is how like Android wear gets all of
 

00:28:18.480 --> 00:28:20.149
is how like Android wear gets all of
your information on there advice right

00:28:20.149 --> 00:28:20.159
your information on there advice right
 

00:28:20.159 --> 00:28:22.580
your information on there advice right
or the lockscreen gets the background

00:28:22.580 --> 00:28:22.590
or the lockscreen gets the background
 

00:28:22.590 --> 00:28:25.730
or the lockscreen gets the background
art okay so at a bare minimum I'd

00:28:25.730 --> 00:28:25.740
art okay so at a bare minimum I'd
 

00:28:25.740 --> 00:28:29.720
art okay so at a bare minimum I'd
suggest a few fields first title artist

00:28:29.720 --> 00:28:29.730
suggest a few fields first title artist
 

00:28:29.730 --> 00:28:34.610
suggest a few fields first title artist
album if you have albums the duration if

00:28:34.610 --> 00:28:34.620
album if you have albums the duration if
 

00:28:34.620 --> 00:28:37.580
album if you have albums the duration if
it's a fixed length track having the

00:28:37.580 --> 00:28:37.590
it's a fixed length track having the
 

00:28:37.590 --> 00:28:39.409
it's a fixed length track having the
duration actually allows it to display

00:28:39.409 --> 00:28:39.419
duration actually allows it to display
 

00:28:39.419 --> 00:28:42.710
duration actually allows it to display
how far along you are and then of course

00:28:42.710 --> 00:28:42.720
how far along you are and then of course
 

00:28:42.720 --> 00:28:46.730
how far along you are and then of course
a bitmap for the art or the album art

00:28:46.730 --> 00:28:46.740
a bitmap for the art or the album art
 

00:28:46.740 --> 00:28:49.129
a bitmap for the art or the album art
and now this bitmap shouldn't

00:28:49.129 --> 00:28:49.139
and now this bitmap shouldn't
 

00:28:49.139 --> 00:28:50.750
and now this bitmap shouldn't
necessarily be too large

00:28:50.750 --> 00:28:50.760
necessarily be too large
 

00:28:50.760 --> 00:28:52.610
necessarily be too large
right this is being sent across

00:28:52.610 --> 00:28:52.620
right this is being sent across
 

00:28:52.620 --> 00:28:55.190
right this is being sent across
processes and to the Android system so

00:28:55.190 --> 00:28:55.200
processes and to the Android system so
 

00:28:55.200 --> 00:28:59.360
processes and to the Android system so
no 4000 by 4,000 pixels bitmaps please

00:28:59.360 --> 00:28:59.370
no 4000 by 4,000 pixels bitmaps please
 

00:28:59.370 --> 00:29:02.210
no 4000 by 4,000 pixels bitmaps please
but it is the only way to get lockscreen

00:29:02.210 --> 00:29:02.220
but it is the only way to get lockscreen
 

00:29:02.220 --> 00:29:04.759
but it is the only way to get lockscreen
backgrounds working so probably should

00:29:04.759 --> 00:29:04.769
backgrounds working so probably should
 

00:29:04.769 --> 00:29:07.519
backgrounds working so probably should
include a smaller size around the like

00:29:07.519 --> 00:29:07.529
include a smaller size around the like
 

00:29:07.529 --> 00:29:11.450
include a smaller size around the like
640 by 640 size somewhere in that kind

00:29:11.450 --> 00:29:11.460
640 by 640 size somewhere in that kind
 

00:29:11.460 --> 00:29:14.870
640 by 640 size somewhere in that kind
of range or lower just to get something

00:29:14.870 --> 00:29:14.880
of range or lower just to get something
 

00:29:14.880 --> 00:29:16.909
of range or lower just to get something
on there we are looking at future

00:29:16.909 --> 00:29:16.919
on there we are looking at future
 

00:29:16.919 --> 00:29:18.799
on there we are looking at future
versions of Android wear the lockscreen

00:29:18.799 --> 00:29:18.809
versions of Android wear the lockscreen
 

00:29:18.809 --> 00:29:20.450
versions of Android wear the lockscreen
stuff won't actually need a bitmap

00:29:20.450 --> 00:29:20.460
stuff won't actually need a bitmap
 

00:29:20.460 --> 00:29:22.310
stuff won't actually need a bitmap
itself but you'll be able to use the

00:29:22.310 --> 00:29:22.320
itself but you'll be able to use the
 

00:29:22.320 --> 00:29:25.460
itself but you'll be able to use the
other part which is a URI so these allow

00:29:25.460 --> 00:29:25.470
other part which is a URI so these allow
 

00:29:25.470 --> 00:29:29.060
other part which is a URI so these allow
you to give a content URI to the app so

00:29:29.060 --> 00:29:29.070
you to give a content URI to the app so
 

00:29:29.070 --> 00:29:30.740
you to give a content URI to the app so
that instead of having to keep that

00:29:30.740 --> 00:29:30.750
that instead of having to keep that
 

00:29:30.750 --> 00:29:33.590
that instead of having to keep that
bitmap and send it around through across

00:29:33.590 --> 00:29:33.600
bitmap and send it around through across
 

00:29:33.600 --> 00:29:35.930
bitmap and send it around through across
multiple processes you can just send a

00:29:35.930 --> 00:29:35.940
multiple processes you can just send a
 

00:29:35.940 --> 00:29:38.899
multiple processes you can just send a
simple URI and then this is what things

00:29:38.899 --> 00:29:38.909
simple URI and then this is what things
 

00:29:38.909 --> 00:29:41.330
simple URI and then this is what things
like Android auto already use to get

00:29:41.330 --> 00:29:41.340
like Android auto already use to get
 

00:29:41.340 --> 00:29:44.210
like Android auto already use to get
really high quality artwork onto those

00:29:44.210 --> 00:29:44.220
really high quality artwork onto those
 

00:29:44.220 --> 00:29:47.750
really high quality artwork onto those
devices

00:29:47.750 --> 00:29:47.760
 

00:29:47.760 --> 00:29:52.070
now while there's that's really nice for

00:29:52.070 --> 00:29:52.080
now while there's that's really nice for
 

00:29:52.080 --> 00:29:54.080
now while there's that's really nice for
lock screen background art we don't

00:29:54.080 --> 00:29:54.090
lock screen background art we don't
 

00:29:54.090 --> 00:29:55.880
lock screen background art we don't
actually lock screen controls on

00:29:55.880 --> 00:29:55.890
actually lock screen controls on
 

00:29:55.890 --> 00:29:58.700
actually lock screen controls on
lollipop anymore that all comes from

00:29:58.700 --> 00:29:58.710
lollipop anymore that all comes from
 

00:29:58.710 --> 00:30:01.850
lollipop anymore that all comes from
media notifications our notifications

00:30:01.850 --> 00:30:01.860
media notifications our notifications
 

00:30:01.860 --> 00:30:04.370
media notifications our notifications
are the new hotness guys right and it

00:30:04.370 --> 00:30:04.380
are the new hotness guys right and it
 

00:30:04.380 --> 00:30:06.020
are the new hotness guys right and it
turns out that you probably should have

00:30:06.020 --> 00:30:06.030
turns out that you probably should have
 

00:30:06.030 --> 00:30:07.970
turns out that you probably should have
had a notification all along because

00:30:07.970 --> 00:30:07.980
had a notification all along because
 

00:30:07.980 --> 00:30:10.100
had a notification all along because
they're kind of really useful now

00:30:10.100 --> 00:30:10.110
they're kind of really useful now
 

00:30:10.110 --> 00:30:12.020
they're kind of really useful now
they've come a long way since the very

00:30:12.020 --> 00:30:12.030
they've come a long way since the very
 

00:30:12.030 --> 00:30:14.480
they've come a long way since the very
beginning you could imagine like back in

00:30:14.480 --> 00:30:14.490
beginning you could imagine like back in
 

00:30:14.490 --> 00:30:17.780
beginning you could imagine like back in
the 2.1 era you couldn't actually have

00:30:17.780 --> 00:30:17.790
the 2.1 era you couldn't actually have
 

00:30:17.790 --> 00:30:20.990
the 2.1 era you couldn't actually have
buttons in your notification they would

00:30:20.990 --> 00:30:21.000
buttons in your notification they would
 

00:30:21.000 --> 00:30:23.210
buttons in your notification they would
take that so for granted now that you

00:30:23.210 --> 00:30:23.220
take that so for granted now that you
 

00:30:23.220 --> 00:30:24.670
take that so for granted now that you
have to actually have multiple actions

00:30:24.670 --> 00:30:24.680
have to actually have multiple actions
 

00:30:24.680 --> 00:30:27.380
have to actually have multiple actions
but that only was actually added in an

00:30:27.380 --> 00:30:27.390
but that only was actually added in an
 

00:30:27.390 --> 00:30:31.190
but that only was actually added in an
API 14 so there's a lot of kind of

00:30:31.190 --> 00:30:31.200
API 14 so there's a lot of kind of
 

00:30:31.200 --> 00:30:33.320
API 14 so there's a lot of kind of
compactness to this where you're like

00:30:33.320 --> 00:30:33.330
compactness to this where you're like
 

00:30:33.330 --> 00:30:35.420
compactness to this where you're like
alright which versions or what things

00:30:35.420 --> 00:30:35.430
alright which versions or what things
 

00:30:35.430 --> 00:30:38.480
alright which versions or what things
for media buttons and that type of thing

00:30:38.480 --> 00:30:38.490
for media buttons and that type of thing
 

00:30:38.490 --> 00:30:40.400
for media buttons and that type of thing
but you don't have to do any of that

00:30:40.400 --> 00:30:40.410
but you don't have to do any of that
 

00:30:40.410 --> 00:30:43.670
but you don't have to do any of that
because notification compat media style

00:30:43.670 --> 00:30:43.680
because notification compat media style
 

00:30:43.680 --> 00:30:47.060
because notification compat media style
does it all for you now it's still more

00:30:47.060 --> 00:30:47.070
does it all for you now it's still more
 

00:30:47.070 --> 00:30:48.460
does it all for you now it's still more
boilerplate than I'd like

00:30:48.460 --> 00:30:48.470
boilerplate than I'd like
 

00:30:48.470 --> 00:30:51.200
boilerplate than I'd like
so I've created a media helper class

00:30:51.200 --> 00:30:51.210
so I've created a media helper class
 

00:30:51.210 --> 00:30:55.100
so I've created a media helper class
that I personally like quite a bit which

00:30:55.100 --> 00:30:55.110
that I personally like quite a bit which
 

00:30:55.110 --> 00:30:58.640
that I personally like quite a bit which
takes a context and your media session

00:30:58.640 --> 00:30:58.650
takes a context and your media session
 

00:30:58.650 --> 00:31:01.280
takes a context and your media session
and then builds out all of the things

00:31:01.280 --> 00:31:01.290
and then builds out all of the things
 

00:31:01.290 --> 00:31:04.310
and then builds out all of the things
that you need from a notification I'm

00:31:04.310 --> 00:31:04.320
that you need from a notification I'm
 

00:31:04.320 --> 00:31:05.660
that you need from a notification I'm
gonna post this link in these spaces

00:31:05.660 --> 00:31:05.670
gonna post this link in these spaces
 

00:31:05.670 --> 00:31:08.240
gonna post this link in these spaces
after the talk here so keep an eye on

00:31:08.240 --> 00:31:08.250
after the talk here so keep an eye on
 

00:31:08.250 --> 00:31:11.930
after the talk here so keep an eye on
that if you want the link itself but it

00:31:11.930 --> 00:31:11.940
that if you want the link itself but it
 

00:31:11.940 --> 00:31:13.730
that if you want the link itself but it
actually is using the get description

00:31:13.730 --> 00:31:13.740
actually is using the get description
 

00:31:13.740 --> 00:31:16.160
actually is using the get description
from the media metadata and this is

00:31:16.160 --> 00:31:16.170
from the media metadata and this is
 

00:31:16.170 --> 00:31:17.960
from the media metadata and this is
actually the exact same thing that

00:31:17.960 --> 00:31:17.970
actually the exact same thing that
 

00:31:17.970 --> 00:31:20.270
actually the exact same thing that
Android wear uses to figure out what

00:31:20.270 --> 00:31:20.280
Android wear uses to figure out what
 

00:31:20.280 --> 00:31:23.390
Android wear uses to figure out what
text to display on your device there so

00:31:23.390 --> 00:31:23.400
text to display on your device there so
 

00:31:23.400 --> 00:31:25.280
text to display on your device there so
it's a really nice way of staying in

00:31:25.280 --> 00:31:25.290
it's a really nice way of staying in
 

00:31:25.290 --> 00:31:30.200
it's a really nice way of staying in
sync and keeps the 27 ish fields that

00:31:30.200 --> 00:31:30.210
sync and keeps the 27 ish fields that
 

00:31:30.210 --> 00:31:32.180
sync and keeps the 27 ish fields that
are in media metadata down to a much

00:31:32.180 --> 00:31:32.190
are in media metadata down to a much
 

00:31:32.190 --> 00:31:34.670
are in media metadata down to a much
more manageable number which you can

00:31:34.670 --> 00:31:34.680
more manageable number which you can
 

00:31:34.680 --> 00:31:38.330
more manageable number which you can
then use for your notification and then

00:31:38.330 --> 00:31:38.340
then use for your notification and then
 

00:31:38.340 --> 00:31:39.620
then use for your notification and then
of course the other part that's

00:31:39.620 --> 00:31:39.630
of course the other part that's
 

00:31:39.630 --> 00:31:42.080
of course the other part that's
sometimes really tricky for

00:31:42.080 --> 00:31:42.090
sometimes really tricky for
 

00:31:42.090 --> 00:31:44.000
sometimes really tricky for
notifications is actually getting the

00:31:44.000 --> 00:31:44.010
notifications is actually getting the
 

00:31:44.010 --> 00:31:45.980
notifications is actually getting the
pending intents for the play/pause

00:31:45.980 --> 00:31:45.990
pending intents for the play/pause
 

00:31:45.990 --> 00:31:49.160
pending intents for the play/pause
button or the next button and we still

00:31:49.160 --> 00:31:49.170
button or the next button and we still
 

00:31:49.170 --> 00:31:51.650
button or the next button and we still
want to reuse all of the things we've

00:31:51.650 --> 00:31:51.660
want to reuse all of the things we've
 

00:31:51.660 --> 00:31:54.170
want to reuse all of the things we've
already built right we don't want yet

00:31:54.170 --> 00:31:54.180
already built right we don't want yet
 

00:31:54.180 --> 00:31:55.970
already built right we don't want yet
another custom path

00:31:55.970 --> 00:31:55.980
another custom path
 

00:31:55.980 --> 00:31:59.510
another custom path
of pending intents to your callbacks so

00:31:59.510 --> 00:31:59.520
of pending intents to your callbacks so
 

00:31:59.520 --> 00:32:01.310
of pending intents to your callbacks so
in this case we can actually build these

00:32:01.310 --> 00:32:01.320
in this case we can actually build these
 

00:32:01.320 --> 00:32:04.909
in this case we can actually build these
intense pretty simply just by using this

00:32:04.909 --> 00:32:04.919
intense pretty simply just by using this
 

00:32:04.919 --> 00:32:07.159
intense pretty simply just by using this
get action intent method which is

00:32:07.159 --> 00:32:07.169
get action intent method which is
 

00:32:07.169 --> 00:32:10.190
get action intent method which is
actually going to reuse our Media button

00:32:10.190 --> 00:32:10.200
actually going to reuse our Media button
 

00:32:10.200 --> 00:32:13.430
actually going to reuse our Media button
receiver we include it in our app we're

00:32:13.430 --> 00:32:13.440
receiver we include it in our app we're
 

00:32:13.440 --> 00:32:16.130
receiver we include it in our app we're
gonna reuse that and kind of fake it so

00:32:16.130 --> 00:32:16.140
gonna reuse that and kind of fake it so
 

00:32:16.140 --> 00:32:18.590
gonna reuse that and kind of fake it so
that it's like a media button came in

00:32:18.590 --> 00:32:18.600
that it's like a media button came in
 

00:32:18.600 --> 00:32:22.159
that it's like a media button came in
but it's in fact a notification so this

00:32:22.159 --> 00:32:22.169
but it's in fact a notification so this
 

00:32:22.169 --> 00:32:23.659
but it's in fact a notification so this
way we actually get all the stuff

00:32:23.659 --> 00:32:23.669
way we actually get all the stuff
 

00:32:23.669 --> 00:32:27.110
way we actually get all the stuff
already there so we create our builder

00:32:27.110 --> 00:32:27.120
already there so we create our builder
 

00:32:27.120 --> 00:32:31.100
already there so we create our builder
using the media style helper and then we

00:32:31.100 --> 00:32:31.110
using the media style helper and then we
 

00:32:31.110 --> 00:32:32.990
using the media style helper and then we
you set a small icon it's kind of need

00:32:32.990 --> 00:32:33.000
you set a small icon it's kind of need
 

00:32:33.000 --> 00:32:35.810
you set a small icon it's kind of need
those four notifications and then we

00:32:35.810 --> 00:32:35.820
those four notifications and then we
 

00:32:35.820 --> 00:32:40.070
those four notifications and then we
need to call set color now much review

00:32:40.070 --> 00:32:40.080
need to call set color now much review
 

00:32:40.080 --> 00:32:43.190
need to call set color now much review
notice like the play music and stuff did

00:32:43.190 --> 00:32:43.200
notice like the play music and stuff did
 

00:32:43.200 --> 00:32:45.860
notice like the play music and stuff did
not actually use a bright orange for

00:32:45.860 --> 00:32:45.870
not actually use a bright orange for
 

00:32:45.870 --> 00:32:49.280
not actually use a bright orange for
their color because it turns out that on

00:32:49.280 --> 00:32:49.290
their color because it turns out that on
 

00:32:49.290 --> 00:32:52.880
their color because it turns out that on
the lollipop through marshmallow devices

00:32:52.880 --> 00:32:52.890
the lollipop through marshmallow devices
 

00:32:52.890 --> 00:32:55.370
the lollipop through marshmallow devices
this was the full background for your

00:32:55.370 --> 00:32:55.380
this was the full background for your
 

00:32:55.380 --> 00:32:58.220
this was the full background for your
notification so like the giant bright

00:32:58.220 --> 00:32:58.230
notification so like the giant bright
 

00:32:58.230 --> 00:33:00.289
notification so like the giant bright
pink that you use for your branding for

00:33:00.289 --> 00:33:00.299
pink that you use for your branding for
 

00:33:00.299 --> 00:33:02.720
pink that you use for your branding for
your app probably not the best color to

00:33:02.720 --> 00:33:02.730
your app probably not the best color to
 

00:33:02.730 --> 00:33:05.659
your app probably not the best color to
use here you'll note in Android n it's

00:33:05.659 --> 00:33:05.669
use here you'll note in Android n it's
 

00:33:05.669 --> 00:33:08.000
use here you'll note in Android n it's
actually much more aligned with all the

00:33:08.000 --> 00:33:08.010
actually much more aligned with all the
 

00:33:08.010 --> 00:33:09.919
actually much more aligned with all the
other styles where it's just used as an

00:33:09.919 --> 00:33:09.929
other styles where it's just used as an
 

00:33:09.929 --> 00:33:12.860
other styles where it's just used as an
accent color not actually as the giant

00:33:12.860 --> 00:33:12.870
accent color not actually as the giant
 

00:33:12.870 --> 00:33:14.960
accent color not actually as the giant
garish background for the notification

00:33:14.960 --> 00:33:14.970
garish background for the notification
 

00:33:14.970 --> 00:33:18.169
garish background for the notification
so baby steps but keep in mind for color

00:33:18.169 --> 00:33:18.179
so baby steps but keep in mind for color
 

00:33:18.179 --> 00:33:19.460
so baby steps but keep in mind for color
this might actually be something you

00:33:19.460 --> 00:33:19.470
this might actually be something you
 

00:33:19.470 --> 00:33:22.159
this might actually be something you
want to check your version API version

00:33:22.159 --> 00:33:22.169
want to check your version API version
 

00:33:22.169 --> 00:33:25.190
want to check your version API version
on and it wouldn't be a very useful

00:33:25.190 --> 00:33:25.200
on and it wouldn't be a very useful
 

00:33:25.200 --> 00:33:27.260
on and it wouldn't be a very useful
media notification that didn't have any

00:33:27.260 --> 00:33:27.270
media notification that didn't have any
 

00:33:27.270 --> 00:33:29.659
media notification that didn't have any
actions so in this case we're adding a

00:33:29.659 --> 00:33:29.669
actions so in this case we're adding a
 

00:33:29.669 --> 00:33:32.000
actions so in this case we're adding a
pause button to our notification and

00:33:32.000 --> 00:33:32.010
pause button to our notification and
 

00:33:32.010 --> 00:33:34.400
pause button to our notification and
using get action intent in this case

00:33:34.400 --> 00:33:34.410
using get action intent in this case
 

00:33:34.410 --> 00:33:37.669
using get action intent in this case
just passing in the play/pause key event

00:33:37.669 --> 00:33:37.679
just passing in the play/pause key event
 

00:33:37.679 --> 00:33:40.190
just passing in the play/pause key event
just to say like hey this is a play

00:33:40.190 --> 00:33:40.200
just to say like hey this is a play
 

00:33:40.200 --> 00:33:41.960
just to say like hey this is a play
pause button and now this will trigger

00:33:41.960 --> 00:33:41.970
pause button and now this will trigger
 

00:33:41.970 --> 00:33:44.630
pause button and now this will trigger
all of the same logic as if someone had

00:33:44.630 --> 00:33:44.640
all of the same logic as if someone had
 

00:33:44.640 --> 00:33:46.220
all of the same logic as if someone had
hit the play pause button on their

00:33:46.220 --> 00:33:46.230
hit the play pause button on their
 

00:33:46.230 --> 00:33:48.409
hit the play pause button on their
headset so they don't actually need to

00:33:48.409 --> 00:33:48.419
headset so they don't actually need to
 

00:33:48.419 --> 00:33:51.110
headset so they don't actually need to
build any more code to support these

00:33:51.110 --> 00:33:51.120
build any more code to support these
 

00:33:51.120 --> 00:33:54.620
build any more code to support these
actions and then of course we want to

00:33:54.620 --> 00:33:54.630
actions and then of course we want to
 

00:33:54.630 --> 00:33:57.620
actions and then of course we want to
add our actual media style itself so

00:33:57.620 --> 00:33:57.630
add our actual media style itself so
 

00:33:57.630 --> 00:33:59.210
add our actual media style itself so
media style has this great property

00:33:59.210 --> 00:33:59.220
media style has this great property
 

00:33:59.220 --> 00:34:02.990
media style has this great property
where it supports both an expanded style

00:34:02.990 --> 00:34:03.000
where it supports both an expanded style
 

00:34:03.000 --> 00:34:05.600
where it supports both an expanded style
write the two line style whereas larger

00:34:05.600 --> 00:34:05.610
write the two line style whereas larger
 

00:34:05.610 --> 00:34:09.290
write the two line style whereas larger
album art and up to five actions as well

00:34:09.290 --> 00:34:09.300
album art and up to five actions as well
 

00:34:09.300 --> 00:34:10.109
album art and up to five actions as well
as it compact

00:34:10.109 --> 00:34:10.119
as it compact
 

00:34:10.119 --> 00:34:12.239
as it compact
to view right where you've got only a

00:34:12.239 --> 00:34:12.249
to view right where you've got only a
 

00:34:12.249 --> 00:34:15.299
to view right where you've got only a
max of two actions on that compact view

00:34:15.299 --> 00:34:15.309
max of two actions on that compact view
 

00:34:15.309 --> 00:34:18.599
max of two actions on that compact view
but it still works and so you'll need to

00:34:18.599 --> 00:34:18.609
but it still works and so you'll need to
 

00:34:18.609 --> 00:34:21.359
but it still works and so you'll need to
actually tell which actions you want to

00:34:21.359 --> 00:34:21.369
actually tell which actions you want to
 

00:34:21.369 --> 00:34:23.909
actually tell which actions you want to
support in that compact view you can

00:34:23.909 --> 00:34:23.919
support in that compact view you can
 

00:34:23.919 --> 00:34:26.159
support in that compact view you can
imagine if you had you know next track

00:34:26.159 --> 00:34:26.169
imagine if you had you know next track
 

00:34:26.169 --> 00:34:28.950
imagine if you had you know next track
and then play pause and then previous

00:34:28.950 --> 00:34:28.960
and then play pause and then previous
 

00:34:28.960 --> 00:34:31.649
and then play pause and then previous
track right you wouldn't probably want

00:34:31.649 --> 00:34:31.659
track right you wouldn't probably want
 

00:34:31.659 --> 00:34:34.019
track right you wouldn't probably want
to support the play pause action as the

00:34:34.019 --> 00:34:34.029
to support the play pause action as the
 

00:34:34.029 --> 00:34:35.759
to support the play pause action as the
highest most action because that's

00:34:35.759 --> 00:34:35.769
highest most action because that's
 

00:34:35.769 --> 00:34:37.289
highest most action because that's
probably the one the users will want to

00:34:37.289 --> 00:34:37.299
probably the one the users will want to
 

00:34:37.299 --> 00:34:39.989
probably the one the users will want to
use the most it's a zero based based on

00:34:39.989 --> 00:34:39.999
use the most it's a zero based based on
 

00:34:39.999 --> 00:34:44.430
use the most it's a zero based based on
the order you called add action the

00:34:44.430 --> 00:34:44.440
the order you called add action the
 

00:34:44.440 --> 00:34:46.859
the order you called add action the
other thing we really really important

00:34:46.859 --> 00:34:46.869
other thing we really really important
 

00:34:46.869 --> 00:34:48.509
other thing we really really important
don't don't forget it again this is

00:34:48.509 --> 00:34:48.519
don't don't forget it again this is
 

00:34:48.519 --> 00:34:50.129
don't don't forget it again this is
another like this will break you if you

00:34:50.129 --> 00:34:50.139
another like this will break you if you
 

00:34:50.139 --> 00:34:53.149
another like this will break you if you
forget it is calling set media session

00:34:53.149 --> 00:34:53.159
forget it is calling set media session
 

00:34:53.159 --> 00:34:57.569
forget it is calling set media session
now this adds our session token that we

00:34:57.569 --> 00:34:57.579
now this adds our session token that we
 

00:34:57.579 --> 00:34:59.519
now this adds our session token that we
talked about before to the notification

00:34:59.519 --> 00:34:59.529
talked about before to the notification
 

00:34:59.529 --> 00:35:02.279
talked about before to the notification
so this is what things like Android wear

00:35:02.279 --> 00:35:02.289
so this is what things like Android wear
 

00:35:02.289 --> 00:35:05.519
so this is what things like Android wear
are actually using to get a reference to

00:35:05.519 --> 00:35:05.529
are actually using to get a reference to
 

00:35:05.529 --> 00:35:08.700
are actually using to get a reference to
your token so if you forget this all of

00:35:08.700 --> 00:35:08.710
your token so if you forget this all of
 

00:35:08.710 --> 00:35:10.680
your token so if you forget this all of
a sudden you'll get things like well the

00:35:10.680 --> 00:35:10.690
a sudden you'll get things like well the
 

00:35:10.690 --> 00:35:12.930
a sudden you'll get things like well the
notification shows up on where right

00:35:12.930 --> 00:35:12.940
notification shows up on where right
 

00:35:12.940 --> 00:35:14.309
notification shows up on where right
because we added the metadata and all

00:35:14.309 --> 00:35:14.319
because we added the metadata and all
 

00:35:14.319 --> 00:35:16.410
because we added the metadata and all
that but then you hit the button and it

00:35:16.410 --> 00:35:16.420
that but then you hit the button and it
 

00:35:16.420 --> 00:35:18.900
that but then you hit the button and it
doesn't actually play pause which is

00:35:18.900 --> 00:35:18.910
doesn't actually play pause which is
 

00:35:18.910 --> 00:35:20.370
doesn't actually play pause which is
probably the most frustrating thing in

00:35:20.370 --> 00:35:20.380
probably the most frustrating thing in
 

00:35:20.380 --> 00:35:21.989
probably the most frustrating thing in
the world so don't don't forget this

00:35:21.989 --> 00:35:21.999
the world so don't don't forget this
 

00:35:21.999 --> 00:35:26.370
the world so don't don't forget this
line again so at this point we actually

00:35:26.370 --> 00:35:26.380
line again so at this point we actually
 

00:35:26.380 --> 00:35:28.079
line again so at this point we actually
have what I would call the Minimum

00:35:28.079 --> 00:35:28.089
have what I would call the Minimum
 

00:35:28.089 --> 00:35:30.660
have what I would call the Minimum
Viable Product this is kind of what I

00:35:30.660 --> 00:35:30.670
Viable Product this is kind of what I
 

00:35:30.670 --> 00:35:32.609
Viable Product this is kind of what I
would consider something that I won't

00:35:32.609 --> 00:35:32.619
would consider something that I won't
 

00:35:32.619 --> 00:35:35.489
would consider something that I won't
yell yell at you for so you actually do

00:35:35.489 --> 00:35:35.499
yell yell at you for so you actually do
 

00:35:35.499 --> 00:35:37.650
yell yell at you for so you actually do
all these things I'll be reasonably

00:35:37.650 --> 00:35:37.660
all these things I'll be reasonably
 

00:35:37.660 --> 00:35:41.370
all these things I'll be reasonably
happy and I would say this applies to

00:35:41.370 --> 00:35:41.380
happy and I would say this applies to
 

00:35:41.380 --> 00:35:44.279
happy and I would say this applies to
all apps whether your video or audio

00:35:44.279 --> 00:35:44.289
all apps whether your video or audio
 

00:35:44.289 --> 00:35:46.349
all apps whether your video or audio
these are things that you're going to

00:35:46.349 --> 00:35:46.359
these are things that you're going to
 

00:35:46.359 --> 00:35:49.920
these are things that you're going to
need to do but of course we're much

00:35:49.920 --> 00:35:49.930
need to do but of course we're much
 

00:35:49.930 --> 00:35:52.739
need to do but of course we're much
farther along and we don't even know how

00:35:52.739 --> 00:35:52.749
farther along and we don't even know how
 

00:35:52.749 --> 00:35:56.970
farther along and we don't even know how
to build a pause button for our UI so we

00:35:56.970 --> 00:35:56.980
to build a pause button for our UI so we
 

00:35:56.980 --> 00:35:59.759
to build a pause button for our UI so we
have to build a UI it's kind of a big

00:35:59.759 --> 00:35:59.769
have to build a UI it's kind of a big
 

00:35:59.769 --> 00:36:02.309
have to build a UI it's kind of a big
deal for apps right and we mentioned

00:36:02.309 --> 00:36:02.319
deal for apps right and we mentioned
 

00:36:02.319 --> 00:36:05.099
deal for apps right and we mentioned
media controller compatible for this

00:36:05.099 --> 00:36:05.109
media controller compatible for this
 

00:36:05.109 --> 00:36:07.890
media controller compatible for this
because it has access to all of your

00:36:07.890 --> 00:36:07.900
because it has access to all of your
 

00:36:07.900 --> 00:36:12.089
because it has access to all of your
metadata and everything else so we can't

00:36:12.089 --> 00:36:12.099
metadata and everything else so we can't
 

00:36:12.099 --> 00:36:13.829
metadata and everything else so we can't
actually create a media controller

00:36:13.829 --> 00:36:13.839
actually create a media controller
 

00:36:13.839 --> 00:36:16.140
actually create a media controller
compat either from the token or from the

00:36:16.140 --> 00:36:16.150
compat either from the token or from the
 

00:36:16.150 --> 00:36:18.660
compat either from the token or from the
session itself and fragment activity

00:36:18.660 --> 00:36:18.670
session itself and fragment activity
 

00:36:18.670 --> 00:36:20.309
session itself and fragment activity
actually has some really nice methods

00:36:20.309 --> 00:36:20.319
actually has some really nice methods
 

00:36:20.319 --> 00:36:22.870
actually has some really nice methods
and make it easy to

00:36:22.870 --> 00:36:22.880
and make it easy to
 

00:36:22.880 --> 00:36:25.809
and make it easy to
and then get the media controller at

00:36:25.809 --> 00:36:25.819
and then get the media controller at
 

00:36:25.819 --> 00:36:27.789
and then get the media controller at
some point so here we can use just

00:36:27.789 --> 00:36:27.799
some point so here we can use just
 

00:36:27.799 --> 00:36:30.549
some point so here we can use just
transport controls and say pause and

00:36:30.549 --> 00:36:30.559
transport controls and say pause and
 

00:36:30.559 --> 00:36:32.799
transport controls and say pause and
we're using lambdas here so it looks a

00:36:32.799 --> 00:36:32.809
we're using lambdas here so it looks a
 

00:36:32.809 --> 00:36:34.839
we're using lambdas here so it looks a
little weird but it's lot shorter on

00:36:34.839 --> 00:36:34.849
little weird but it's lot shorter on
 

00:36:34.849 --> 00:36:38.200
little weird but it's lot shorter on
flights which is awesome but the

00:36:38.200 --> 00:36:38.210
flights which is awesome but the
 

00:36:38.210 --> 00:36:39.789
flights which is awesome but the
transport controls is basically the

00:36:39.789 --> 00:36:39.799
transport controls is basically the
 

00:36:39.799 --> 00:36:42.400
transport controls is basically the
one-to-one with your callbacks so you

00:36:42.400 --> 00:36:42.410
one-to-one with your callbacks so you
 

00:36:42.410 --> 00:36:45.130
one-to-one with your callbacks so you
can imagine there's a play/pause and a

00:36:45.130 --> 00:36:45.140
can imagine there's a play/pause and a
 

00:36:45.140 --> 00:36:48.430
can imagine there's a play/pause and a
skip to next which then triggers on play

00:36:48.430 --> 00:36:48.440
skip to next which then triggers on play
 

00:36:48.440 --> 00:36:52.150
skip to next which then triggers on play
on pause on skip to next alright want

00:36:52.150 --> 00:36:52.160
on pause on skip to next alright want
 

00:36:52.160 --> 00:36:56.049
on pause on skip to next alright want
one but of course just having a pause

00:36:56.049 --> 00:36:56.059
one but of course just having a pause
 

00:36:56.059 --> 00:36:57.849
one but of course just having a pause
button doesn't actually do a whole lot

00:36:57.849 --> 00:36:57.859
button doesn't actually do a whole lot
 

00:36:57.859 --> 00:36:59.470
button doesn't actually do a whole lot
for your UI you want to keep these

00:36:59.470 --> 00:36:59.480
for your UI you want to keep these
 

00:36:59.480 --> 00:37:00.549
for your UI you want to keep these
things in sync

00:37:00.549 --> 00:37:00.559
things in sync
 

00:37:00.559 --> 00:37:03.190
things in sync
right so you can imagine in the old days

00:37:03.190 --> 00:37:03.200
right so you can imagine in the old days
 

00:37:03.200 --> 00:37:06.460
right so you can imagine in the old days
where you had a service that was doing

00:37:06.460 --> 00:37:06.470
where you had a service that was doing
 

00:37:06.470 --> 00:37:08.789
where you had a service that was doing
things you had to create some custom

00:37:08.789 --> 00:37:08.799
things you had to create some custom
 

00:37:08.799 --> 00:37:10.900
things you had to create some custom
situation to actually pass information

00:37:10.900 --> 00:37:10.910
situation to actually pass information
 

00:37:10.910 --> 00:37:13.210
situation to actually pass information
back and forth now you don't need to do

00:37:13.210 --> 00:37:13.220
back and forth now you don't need to do
 

00:37:13.220 --> 00:37:15.249
back and forth now you don't need to do
that anymore because media control or

00:37:15.249 --> 00:37:15.259
that anymore because media control or
 

00:37:15.259 --> 00:37:17.319
that anymore because media control or
compat gives you all of the things you'd

00:37:17.319 --> 00:37:17.329
compat gives you all of the things you'd
 

00:37:17.329 --> 00:37:19.900
compat gives you all of the things you'd
need so get metadata to get the metadata

00:37:19.900 --> 00:37:19.910
need so get metadata to get the metadata
 

00:37:19.910 --> 00:37:21.999
need so get metadata to get the metadata
get playback state to get the playback

00:37:21.999 --> 00:37:22.009
get playback state to get the playback
 

00:37:22.009 --> 00:37:23.920
get playback state to get the playback
state but all of these things are

00:37:23.920 --> 00:37:23.930
state but all of these things are
 

00:37:23.930 --> 00:37:27.279
state but all of these things are
one-shot so you probably also want to

00:37:27.279 --> 00:37:27.289
one-shot so you probably also want to
 

00:37:27.289 --> 00:37:29.920
one-shot so you probably also want to
use a callback so here you get a on

00:37:29.920 --> 00:37:29.930
use a callback so here you get a on
 

00:37:29.930 --> 00:37:32.259
use a callback so here you get a on
metadata changed on playback state

00:37:32.259 --> 00:37:32.269
metadata changed on playback state
 

00:37:32.269 --> 00:37:34.839
metadata changed on playback state
changed and this actually allows you to

00:37:34.839 --> 00:37:34.849
changed and this actually allows you to
 

00:37:34.849 --> 00:37:38.289
changed and this actually allows you to
stay perfectly in sync even across

00:37:38.289 --> 00:37:38.299
stay perfectly in sync even across
 

00:37:38.299 --> 00:37:42.039
stay perfectly in sync even across
processes so you'll actually be sent the

00:37:42.039 --> 00:37:42.049
processes so you'll actually be sent the
 

00:37:42.049 --> 00:37:44.259
processes so you'll actually be sent the
information immediately when you call

00:37:44.259 --> 00:37:44.269
information immediately when you call
 

00:37:44.269 --> 00:37:46.660
information immediately when you call
set state or when you call set metadata

00:37:46.660 --> 00:37:46.670
set state or when you call set metadata
 

00:37:46.670 --> 00:37:50.230
set state or when you call set metadata
it comes across on the other side now

00:37:50.230 --> 00:37:50.240
it comes across on the other side now
 

00:37:50.240 --> 00:37:51.849
it comes across on the other side now
all what I've talked about has been

00:37:51.849 --> 00:37:51.859
all what I've talked about has been
 

00:37:51.859 --> 00:37:55.089
all what I've talked about has been
great for video and audio but if we're

00:37:55.089 --> 00:37:55.099
great for video and audio but if we're
 

00:37:55.099 --> 00:37:56.890
great for video and audio but if we're
doing background playback with a service

00:37:56.890 --> 00:37:56.900
doing background playback with a service
 

00:37:56.900 --> 00:38:00.160
doing background playback with a service
that adds some extra complexity because

00:38:00.160 --> 00:38:00.170
that adds some extra complexity because
 

00:38:00.170 --> 00:38:02.049
that adds some extra complexity because
we can't just we don't have our media

00:38:02.049 --> 00:38:02.059
we can't just we don't have our media
 

00:38:02.059 --> 00:38:05.799
we can't just we don't have our media
session token' in our UI so we need to

00:38:05.799 --> 00:38:05.809
session token' in our UI so we need to
 

00:38:05.809 --> 00:38:07.599
session token' in our UI so we need to
do a little bit more and we still need

00:38:07.599 --> 00:38:07.609
do a little bit more and we still need
 

00:38:07.609 --> 00:38:10.569
do a little bit more and we still need
that token oh ok so we built a class for

00:38:10.569 --> 00:38:10.579
that token oh ok so we built a class for
 

00:38:10.579 --> 00:38:12.700
that token oh ok so we built a class for
that to actually Media Browser service

00:38:12.700 --> 00:38:12.710
that to actually Media Browser service
 

00:38:12.710 --> 00:38:15.190
that to actually Media Browser service
compat does a lot of this stuff for you

00:38:15.190 --> 00:38:15.200
compat does a lot of this stuff for you
 

00:38:15.200 --> 00:38:18.249
compat does a lot of this stuff for you
besides the actual browsing part which

00:38:18.249 --> 00:38:18.259
besides the actual browsing part which
 

00:38:18.259 --> 00:38:19.809
besides the actual browsing part which
if you go to any of the Android auto

00:38:19.809 --> 00:38:19.819
if you go to any of the Android auto
 

00:38:19.819 --> 00:38:22.809
if you go to any of the Android auto
talks will be like the key for them we

00:38:22.809 --> 00:38:22.819
talks will be like the key for them we
 

00:38:22.819 --> 00:38:25.720
talks will be like the key for them we
can actually do this in our own app so

00:38:25.720 --> 00:38:25.730
can actually do this in our own app so
 

00:38:25.730 --> 00:38:27.700
can actually do this in our own app so
to actually build a Media Browser

00:38:27.700 --> 00:38:27.710
to actually build a Media Browser
 

00:38:27.710 --> 00:38:30.130
to actually build a Media Browser
service compact it's pretty

00:38:30.130 --> 00:38:30.140
service compact it's pretty
 

00:38:30.140 --> 00:38:31.809
service compact it's pretty
straightforward you have an intent

00:38:31.809 --> 00:38:31.819
straightforward you have an intent
 

00:38:31.819 --> 00:38:34.690
straightforward you have an intent
action to Media Browser service the

00:38:34.690 --> 00:38:34.700
action to Media Browser service the
 

00:38:34.700 --> 00:38:36.430
action to Media Browser service the
what calls you out as a video browser

00:38:36.430 --> 00:38:36.440
what calls you out as a video browser
 

00:38:36.440 --> 00:38:39.190
what calls you out as a video browser
and then you extend the class and then

00:38:39.190 --> 00:38:39.200
and then you extend the class and then
 

00:38:39.200 --> 00:38:41.290
and then you extend the class and then
there's one method which again if you

00:38:41.290 --> 00:38:41.300
there's one method which again if you
 

00:38:41.300 --> 00:38:44.230
there's one method which again if you
don't call it it breaks everything at

00:38:44.230 --> 00:38:44.240
don't call it it breaks everything at
 

00:38:44.240 --> 00:38:46.960
don't call it it breaks everything at
set session token' where again we kind

00:38:46.960 --> 00:38:46.970
set session token' where again we kind
 

00:38:46.970 --> 00:38:49.750
set session token' where again we kind
of gave the token to Media Browser

00:38:49.750 --> 00:38:49.760
of gave the token to Media Browser
 

00:38:49.760 --> 00:38:53.770
of gave the token to Media Browser
service and there's two other methods on

00:38:53.770 --> 00:38:53.780
service and there's two other methods on
 

00:38:53.780 --> 00:38:56.319
service and there's two other methods on
get root and onload children which are

00:38:56.319 --> 00:38:56.329
get root and onload children which are
 

00:38:56.329 --> 00:38:58.480
get root and onload children which are
required to be implemented these are

00:38:58.480 --> 00:38:58.490
required to be implemented these are
 

00:38:58.490 --> 00:39:00.250
required to be implemented these are
really important for Android auto but

00:39:00.250 --> 00:39:00.260
really important for Android auto but
 

00:39:00.260 --> 00:39:02.410
really important for Android auto but
for us we just need to know that you

00:39:02.410 --> 00:39:02.420
for us we just need to know that you
 

00:39:02.420 --> 00:39:04.750
for us we just need to know that you
need to return something not null and on

00:39:04.750 --> 00:39:04.760
need to return something not null and on
 

00:39:04.760 --> 00:39:08.349
need to return something not null and on
get root for any connections to succeed

00:39:08.349 --> 00:39:08.359
get root for any connections to succeed
 

00:39:08.359 --> 00:39:10.810
get root for any connections to succeed
so in this case I'm just saying am i

00:39:10.810 --> 00:39:10.820
so in this case I'm just saying am i
 

00:39:10.820 --> 00:39:12.910
so in this case I'm just saying am i
calling myself good all right great

00:39:12.910 --> 00:39:12.920
calling myself good all right great
 

00:39:12.920 --> 00:39:15.220
calling myself good all right great
here's a root that gives you no children

00:39:15.220 --> 00:39:15.230
here's a root that gives you no children
 

00:39:15.230 --> 00:39:20.710
here's a root that gives you no children
back and wrong with our life so if Media

00:39:20.710 --> 00:39:20.720
back and wrong with our life so if Media
 

00:39:20.720 --> 00:39:23.040
back and wrong with our life so if Media
Browser service compat was one side

00:39:23.040 --> 00:39:23.050
Browser service compat was one side
 

00:39:23.050 --> 00:39:25.839
Browser service compat was one side
Media Browser compat is the other side

00:39:25.839 --> 00:39:25.849
Media Browser compat is the other side
 

00:39:25.849 --> 00:39:27.670
Media Browser compat is the other side
this is what you'd actually use in your

00:39:27.670 --> 00:39:27.680
this is what you'd actually use in your
 

00:39:27.680 --> 00:39:31.630
this is what you'd actually use in your
UI to connect to your service so in this

00:39:31.630 --> 00:39:31.640
UI to connect to your service so in this
 

00:39:31.640 --> 00:39:33.579
UI to connect to your service so in this
case we pass in the component name and

00:39:33.579 --> 00:39:33.589
case we pass in the component name and
 

00:39:33.589 --> 00:39:37.120
case we pass in the component name and
we call connect and it's actually

00:39:37.120 --> 00:39:37.130
we call connect and it's actually
 

00:39:37.130 --> 00:39:38.800
we call connect and it's actually
binding to your service and doing all

00:39:38.800 --> 00:39:38.810
binding to your service and doing all
 

00:39:38.810 --> 00:39:41.440
binding to your service and doing all
that stuff for you but the important

00:39:41.440 --> 00:39:41.450
that stuff for you but the important
 

00:39:41.450 --> 00:39:42.790
that stuff for you but the important
part is when you get that connection

00:39:42.790 --> 00:39:42.800
part is when you get that connection
 

00:39:42.800 --> 00:39:45.790
part is when you get that connection
callback we call unconnected and we'll

00:39:45.790 --> 00:39:45.800
callback we call unconnected and we'll
 

00:39:45.800 --> 00:39:48.099
callback we call unconnected and we'll
be able to call get session token' and

00:39:48.099 --> 00:39:48.109
be able to call get session token' and
 

00:39:48.109 --> 00:39:49.930
be able to call get session token' and
go about our wonderful ways of hooking

00:39:49.930 --> 00:39:49.940
go about our wonderful ways of hooking
 

00:39:49.940 --> 00:39:51.550
go about our wonderful ways of hooking
our whole UI up and getting all our

00:39:51.550 --> 00:39:51.560
our whole UI up and getting all our
 

00:39:51.560 --> 00:39:53.740
our whole UI up and getting all our
information and setting up our callback

00:39:53.740 --> 00:39:53.750
information and setting up our callback
 

00:39:53.750 --> 00:39:56.770
information and setting up our callback
and on and on and on and on and like I

00:39:56.770 --> 00:39:56.780
and on and on and on and on and like I
 

00:39:56.780 --> 00:39:59.140
and on and on and on and on and like I
mentioned all of this works across

00:39:59.140 --> 00:39:59.150
mentioned all of this works across
 

00:39:59.150 --> 00:40:02.880
mentioned all of this works across
processes so you've not had to touch

00:40:02.880 --> 00:40:02.890
processes so you've not had to touch
 

00:40:02.890 --> 00:40:06.309
processes so you've not had to touch
Android IPC or a IDL's

00:40:06.309 --> 00:40:06.319
Android IPC or a IDL's
 

00:40:06.319 --> 00:40:09.099
Android IPC or a IDL's
or any of that fun stuff but it turns

00:40:09.099 --> 00:40:09.109
or any of that fun stuff but it turns
 

00:40:09.109 --> 00:40:11.260
or any of that fun stuff but it turns
out that you can actually support

00:40:11.260 --> 00:40:11.270
out that you can actually support
 

00:40:11.270 --> 00:40:13.930
out that you can actually support
multiple processes and if you're doing

00:40:13.930 --> 00:40:13.940
multiple processes and if you're doing
 

00:40:13.940 --> 00:40:16.780
multiple processes and if you're doing
audio playback in a service it's

00:40:16.780 --> 00:40:16.790
audio playback in a service it's
 

00:40:16.790 --> 00:40:18.849
audio playback in a service it's
actually probably a fairly good idea to

00:40:18.849 --> 00:40:18.859
actually probably a fairly good idea to
 

00:40:18.859 --> 00:40:20.980
actually probably a fairly good idea to
have a separate process so when you have

00:40:20.980 --> 00:40:20.990
have a separate process so when you have
 

00:40:20.990 --> 00:40:23.290
have a separate process so when you have
very different parts of your life cycle

00:40:23.290 --> 00:40:23.300
very different parts of your life cycle
 

00:40:23.300 --> 00:40:25.900
very different parts of your life cycle
it's really important to keep that long

00:40:25.900 --> 00:40:25.910
it's really important to keep that long
 

00:40:25.910 --> 00:40:28.690
it's really important to keep that long
term memory usage as low as possible

00:40:28.690 --> 00:40:28.700
term memory usage as low as possible
 

00:40:28.700 --> 00:40:30.280
term memory usage as low as possible
all right if someone's gonna be playing

00:40:30.280 --> 00:40:30.290
all right if someone's gonna be playing
 

00:40:30.290 --> 00:40:32.770
all right if someone's gonna be playing
audio for multiple hours you don't want

00:40:32.770 --> 00:40:32.780
audio for multiple hours you don't want
 

00:40:32.780 --> 00:40:34.890
audio for multiple hours you don't want
to be taking up extra resources and

00:40:34.890 --> 00:40:34.900
to be taking up extra resources and
 

00:40:34.900 --> 00:40:37.390
to be taking up extra resources and
Android only kills things at the process

00:40:37.390 --> 00:40:37.400
Android only kills things at the process
 

00:40:37.400 --> 00:40:41.079
Android only kills things at the process
level so if they ever open your UI that

00:40:41.079 --> 00:40:41.089
level so if they ever open your UI that
 

00:40:41.089 --> 00:40:43.900
level so if they ever open your UI that
UI piece is gonna stay in memory as long

00:40:43.900 --> 00:40:43.910
UI piece is gonna stay in memory as long
 

00:40:43.910 --> 00:40:46.240
UI piece is gonna stay in memory as long
as your services

00:40:46.240 --> 00:40:46.250
as your services
 

00:40:46.250 --> 00:40:49.400
as your services
so using a separate service is actually

00:40:49.400 --> 00:40:49.410
so using a separate service is actually
 

00:40:49.410 --> 00:40:51.980
so using a separate service is actually
a really good idea for many reasons

00:40:51.980 --> 00:40:51.990
a really good idea for many reasons
 

00:40:51.990 --> 00:40:54.020
a really good idea for many reasons
including things like the webview

00:40:54.020 --> 00:40:54.030
including things like the webview
 

00:40:54.030 --> 00:40:56.660
including things like the webview
process being updated if you're using

00:40:56.660 --> 00:40:56.670
process being updated if you're using
 

00:40:56.670 --> 00:40:59.210
process being updated if you're using
webview in your UI process that's gonna

00:40:59.210 --> 00:40:59.220
webview in your UI process that's gonna
 

00:40:59.220 --> 00:41:00.950
webview in your UI process that's gonna
be killed automatically and we don't

00:41:00.950 --> 00:41:00.960
be killed automatically and we don't
 

00:41:00.960 --> 00:41:03.200
be killed automatically and we don't
really want to pause our music just

00:41:03.200 --> 00:41:03.210
really want to pause our music just
 

00:41:03.210 --> 00:41:05.270
really want to pause our music just
because what have you updated it seems

00:41:05.270 --> 00:41:05.280
because what have you updated it seems
 

00:41:05.280 --> 00:41:07.549
because what have you updated it seems
kind of silly and actually we never

00:41:07.549 --> 00:41:07.559
kind of silly and actually we never
 

00:41:07.559 --> 00:41:09.920
kind of silly and actually we never
really want to pause our music if it's

00:41:09.920 --> 00:41:09.930
really want to pause our music if it's
 

00:41:09.930 --> 00:41:11.839
really want to pause our music if it's
actually playing we wanted to continue

00:41:11.839 --> 00:41:11.849
actually playing we wanted to continue
 

00:41:11.849 --> 00:41:14.120
actually playing we wanted to continue
on forever so to do this on Android

00:41:14.120 --> 00:41:14.130
on forever so to do this on Android
 

00:41:14.130 --> 00:41:17.390
on forever so to do this on Android
we're using a foreground service now

00:41:17.390 --> 00:41:17.400
we're using a foreground service now
 

00:41:17.400 --> 00:41:19.280
we're using a foreground service now
foreground services have one property

00:41:19.280 --> 00:41:19.290
foreground services have one property
 

00:41:19.290 --> 00:41:21.829
foreground services have one property
and that they require a notification but

00:41:21.829 --> 00:41:21.839
and that they require a notification but
 

00:41:21.839 --> 00:41:24.049
and that they require a notification but
that's okay because we just built our

00:41:24.049 --> 00:41:24.059
that's okay because we just built our
 

00:41:24.059 --> 00:41:26.480
that's okay because we just built our
notification so for media it actually

00:41:26.480 --> 00:41:26.490
notification so for media it actually
 

00:41:26.490 --> 00:41:28.280
notification so for media it actually
makes a lot of sense to use these things

00:41:28.280 --> 00:41:28.290
makes a lot of sense to use these things
 

00:41:28.290 --> 00:41:31.990
makes a lot of sense to use these things
together but there were some problems

00:41:31.990 --> 00:41:32.000
together but there were some problems
 

00:41:32.000 --> 00:41:34.280
together but there were some problems
the notification used for foreground

00:41:34.280 --> 00:41:34.290
the notification used for foreground
 

00:41:34.290 --> 00:41:37.069
the notification used for foreground
services are ongoing ie they can't be

00:41:37.069 --> 00:41:37.079
services are ongoing ie they can't be
 

00:41:37.079 --> 00:41:39.440
services are ongoing ie they can't be
swiped away so you can imagine how

00:41:39.440 --> 00:41:39.450
swiped away so you can imagine how
 

00:41:39.450 --> 00:41:41.839
swiped away so you can imagine how
frustrating is a user you're trying to

00:41:41.839 --> 00:41:41.849
frustrating is a user you're trying to
 

00:41:41.849 --> 00:41:43.490
frustrating is a user you're trying to
swipe away that notifications like I

00:41:43.490 --> 00:41:43.500
swipe away that notifications like I
 

00:41:43.500 --> 00:41:45.890
swipe away that notifications like I
just want to stop playback it's fine I'm

00:41:45.890 --> 00:41:45.900
just want to stop playback it's fine I'm
 

00:41:45.900 --> 00:41:48.799
just want to stop playback it's fine I'm
good but they can't if you're using a

00:41:48.799 --> 00:41:48.809
good but they can't if you're using a
 

00:41:48.809 --> 00:41:50.930
good but they can't if you're using a
foreground service and it turns out

00:41:50.930 --> 00:41:50.940
foreground service and it turns out
 

00:41:50.940 --> 00:41:54.010
foreground service and it turns out
there's been a bug for like six years

00:41:54.010 --> 00:41:54.020
there's been a bug for like six years
 

00:41:54.020 --> 00:41:58.190
there's been a bug for like six years
we're stopped foreground false didn't

00:41:58.190 --> 00:41:58.200
we're stopped foreground false didn't
 

00:41:58.200 --> 00:42:02.059
we're stopped foreground false didn't
actually make it dismissible even though

00:42:02.059 --> 00:42:02.069
actually make it dismissible even though
 

00:42:02.069 --> 00:42:04.069
actually make it dismissible even though
that was no longer foreground service

00:42:04.069 --> 00:42:04.079
that was no longer foreground service
 

00:42:04.079 --> 00:42:06.650
that was no longer foreground service
and the notification was still there it

00:42:06.650 --> 00:42:06.660
and the notification was still there it
 

00:42:06.660 --> 00:42:08.720
and the notification was still there it
would still be ongoing and you still

00:42:08.720 --> 00:42:08.730
would still be ongoing and you still
 

00:42:08.730 --> 00:42:11.930
would still be ongoing and you still
couldn't swipe it away so we fixed it as

00:42:11.930 --> 00:42:11.940
couldn't swipe it away so we fixed it as
 

00:42:11.940 --> 00:42:14.720
couldn't swipe it away so we fixed it as
part of media style basically by adding

00:42:14.720 --> 00:42:14.730
part of media style basically by adding
 

00:42:14.730 --> 00:42:17.809
part of media style basically by adding
a little X in the corner very very

00:42:17.809 --> 00:42:17.819
a little X in the corner very very
 

00:42:17.819 --> 00:42:21.319
a little X in the corner very very
low-tech solution but it allows users to

00:42:21.319 --> 00:42:21.329
low-tech solution but it allows users to
 

00:42:21.329 --> 00:42:24.319
low-tech solution but it allows users to
hit that X button and allows them to

00:42:24.319 --> 00:42:24.329
hit that X button and allows them to
 

00:42:24.329 --> 00:42:27.319
hit that X button and allows them to
actually delete the service in this case

00:42:27.319 --> 00:42:27.329
actually delete the service in this case
 

00:42:27.329 --> 00:42:30.349
actually delete the service in this case
we're just sending a stop command now on

00:42:30.349 --> 00:42:30.359
we're just sending a stop command now on
 

00:42:30.359 --> 00:42:33.109
we're just sending a stop command now on
lollipop and higher once you call stop

00:42:33.109 --> 00:42:33.119
lollipop and higher once you call stop
 

00:42:33.119 --> 00:42:35.210
lollipop and higher once you call stop
foreground false you can't actually

00:42:35.210 --> 00:42:35.220
foreground false you can't actually
 

00:42:35.220 --> 00:42:38.000
foreground false you can't actually
swipe to dismiss a notification so this

00:42:38.000 --> 00:42:38.010
swipe to dismiss a notification so this
 

00:42:38.010 --> 00:42:39.799
swipe to dismiss a notification so this
basically does nothing out a lollipop in

00:42:39.799 --> 00:42:39.809
basically does nothing out a lollipop in
 

00:42:39.809 --> 00:42:42.740
basically does nothing out a lollipop in
higher devices

00:42:42.740 --> 00:42:42.750
 

00:42:42.750 --> 00:42:45.950
now I also mentioned that Media Browser

00:42:45.950 --> 00:42:45.960
now I also mentioned that Media Browser
 

00:42:45.960 --> 00:42:48.650
now I also mentioned that Media Browser
service and Media Browser compact are

00:42:48.650 --> 00:42:48.660
service and Media Browser compact are
 

00:42:48.660 --> 00:42:51.920
service and Media Browser compact are
binding to the service which is great

00:42:51.920 --> 00:42:51.930
binding to the service which is great
 

00:42:51.930 --> 00:42:54.109
binding to the service which is great
because that means that your service and

00:42:54.109 --> 00:42:54.119
because that means that your service and
 

00:42:54.119 --> 00:42:56.780
because that means that your service and
your process is already up when someone

00:42:56.780 --> 00:42:56.790
your process is already up when someone
 

00:42:56.790 --> 00:42:58.210
your process is already up when someone
hits the play button so you can

00:42:58.210 --> 00:42:58.220
hits the play button so you can
 

00:42:58.220 --> 00:43:03.200
hits the play button so you can
instantaneously use start playback but

00:43:03.200 --> 00:43:03.210
instantaneously use start playback but
 

00:43:03.210 --> 00:43:05.589
instantaneously use start playback but
it also means as soon as your UI dies

00:43:05.589 --> 00:43:05.599
it also means as soon as your UI dies
 

00:43:05.599 --> 00:43:07.970
it also means as soon as your UI dies
your service is going to die with it

00:43:07.970 --> 00:43:07.980
your service is going to die with it
 

00:43:07.980 --> 00:43:09.980
your service is going to die with it
because they'll be unbound and there's

00:43:09.980 --> 00:43:09.990
because they'll be unbound and there's
 

00:43:09.990 --> 00:43:13.190
because they'll be unbound and there's
no one button to it and you're dead but

00:43:13.190 --> 00:43:13.200
no one button to it and you're dead but
 

00:43:13.200 --> 00:43:15.109
no one button to it and you're dead but
that's ok we'll just need to call start

00:43:15.109 --> 00:43:15.119
that's ok we'll just need to call start
 

00:43:15.119 --> 00:43:17.930
that's ok we'll just need to call start
service when we start playback and that

00:43:17.930 --> 00:43:17.940
service when we start playback and that
 

00:43:17.940 --> 00:43:19.430
service when we start playback and that
way we make sure our service will

00:43:19.430 --> 00:43:19.440
way we make sure our service will
 

00:43:19.440 --> 00:43:23.570
way we make sure our service will
continue even when our activity dies we

00:43:23.570 --> 00:43:23.580
continue even when our activity dies we
 

00:43:23.580 --> 00:43:26.480
continue even when our activity dies we
can see our updated life cycle of media

00:43:26.480 --> 00:43:26.490
can see our updated life cycle of media
 

00:43:26.490 --> 00:43:28.670
can see our updated life cycle of media
playback specifically for the service

00:43:28.670 --> 00:43:28.680
playback specifically for the service
 

00:43:28.680 --> 00:43:31.550
playback specifically for the service
case so in this case our notifications

00:43:31.550 --> 00:43:31.560
case so in this case our notifications
 

00:43:31.560 --> 00:43:33.980
case so in this case our notifications
have been updated slightly to start

00:43:33.980 --> 00:43:33.990
have been updated slightly to start
 

00:43:33.990 --> 00:43:36.710
have been updated slightly to start
foreground when we hit play stop

00:43:36.710 --> 00:43:36.720
foreground when we hit play stop
 

00:43:36.720 --> 00:43:39.320
foreground when we hit play stop
foreground when we hit pause because we

00:43:39.320 --> 00:43:39.330
foreground when we hit pause because we
 

00:43:39.330 --> 00:43:40.910
foreground when we hit pause because we
do want people to be able to swipe it

00:43:40.910 --> 00:43:40.920
do want people to be able to swipe it
 

00:43:40.920 --> 00:43:44.390
do want people to be able to swipe it
away when we're actually paused and then

00:43:44.390 --> 00:43:44.400
away when we're actually paused and then
 

00:43:44.400 --> 00:43:45.920
away when we're actually paused and then
on stop we're gonna remove our

00:43:45.920 --> 00:43:45.930
on stop we're gonna remove our
 

00:43:45.930 --> 00:43:48.800
on stop we're gonna remove our
notification and similarly for the

00:43:48.800 --> 00:43:48.810
notification and similarly for the
 

00:43:48.810 --> 00:43:50.630
notification and similarly for the
actual service itself we really want to

00:43:50.630 --> 00:43:50.640
actual service itself we really want to
 

00:43:50.640 --> 00:43:53.270
actual service itself we really want to
make sure we call sessiontoken we need

00:43:53.270 --> 00:43:53.280
make sure we call sessiontoken we need
 

00:43:53.280 --> 00:43:55.010
make sure we call sessiontoken we need
to call start service when we start

00:43:55.010 --> 00:43:55.020
to call start service when we start
 

00:43:55.020 --> 00:43:57.130
to call start service when we start
playback so we live as long as possible

00:43:57.130 --> 00:43:57.140
playback so we live as long as possible
 

00:43:57.140 --> 00:44:00.740
playback so we live as long as possible
but of course when the user hits a stop

00:44:00.740 --> 00:44:00.750
but of course when the user hits a stop
 

00:44:00.750 --> 00:44:03.410
but of course when the user hits a stop
button or exits out our notification we

00:44:03.410 --> 00:44:03.420
button or exits out our notification we
 

00:44:03.420 --> 00:44:05.390
button or exits out our notification we
actually do want to call stop self so

00:44:05.390 --> 00:44:05.400
actually do want to call stop self so
 

00:44:05.400 --> 00:44:10.160
actually do want to call stop self so
the system can clean up our service so

00:44:10.160 --> 00:44:10.170
the system can clean up our service so
 

00:44:10.170 --> 00:44:10.910
the system can clean up our service so
what's next

00:44:10.910 --> 00:44:10.920
what's next
 

00:44:10.920 --> 00:44:14.750
what's next
there is a great example app called um

00:44:14.750 --> 00:44:14.760
there is a great example app called um
 

00:44:14.760 --> 00:44:17.960
there is a great example app called um
our universal Android music player which

00:44:17.960 --> 00:44:17.970
our universal Android music player which
 

00:44:17.970 --> 00:44:20.540
our universal Android music player which
is up on github which uses basically all

00:44:20.540 --> 00:44:20.550
is up on github which uses basically all
 

00:44:20.550 --> 00:44:22.490
is up on github which uses basically all
of these technologies all in one

00:44:22.490 --> 00:44:22.500
of these technologies all in one
 

00:44:22.500 --> 00:44:25.339
of these technologies all in one
including many many more it's a great

00:44:25.339 --> 00:44:25.349
including many many more it's a great
 

00:44:25.349 --> 00:44:27.440
including many many more it's a great
app that kind of you can run on your

00:44:27.440 --> 00:44:27.450
app that kind of you can run on your
 

00:44:27.450 --> 00:44:29.810
app that kind of you can run on your
devices there's also a whole bunch of

00:44:29.810 --> 00:44:29.820
devices there's also a whole bunch of
 

00:44:29.820 --> 00:44:32.359
devices there's also a whole bunch of
other talks which I would suggest the

00:44:32.359 --> 00:44:32.369
other talks which I would suggest the
 

00:44:32.369 --> 00:44:34.190
other talks which I would suggest the
exoplayer talk which I believe is

00:44:34.190 --> 00:44:34.200
exoplayer talk which I believe is
 

00:44:34.200 --> 00:44:36.410
exoplayer talk which I believe is
already online if you know you're free

00:44:36.410 --> 00:44:36.420
already online if you know you're free
 

00:44:36.420 --> 00:44:41.359
already online if you know you're free
tonight after an after party the Android

00:44:41.359 --> 00:44:41.369
tonight after an after party the Android
 

00:44:41.369 --> 00:44:43.790
tonight after an after party the Android
auto talks there right out this way if

00:44:43.790 --> 00:44:43.800
auto talks there right out this way if
 

00:44:43.800 --> 00:44:45.470
auto talks there right out this way if
you want to get hands-on with Android

00:44:45.470 --> 00:44:45.480
you want to get hands-on with Android
 

00:44:45.480 --> 00:44:48.950
you want to get hands-on with Android
auto as well as Google cast the cast SDK

00:44:48.950 --> 00:44:48.960
auto as well as Google cast the cast SDK
 

00:44:48.960 --> 00:44:52.579
auto as well as Google cast the cast SDK
and Android wear for standalone

00:44:52.579 --> 00:44:52.589
and Android wear for standalone
 

00:44:52.589 --> 00:44:55.079
and Android wear for standalone
so thanks for coming I'll be out here

00:44:55.079 --> 00:44:55.089
so thanks for coming I'll be out here
 

00:44:55.089 --> 00:44:59.310
so thanks for coming I'll be out here
for questions afterwards thanks again

