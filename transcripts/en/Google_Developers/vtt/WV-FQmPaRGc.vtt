WEBVTT
Kind: captions
Language: en

00:00:00.000 --> 00:00:03.381
[STING]

00:00:05.313 --> 00:00:07.940
NETO MARIN: Hello, I'm
Neto and we are here

00:00:07.940 --> 00:00:10.640
for another "Behind
the Actions" episode.

00:00:10.640 --> 00:00:11.803
And today, I have here Aza.

00:00:11.803 --> 00:00:12.970
Hey, how are you doing, Aza?

00:00:12.970 --> 00:00:13.530
AZA TULEPBERGENOV: I'm good.

00:00:13.530 --> 00:00:13.900
How are you?

00:00:13.900 --> 00:00:14.858
NETO MARIN: Good, good.

00:00:14.858 --> 00:00:16.219
And thanks for joining me.

00:00:16.219 --> 00:00:19.160
And just introduce
yourself to our audience.

00:00:19.160 --> 00:00:22.430
What you're doing on our team,
what's your daily basis job.

00:00:22.430 --> 00:00:23.575
AZA TULEPBERGENOV: Sure.

00:00:23.575 --> 00:00:24.200
My name is Aza.

00:00:24.200 --> 00:00:27.920
And I'm an engineer at Developer
Relations for Google Assistant.

00:00:27.920 --> 00:00:31.370
My main duty is to provide
some tooling for developers

00:00:31.370 --> 00:00:32.980
to improve their productivity.

00:00:32.980 --> 00:00:33.938
NETO MARIN: Cool, cool.

00:00:33.938 --> 00:00:37.010
So all the cool stuff people
are using in their development,

00:00:37.010 --> 00:00:39.230
you kind of have some
responsibility on that, right?

00:00:39.230 --> 00:00:39.600
AZA TULEPBERGENOV: That's right.

00:00:39.600 --> 00:00:40.790
Yeah, you can think
of it that way.

00:00:40.790 --> 00:00:41.670
NETO MARIN: Or you
can have [INAUDIBLE]..

00:00:41.670 --> 00:00:42.350
No, I'm kidding.

00:00:42.350 --> 00:00:48.410
So today, we're going to build
something on top of the Digital

00:00:48.410 --> 00:00:50.270
Goods platform, right?

00:00:50.270 --> 00:00:52.460
So what is Digital Goods?

00:00:52.460 --> 00:00:55.370
Because when you say "purchase,"
there's so many different ways

00:00:55.370 --> 00:00:58.520
to purchase things, to
have different things

00:00:58.520 --> 00:01:00.900
you could purchase
for front-end action.

00:01:00.900 --> 00:01:03.694
So I know that we have some
different products, right?

00:01:03.694 --> 00:01:04.819
AZA TULEPBERGENOV: Exactly.

00:01:07.970 --> 00:01:09.740
Well, if you use
Digital Goods, it

00:01:09.740 --> 00:01:11.510
will automatically
allow your application

00:01:11.510 --> 00:01:16.070
to be available on 2 billion
services that currently support

00:01:16.070 --> 00:01:19.640
Assistant, including smart to
displays, phones, Google Home.

00:01:19.640 --> 00:01:20.600
NETO MARIN: Headphones.

00:01:20.600 --> 00:01:21.210
AZA TULEPBERGENOV: Exactly.

00:01:21.210 --> 00:01:21.918
NETO MARIN: Yeah.

00:01:21.918 --> 00:01:25.560
And for example, when
we say product types,

00:01:25.560 --> 00:01:27.860
we have the one-time purchase.

00:01:27.860 --> 00:01:32.130
It's some products
that you purchase once,

00:01:32.130 --> 00:01:33.980
and maybe you can
purchase again.

00:01:33.980 --> 00:01:38.480
I'm going to explain this with
more details in a few seconds.

00:01:38.480 --> 00:01:40.420
But also, it can
have subscriptions.

00:01:40.420 --> 00:01:43.480
I think these are the two main
categories, you could say.

00:01:43.480 --> 00:01:45.133
AZA TULEPBERGENOV:
Yeah, they are.

00:01:45.133 --> 00:01:47.300
NETO MARIN: Yeah, and then
on the one-time purchase,

00:01:47.300 --> 00:01:49.280
we have, for example,
the consumable

00:01:49.280 --> 00:01:51.590
and the non-consumable
products, right?

00:01:51.590 --> 00:01:52.850
AZA TULEPBERGENOV: Yes,
consumable and non-consumable.

00:01:52.850 --> 00:01:53.840
NETO MARIN: Yeah,
can you explain

00:01:53.840 --> 00:01:56.790
a little bit what the difference
is between these two products?

00:01:56.790 --> 00:01:58.248
AZA TULEPBERGENOV:
Yeah, so you can

00:01:58.248 --> 00:02:02.480
think of consumable products as
purchases that can be done over

00:02:02.480 --> 00:02:03.350
and over and over.

00:02:03.350 --> 00:02:06.530
So for example, if you
buy currency in a game,

00:02:06.530 --> 00:02:09.050
you can re-purchase it as
many times as you want.

00:02:09.050 --> 00:02:10.610
Versus non-consumable,
it's something

00:02:10.610 --> 00:02:13.410
that can be done only one time.

00:02:13.410 --> 00:02:15.625
So, for example, let's
say I want to buy

00:02:15.625 --> 00:02:16.875
a specific feature in my app--

00:02:16.875 --> 00:02:19.333
NETO MARIN: Or an expansion
for the same game, for example.

00:02:19.333 --> 00:02:20.390
AZA TULEPBERGENOV: Yeah.

00:02:20.390 --> 00:02:22.790
This is a good example
of non-consumable.

00:02:22.790 --> 00:02:25.700
NETO MARIN: Yeah,
because then you won't--

00:02:25.700 --> 00:02:28.730
at least I imagine you won't--
once you buy another expansion

00:02:28.730 --> 00:02:32.330
or the same expansion,
like a premium package,

00:02:32.330 --> 00:02:35.810
and then you don't need to
take care yourself about this.

00:02:35.810 --> 00:02:38.390
Google Play platform
will take care about it.

00:02:38.390 --> 00:02:40.900
So if you try to purchase
again, for example,

00:02:40.900 --> 00:02:43.350
and you didn't consume
that product, we will say,

00:02:43.350 --> 00:02:44.810
hey, you can't buy this.

00:02:44.810 --> 00:02:49.340
But we'll explain this
on the code a little bit.

00:02:49.340 --> 00:02:51.930
I just said Google Play, right?

00:02:51.930 --> 00:02:53.900
Why I said Google Play?

00:02:53.900 --> 00:02:55.280
There is a reason, right?

00:02:55.280 --> 00:02:57.530
AZA TULEPBERGENOV:
Yeah, because in fact,

00:02:57.530 --> 00:03:00.550
Digital Goods is reusing
the same infrastructure

00:03:00.550 --> 00:03:03.890
that Google Play uses for
authorizing and performing

00:03:03.890 --> 00:03:04.890
all of their purchases.

00:03:04.890 --> 00:03:06.800
So we get all these
years of experience

00:03:06.800 --> 00:03:09.578
to make the flow as seamless
as possible for the users.

00:03:09.578 --> 00:03:11.120
NETO MARIN: Yeah,
and the great point

00:03:11.120 --> 00:03:13.730
is Google Play store is
available in over almost,

00:03:13.730 --> 00:03:14.892
I think, 200 countries.

00:03:14.892 --> 00:03:15.850
AZA TULEPBERGENOV: Yes.

00:03:15.850 --> 00:03:17.892
NETO MARIN: In each country,
the Google Play team

00:03:17.892 --> 00:03:20.000
has been doing a
great job on finding

00:03:20.000 --> 00:03:23.040
the correct forms of
payment for each country

00:03:23.040 --> 00:03:25.010
so that users can use
their own credit card,

00:03:25.010 --> 00:03:28.820
or they can use carrier
billing, for example.

00:03:28.820 --> 00:03:32.390
But the developer doesn't
care about it because it just

00:03:32.390 --> 00:03:33.770
offers the product.

00:03:33.770 --> 00:03:36.410
The user purchases the
product, and then we

00:03:36.410 --> 00:03:38.600
receive the money from Google.

00:03:38.600 --> 00:03:41.270
So they don't need to care
about accepting credit card,

00:03:41.270 --> 00:03:44.435
making contracts with credit
card companies, right?

00:03:44.435 --> 00:03:45.560
AZA TULEPBERGENOV: Exactly.

00:03:45.560 --> 00:03:49.612
It's all done by Google
with all the Google security

00:03:49.612 --> 00:03:50.570
and everything in mind.

00:03:50.570 --> 00:03:51.585
NETO MARIN: Yeah, nice.

00:03:51.585 --> 00:03:52.710
And also the subscriptions.

00:03:52.710 --> 00:03:54.918
The subscriptions is also
a very nice feature, right?

00:03:54.918 --> 00:03:57.220
AZA TULEPBERGENOV: Yes.

00:03:57.220 --> 00:03:58.662
It's, in fact, my favorite one.

00:03:58.662 --> 00:03:59.370
NETO MARIN: Nice.

00:03:59.370 --> 00:04:01.203
Yeah, because it allows
you to, for example,

00:04:01.203 --> 00:04:04.700
set up some recurring
purchase frequent.

00:04:04.700 --> 00:04:06.980
So people can buy--

00:04:06.980 --> 00:04:10.310
I don't know-- a subscription
to your news app,

00:04:10.310 --> 00:04:15.357
and then you pay every month, or
yearly, or quarterly, whatever.

00:04:15.357 --> 00:04:16.940
And also there are
some cool features,

00:04:16.940 --> 00:04:20.660
like you have free trial.

00:04:20.660 --> 00:04:22.510
You can send invite codes.

00:04:22.510 --> 00:04:25.463
You have progressive price.

00:04:25.463 --> 00:04:26.880
So it can have
introduction price.

00:04:26.880 --> 00:04:28.910
So there's a bunch of features.

00:04:28.910 --> 00:04:31.400
And also, all the back
end is the same, right?

00:04:31.400 --> 00:04:34.832
The back end, it's the same back
end you are using for Android,

00:04:34.832 --> 00:04:37.040
you're going to use for the
Actions on Google, right?

00:04:37.040 --> 00:04:37.910
AZA TULEPBERGENOV: Exactly, yes.

00:04:37.910 --> 00:04:39.080
NETO MARIN: So all
the features that we

00:04:39.080 --> 00:04:40.820
have available on
the subscription

00:04:40.820 --> 00:04:43.340
part and the purchase
time, the API's management,

00:04:43.340 --> 00:04:44.360
it's available--

00:04:44.360 --> 00:04:45.590
AZA TULEPBERGENOV:
Out of the box, yeah.

00:04:45.590 --> 00:04:47.600
NETO MARIN: And this is
great, because then you

00:04:47.600 --> 00:04:51.270
don't need to develop this
kind of thing by yourself.

00:04:51.270 --> 00:04:52.010
You can use this.

00:04:52.010 --> 00:04:54.302
And if you're already an
Android developer, it's great.

00:04:54.302 --> 00:04:57.650
Because like Aza said, you can
expand your consumer market

00:04:57.650 --> 00:04:59.473
to over 2 billion devices.

00:04:59.473 --> 00:05:00.390
And this is very cool.

00:05:00.390 --> 00:05:02.840
So I can purchase something
on my phone, right?

00:05:02.840 --> 00:05:03.965
AZA TULEPBERGENOV: Exactly.

00:05:03.965 --> 00:05:05.900
NETO MARIN: And then
use the Google Home Hub,

00:05:05.900 --> 00:05:06.608
for example, to--

00:05:06.608 --> 00:05:08.620
AZA TULEPBERGENOV: To
actually use it, yeah.

00:05:08.620 --> 00:05:09.910
NETO MARIN: And this is great.

00:05:09.910 --> 00:05:12.280
And if you're a
non-Android developer,

00:05:12.280 --> 00:05:14.930
you only have a few steps more
than an Android developer,

00:05:14.930 --> 00:05:15.430
right?

00:05:15.430 --> 00:05:19.030
You need to set up your
Google Play account.

00:05:19.030 --> 00:05:21.340
And then you have to
fill all the requirements

00:05:21.340 --> 00:05:22.330
from the Google Play.

00:05:22.330 --> 00:05:24.490
But again, we have
all these documented

00:05:24.490 --> 00:05:25.990
in our documentation,
right, Aza?

00:05:25.990 --> 00:05:26.200
AZA TULEPBERGENOV: Yes, exactly.

00:05:26.200 --> 00:05:27.658
NETO MARIN: So all
the steps there,

00:05:27.658 --> 00:05:29.650
they can go set up the account.

00:05:29.650 --> 00:05:32.560
And after I have
this account, if I

00:05:32.560 --> 00:05:35.050
don't have an
Android app yet, do

00:05:35.050 --> 00:05:40.875
I have to do
pre-development steps?

00:05:40.875 --> 00:05:43.280
AZA TULEPBERGENOV:
Yeah, there's a few.

00:05:43.280 --> 00:05:45.820
So in fact, you have to
set up brand verification

00:05:45.820 --> 00:05:46.810
in the console.

00:05:46.810 --> 00:05:51.880
That way, Google can verify
that your digital purchases are

00:05:51.880 --> 00:05:54.295
essentially legit and verified.

00:05:54.295 --> 00:05:55.270
NETO MARIN: OK.

00:05:55.270 --> 00:05:56.900
Yeah, this is an
interesting point

00:05:56.900 --> 00:05:59.860
because in our
episode, of course,

00:05:59.860 --> 00:06:02.650
we don't have time to go through
the brand verification process

00:06:02.650 --> 00:06:06.010
because it can take
up to 48 hours,

00:06:06.010 --> 00:06:08.930
but we're going to show you
where you have to set up this,

00:06:08.930 --> 00:06:14.530
and how the flow
looks like for you.

00:06:14.530 --> 00:06:16.030
And then, if you
have any questions,

00:06:16.030 --> 00:06:17.300
check our documentation.

00:06:17.300 --> 00:06:19.050
You will find all
the details there.

00:06:19.050 --> 00:06:21.710
But yes, I think,
even we have this step

00:06:21.710 --> 00:06:24.790
of setting up the
account, then they

00:06:24.790 --> 00:06:26.980
need to create an
Android project, right?

00:06:26.980 --> 00:06:29.890
Because in the Android
project, we have the package.

00:06:29.890 --> 00:06:32.680
AZA TULEPBERGENOV:
Yes, the XML file

00:06:32.680 --> 00:06:35.177
that contains all the
metadata about your app.

00:06:35.177 --> 00:06:36.010
NETO MARIN: Exactly.

00:06:36.010 --> 00:06:38.320
And with this
configuration for your app,

00:06:38.320 --> 00:06:40.950
you can use the same package.

00:06:40.950 --> 00:06:44.100
Actually, you need to use the
same package in your Actions

00:06:44.100 --> 00:06:47.830
on Google back-end code,
to match the same products.

00:06:47.830 --> 00:06:51.520
And you can have all the--

00:06:51.520 --> 00:06:54.760
how can I say-- all the
advantage, all the features,

00:06:54.760 --> 00:06:58.022
pre-created for the
Google Play Store

00:06:58.022 --> 00:06:59.230
through the Google Assistant.

00:06:59.230 --> 00:07:00.355
AZA TULEPBERGENOV: Exactly.

00:07:00.355 --> 00:07:02.530
For example, you can
ask an API to return

00:07:02.530 --> 00:07:04.870
all the available products
that My Play Store supports.

00:07:04.870 --> 00:07:07.780
So in just one API call, you
can get it out of the box.

00:07:07.780 --> 00:07:08.890
NETO MARIN: Nice, nice.

00:07:08.890 --> 00:07:12.160
OK, so after you do
this on your Android,

00:07:12.160 --> 00:07:15.400
you can just create this
project in the Play Console,

00:07:15.400 --> 00:07:17.300
go back to the Actions Console.

00:07:17.300 --> 00:07:20.922
So it's kind of a long
process, right, Aza?

00:07:20.922 --> 00:07:21.880
AZA TULEPBERGENOV: Yes.

00:07:21.880 --> 00:07:23.740
NETO MARIN: So
we're going, today,

00:07:23.740 --> 00:07:26.690
to cover this in a
good amount of time.

00:07:26.690 --> 00:07:29.670
We're going to-- we are using--

00:07:29.670 --> 00:07:33.060
how can I say-- a simplified
version, for example, right?

00:07:33.060 --> 00:07:34.520
AZA TULEPBERGENOV: Exactly.

00:07:34.520 --> 00:07:37.600
In fact, I have a screenshot
of what the implementation will

00:07:37.600 --> 00:07:38.660
look like with a user.

00:07:38.660 --> 00:07:40.165
I can show it now.

00:07:40.165 --> 00:07:41.230
NETO MARIN: Yeah, sure.

00:07:44.830 --> 00:07:48.150
AZA TULEPBERGENOV: So you can
see here in the screen that--

00:07:48.150 --> 00:07:50.570
NETO MARIN: Can you explain
to us what's going on here?

00:07:50.570 --> 00:07:53.188
AZA TULEPBERGENOV: Yeah,
so this is essentially

00:07:53.188 --> 00:07:54.730
a sample interaction
between the user

00:07:54.730 --> 00:07:56.530
and this sample app that
they're building right now.

00:07:56.530 --> 00:07:57.223
NETO MARIN: OK.

00:07:57.223 --> 00:07:59.140
AZA TULEPBERGENOV: So
the user starts the app.

00:07:59.140 --> 00:08:03.370
And the app asks the user
if they want to start the--

00:08:03.370 --> 00:08:06.880
to see what this Play Store
has available for purchase.

00:08:06.880 --> 00:08:08.827
NETO MARIN: So it's
like I'm asking

00:08:08.827 --> 00:08:11.410
what products you have in your
catalog or something like that.

00:08:11.410 --> 00:08:13.727
You can say that this
is the catalog, right?

00:08:13.727 --> 00:08:15.060
AZA TULEPBERGENOV: Yes, exactly.

00:08:15.060 --> 00:08:16.350
That's a better way to say it.

00:08:16.350 --> 00:08:17.683
So you can see here, I say yeah.

00:08:17.683 --> 00:08:20.110
And then app lists
all the products

00:08:20.110 --> 00:08:22.492
that it has-- premium car,
unlimited gas, and so on.

00:08:22.492 --> 00:08:23.200
NETO MARIN: Nice.

00:08:23.200 --> 00:08:26.410
AZA TULEPBERGENOV: And then it
asks which one does user like.

00:08:26.410 --> 00:08:28.580
And then the user
selects one of those

00:08:28.580 --> 00:08:31.600
and it sort of goes through
the flow of the transaction.

00:08:31.600 --> 00:08:32.650
NETO MARIN: Nice, yeah.

00:08:32.650 --> 00:08:34.299
And the good point
is the user even

00:08:34.299 --> 00:08:37.270
don't need to leave the
Assistant environment.

00:08:37.270 --> 00:08:40.150
They don't need to complete
the transaction on their phone

00:08:40.150 --> 00:08:42.690
if they already have set up
the payment on the Google

00:08:42.690 --> 00:08:43.409
Assistant.

00:08:43.409 --> 00:08:44.826
The Google Assistant,
for example,

00:08:44.826 --> 00:08:48.618
if we're already buying videos,
movies, from Google Play movie,

00:08:48.618 --> 00:08:51.160
you can use the same account,
because it's either your credit

00:08:51.160 --> 00:08:54.040
cards or personal
account, to purchase

00:08:54.040 --> 00:08:55.390
these additional goods, right?

00:08:55.390 --> 00:08:56.280
AZA TULEPBERGENOV: Exactly, yes.

00:08:56.280 --> 00:08:57.760
NETO MARIN: Now, this is cool
because we don't need even

00:08:57.760 --> 00:08:59.780
to take our phone to
validate something.

00:08:59.780 --> 00:09:02.380
It would do the voice match
so the Google Assistant

00:09:02.380 --> 00:09:03.550
knows who are you.

00:09:03.550 --> 00:09:06.840
For example, if my wife
tried to do something,

00:09:06.840 --> 00:09:08.860
we would purchase
on her credit card.

00:09:08.860 --> 00:09:11.523
If I tried to purchase with
my voice with Voice Match,

00:09:11.523 --> 00:09:13.315
it would purchase on
my credit card, right?

00:09:13.315 --> 00:09:14.273
AZA TULEPBERGENOV: Yes.

00:09:14.273 --> 00:09:17.540
NETO MARIN: So yes, but we
already said to the console

00:09:17.540 --> 00:09:19.920
that we are using the
Transactions platform,

00:09:19.920 --> 00:09:21.940
but we actually need to verify--

00:09:21.940 --> 00:09:25.330
link my website, my Android app.

00:09:25.330 --> 00:09:28.480
Because how the console will
know that this action is

00:09:28.480 --> 00:09:31.570
related to my Android app
or the Android project

00:09:31.570 --> 00:09:33.520
in the Play Console, right?

00:09:33.520 --> 00:09:36.420
So what you're going to do
now is go to the-- there is

00:09:36.420 --> 00:09:37.120
an option--

00:09:37.120 --> 00:09:39.640
Advanced Options they can find.

00:09:39.640 --> 00:09:41.187
And then the brand verification.

00:09:41.187 --> 00:09:42.520
AZA TULEPBERGENOV: Yes, exactly.

00:09:42.520 --> 00:09:45.710
So all in one console, you
can configure the brand

00:09:45.710 --> 00:09:46.420
verification.

00:09:46.420 --> 00:09:48.640
NETO MARIN: Yeah, so
there is two steps.

00:09:48.640 --> 00:09:51.220
First, you need to
connect a website.

00:09:51.220 --> 00:09:54.460
So this is done using the
Google Webmaster tool.

00:09:54.460 --> 00:09:55.920
So you need to go
on the Webmaster,

00:09:55.920 --> 00:09:59.960
check your URL there.

00:09:59.960 --> 00:10:01.210
Going to be some instructions.

00:10:01.210 --> 00:10:02.170
Upload the file.

00:10:02.170 --> 00:10:06.340
And then our crawler
going to link your website

00:10:06.340 --> 00:10:08.830
to your Webmaster Tool account.

00:10:08.830 --> 00:10:12.207
And then you will be able
to connect the website here.

00:10:12.207 --> 00:10:13.790
And then after
connecting the website,

00:10:13.790 --> 00:10:16.690
it's time to connect
the Android app.

00:10:16.690 --> 00:10:18.100
The difference
here is because we

00:10:18.100 --> 00:10:20.543
need to refer to the
package name, right?

00:10:20.543 --> 00:10:22.210
AZA TULEPBERGENOV:
Yes, the package name

00:10:22.210 --> 00:10:24.212
from the Android app.

00:10:24.212 --> 00:10:26.170
NETO MARIN: Yeah, and
the point here important,

00:10:26.170 --> 00:10:28.030
we are not showing here
in the Play Console,

00:10:28.030 --> 00:10:33.700
but a similar process must
be done on the Android site

00:10:33.700 --> 00:10:36.600
because there, to
verify your brand,

00:10:36.600 --> 00:10:40.610
it's linked to the deep link
configurations on your Play

00:10:40.610 --> 00:10:42.190
Console, OK?

00:10:42.190 --> 00:10:43.810
Too much, but no problem.

00:10:43.810 --> 00:10:45.080
Look in our documentation.

00:10:45.080 --> 00:10:46.990
We're going to link
you to the right page

00:10:46.990 --> 00:10:49.090
where you're going to
check all this information.

00:10:49.090 --> 00:10:53.500
But just keep in mind that after
doing all these connections,

00:10:53.500 --> 00:10:54.910
both consoles--

00:10:54.910 --> 00:10:57.100
Actions on Google Console
and Play Console--

00:10:57.100 --> 00:11:00.430
they will understand that we
are the same project, right?

00:11:00.430 --> 00:11:01.632
The same developer.

00:11:01.632 --> 00:11:02.590
AZA TULEPBERGENOV: Yes.

00:11:02.590 --> 00:11:05.500
NETO MARIN: So OK,
they have this--

00:11:05.500 --> 00:11:09.670
because I said up to 48
hours because the first step,

00:11:09.670 --> 00:11:12.280
in general, takes
up to 24 hours.

00:11:12.280 --> 00:11:14.712
And the second step
takes another 24 hours.

00:11:14.712 --> 00:11:15.670
AZA TULEPBERGENOV: Yes.

00:11:15.670 --> 00:11:18.400
NETO MARIN: So up
to 48 hours, you'll

00:11:18.400 --> 00:11:20.745
be able to start selling stuff.

00:11:20.745 --> 00:11:22.370
So if you need to
sell something today,

00:11:22.370 --> 00:11:24.140
don't start this morning.

00:11:24.140 --> 00:11:27.200
So you need two days
to have this enabled.

00:11:27.200 --> 00:11:28.570
OK, cool.

00:11:28.570 --> 00:11:33.620
But people want to see actual
development, actual calls.

00:11:33.620 --> 00:11:36.880
This is just bureaucratic
stuff that we do only

00:11:36.880 --> 00:11:39.160
when you configure
the project, right?

00:11:39.160 --> 00:11:40.875
So you showed the conversation.

00:11:40.875 --> 00:11:44.260
This is pretty good, when the
user asks about the catalog.

00:11:44.260 --> 00:11:46.820
Where are we going to
handle this conversation?

00:11:46.820 --> 00:11:48.310
Are we going to use Dialogflow?

00:11:48.310 --> 00:11:50.650
AZA TULEPBERGENOV: Yes,
so we'll use Dialogflow

00:11:50.650 --> 00:11:54.040
for natural language processing
to make the conversation more

00:11:54.040 --> 00:11:54.960
intelligent.

00:11:54.960 --> 00:11:56.920
And then we'll use
Firebase functions

00:11:56.920 --> 00:11:58.070
to set up the fulfillment.

00:11:58.070 --> 00:11:58.778
NETO MARIN: Nice.

00:11:58.778 --> 00:12:01.720
So remember we are using
Firebase functions,

00:12:01.720 --> 00:12:05.150
so it means that we're going to
use the Node.js client library.

00:12:05.150 --> 00:12:08.080
But if you want to use
the Java client library,

00:12:08.080 --> 00:12:10.940
also this feature is supported
under the Java client library,

00:12:10.940 --> 00:12:13.380
so you can use your
preferred language

00:12:13.380 --> 00:12:15.560
if you don't want
to use Node.js.

00:12:15.560 --> 00:12:17.050
OK, can you show us--

00:12:17.050 --> 00:12:19.600
can you go to the data flow
and show the intents you have

00:12:19.600 --> 00:12:23.050
and how you create this show?

00:12:23.050 --> 00:12:24.550
AZA TULEPBERGENOV: Yes, sure.

00:12:24.550 --> 00:12:30.100
So in the screenshot that
we showed in the beginning,

00:12:30.100 --> 00:12:34.565
the user starts the
app by invoking it.

00:12:34.565 --> 00:12:36.690
And this is handled in this
default welcome intent.

00:12:36.690 --> 00:12:37.398
NETO MARIN: Sure.

00:12:37.398 --> 00:12:38.630
AZA TULEPBERGENOV: And--

00:12:38.630 --> 00:12:40.088
NETO MARIN: And
the welcome intent,

00:12:40.088 --> 00:12:42.160
did you change it to say,
hey, you can buy stuff?

00:12:42.160 --> 00:12:43.160
AZA TULEPBERGENOV: Yeah.

00:12:43.160 --> 00:12:45.030
So if we look at
it, essentially that

00:12:45.030 --> 00:12:49.330
first prompt that we saw in
the screenshot is defined here.

00:12:49.330 --> 00:12:53.630
And after that,
we allow the user

00:12:53.630 --> 00:12:58.040
to either start building
the order or quit.

00:12:58.040 --> 00:12:59.915
And that's what those
two intents represent.

00:12:59.915 --> 00:13:00.230
NETO MARIN: Yeah.

00:13:00.230 --> 00:13:02.180
You said a good name--
build the order.

00:13:02.180 --> 00:13:05.410
So build the order is
the intent or the way

00:13:05.410 --> 00:13:08.722
that the user will ask for
something to buy, right?

00:13:08.722 --> 00:13:09.680
AZA TULEPBERGENOV: Yes.

00:13:09.680 --> 00:13:11.320
NETO MARIN: So yes, please.

00:13:11.320 --> 00:13:13.340
How does it work?

00:13:13.340 --> 00:13:20.110
AZA TULEPBERGENOV: So
essentially, the main--

00:13:20.110 --> 00:13:23.000
the meat of the logic is
handled in the what fulfillment.

00:13:23.000 --> 00:13:23.960
NETO MARIN: OK.

00:13:23.960 --> 00:13:25.730
AZA TULEPBERGENOV:
But this intent

00:13:25.730 --> 00:13:27.362
just handles the annoying part.

00:13:27.362 --> 00:13:28.070
NETO MARIN: Yeah.

00:13:28.070 --> 00:13:28.570
Great part.

00:13:28.570 --> 00:13:30.930
For example, can you go on
the top of the page here?

00:13:30.930 --> 00:13:31.430
Yeah.

00:13:31.430 --> 00:13:33.820
So I'm seeing here the phrases.

00:13:33.820 --> 00:13:35.090
For any phrases, you add some.

00:13:35.090 --> 00:13:38.810
Let's go do it, yeah,
yes, of course, sure.

00:13:38.810 --> 00:13:42.490
This is because in
the welcome intent,

00:13:42.490 --> 00:13:44.990
you ask if the user would like
to purchase something, right?

00:13:44.990 --> 00:13:45.830
AZA TULEPBERGENOV: Yes, exactly.

00:13:45.830 --> 00:13:47.750
NETO MARIN: And then
you are picturing

00:13:47.750 --> 00:13:49.700
the potential answers.

00:13:49.700 --> 00:13:55.455
But imagine the developers are
creating something different,

00:13:55.455 --> 00:13:57.080
and they want to
handle something like,

00:13:57.080 --> 00:14:00.140
hey, I would like to see
what's available to purchase.

00:14:00.140 --> 00:14:03.350
They should also add
this training phrase,

00:14:03.350 --> 00:14:07.990
or create another instance to
handle different approaches

00:14:07.990 --> 00:14:08.798
just to make clear.

00:14:08.798 --> 00:14:11.340
Because maybe someone-- oh, I
need you do this on the welcome

00:14:11.340 --> 00:14:13.100
and just handle yes or no.

00:14:13.100 --> 00:14:16.370
But sometimes they only
handle questions about,

00:14:16.370 --> 00:14:17.570
what can I buy?

00:14:17.570 --> 00:14:19.840
What is available to buy, right?

00:14:19.840 --> 00:14:22.507
AZA TULEPBERGENOV: Yes, exactly.

00:14:22.507 --> 00:14:23.840
That would be the best practice.

00:14:23.840 --> 00:14:24.230
NETO MARIN: OK.

00:14:24.230 --> 00:14:24.800
Good, good.

00:14:24.800 --> 00:14:29.150
So let's imagine, here, we have
some of these kinds of phrases.

00:14:29.150 --> 00:14:30.740
And then you said
the next step is

00:14:30.740 --> 00:14:33.907
just, send these to the back-end
for a few minutes, right?

00:14:33.907 --> 00:14:35.240
AZA TULEPBERGENOV: Yes, exactly.

00:14:35.240 --> 00:14:38.700
So let's go to Fulfillment.

00:14:38.700 --> 00:14:39.700
NETO MARIN: Yes, please.

00:14:43.490 --> 00:14:47.510
AZA TULEPBERGENOV: So here I
have just some starter code

00:14:47.510 --> 00:14:50.995
where I define constants
and some imports.

00:14:50.995 --> 00:14:51.620
NETO MARIN: OK.

00:14:51.620 --> 00:14:56.070
AZA TULEPBERGENOV: But let
us first actually create

00:14:56.070 --> 00:14:58.400
the web hook--
the intent handler

00:14:58.400 --> 00:14:59.870
for the particular intent.

00:14:59.870 --> 00:15:00.740
NETO MARIN: OK.

00:15:00.740 --> 00:15:04.300
AZA TULEPBERGENOV: So
what I'm going to do

00:15:04.300 --> 00:15:07.540
is I already have this
nifty constant defined

00:15:07.540 --> 00:15:08.380
for build order.

00:15:08.380 --> 00:15:09.250
NETO MARIN: Cool.

00:15:09.250 --> 00:15:14.190
AZA TULEPBERGENOV: And this is
very standard client library

00:15:14.190 --> 00:15:15.930
code, as you can see.

00:15:15.930 --> 00:15:18.960
But essentially, I want to
tell the user, hey, here

00:15:18.960 --> 00:15:19.790
are the options.

00:15:19.790 --> 00:15:20.070
NETO MARIN: OK.

00:15:20.070 --> 00:15:20.970
AZA TULEPBERGENOV: Which
one do you want, right?

00:15:20.970 --> 00:15:21.678
NETO MARIN: Nice.

00:15:21.678 --> 00:15:25.810
So at this point you're going
to the Google Play Store API--

00:15:25.810 --> 00:15:26.810
AZA TULEPBERGENOV: Yeah.

00:15:26.810 --> 00:15:28.893
NETO MARIN: --and retrieving
all the products that

00:15:28.893 --> 00:15:31.390
are available, and then
telling about these products

00:15:31.390 --> 00:15:32.460
to the user, right?

00:15:32.460 --> 00:15:33.210
AZA TULEPBERGENOV: Yes, exactly.

00:15:33.210 --> 00:15:33.918
NETO MARIN: Nice.

00:15:33.918 --> 00:15:36.180
AZA TULEPBERGENOV: So I
can say something like,

00:15:36.180 --> 00:15:38.500
here's what I have available.

00:15:38.500 --> 00:15:39.720
NETO MARIN: OK.

00:15:39.720 --> 00:15:43.145
AZA TULEPBERGENOV: And then,
I can say, those are the SKUs.

00:15:43.145 --> 00:15:43.770
NETO MARIN: OK.

00:15:43.770 --> 00:15:45.895
AZA TULEPBERGENOV: And
then, which one do you want?

00:15:45.895 --> 00:15:48.570
NETO MARIN: SKUs, what is this?

00:15:48.570 --> 00:15:51.240
AZA TULEPBERGENOV: So SKUs--

00:15:51.240 --> 00:15:53.830
you can think of them
as your product IDs

00:15:53.830 --> 00:15:55.080
they define in the Play Store.

00:15:55.080 --> 00:15:56.940
Typically, you define them first
in your Play Store, and then--

00:15:56.940 --> 00:15:57.885
NETO MARIN: It's like
a product ID, right?

00:15:57.885 --> 00:15:57.970
AZA TULEPBERGENOV: Yeah.

00:15:57.970 --> 00:15:59.300
NETO MARIN: Your
product reference.

00:15:59.300 --> 00:15:59.340
AZA TULEPBERGENOV: Yeah.

00:15:59.340 --> 00:16:00.923
NETO MARIN: All the
product management

00:16:00.923 --> 00:16:02.310
is made through
the Play Console.

00:16:02.310 --> 00:16:02.550
AZA TULEPBERGENOV: Yes.

00:16:02.550 --> 00:16:05.460
NETO MARIN: So to add products,
to remove product, or manage

00:16:05.460 --> 00:16:08.340
your product, you must go
to the Google Play Console.

00:16:08.340 --> 00:16:11.200
And there, you're going
to add these SKUs.

00:16:11.200 --> 00:16:15.210
These SKUs are defined by you,
so you don't need to remember.

00:16:15.210 --> 00:16:17.730
This is something that
you have in your back-end

00:16:17.730 --> 00:16:19.000
in your library.

00:16:19.000 --> 00:16:20.550
In this case, for
example, Aza has

00:16:20.550 --> 00:16:22.340
as constants in the project.

00:16:22.340 --> 00:16:25.380
And like he's doing here,
you can use our sample

00:16:25.380 --> 00:16:28.460
to extract some of these
constants, some status,

00:16:28.460 --> 00:16:29.910
right, so they
can take advantage

00:16:29.910 --> 00:16:32.417
of all of this stuff
done by Aza, right?

00:16:32.417 --> 00:16:33.750
AZA TULEPBERGENOV: Yes, exactly.

00:16:33.750 --> 00:16:38.815
So actually, going
back to the SKUs,

00:16:38.815 --> 00:16:39.940
I need to find them, right?

00:16:39.940 --> 00:16:46.410
So I created this function
that essentially calls

00:16:46.410 --> 00:16:49.510
the digital purhase
API and gets the SKUs.

00:16:49.510 --> 00:16:56.532
So it expects the
conversation ID that you

00:16:56.532 --> 00:16:57.615
get from the conversation.

00:16:57.615 --> 00:16:59.968
NETO MARIN: Nice.

00:16:59.968 --> 00:17:02.270
And you can you show the
code on the get_skus?

00:17:02.270 --> 00:17:05.520
So just make some few
comments so the developers

00:17:05.520 --> 00:17:07.109
can understand what's
happening here.

00:17:07.109 --> 00:17:08.067
AZA TULEPBERGENOV: Yes.

00:17:08.067 --> 00:17:13.155
So the get_skus is right here.

00:17:13.155 --> 00:17:13.780
NETO MARIN: OK.

00:17:13.780 --> 00:17:15.905
AZA TULEPBERGENOV: And
essentially what we're doing

00:17:15.905 --> 00:17:17.630
is we're first
authorized with the API

00:17:17.630 --> 00:17:19.060
by getting the
JavaScript tokens.

00:17:19.060 --> 00:17:20.310
NETO MARIN: The tokens, right.

00:17:20.310 --> 00:17:22.310
AZA TULEPBERGENOV: And
then we make this request

00:17:22.310 --> 00:17:23.378
to the get_skus endpoint.

00:17:23.378 --> 00:17:25.170
NETO MARIN: So yeah,
this is, for example--

00:17:25.170 --> 00:17:29.685
the fetch(endpoints(get_skus))
is the actual API call, right?

00:17:29.685 --> 00:17:31.060
AZA TULEPBERGENOV:
Yeah, exactly.

00:17:31.060 --> 00:17:33.930
So the get_skus is this
endpoint right here.

00:17:33.930 --> 00:17:34.770
NETO MARIN: Exactly.

00:17:34.770 --> 00:17:39.780
And these endpoints are, at
least in our documentation,

00:17:39.780 --> 00:17:43.740
default. So you have
all the end points.

00:17:43.740 --> 00:17:45.480
You have your product,
your package name.

00:17:45.480 --> 00:17:48.540
This is why package name is
so important because here, I

00:17:48.540 --> 00:17:50.832
see that we are using it here
to create the URL, right?

00:17:50.832 --> 00:17:51.957
AZA TULEPBERGENOV: Exactly.

00:17:51.957 --> 00:17:53.050
Yes, it's part of the URL.

00:17:53.050 --> 00:17:55.440
NETO MARIN: So a cool
thing, again, it's

00:17:55.440 --> 00:17:57.120
all JSON-based, right?

00:17:57.120 --> 00:17:58.850
So it's just using JSON.

00:17:58.850 --> 00:18:01.080
If I don't want
to use JS or Java,

00:18:01.080 --> 00:18:03.790
I'm using Neto's new language.

00:18:03.790 --> 00:18:06.030
So I can use JSON.

00:18:06.030 --> 00:18:07.170
And it's good.

00:18:07.170 --> 00:18:09.300
It's great because
I can see that you

00:18:09.300 --> 00:18:11.535
can wrap these and reuse
in other projects, right?

00:18:11.535 --> 00:18:12.660
AZA TULEPBERGENOV: Exactly.

00:18:12.660 --> 00:18:13.410
NETO MARIN: Nice, nice.

00:18:13.410 --> 00:18:13.730
AZA TULEPBERGENOV: Yeah.

00:18:13.730 --> 00:18:14.655
So--

00:18:14.655 --> 00:18:15.280
NETO MARIN: OK.

00:18:15.280 --> 00:18:17.910
These SKUs are going to
be returned as a JSON,

00:18:17.910 --> 00:18:22.250
and the client library will
return an array, right?

00:18:22.250 --> 00:18:23.250
AZA TULEPBERGENOV: Yeah.

00:18:23.250 --> 00:18:26.780
So this will be
an array of SKUs.

00:18:26.780 --> 00:18:31.350
And here, I just defined
quickly what the typical SKU

00:18:31.350 --> 00:18:32.020
would look like.

00:18:32.020 --> 00:18:32.130
NETO MARIN: Nice.

00:18:32.130 --> 00:18:32.970
AZA TULEPBERGENOV: So you
can see all the properties

00:18:32.970 --> 00:18:33.870
and everything.

00:18:33.870 --> 00:18:35.820
So this will return
an array of those.

00:18:35.820 --> 00:18:40.740
But we want to make a list of
strings to make it simpler.

00:18:40.740 --> 00:18:44.070
So I actually created
another function that--

00:18:44.070 --> 00:18:45.695
NETO MARIN: He's a
very handy guy, huh?

00:18:48.195 --> 00:18:49.820
AZA TULEPBERGENOV:
BuildSimpleResponse.

00:18:49.820 --> 00:18:50.450
So--

00:18:50.450 --> 00:18:52.370
NETO MARIN: OK.

00:18:52.370 --> 00:18:55.090
AZA TULEPBERGENOV: So we
just expect that and--

00:18:55.090 --> 00:18:56.757
NETO MARIN: All it's
going to do is just

00:18:56.757 --> 00:18:59.443
break this array in title,
description, and price, right?

00:18:59.443 --> 00:19:01.360
AZA TULEPBERGENOV: And
a comma, yeah, between.

00:19:01.360 --> 00:19:02.360
NETO MARIN: And a comma.

00:19:02.360 --> 00:19:05.230
OK, so again, this
is a sample, right?

00:19:05.230 --> 00:19:07.720
If you are developing
something for production,

00:19:07.720 --> 00:19:11.000
please use our base
cards, use carousel.

00:19:11.000 --> 00:19:13.210
You have a bunch
of resources you

00:19:13.210 --> 00:19:15.277
can use to make it more visual.

00:19:15.277 --> 00:19:16.360
AZA TULEPBERGENOV: Mm-hmm.

00:19:16.360 --> 00:19:17.818
NETO MARIN: And
remember, sometimes

00:19:17.818 --> 00:19:21.400
reading the product's
name, if you have,

00:19:21.400 --> 00:19:24.460
like, 10 products
on the conversation,

00:19:24.460 --> 00:19:25.790
it's not that good, right?

00:19:25.790 --> 00:19:26.830
AZA TULEPBERGENOV: Yes.

00:19:26.830 --> 00:19:29.267
NETO MARIN: So you
can do pagination.

00:19:29.267 --> 00:19:30.725
There's a lot of
best practices you

00:19:30.725 --> 00:19:32.980
can check in our
Conversation Design

00:19:32.980 --> 00:19:34.750
page in our documentation.

00:19:34.750 --> 00:19:37.580
But just keep this in mind.

00:19:37.580 --> 00:19:41.500
You don't want to read
10 products available.

00:19:41.500 --> 00:19:43.310
You can showcase on the list.

00:19:43.310 --> 00:19:47.250
Or, for example, say the
first three products,

00:19:47.250 --> 00:19:49.250
and show the rest of the
products in a carousel,

00:19:49.250 --> 00:19:49.600
for example.

00:19:49.600 --> 00:19:49.990
AZA TULEPBERGENOV: Exactly.

00:19:49.990 --> 00:19:50.140
Yeah.

00:19:50.140 --> 00:19:51.430
This is, in fact,
the best practice.

00:19:51.430 --> 00:19:51.820
NETO MARIN: Cool.

00:19:51.820 --> 00:19:52.653
Yeah, best practice.

00:19:52.653 --> 00:19:53.180
[LAUGHS]

00:19:53.680 --> 00:19:55.150
OK.

00:19:55.150 --> 00:19:56.700
AZA TULEPBERGENOV:
One last one step.

00:19:56.700 --> 00:19:59.240
We want to save the SKUs
so we can reuse them later.

00:19:59.240 --> 00:20:02.050
So we store them
in user storage.

00:20:02.050 --> 00:20:02.880
NETO MARIN: OK.

00:20:02.880 --> 00:20:03.880
AZA TULEPBERGENOV: Yeah.

00:20:03.880 --> 00:20:05.297
So we're done with this intent.

00:20:05.297 --> 00:20:06.880
NETO MARIN: And this
is enough to have

00:20:06.880 --> 00:20:09.845
all the products available,
read to the user, right?

00:20:09.845 --> 00:20:10.970
AZA TULEPBERGENOV: Exactly.

00:20:10.970 --> 00:20:11.990
Yeah, that's all we need.

00:20:11.990 --> 00:20:13.032
Just a few lines of code.

00:20:13.032 --> 00:20:13.710
NETO MARIN: OK.

00:20:13.710 --> 00:20:19.220
And when I hear the product
list, then I can say, OK, yeah,

00:20:19.220 --> 00:20:24.460
I want gas, for
example, premium gas.

00:20:24.460 --> 00:20:26.470
What is-- because
you offered it to me,

00:20:26.470 --> 00:20:30.980
then I'm going to say
the name of the products.

00:20:30.980 --> 00:20:33.370
And do I need to create
entity, or will the system

00:20:33.370 --> 00:20:34.632
handle this for me?

00:20:34.632 --> 00:20:35.590
AZA TULEPBERGENOV: Yes.

00:20:35.590 --> 00:20:39.760
So you will have
to create entity.

00:20:39.760 --> 00:20:42.760
Typically, the best
practice is to create

00:20:42.760 --> 00:20:43.960
entity per product ID.

00:20:43.960 --> 00:20:44.690
NETO MARIN: Per product ID, OK.

00:20:44.690 --> 00:20:46.357
AZA TULEPBERGENOV:
And then, in fact, we

00:20:46.357 --> 00:20:48.040
can show you in the console.

00:20:48.040 --> 00:20:50.620
In the entities, we
have the SKU entity.

00:20:50.620 --> 00:20:53.080
It has all the product IDs
we have in the Play Store,

00:20:53.080 --> 00:20:54.820
and all the possible synonyms.

00:20:54.820 --> 00:20:56.542
So Dialogflow can sort of--

00:20:56.542 --> 00:20:57.250
NETO MARIN: Yeah.

00:20:57.250 --> 00:20:59.458
And this is important because
without these entities,

00:20:59.458 --> 00:21:02.280
the Dialogflow
wouldn't be able to map

00:21:02.280 --> 00:21:05.020
what you're saying to what
products are available, right?

00:21:05.020 --> 00:21:05.500
AZA TULEPBERGENOV: Yes.

00:21:05.500 --> 00:21:07.125
NETO MARIN: And
remember, sometimes you

00:21:07.125 --> 00:21:08.440
have, also, to localize this.

00:21:08.440 --> 00:21:12.040
So use the Dialogflow
localization stuff

00:21:12.040 --> 00:21:14.247
so it can create
another language entity.

00:21:14.247 --> 00:21:16.580
And then you can add, for
example, Brazilian Portuguese,

00:21:16.580 --> 00:21:18.670
Spanish, whatever
you can add here,

00:21:18.670 --> 00:21:20.650
and add the variations
for the name, right?

00:21:20.650 --> 00:21:21.330
AZA TULEPBERGENOV: Yes.

00:21:21.330 --> 00:21:21.820
NETO MARIN: Cool.

00:21:21.820 --> 00:21:22.420
OK.

00:21:22.420 --> 00:21:24.845
I said premium.

00:21:24.845 --> 00:21:25.720
What's the next step?

00:21:25.720 --> 00:21:27.540
What is the Assistant
going to do?

00:21:27.540 --> 00:21:28.730
AZA TULEPBERGENOV: Yeah.

00:21:28.730 --> 00:21:30.953
Well, in the conversation,
we ask the user, hey,

00:21:30.953 --> 00:21:31.870
which one do you want?

00:21:31.870 --> 00:21:34.305
So the user will reply to us
with the SKU that they like.

00:21:34.305 --> 00:21:34.930
NETO MARIN: OK.

00:21:34.930 --> 00:21:37.240
AZA TULEPBERGENOV: And this is
done in "Initiate the Purchase"

00:21:37.240 --> 00:21:37.965
intent.

00:21:37.965 --> 00:21:38.590
NETO MARIN: OK.

00:21:38.590 --> 00:21:41.670
So actually, now we are starting
to make the purchase, right?

00:21:41.670 --> 00:21:43.420
Until now we, are just
building the order.

00:21:43.420 --> 00:21:44.980
I like the name of the intents.

00:21:44.980 --> 00:21:46.355
AZA TULEPBERGENOV:
Exactly, yeah.

00:21:46.355 --> 00:21:48.370
NETO MARIN: So, now we
are actually starting

00:21:48.370 --> 00:21:49.790
to purchase something, right?

00:21:49.790 --> 00:21:49.840
AZA TULEPBERGENOV: Yeah.

00:21:49.840 --> 00:21:50.780
Yeah, exactly.

00:21:50.780 --> 00:21:52.238
So in fact, in this
intent, you can

00:21:52.238 --> 00:21:54.470
see all the highlighted
portions are the entities,

00:21:54.470 --> 00:21:55.560
the Dialogflow extracted.

00:21:55.560 --> 00:21:56.435
NETO MARIN: Oh, nice.

00:21:56.435 --> 00:21:57.435
AZA TULEPBERGENOV: Yeah.

00:21:57.435 --> 00:21:59.770
So again, all the logic is
done in the fulfillment.

00:21:59.770 --> 00:22:00.850
So shall we go there?

00:22:00.850 --> 00:22:03.643
NETO MARIN: Of course, please.

00:22:03.643 --> 00:22:05.560
AZA TULEPBERGENOV: So
actually, one last thing

00:22:05.560 --> 00:22:06.820
in the previous intent--

00:22:06.820 --> 00:22:09.335
because this is the asynchronous
call, we may have to--

00:22:09.335 --> 00:22:10.210
NETO MARIN: Oh, sure.

00:22:10.210 --> 00:22:11.100
AZA TULEPBERGENOV:
--do some steps there.

00:22:11.100 --> 00:22:12.100
NETO MARIN: OK.

00:22:12.100 --> 00:22:13.017
AZA TULEPBERGENOV: OK.

00:22:13.017 --> 00:22:15.690
So let's define intent handler
for "Initiate the Purchase."

00:22:15.690 --> 00:22:16.810
NETO MARIN: "Initiate
the Purchase."

00:22:16.810 --> 00:22:17.310
Right.

00:22:17.310 --> 00:22:19.435
AZA TULEPBERGENOV: So again,
it's going to have a--

00:22:19.435 --> 00:22:21.220
NETO MARIN: A conversation
and then a SKU.

00:22:21.220 --> 00:22:22.178
AZA TULEPBERGENOV: Yep.

00:22:22.178 --> 00:22:23.140
NETO MARIN: OK.

00:22:23.140 --> 00:22:26.350
And this SKU that the user
said was mapped to the--

00:22:26.350 --> 00:22:27.600
[INTERPOSING VOICES]

00:22:27.600 --> 00:22:28.135
--entities.

00:22:28.135 --> 00:22:29.260
AZA TULEPBERGENOV: Perfect.

00:22:29.260 --> 00:22:29.800
Yep.

00:22:29.800 --> 00:22:33.520
So essentially,
the client library

00:22:33.520 --> 00:22:37.810
provides this helper
class CompletePurchase

00:22:37.810 --> 00:22:41.100
that will kick start all
the [INAUDIBLE] transaction

00:22:41.100 --> 00:22:42.100
flow with the Assistant.

00:22:42.100 --> 00:22:43.130
NETO MARIN: Yeah,
this is the point.

00:22:43.130 --> 00:22:45.003
For example, this
is something I like

00:22:45.003 --> 00:22:46.420
very much on the
Android platform,

00:22:46.420 --> 00:22:48.970
and also on the Assistant.

00:22:48.970 --> 00:22:50.925
As developers, we
don't need to developer

00:22:50.925 --> 00:22:55.060
all the screens for credit
card verification, account--

00:22:55.060 --> 00:22:58.053
all these requirements.

00:22:58.053 --> 00:23:00.220
Of course, because it's a
security requirement also,

00:23:00.220 --> 00:23:01.803
because I need to
validate my account.

00:23:01.803 --> 00:23:03.280
I need to check everything else.

00:23:03.280 --> 00:23:06.025
This is good because it's
taking care of it for us, right?

00:23:06.025 --> 00:23:07.150
AZA TULEPBERGENOV: Exactly.

00:23:07.150 --> 00:23:07.890
NETO MARIN: Nice.

00:23:07.890 --> 00:23:11.210
So this will trigger
all the payment flow.

00:23:11.210 --> 00:23:12.790
We can say that, right?

00:23:12.790 --> 00:23:14.537
AZA TULEPBERGENOV: Yes.

00:23:14.537 --> 00:23:16.370
Yeah, as you can see,
we'll do a demo later.

00:23:16.370 --> 00:23:16.480
Yeah.

00:23:16.480 --> 00:23:17.220
It'll be--

00:23:17.220 --> 00:23:18.050
NETO MARIN: OK, OK.

00:23:18.050 --> 00:23:19.240
I'm just curious.

00:23:19.240 --> 00:23:20.000
Yeah, yeah, yeah.

00:23:20.000 --> 00:23:20.500
Let's go.

00:23:20.500 --> 00:23:21.708
AZA TULEPBERGENOV: All right.

00:23:21.708 --> 00:23:23.220
So essentially,
it takes a SKU ID.

00:23:23.220 --> 00:23:24.370
NETO MARIN: OK.

00:23:24.370 --> 00:23:29.590
AZA TULEPBERGENOV: And so you
remember how we stored the SKUs

00:23:29.590 --> 00:23:31.072
in the conversation storage?

00:23:31.072 --> 00:23:31.780
NETO MARIN: Yeah.

00:23:31.780 --> 00:23:34.155
AZA TULEPBERGENOV: So that's
where we'll actually use it.

00:23:34.155 --> 00:23:37.150
We're going to fetch the
SKUs from the storage

00:23:37.150 --> 00:23:38.450
and use that SKU ID.

00:23:38.450 --> 00:23:38.620
NETO MARIN: Cool.

00:23:38.620 --> 00:23:40.790
And [? that'll void ?] those
from making other network

00:23:40.790 --> 00:23:41.100
requests.

00:23:41.100 --> 00:23:41.530
AZA TULEPBERGENOV: Exactly.

00:23:41.530 --> 00:23:41.650
NETO MARIN: Yeah.

00:23:41.650 --> 00:23:42.030
Cool.

00:23:42.030 --> 00:23:43.030
AZA TULEPBERGENOV: Yeah.

00:23:43.030 --> 00:23:46.490
So we have selectedSku.skuId.

00:23:46.490 --> 00:23:50.058
So again, as you see, skuID
is part of the SKU object.

00:23:50.058 --> 00:23:51.100
NETO MARIN: Object, yeah.

00:23:51.100 --> 00:23:52.260
AZA TULEPBERGENOV: So that's
what this line of code does.

00:23:52.260 --> 00:23:52.500
NETO MARIN: Good.

00:23:52.500 --> 00:23:53.320
Cool.

00:23:53.320 --> 00:23:57.680
AZA TULEPBERGENOV: So how to
get the selected SKU, again,

00:23:57.680 --> 00:24:00.050
there is a helper
function findSkuById--

00:24:00.050 --> 00:24:01.910
NETO MARIN: Mm-hmm.

00:24:01.910 --> 00:24:03.910
AZA TULEPBERGENOV: --that
expects conversation--

00:24:03.910 --> 00:24:04.952
NETO MARIN: Conversation.

00:24:04.952 --> 00:24:05.600
OK.

00:24:05.600 --> 00:24:07.710
Yeah, the conversation
is [INAUDIBLE]

00:24:07.710 --> 00:24:10.400
because then you need to close
conversation or do something,

00:24:10.400 --> 00:24:10.610
right?

00:24:10.610 --> 00:24:12.443
You need to keep assessing
the conversation.

00:24:12.443 --> 00:24:12.943
So it's--

00:24:12.943 --> 00:24:15.235
AZA TULEPBERGENOV: Yes, or
for things like conversation

00:24:15.235 --> 00:24:15.990
ID or--

00:24:15.990 --> 00:24:16.630
NETO MARIN: Yeah, yeah.

00:24:16.630 --> 00:24:16.780
OK.

00:24:16.780 --> 00:24:17.780
AZA TULEPBERGENOV: Yeah.

00:24:17.780 --> 00:24:22.590
And then I want to say something
like, sure, here you go.

00:24:22.590 --> 00:24:24.800
NETO MARIN: And then
when the Assistant says,

00:24:24.800 --> 00:24:27.425
here you go, it will start
to trigger the payment

00:24:27.425 --> 00:24:28.040
flow, right?

00:24:28.040 --> 00:24:28.520
AZA TULEPBERGENOV: Exactly.

00:24:28.520 --> 00:24:29.020
Yeah.

00:24:29.020 --> 00:24:30.080
NETO MARIN: Nice.

00:24:30.080 --> 00:24:32.960
AZA TULEPBERGENOV: And one last
thing we also need to store.

00:24:40.380 --> 00:24:42.502
We need to remember
which SKU we actually

00:24:42.502 --> 00:24:43.460
purchased in this step.

00:24:43.460 --> 00:24:44.085
NETO MARIN: OK.

00:24:44.085 --> 00:24:45.145
AZA TULEPBERGENOV: So--

00:24:45.145 --> 00:24:45.770
NETO MARIN: OK.

00:24:45.770 --> 00:24:47.670
Yeah, we must verify--

00:24:47.670 --> 00:24:52.103
we must store what SKU the
user actually selected, right?

00:24:52.103 --> 00:24:53.520
AZA TULEPBERGENOV:
Right, exactly.

00:24:53.520 --> 00:24:54.930
NETO MARIN: OK.

00:24:54.930 --> 00:24:59.405
AZA TULEPBERGENOV: All right, so
that should do for this intent.

00:24:59.405 --> 00:25:00.030
NETO MARIN: OK.

00:25:00.030 --> 00:25:04.690
So after that, all
the requirements

00:25:04.690 --> 00:25:05.950
will be done by the Assistant.

00:25:05.950 --> 00:25:09.230
So if the product is
declined, the credit card

00:25:09.230 --> 00:25:13.840
is not accepted, or there is
an error with the product--

00:25:13.840 --> 00:25:15.190
how we can handle this?

00:25:15.190 --> 00:25:17.452
Because I imagine all this--

00:25:17.452 --> 00:25:19.270
OK, I start at this point.

00:25:19.270 --> 00:25:22.870
But it won't go back to me,
and then I send back, right?

00:25:22.870 --> 00:25:25.662
This will be triggered by
the Home Assistant, right?

00:25:25.662 --> 00:25:26.620
AZA TULEPBERGENOV: Yes.

00:25:26.620 --> 00:25:32.410
So once we send this new
CompletePurchase object

00:25:32.410 --> 00:25:33.690
to the Assistant--

00:25:33.690 --> 00:25:34.420
NETO MARIN: OK.

00:25:34.420 --> 00:25:35.050
AZA TULEPBERGENOV:
--this process

00:25:35.050 --> 00:25:36.730
will start with the
Assistant, and it

00:25:36.730 --> 00:25:38.800
will return us the
status code with how

00:25:38.800 --> 00:25:40.755
the operation went through.

00:25:40.755 --> 00:25:42.880
NETO MARIN: And this will
be triggered by an event?

00:25:42.880 --> 00:25:43.710
AZA TULEPBERGENOV:
Oh, that's right.

00:25:43.710 --> 00:25:44.418
NETO MARIN: Yeah.

00:25:44.418 --> 00:25:46.660
So we have to map this
event in our agents, right?

00:25:46.660 --> 00:25:47.785
AZA TULEPBERGENOV: Exactly.

00:25:47.785 --> 00:25:50.458
So in the final
intent of this agent

00:25:50.458 --> 00:25:52.000
where I've described
purchase status.

00:25:52.000 --> 00:25:52.320
NETO MARIN: OK.

00:25:52.320 --> 00:25:55.030
AZA TULEPBERGENOV: And it takes
actions_intent_COMPLETE_PURCHASE

00:25:55.030 --> 00:25:55.530
event.

00:25:55.530 --> 00:25:56.940
NETO MARIN: Yeah, this
is very important, right?

00:25:56.940 --> 00:25:57.060
AZA TULEPBERGENOV: Exactly.

00:25:57.060 --> 00:25:57.340
Yeah.

00:25:57.340 --> 00:25:59.798
NETO MARIN: Yeah, because if
you don't map this event here,

00:25:59.798 --> 00:26:02.260
you won't be able to receive
the result of the purchase.

00:26:02.260 --> 00:26:02.500
AZA TULEPBERGENOV: Yeah.

00:26:02.500 --> 00:26:03.958
NETO MARIN: And
you will never know

00:26:03.958 --> 00:26:06.980
the purchase ID, the receipt.

00:26:06.980 --> 00:26:08.068
So it would be a mess.

00:26:08.068 --> 00:26:09.610
You don't know that
the user actually

00:26:09.610 --> 00:26:10.600
did the purchase, right?

00:26:10.600 --> 00:26:11.100
OK.

00:26:11.100 --> 00:26:12.745
Of course, you can
go through the API

00:26:12.745 --> 00:26:13.870
and check out the purchase.

00:26:13.870 --> 00:26:17.860
But on your flow, the user
will get back to your action.

00:26:17.860 --> 00:26:20.170
Your action won't
respond to that,

00:26:20.170 --> 00:26:21.700
so it's not a good practice.

00:26:21.700 --> 00:26:22.740
AZA TULEPBERGENOV: Yeah, it
won't be a very good user

00:26:22.740 --> 00:26:23.300
experience.

00:26:23.300 --> 00:26:24.320
NETO MARIN: Yeah.

00:26:24.320 --> 00:26:24.820
Great.

00:26:24.820 --> 00:26:30.563
So remember, add these intents
to handle these events.

00:26:30.563 --> 00:26:32.980
But then we don't need to add
training phrases or nothing,

00:26:32.980 --> 00:26:33.210
right?

00:26:33.210 --> 00:26:33.550
AZA TULEPBERGENOV: Nope.

00:26:33.550 --> 00:26:34.050
Nothing.

00:26:34.050 --> 00:26:37.870
In fact, all the experience
will be through the Assistant.

00:26:37.870 --> 00:26:38.382
Yeah.

00:26:38.382 --> 00:26:39.340
NETO MARIN: Cool, cool.

00:26:39.340 --> 00:26:41.412
So then, you enable
fulfillment, I imagine.

00:26:41.412 --> 00:26:42.370
AZA TULEPBERGENOV: Yes.

00:26:42.370 --> 00:26:45.380
NETO MARIN: And then, well,
the fulfillment again.

00:26:45.380 --> 00:26:47.590
AZA TULEPBERGENOV: All right.

00:26:47.590 --> 00:26:50.170
NETO MARIN: And now you need
to check what happened, right?

00:26:50.170 --> 00:26:51.295
AZA TULEPBERGENOV: Exactly.

00:26:51.295 --> 00:26:54.555
So there's a bunch of status
codes that the API returns.

00:26:54.555 --> 00:26:55.180
NETO MARIN: OK.

00:26:55.180 --> 00:26:57.347
AZA TULEPBERGENOV: And
again, I have these constants

00:26:57.347 --> 00:26:58.600
that have all of them.

00:26:58.600 --> 00:26:59.380
NETO MARIN: Yes.

00:26:59.380 --> 00:27:01.510
AZA TULEPBERGENOV: So
what we'll need to do

00:27:01.510 --> 00:27:06.760
is create an event handler
for DESCRIBE_PURCHASE_STATUS.

00:27:06.760 --> 00:27:07.570
NETO MARIN: OK.

00:27:07.570 --> 00:27:10.590
AZA TULEPBERGENOV: And then--

00:27:10.590 --> 00:27:14.887
so the purchase status
will come as an argument

00:27:14.887 --> 00:27:15.720
in the conversation.

00:27:15.720 --> 00:27:16.345
NETO MARIN: OK.

00:27:16.345 --> 00:27:21.432
AZA TULEPBERGENOV: So
we want to access it

00:27:21.432 --> 00:27:22.390
through client library.

00:27:22.390 --> 00:27:23.560
NETO MARIN: Client library, OK.

00:27:23.560 --> 00:27:25.200
AZA TULEPBERGENOV: So
COMPLETE_PURCHASE_VALUE.

00:27:25.200 --> 00:27:25.580
NETO MARIN: OK.

00:27:25.580 --> 00:27:27.610
And this value for
[INAUDIBLE] for the argument

00:27:27.610 --> 00:27:30.050
is also released in our
documentation, right?

00:27:30.050 --> 00:27:32.318
It's not something
you just figure out.

00:27:32.318 --> 00:27:33.610
You check in the documentation.

00:27:33.610 --> 00:27:34.510
It's there, right?

00:27:34.510 --> 00:27:35.040
AZA TULEPBERGENOV: Yes, exactly.

00:27:35.040 --> 00:27:35.160
Yep.

00:27:35.160 --> 00:27:35.530
NETO MARIN: OK.

00:27:35.530 --> 00:27:37.210
AZA TULEPBERGENOV:
It's right there.

00:27:37.210 --> 00:27:41.695
And then the purchase status
is part of this argument.

00:27:41.695 --> 00:27:42.320
NETO MARIN: OK.

00:27:42.320 --> 00:27:46.740
AZA TULEPBERGENOV: So we
do arg.purchaseStatus.

00:27:46.740 --> 00:27:47.580
NETO MARIN: OK.

00:27:47.580 --> 00:27:50.480
AZA TULEPBERGENOV: And
now, essentially, we

00:27:50.480 --> 00:27:52.880
need to match the status
against all the API code.

00:27:52.880 --> 00:27:53.950
NETO MARIN: OK, OK.

00:27:53.950 --> 00:27:56.940
Don't need to go through
all these titles.

00:27:56.940 --> 00:27:59.090
I think it's not
really necessary.

00:27:59.090 --> 00:28:01.820
But there is, for example,
some styles we can--

00:28:01.820 --> 00:28:02.960
successful, right?

00:28:02.960 --> 00:28:03.440
AZA TULEPBERGENOV: Successful.

00:28:03.440 --> 00:28:04.760
And maybe, if you
already own the item.

00:28:04.760 --> 00:28:05.750
So it will reject it.

00:28:05.750 --> 00:28:05.930
NETO MARIN: Yeah.

00:28:05.930 --> 00:28:07.970
Remember when I said
it's consumable or not.

00:28:07.970 --> 00:28:08.270
AZA TULEPBERGENOV: Yes.

00:28:08.270 --> 00:28:10.700
NETO MARIN: So if you're
trying to purchase again

00:28:10.700 --> 00:28:14.200
a product that's consumable,
and you didn't consume it,

00:28:14.200 --> 00:28:17.030
what's going to happen is you
won't be able to purchase it.

00:28:17.030 --> 00:28:17.240
AZA TULEPBERGENOV: Yes.

00:28:17.240 --> 00:28:19.040
This return code with
the already own item--

00:28:19.040 --> 00:28:19.550
NETO MARIN: Already own item.

00:28:19.550 --> 00:28:19.850
Yeah.

00:28:19.850 --> 00:28:21.590
So you need-- so
for example, imagine

00:28:21.590 --> 00:28:24.920
you are developing a game
and you are selling coins.

00:28:24.920 --> 00:28:29.150
And the user tried to buy more
coin, receive this status.

00:28:29.150 --> 00:28:30.950
It's your fault. It's
not the user's fault.

00:28:30.950 --> 00:28:33.173
So you should, for
example, consume this.

00:28:33.173 --> 00:28:35.340
We're going to talk about
consuming in a little bit.

00:28:35.340 --> 00:28:36.673
And then you can consume this.

00:28:36.673 --> 00:28:38.840
And then they will be able
to purchase again, right?

00:28:38.840 --> 00:28:39.260
AZA TULEPBERGENOV: Exactly.

00:28:39.260 --> 00:28:39.590
Yes.

00:28:39.590 --> 00:28:41.300
NETO MARIN: And also, there
are other errors, for example,

00:28:41.300 --> 00:28:41.800
right?

00:28:41.800 --> 00:28:43.820
The transaction declined.

00:28:43.820 --> 00:28:45.290
There are some other--

00:28:45.290 --> 00:28:46.300
AZA TULEPBERGENOV: Yeah.

00:28:46.300 --> 00:28:47.810
The entire list is here.

00:28:47.810 --> 00:28:50.690
So, UNSPECIFIED, CANCELLED,
CHANGE_REQUESTED.

00:28:50.690 --> 00:28:51.650
So for example--

00:28:51.650 --> 00:28:52.010
NETO MARIN: Oh, yes.

00:28:52.010 --> 00:28:53.540
AZA TULEPBERGENOV: A
visitor changed their mind.

00:28:53.540 --> 00:28:54.870
NETO MARIN: This is very
interesting, for example.

00:28:54.870 --> 00:28:56.210
This is something very cool.

00:28:56.210 --> 00:29:00.110
For example, imagine the user
started flow from your action.

00:29:00.110 --> 00:29:03.440
And when he's
browsing the products,

00:29:03.440 --> 00:29:04.635
OK, no, I changed my mind.

00:29:04.635 --> 00:29:07.010
I'm going to buy this other
product, something like that.

00:29:07.010 --> 00:29:09.720
You receive a notification
that the order changed.

00:29:09.720 --> 00:29:09.910
AZA TULEPBERGENOV: Yes.

00:29:09.910 --> 00:29:11.670
NETO MARIN: So you must
restart the order, right?

00:29:11.670 --> 00:29:12.050
AZA TULEPBERGENOV: Yes.

00:29:12.050 --> 00:29:13.790
NETO MARIN: So
just keep in mind.

00:29:13.790 --> 00:29:17.540
So like I said, we have
very advanced scenarios

00:29:17.540 --> 00:29:19.800
that are covered by the sample.

00:29:19.800 --> 00:29:23.310
But right now, we are going on
the happy path, I could say.

00:29:23.310 --> 00:29:25.030
So OK.

00:29:25.030 --> 00:29:27.212
Let's check success and
then put an else just

00:29:27.212 --> 00:29:28.170
to [? end ?] the other.

00:29:28.170 --> 00:29:28.475
AZA TULEPBERGENOV: Yeah, sure.

00:29:28.475 --> 00:29:29.000
Yeah.

00:29:29.000 --> 00:29:33.240
We can do if status equals OK.

00:29:33.240 --> 00:29:34.140
NETO MARIN: OK.

00:29:34.140 --> 00:29:36.120
AZA TULEPBERGENOV:
And then maybe--

00:29:36.120 --> 00:29:36.850
NETO MARIN: Else.

00:29:36.850 --> 00:29:37.850
AZA TULEPBERGENOV: Yeah.

00:29:37.850 --> 00:29:40.070
NETO MARIN: If something
went wrong and then--

00:29:40.070 --> 00:29:40.560
AZA TULEPBERGENOV: API_CODES--

00:29:40.560 --> 00:29:42.310
NETO MARIN: It's not
user friendly, please

00:29:42.310 --> 00:29:44.730
don't say just something
went wrong for your user.

00:29:44.730 --> 00:29:47.660
Please do the correct stuff.

00:29:47.660 --> 00:29:48.660
AZA TULEPBERGENOV: Yeah.

00:29:48.660 --> 00:29:50.210
So here, we checked if
it's just OK and owned.

00:29:50.210 --> 00:29:50.730
NETO MARIN: Uh-huh.

00:29:50.730 --> 00:29:53.022
AZA TULEPBERGENOV: So we
can say something like--

00:29:53.022 --> 00:29:53.480
NETO MARIN: Congrats.

00:29:53.480 --> 00:29:55.170
AZA TULEPBERGENOV:
Yeah, congratulations.

00:29:55.170 --> 00:29:56.420
NETO MARIN: You gave me money.

00:29:56.420 --> 00:29:57.721
No, you purchased something.

00:29:57.721 --> 00:30:00.810
AZA TULEPBERGENOV: You've
successfully purchased an item.

00:30:00.810 --> 00:30:02.855
NETO MARIN: OK, cool.

00:30:02.855 --> 00:30:04.980
AZA TULEPBERGENOV: And
maybe you can ask, would you

00:30:04.980 --> 00:30:06.900
like to do anything else?

00:30:06.900 --> 00:30:07.740
NETO MARIN: OK.

00:30:07.740 --> 00:30:09.657
AZA TULEPBERGENOV: To
do anything-- maybe they

00:30:09.657 --> 00:30:11.040
want to buy something again.

00:30:11.040 --> 00:30:11.957
NETO MARIN: I hope so.

00:30:11.957 --> 00:30:13.920
AZA TULEPBERGENOV: Yeah.

00:30:13.920 --> 00:30:15.690
And then if it's already owned--

00:30:15.690 --> 00:30:17.680
NETO MARIN: You can say--

00:30:17.680 --> 00:30:21.210
AZA TULEPBERGENOV: Well,
here, yeah, we can say,

00:30:21.210 --> 00:30:24.300
sorry, the transaction didn't
happen because you already

00:30:24.300 --> 00:30:25.070
own the item.

00:30:25.070 --> 00:30:29.360
NETO MARIN: Or, for example,
if I decide it was my mistake,

00:30:29.360 --> 00:30:34.020
and I would like to
trigger a consume call.

00:30:34.020 --> 00:30:36.570
I know maybe it's not the
right place to do this.

00:30:36.570 --> 00:30:39.030
But can you just show
how a consume call

00:30:39.030 --> 00:30:40.238
works so they can understand?

00:30:40.238 --> 00:30:41.905
AZA TULEPBERGENOV:
Actually, good catch.

00:30:41.905 --> 00:30:42.910
I made a bug in my code.

00:30:42.910 --> 00:30:46.973
So here, if purchase
went through,

00:30:46.973 --> 00:30:49.140
this is when we want to
check if item is consumable,

00:30:49.140 --> 00:30:50.250
and then try to consume it.

00:30:50.250 --> 00:30:51.208
NETO MARIN: Yeah, yeah.

00:30:51.208 --> 00:30:56.797
AZA TULEPBERGENOV: So again,
there is a utility function

00:30:56.797 --> 00:30:57.380
that I wrote--

00:30:57.380 --> 00:30:57.640
NETO MARIN: OK.

00:30:57.640 --> 00:30:59.130
AZA TULEPBERGENOV:
--that can check

00:30:59.130 --> 00:31:01.560
if the purchase
item is consumable

00:31:01.560 --> 00:31:02.975
based on the consumable IDs.

00:31:02.975 --> 00:31:03.420
NETO MARIN: Right.

00:31:03.420 --> 00:31:05.070
AZA TULEPBERGENOV: And
consumable IDs is something

00:31:05.070 --> 00:31:06.183
that you define yourself.

00:31:06.183 --> 00:31:06.850
NETO MARIN: Yes.

00:31:06.850 --> 00:31:08.080
Good point, good point.

00:31:08.080 --> 00:31:11.970
Because remember, like we said,
the product is defined by you.

00:31:11.970 --> 00:31:14.680
So you know what
products are consumable

00:31:14.680 --> 00:31:17.920
or not-- you know what
SKUs or subscriptions.

00:31:17.920 --> 00:31:20.700
So if you want to keep
these in your library,

00:31:20.700 --> 00:31:24.280
or use your own API to retrieve
these each time you do--

00:31:24.280 --> 00:31:26.347
but in this case, Aza
has an array, right--

00:31:26.347 --> 00:31:27.430
AZA TULEPBERGENOV: Mm-hmm.

00:31:27.430 --> 00:31:28.805
NETO MARIN: --for
all the product

00:31:28.805 --> 00:31:30.360
IDs because it's a sample.

00:31:30.360 --> 00:31:32.610
But again, maybe you
want to do something

00:31:32.610 --> 00:31:34.380
because you are selling
on other platforms

00:31:34.380 --> 00:31:35.720
or selling cross-platform.

00:31:35.720 --> 00:31:37.435
So this is your ID
that you define.

00:31:37.435 --> 00:31:39.810
This is just to remember,
because I think it's important.

00:31:39.810 --> 00:31:40.080
AZA TULEPBERGENOV: Yeah.

00:31:40.080 --> 00:31:41.315
So in my case, it's just gas.

00:31:41.315 --> 00:31:41.940
NETO MARIN: OK.

00:31:41.940 --> 00:31:43.300
AZA TULEPBERGENOV: So yep.

00:31:43.300 --> 00:31:47.230
And then if it is, then
we want to consume it.

00:31:47.230 --> 00:31:49.560
So doConsume is, again,
a utility function.

00:31:49.560 --> 00:31:51.590
And it consumes this ID.

00:31:51.590 --> 00:31:52.710
NETO MARIN: Nice.

00:31:52.710 --> 00:31:55.530
So what's happening
here is the API

00:31:55.530 --> 00:32:00.900
will use that same endpoint
plus the consumable endpoint.

00:32:00.900 --> 00:32:04.800
And then say, hey, consume this
product ID for this package,

00:32:04.800 --> 00:32:07.420
for this user, because
it's all linked.

00:32:07.420 --> 00:32:09.268
And then the product
will be consumable.

00:32:09.268 --> 00:32:11.310
And then the user will be
able to purchase again.

00:32:11.310 --> 00:32:12.268
AZA TULEPBERGENOV: Yes.

00:32:12.268 --> 00:32:13.130
That's how it works.

00:32:13.130 --> 00:32:13.920
That's the flow.

00:32:13.920 --> 00:32:14.970
NETO MARIN: Nice, nice.

00:32:14.970 --> 00:32:15.470
OK.

00:32:15.470 --> 00:32:16.020
AZA TULEPBERGENOV: And then--

00:32:16.020 --> 00:32:17.437
NETO MARIN: Let's
finish so we can

00:32:17.437 --> 00:32:21.670
test, and see if you will be
allowed to do the deploy dance.

00:32:21.670 --> 00:32:23.490
Do you know deploy dance?

00:32:23.490 --> 00:32:24.853
Have you rehearsed?

00:32:24.853 --> 00:32:25.770
AZA TULEPBERGENOV: Oh.

00:32:25.770 --> 00:32:26.610
Oh, man.

00:32:26.610 --> 00:32:28.027
NETO MARIN: Now
you have to dance.

00:32:28.027 --> 00:32:28.740
[LAUGHS]

00:32:28.740 --> 00:32:29.460
Look, he's--

00:32:29.460 --> 00:32:30.710
AZA TULEPBERGENOV: Wait, what?

00:32:30.710 --> 00:32:31.700
NETO MARIN: Yeah.

00:32:31.700 --> 00:32:32.650
He's kind of tense.

00:32:32.650 --> 00:32:34.350
I can feel the tension.

00:32:34.350 --> 00:32:34.860
OK.

00:32:34.860 --> 00:32:36.308
Keep going, keep going.

00:32:36.308 --> 00:32:36.808
I'm kidding.

00:32:36.808 --> 00:32:37.676
No worries.

00:32:37.676 --> 00:32:38.593
AZA TULEPBERGENOV: OK.

00:32:38.593 --> 00:32:40.530
So if item is already
owned, we just

00:32:40.530 --> 00:32:41.980
say it's an already owned item.

00:32:41.980 --> 00:32:46.290
And then if anything
else, we just return--

00:32:46.290 --> 00:32:47.040
NETO MARIN: Sorry.

00:32:47.040 --> 00:32:47.880
AZA TULEPBERGENOV: Yeah.

00:32:47.880 --> 00:32:48.797
Sorry, I'm trying to--

00:32:48.797 --> 00:32:50.140
NETO MARIN: [INAUDIBLE]

00:32:50.140 --> 00:32:50.730
AZA TULEPBERGENOV: Yeah.

00:32:50.730 --> 00:32:51.880
Again, it's not
the best practice,

00:32:51.880 --> 00:32:53.070
but for the purpose
of the sample.

00:32:53.070 --> 00:32:53.903
NETO MARIN: No, yes.

00:32:53.903 --> 00:32:56.060
Of course, of course.

00:32:56.060 --> 00:32:57.944
AZA TULEPBERGENOV: All right.

00:32:57.944 --> 00:32:59.410
Oops.

00:32:59.410 --> 00:33:00.000
OK.

00:33:00.000 --> 00:33:02.760
So I think that should be it.

00:33:02.760 --> 00:33:05.230
One last thing I just want to
show in the code real quick/

00:33:05.230 --> 00:33:07.460
NETO MARIN: Sure, sure.

00:33:07.460 --> 00:33:11.030
AZA TULEPBERGENOV: In
the doConsume thing,

00:33:11.030 --> 00:33:12.030
the doConsume endpoint--

00:33:12.030 --> 00:33:13.420
NETO MARIN: Sure.

00:33:13.420 --> 00:33:19.280
AZA TULEPBERGENOV: Again,
consume is an API call.

00:33:19.280 --> 00:33:20.280
NETO MARIN: An API call.

00:33:20.280 --> 00:33:21.238
AZA TULEPBERGENOV: Yep.

00:33:21.238 --> 00:33:23.970
And it has the consume
endpoint provided

00:33:23.970 --> 00:33:25.530
by the digital purchase API.

00:33:25.530 --> 00:33:27.155
NETO MARIN: Yeah,
and this is important

00:33:27.155 --> 00:33:30.210
because you need you to show
the purchase token, right?

00:33:30.210 --> 00:33:32.822
This token is returned when
you actually do the purchase.

00:33:32.822 --> 00:33:33.780
AZA TULEPBERGENOV: Yes.

00:33:33.780 --> 00:33:37.150
NETO MARIN: So imagine,
this purchase can be--

00:33:37.150 --> 00:33:40.800
I don't know, maybe the user
purchased this a week ago

00:33:40.800 --> 00:33:42.840
and you are consuming
it only now because it

00:33:42.840 --> 00:33:44.905
was in his inventory.

00:33:44.905 --> 00:33:46.530
And now you are
consuming this product.

00:33:46.530 --> 00:33:49.140
So you must keep
this purchase token

00:33:49.140 --> 00:33:51.002
at some point in
your application.

00:33:51.002 --> 00:33:51.960
AZA TULEPBERGENOV: Yes.

00:33:51.960 --> 00:33:52.835
NETO MARIN: OK, yeah.

00:33:54.820 --> 00:33:57.712
NETO MARIN: And then the
doConsume is just this.

00:33:57.712 --> 00:33:58.415
Yeah.

00:33:58.415 --> 00:33:59.040
NETO MARIN: OK.

00:33:59.040 --> 00:34:00.960
Yeah, sounds good.

00:34:00.960 --> 00:34:04.145
AZA TULEPBERGENOV: So I think
I've actually made a typo here.

00:34:04.145 --> 00:34:04.770
NETO MARIN: OK.

00:34:04.770 --> 00:34:05.780
AZA TULEPBERGENOV:
I'm going to fix it.

00:34:05.780 --> 00:34:06.280
Yeah.

00:34:06.280 --> 00:34:07.238
NETO MARIN: No problem.

00:34:07.238 --> 00:34:08.905
AZA TULEPBERGENOV:
All right, so I think

00:34:08.905 --> 00:34:10.110
it's ready to be deployed.

00:34:10.110 --> 00:34:11.693
NETO MARIN: I want to see that.

00:34:11.693 --> 00:34:13.110
AZA TULEPBERGENOV:
Shall we do it?

00:34:13.110 --> 00:34:14.760
NETO MARIN: Sure, please.

00:34:14.760 --> 00:34:16.920
The audience is waiting,
anxious for that.

00:34:20.580 --> 00:34:22.790
AZA TULEPBERGENOV:
So this is correct.

00:34:22.790 --> 00:34:25.208
And do firebase deploy.

00:34:25.208 --> 00:34:25.833
NETO MARIN: OK.

00:34:28.335 --> 00:34:31.590
I can feel his fear.

00:34:31.590 --> 00:34:34.370
So yes, this is the
moment the demo gods

00:34:34.370 --> 00:34:37.052
will make some problem happen.

00:34:37.052 --> 00:34:38.469
AZA TULEPBERGENOV:
Oh, I hope not.

00:34:38.469 --> 00:34:39.344
NETO MARIN: Hope not.

00:34:39.344 --> 00:34:40.159
Yes, man.

00:34:40.159 --> 00:34:42.750
This is why we hired you.

00:34:42.750 --> 00:34:43.250
OK.

00:34:43.250 --> 00:34:45.576
So in this point, we are using--

00:34:45.576 --> 00:34:47.409
we had the console, we
had the fulfillments.

00:34:47.409 --> 00:34:48.280
Set that.

00:34:48.280 --> 00:34:52.010
So you are going to
deploy this function.

00:34:52.010 --> 00:34:55.295
We can copy the URL, put it
as a fulfillment, [INAUDIBLE]

00:34:55.295 --> 00:34:56.389
to the Google Assistant.

00:34:56.389 --> 00:34:57.980
Then we can test, right?

00:34:57.980 --> 00:34:58.938
AZA TULEPBERGENOV: Yes.

00:34:58.938 --> 00:35:02.150
NETO MARIN: And can I test
this only with a phone,

00:35:02.150 --> 00:35:05.180
or can I test on my device?

00:35:05.180 --> 00:35:07.000
For example, in the simulator?

00:35:07.000 --> 00:35:08.540
There isn't any
special requirements

00:35:08.540 --> 00:35:10.383
since it's a purchase happening?

00:35:10.383 --> 00:35:11.300
AZA TULEPBERGENOV: No.

00:35:11.300 --> 00:35:15.655
So you can use any service you
like, including the simulator.

00:35:15.655 --> 00:35:16.280
NETO MARIN: OK.

00:35:16.280 --> 00:35:19.625
AZA TULEPBERGENOV:
But in the simulator,

00:35:19.625 --> 00:35:21.500
you can specify that
you want the transaction

00:35:21.500 --> 00:35:24.020
to be sandboxed, meaning
that the transaction actually

00:35:24.020 --> 00:35:24.578
won't happen.

00:35:24.578 --> 00:35:26.120
It will be, like,
a test transaction.

00:35:26.120 --> 00:35:26.770
NETO MARIN: Exactly.

00:35:26.770 --> 00:35:27.520
There's the point.

00:35:27.520 --> 00:35:29.120
What is a sandbox?

00:35:29.120 --> 00:35:32.360
Because I don't want to spend
money for my own products

00:35:32.360 --> 00:35:35.120
during development, how can I
test and make sure that I'm not

00:35:35.120 --> 00:35:36.640
spending real money on that?

00:35:36.640 --> 00:35:37.640
AZA TULEPBERGENOV: Yeah.

00:35:37.640 --> 00:35:40.130
So let's, quickly
while it's loading,

00:35:40.130 --> 00:35:43.100
go to the simulator right here.

00:35:47.140 --> 00:35:48.570
NETO MARIN: You
can choose, right?

00:35:48.570 --> 00:35:49.570
AZA TULEPBERGENOV: Yeah.

00:35:49.570 --> 00:35:52.140
So here, the development
sandbox is enabled.

00:35:52.140 --> 00:35:55.067
And it's under the
dollar sign, so you can--

00:35:55.067 --> 00:35:56.900
NETO MARIN: You are
sure that people are not

00:35:56.900 --> 00:35:59.150
spending their money
if they're doing this.

00:35:59.150 --> 00:36:01.150
And remember, it can use
[? alphabet ?] [? in ?]

00:36:01.150 --> 00:36:03.080
releases to enable
people to test.

00:36:03.080 --> 00:36:07.100
And when you have
these users register

00:36:07.100 --> 00:36:09.170
as beta testers
and alpha testers,

00:36:09.170 --> 00:36:13.138
you can add them to not
pay for the purchase.

00:36:13.138 --> 00:36:14.180
AZA TULEPBERGENOV: Right.

00:36:14.180 --> 00:36:16.055
NETO MARIN: So you can
go in the Play Console

00:36:16.055 --> 00:36:19.310
and add them as beta
test users using

00:36:19.310 --> 00:36:22.290
what account they are
using to do the purchase.

00:36:22.290 --> 00:36:24.400
And then they won't be charged.

00:36:24.400 --> 00:36:26.870
But this must be done in
the Google Play Console,

00:36:26.870 --> 00:36:29.810
just remember, because
all this management--

00:36:29.810 --> 00:36:31.250
the accounts and testing--

00:36:31.250 --> 00:36:34.610
it's made through the
Google Play Console, right?

00:36:34.610 --> 00:36:35.893
So let's see if it's deployed.

00:36:35.893 --> 00:36:36.810
AZA TULEPBERGENOV: OK.

00:36:36.810 --> 00:36:37.610
It did.

00:36:37.610 --> 00:36:39.020
NETO MARIN: So that's awesome.

00:36:39.020 --> 00:36:40.170
Can you dance?

00:36:40.170 --> 00:36:41.820
The deploy dance, man, no?

00:36:41.820 --> 00:36:43.290
Yes, it's working.

00:36:43.290 --> 00:36:43.790
Yes.

00:36:43.790 --> 00:36:44.340
AZA TULEPBERGENOV: All right.

00:36:44.340 --> 00:36:46.840
NETO MARIN: Yeah, you're
a true [INAUDIBLE]..

00:36:46.840 --> 00:36:47.990
So OK.

00:36:47.990 --> 00:36:48.740
It's working.

00:36:48.740 --> 00:36:51.810
So you have here your web hook.

00:36:51.810 --> 00:36:55.280
You want to copy this and
paste there to integrate.

00:36:55.280 --> 00:36:59.150
AZA TULEPBERGENOV:
Yeah, so we may

00:36:59.150 --> 00:37:01.160
need to get the URL from
the Firebase Console.

00:37:01.160 --> 00:37:03.790
NETO MARIN: OK, on Dialogflow.

00:37:03.790 --> 00:37:04.790
AZA TULEPBERGENOV: Yeah.

00:37:04.790 --> 00:37:05.623
NETO MARIN: So cool.

00:37:05.623 --> 00:37:07.640
This screen is very
interesting because you

00:37:07.640 --> 00:37:12.680
are accessing the Firebase
project from the back-end.

00:37:12.680 --> 00:37:15.740
But I didn't see you
creating a Firebase project.

00:37:15.740 --> 00:37:17.080
It's all together, right?

00:37:17.080 --> 00:37:18.080
AZA TULEPBERGENOV: Yeah.

00:37:18.080 --> 00:37:19.830
So once you create your--

00:37:19.830 --> 00:37:22.070
in Actions Console or in
Dialogflow, either way,

00:37:22.070 --> 00:37:24.143
it will create all the other--

00:37:24.143 --> 00:37:25.310
NETO MARIN: Cloud projects--

00:37:25.310 --> 00:37:26.143
[INTERPOSING VOICES]

00:37:26.143 --> 00:37:26.750
Yes, cool.

00:37:26.750 --> 00:37:28.403
And here you could
see the log, right?

00:37:28.403 --> 00:37:29.570
AZA TULEPBERGENOV: The logs?

00:37:29.570 --> 00:37:30.230
Yeah.

00:37:30.230 --> 00:37:31.860
I'm interested, right
now, in the function name,

00:37:31.860 --> 00:37:32.550
the endpoint.

00:37:32.550 --> 00:37:37.850
So I'm going to go to
functions, and this URL--

00:37:37.850 --> 00:37:38.690
NETO MARIN: Cool.

00:37:38.690 --> 00:37:40.190
AZA TULEPBERGENOV:
--is what I need.

00:37:43.215 --> 00:37:45.090
And then we'll use this
URL in a Dialogflow--

00:37:45.090 --> 00:37:45.545
NETO MARIN: Cool.

00:37:45.545 --> 00:37:46.378
In the fulfillment--

00:37:46.378 --> 00:37:47.370
[INTERPOSING VOICES]

00:37:47.370 --> 00:37:48.370
AZA TULEPBERGENOV: Yes.

00:37:48.370 --> 00:37:48.800
NETO MARIN: So, yes.

00:37:48.800 --> 00:37:49.280
It's right there.

00:37:49.280 --> 00:37:49.940
AZA TULEPBERGENOV:
It's already there.

00:37:49.940 --> 00:37:50.290
OK.

00:37:50.290 --> 00:37:50.565
NETO MARIN: Great.

00:37:50.565 --> 00:37:51.420
BOTH: Save.

00:37:51.420 --> 00:37:53.200
NETO MARIN: So time
to test, right?

00:37:53.200 --> 00:37:56.920
Let's see if the code is
working, if everything is OK.

00:37:56.920 --> 00:38:00.280
And for now, let's
try on the simulator.

00:38:00.280 --> 00:38:02.440
I think it's easier to
see all the conversation

00:38:02.440 --> 00:38:05.110
and the formation here, right?

00:38:05.110 --> 00:38:07.010
So, please.

00:38:07.010 --> 00:38:08.410
AZA TULEPBERGENOV: All right.

00:38:08.410 --> 00:38:09.743
So we're going to evoke the app.

00:38:09.743 --> 00:38:10.660
AUTOMATED VOICE: Sure.

00:38:10.660 --> 00:38:12.490
Here's the test version
of Digital Goods.

00:38:12.490 --> 00:38:14.937
[BING]

00:38:14.937 --> 00:38:15.770
[INTERPOSING VOICES]

00:38:15.770 --> 00:38:17.730
NETO MARIN: Say yes, you
want to buy something.

00:38:17.730 --> 00:38:17.880
OK.

00:38:17.880 --> 00:38:18.930
AUTOMATED VOICE: Here is
what I have available.

00:38:18.930 --> 00:38:19.680
Premium car.

00:38:19.680 --> 00:38:22.830
Trivial drive sample
test, unlimited gas.

00:38:22.830 --> 00:38:25.410
Trivial drive sample
test, monthly gold.

00:38:25.410 --> 00:38:27.480
Trivial drive sample
test, yearly gold.

00:38:27.480 --> 00:38:29.925
Trivial drive sample test.

00:38:29.925 --> 00:38:31.387
Which one do you want?

00:38:31.387 --> 00:38:32.220
NETO MARIN: You see?

00:38:32.220 --> 00:38:34.290
This is listing all of
the SKUs available, right?

00:38:34.290 --> 00:38:35.380
So choose one.

00:38:35.380 --> 00:38:36.380
AZA TULEPBERGENOV: Sure.

00:38:36.380 --> 00:38:39.000
Let's do the unlimited gas.

00:38:39.000 --> 00:38:41.970
NETO MARIN: OK, you
have money, man.

00:38:41.970 --> 00:38:43.230
OK.

00:38:43.230 --> 00:38:45.120
So now imagine you are saying--

00:38:45.120 --> 00:38:46.110
AUTOMATED VOICE: Here's
your order summary.

00:38:46.110 --> 00:38:46.920
Your total is--

00:38:46.920 --> 00:38:47.040
NETO MARIN: Great.

00:38:47.040 --> 00:38:48.270
AUTOMATED VOICE: --$1.99.

00:38:48.270 --> 00:38:49.110
NETO MARIN: Oh.

00:38:49.110 --> 00:38:50.460
AUTOMATED VOICE: Ready to buy?

00:38:50.460 --> 00:38:51.360
NETO MARIN: Yeah, it's good.

00:38:51.360 --> 00:38:51.520
AZA TULEPBERGENOV: Yeah.

00:38:51.520 --> 00:38:51.980
NETO MARIN: Sure.

00:38:51.980 --> 00:38:52.480
Yes.

00:38:56.010 --> 00:38:57.278
So let's see.

00:38:57.278 --> 00:38:58.320
My account is configured.

00:38:58.320 --> 00:38:59.280
I have money.

00:38:59.280 --> 00:39:00.613
AUTOMATED VOICE: You're all set.

00:39:00.613 --> 00:39:02.250
Your receipt is on its way.

00:39:02.250 --> 00:39:04.433
Would you like to continue
where you left off?

00:39:04.433 --> 00:39:05.850
NETO MARIN: Yes,
let's keep going.

00:39:05.850 --> 00:39:06.870
AZA TULEPBERGENOV: Sure.

00:39:06.870 --> 00:39:09.510
NETO MARIN: So it's back
to our action, right?

00:39:09.510 --> 00:39:11.640
AZA TULEPBERGENOV: Yes.

00:39:11.640 --> 00:39:14.050
NETO MARIN: OK, so
this is a cool thing.

00:39:14.050 --> 00:39:17.220
Do you realize that we
changed some scopes, right?

00:39:17.220 --> 00:39:21.030
Because then we started
the digital goods sample,

00:39:21.030 --> 00:39:23.160
and then the
Assistant takes over

00:39:23.160 --> 00:39:24.938
to do all of the purchase flow.

00:39:24.938 --> 00:39:26.730
And this is important
because then the user

00:39:26.730 --> 00:39:29.890
knows who is handling this
purchase is the Google

00:39:29.890 --> 00:39:30.780
Assistant.

00:39:30.780 --> 00:39:34.050
So as developers,
we don't have access

00:39:34.050 --> 00:39:36.390
to your credit card,
nothing like that.

00:39:36.390 --> 00:39:38.610
It's very confidential data.

00:39:38.610 --> 00:39:40.610
And this is why you
hear these [INAUDIBLE]

00:39:40.610 --> 00:39:44.580
sounds to make sure that
you are switching contexts.

00:39:44.580 --> 00:39:48.270
And like we said, reading
out these three names

00:39:48.270 --> 00:39:51.520
is not a really big
user experience.

00:39:51.520 --> 00:39:53.847
So you could use
base cards and you

00:39:53.847 --> 00:39:56.650
could use carousel or
something like that.

00:39:56.650 --> 00:39:59.552
But yes, I think you
covered the basics, right?

00:39:59.552 --> 00:40:00.510
AZA TULEPBERGENOV: Yes.

00:40:03.762 --> 00:40:05.220
Unlimited gas was
consumable, so we

00:40:05.220 --> 00:40:07.170
can try to purchase it again
just to show it, if you'd like.

00:40:07.170 --> 00:40:07.450
NETO MARIN: Good, good.

00:40:07.450 --> 00:40:07.590
Yes.

00:40:07.590 --> 00:40:08.243
Try it, please.

00:40:08.243 --> 00:40:09.160
AZA TULEPBERGENOV: OK.

00:40:09.160 --> 00:40:12.117
NETO MARIN: So let's try again.

00:40:12.117 --> 00:40:13.450
AZA TULEPBERGENOV: So I say yes.

00:40:13.450 --> 00:40:14.300
NETO MARIN: Yes.

00:40:14.300 --> 00:40:15.990
AUTOMATED VOICE: Here is what
I have available, premium gar.

00:40:15.990 --> 00:40:17.448
NETO MARIN: So
unlimited gas again.

00:40:19.680 --> 00:40:20.700
So we are buying a--

00:40:20.700 --> 00:40:22.492
AUTOMATED VOICE: Here's
your order summary.

00:40:22.492 --> 00:40:25.050
Your total is $1.99.

00:40:25.050 --> 00:40:25.750
Ready to buy?

00:40:25.750 --> 00:40:26.417
NETO MARIN: Yes.

00:40:30.100 --> 00:40:31.060
What's going to happen?

00:40:31.060 --> 00:40:32.393
AUTOMATED VOICE: You're all set.

00:40:32.393 --> 00:40:34.070
Your receipt is on its way.

00:40:34.070 --> 00:40:34.910
NETO MARIN: So
what happened here?

00:40:34.910 --> 00:40:36.690
AUTOMATED VOICE: Would you like
to continue where you left off?

00:40:36.690 --> 00:40:38.107
NETO MARIN: You
go into their code

00:40:38.107 --> 00:40:40.600
and you consume that, and then
will be able to buy again.

00:40:40.600 --> 00:40:41.140
AZA TULEPBERGENOV: Exactly.

00:40:41.140 --> 00:40:43.400
NETO MARIN: This is why
we were able to buy again.

00:40:43.400 --> 00:40:46.120
Because if you didn't
do the consume before,

00:40:46.120 --> 00:40:47.290
like we have now.

00:40:47.290 --> 00:40:50.022
[INAUDIBLE] and something
like that, right?

00:40:50.022 --> 00:40:50.980
AZA TULEPBERGENOV: Yes.

00:40:50.980 --> 00:40:52.000
NETO MARIN: Cool, cool.

00:40:52.000 --> 00:40:55.740
So I think we covered
at least the basic stuff

00:40:55.740 --> 00:41:00.170
on how to do the purchase,
how to build the order,

00:41:00.170 --> 00:41:05.830
begin the purchase, handle the
titles in terms of success,

00:41:05.830 --> 00:41:08.780
already own it, [INAUDIBLE],,
something like that.

00:41:08.780 --> 00:41:12.820
But anything that you would like
to highlight, like a pro tip,

00:41:12.820 --> 00:41:13.932
for developers?

00:41:13.932 --> 00:41:14.890
AZA TULEPBERGENOV: Yes.

00:41:14.890 --> 00:41:17.020
So it's kind of the
combination [INAUDIBLE]

00:41:17.020 --> 00:41:20.260
alluded to during
our conversation.

00:41:20.260 --> 00:41:22.492
One of them is, always
consume the items

00:41:22.492 --> 00:41:23.700
you actually want to consume.

00:41:23.700 --> 00:41:23.900
NETO MARIN: Yes.

00:41:23.900 --> 00:41:25.650
AZA TULEPBERGENOV: And
then the other one,

00:41:25.650 --> 00:41:28.650
like you said, about
very long lists of SKUs.

00:41:28.650 --> 00:41:30.567
You would want to probably
follow good design

00:41:30.567 --> 00:41:31.400
practice and maybe--

00:41:31.400 --> 00:41:31.690
NETO MARIN: Yeah.

00:41:31.690 --> 00:41:34.170
AZA TULEPBERGENOV: --shrink
it, or show some rich responses

00:41:34.170 --> 00:41:35.137
if you have a screen.

00:41:35.137 --> 00:41:35.970
NETO MARIN: Exactly.

00:41:35.970 --> 00:41:36.720
AZA TULEPBERGENOV: Yeah, so--

00:41:36.720 --> 00:41:37.428
NETO MARIN: Yeah.

00:41:37.428 --> 00:41:40.150
And make it easy for a user to
say the name of the SKU, right?

00:41:40.150 --> 00:41:41.872
AZA TULEPBERGENOV: Yeah.

00:41:41.872 --> 00:41:44.330
NETO MARIN: Just remember, in
this point of consuming SKUs,

00:41:44.330 --> 00:41:48.550
it's very important because
you may want to consume it

00:41:48.550 --> 00:41:51.700
as soon as you do
the purchase to avoid

00:41:51.700 --> 00:41:55.280
weird flows in your future
part of your application.

00:41:55.280 --> 00:41:57.880
So as soon as you receive
that, it's a consumable item.

00:41:57.880 --> 00:41:58.510
Consume it.

00:41:58.510 --> 00:42:00.900
Of course, if you have a
different logic in your app--

00:42:00.900 --> 00:42:04.120
it depends on the user
expanding this thing,

00:42:04.120 --> 00:42:07.170
or the credit you can do.

00:42:07.170 --> 00:42:10.490
But you always can, for
example, buy this credit--

00:42:10.490 --> 00:42:14.710
these coins-- and do your
own inventory control.

00:42:14.710 --> 00:42:16.773
And then if you have
cross-platform--

00:42:16.773 --> 00:42:18.940
I don't know, other smartphone
platform or something

00:42:18.940 --> 00:42:20.950
like that-- you could,
say, use the same credit.

00:42:20.950 --> 00:42:22.990
Games are very common
to do this, right?

00:42:22.990 --> 00:42:23.320
AZA TULEPBERGENOV: Right.

00:42:23.320 --> 00:42:23.690
Yeah.

00:42:23.690 --> 00:42:24.398
NETO MARIN: Yeah.

00:42:24.398 --> 00:42:28.240
So OK, and if they
want to see the full--

00:42:28.240 --> 00:42:31.780
here you used some
helper methods

00:42:31.780 --> 00:42:34.660
to be able to finish
this in 30 minutes.

00:42:34.660 --> 00:42:37.050
If they want to
see the full code

00:42:37.050 --> 00:42:40.900
and how to do all the retries
and all this kind of flow

00:42:40.900 --> 00:42:45.453
to validate all kinds of status
order, where should they go?

00:42:45.453 --> 00:42:47.620
AZA TULEPBERGENOV: They
should go to our GitHub page

00:42:47.620 --> 00:42:49.430
and check out the
digital goods sample.

00:42:49.430 --> 00:42:50.138
NETO MARIN: Nice.

00:42:50.138 --> 00:42:52.810
AZA TULEPBERGENOV: This contains
the full code for how to do it.

00:42:52.810 --> 00:42:53.170
NETO MARIN: Nice.

00:42:53.170 --> 00:42:54.370
And all these directions
on the Read Me

00:42:54.370 --> 00:42:56.350
how to get it working
on their account?

00:42:56.350 --> 00:42:56.810
AZA TULEPBERGENOV: Yes.

00:42:56.810 --> 00:42:57.910
NETO MARIN: Good, good.

00:42:57.910 --> 00:43:00.850
Well, if you have any questions,
if you find any issues

00:43:00.850 --> 00:43:02.920
on this sample,
I'm sure Aza would

00:43:02.920 --> 00:43:05.570
like to take a look if you
have an issue on GitHub.

00:43:05.570 --> 00:43:08.170
But also, you can
find us on Twitter.

00:43:08.170 --> 00:43:10.390
So we have our team handle.

00:43:10.390 --> 00:43:12.260
That is @ActionsonGoogle.

00:43:12.260 --> 00:43:14.440
But if you are building
something cool,

00:43:14.440 --> 00:43:18.220
you want to share something with
us, or just give your feedback,

00:43:18.220 --> 00:43:21.360
please use the aogdevs
hashtag, and we

00:43:21.360 --> 00:43:23.170
will be pleased to answer you.

00:43:23.170 --> 00:43:27.250
And also, now we started a
new channel on Reddit, right?

00:43:27.250 --> 00:43:30.370
So people can go there
to talk about Assistant,

00:43:30.370 --> 00:43:32.670
the actions, some questions.

00:43:32.670 --> 00:43:34.510
And if you have more
technical questions,

00:43:34.510 --> 00:43:36.190
I think maybe Stack Overflow
is a channel, right?

00:43:36.190 --> 00:43:37.030
AZA TULEPBERGENOV:
Maybe a better channel.

00:43:37.030 --> 00:43:37.900
NETO MARIN: Yeah.

00:43:37.900 --> 00:43:39.340
Our team is working there.

00:43:39.340 --> 00:43:42.820
So we are actually answering
when the GDs or other people

00:43:42.820 --> 00:43:45.280
don't reply before us, right?

00:43:45.280 --> 00:43:47.060
But yes, you can find us there.

00:43:47.060 --> 00:43:49.580
And this is very
important to us.

00:43:49.580 --> 00:43:51.580
Remember to subscribe
to our channel.

00:43:51.580 --> 00:43:52.922
Remember to give your feedback.

00:43:52.922 --> 00:43:54.880
What are you thinking
about behind the actions?

00:43:54.880 --> 00:43:57.550
What other topics would
you like to see here

00:43:57.550 --> 00:44:00.010
in deep dive With our engineers?

00:44:00.010 --> 00:44:01.480
OK.

00:44:01.480 --> 00:44:02.630
Thanks for watching.

00:44:02.630 --> 00:44:03.130
Bye.

00:44:03.130 --> 00:44:03.800
AZA TULEPBERGENOV: Thank you.

00:44:03.800 --> 00:44:04.300
Bye.

00:44:04.300 --> 00:44:07.450
[STING]

