WEBVTT
Kind: captions
Language: en

00:00:04.033 --> 00:00:05.734
Brad Neuberg: Hey, so,
my name's Brad Neuberg.

00:00:05.734 --> 00:00:07.234
I'm with the Open Web
Advocacy Team.

00:00:07.234 --> 00:00:09.234
I'm here with my good friend
and colleague, Dion Almaer.

00:00:09.234 --> 00:00:10.501
Dion Almaer: Hey.

00:00:10.501 --> 00:00:11.934
Neuberg:
From Mozilla Foundation.

00:00:11.934 --> 00:00:13.501
Almaer: Good to be here, Brad.
Good to be here back at I/O.

00:00:13.501 --> 00:00:14.968
It's always fun.

00:00:14.968 --> 00:00:17.133
Neuberg: So you're working
on this amazing project, Bespin,

00:00:17.133 --> 00:00:19.067
and why don't you tell us
a bit about what it is,

00:00:19.067 --> 00:00:20.334
what you're doing.

00:00:20.334 --> 00:00:22.634
Almaer: Sure. So Bespin
is a project that came out

00:00:22.634 --> 00:00:25.234
when my partner in crime,
Ben Galbraith,

00:00:25.234 --> 00:00:27.634
we founded Ajaxian.com
together,

00:00:27.634 --> 00:00:29.434
and we've kind of been,
you know,

00:00:29.434 --> 00:00:32.133
talking up all these web
technologies over time, right?

00:00:32.133 --> 00:00:34.767
And we wanted to see...
let's actually build something

00:00:34.767 --> 00:00:37.534
that's on these new HTML5
fancy technologies

00:00:37.534 --> 00:00:39.634
and like, what would
that world be like?

00:00:39.634 --> 00:00:42.334
We care passionately
about developers,

00:00:42.334 --> 00:00:45.033
so what would be
a cool developer tool?

00:00:45.033 --> 00:00:48.334
So we created this Mozilla
Developer Tools Lab,

00:00:48.334 --> 00:00:50.133
so luckily, we've got
the word lab in there,

00:00:50.133 --> 00:00:52.834
so it means we can kind of
experiment and play around.

00:00:52.834 --> 00:00:54.334
And we want to take an app

00:00:54.334 --> 00:00:56.067
that people
aren't used to on the Web.

00:00:56.067 --> 00:00:58.000
So we thought,
how 'bout an editor,

00:00:58.000 --> 00:01:00.000
a coding experience
for developers.

00:01:00.000 --> 00:01:01.501
So that's one of those things--

00:01:01.501 --> 00:01:03.400
especially developers can be
a bit cranky sometimes.

00:01:03.400 --> 00:01:05.133
There's no "I'm never
giving up my Emacs,"

00:01:05.133 --> 00:01:07.000
and like,
"That'll never work on the Web."

00:01:07.000 --> 00:01:08.501
Neuberg: Pry it from
my dead, cold hands.

00:01:08.501 --> 00:01:10.000
Almaer: Yeah, exactly,
so it's like...

00:01:10.000 --> 00:01:11.234
what would the world be like?

00:01:11.234 --> 00:01:12.801
Could we build something
that was ready?

00:01:12.801 --> 00:01:14.801
So that's really
what Bespin is.

00:01:14.801 --> 00:01:16.601
It's this like
social coding experience

00:01:16.601 --> 00:01:20.934
using all of like the shiny,
shiny technologies.

00:01:20.934 --> 00:01:22.400
'Cause we've seen a few

00:01:22.400 --> 00:01:24.133
like little code editors
on the Web,

00:01:24.133 --> 00:01:26.067
and they never
would like scale,

00:01:26.067 --> 00:01:28.300
and you'd get little
beach balls on large files

00:01:28.300 --> 00:01:29.801
and it never quite
felt right.

00:01:29.801 --> 00:01:33.701
So frankly, we wanted to see
like what could be done there.

00:01:33.701 --> 00:01:36.400
Neuberg: So let's say
I'm a coder and I've got vi.

00:01:36.400 --> 00:01:38.234
What are some really
compelling things

00:01:38.234 --> 00:01:40.300
that would make me
sort of let that go

00:01:40.300 --> 00:01:41.734
and say let me check out
Bespin

00:01:41.734 --> 00:01:43.033
and see what's going on there?

00:01:43.033 --> 00:01:44.501
Almaer: Yeah, so the first
thing would be

00:01:44.501 --> 00:01:46.300
our supplementing a vi mode,
probably.

00:01:46.300 --> 00:01:48.100
Neuberg: Okay. Step one.
Almaer: Yeah.

00:01:48.100 --> 00:01:50.167
And we wanna have vi mode,
Emacs mode, all that stuff.

00:01:50.167 --> 00:01:52.601
Neuberg: Word Perfect bindings?
Almaer: World Perfect [laughs].

00:01:52.601 --> 00:01:53.934
Yeah, that little sheet

00:01:53.934 --> 00:01:55.601
that you can put
on the top of the computer.

00:01:55.601 --> 00:01:58.300
But seriously, though,
we actually do wanna get like...

00:01:58.300 --> 00:01:59.934
that kinda world in.

00:01:59.934 --> 00:02:02.133
And also, we're not trying
to like...

00:02:02.133 --> 00:02:04.100
take people away from
their editor so much.

00:02:04.100 --> 00:02:06.767
It's kind of
a different world.

00:02:06.767 --> 00:02:10.767
It's complementary to your id,
your experience in some way.

00:02:10.767 --> 00:02:12.567
So what we're trying
to focus on,

00:02:12.567 --> 00:02:15.734
rather than build yet another id
with a million features,

00:02:15.734 --> 00:02:17.267
we're trying to pinpoint

00:02:17.267 --> 00:02:19.067
some really fun,
compelling features

00:02:19.067 --> 00:02:21.834
for web developers
specifically, right?

00:02:21.834 --> 00:02:24.767
So with Bespin,
you've got this really fast

00:02:24.767 --> 00:02:26.834
social editor that allows you

00:02:26.834 --> 00:02:28.934
to very easily collaborate
on code.

00:02:28.934 --> 00:02:31.400
So earlier today, you guys--
Neuberg: Collaborate on code?

00:02:31.400 --> 00:02:33.033
I thought you were just
supposed to sit in a closet

00:02:33.033 --> 00:02:34.667
and type by yourself.

00:02:34.667 --> 00:02:36.701
Almaer: Exactly, yeah,
it's like no one can see.

00:02:36.701 --> 00:02:38.801
But you just announced
Google Wave,

00:02:38.801 --> 00:02:40.767
which is all about
this real-time collaboration.

00:02:40.767 --> 00:02:41.767
We can use those APIs.

00:02:41.767 --> 00:02:43.300
We already have our own,

00:02:43.300 --> 00:02:46.067
but we're happy to integrate
with other things.

00:02:46.067 --> 00:02:48.133
So now...so you're doing
a code review--

00:02:48.133 --> 00:02:50.267
Instead of like,
here's my code, click,

00:02:50.267 --> 00:02:52.367
goes off to a code review,
patch land,

00:02:52.367 --> 00:02:54.567
then later on, it comes back
it's like, "Hey, Brad,

00:02:54.567 --> 00:02:55.767
do you wanna check out
the code with me?"

00:02:55.767 --> 00:02:57.033
Real-time, right?

00:02:57.033 --> 00:02:59.601
And there's a chat window
built in.

00:02:59.601 --> 00:03:01.734
So you're chatting on it,

00:03:01.734 --> 00:03:03.267
and it's associated
with the code,

00:03:03.267 --> 00:03:05.634
with the file
and where that code is.

00:03:05.634 --> 00:03:08.000
So say a month later
someone comes over and is like,

00:03:08.000 --> 00:03:09.267
who did this function?

00:03:09.267 --> 00:03:10.701
You can just select
the function

00:03:10.701 --> 00:03:12.834
and say, oh, Dion and Brad
did it together,

00:03:12.834 --> 00:03:14.868
and here's what they
talked about right there.

00:03:14.868 --> 00:03:16.701
Right? So we really
associate the stuff.

00:03:16.701 --> 00:03:17.934
Go back in time,

00:03:17.934 --> 00:03:19.868
and there's this playback API
in Wave.

00:03:19.868 --> 00:03:21.501
We had a similar notion
where

00:03:21.501 --> 00:03:22.868
you're looking
at the source code,

00:03:22.868 --> 00:03:24.300
and you can just
go back in time.

00:03:24.300 --> 00:03:26.334
It shows you commits
for that file with tags,

00:03:26.334 --> 00:03:29.100
and you just kinda go back
and see what happened.

00:03:29.100 --> 00:03:31.133
Replaying the events themselves.

00:03:31.133 --> 00:03:32.934
We're working on a project
together.

00:03:32.934 --> 00:03:34.734
I go off to the doctor
and come back.

00:03:34.734 --> 00:03:36.400
What's Brad been doing?
Neuberg: Right.

00:03:36.400 --> 00:03:37.801
Almaer: Just, like,
hit replay, right?

00:03:37.801 --> 00:03:39.467
Neuberg: Then you can come
blame...come blame the guy.

00:03:39.467 --> 00:03:40.734
Almaer: Exactly! Yeah,
instead of staring

00:03:40.734 --> 00:03:42.534
at divs from commits,
like what's happening.

00:03:42.534 --> 00:03:44.300
And one of the features
I really like is

00:03:44.300 --> 00:03:46.601
I want a world where
like we're working on something

00:03:46.601 --> 00:03:49.434
and you just clobber
a function that I'm in too,

00:03:49.434 --> 00:03:52.701
and I see that, alert, alert,
Brad was just in here--

00:03:52.701 --> 00:03:54.834
I want to commit quickly
so you have to do the merge.

00:03:54.834 --> 00:03:56.067
Neuberg: Yeah.
Almaer: Right?

00:03:56.067 --> 00:03:58.067
Like all these little things
that we can do now

00:03:58.067 --> 00:04:00.200
we're kind of aware
of what's going on.

00:04:00.200 --> 00:04:02.400
So...it's fun stuff.

00:04:02.400 --> 00:04:03.901
Neuberg:
So there's this notion--

00:04:03.901 --> 00:04:05.400
I think a lot of developers
out there

00:04:05.400 --> 00:04:07.234
get this idea
of programming for the Web.

00:04:07.234 --> 00:04:08.701
We like to call it--

00:04:08.701 --> 00:04:11.167
it's programming
for the 1997 version of the Web.

00:04:11.167 --> 00:04:13.501
You had the really nice
experience of programming

00:04:13.501 --> 00:04:15.901
for the 2009 version
of the Web.

00:04:15.901 --> 00:04:18.501
I know you've been able to use
all these modern facilities,

00:04:18.501 --> 00:04:20.601
modern aspects of JavaScript.

00:04:20.601 --> 00:04:22.400
How has that experience been?

00:04:22.400 --> 00:04:24.601
Almaer: Yeah, it's been
awesome, man.

00:04:24.601 --> 00:04:26.467
It's like taking off
the shackles, right?

00:04:26.467 --> 00:04:27.601
And that's one of the reasons

00:04:27.601 --> 00:04:29.367
we all wanted to do
a develop-ery thing,

00:04:29.367 --> 00:04:32.067
because developers
haven't come to us saying,

00:04:32.067 --> 00:04:33.734
"I need this in IE6!"

00:04:33.734 --> 00:04:35.667
Neuberg: So just to be clear,
that's also true.

00:04:35.667 --> 00:04:38.934
So currently, Bespin is only
supported on modern browsers.

00:04:38.934 --> 00:04:40.300
Almaer: Yes.

00:04:40.300 --> 00:04:41.901
Neuberg: Specifically Firefox,
at this point.

00:04:41.901 --> 00:04:43.834
Almaer: Firefox, Safari...
Neuberg: Safari now as well.

00:04:43.834 --> 00:04:45.567
Almaer: There's a few weird
things with Chrome and canvas,

00:04:45.567 --> 00:04:46.968
but most of it works.

00:04:46.968 --> 00:04:48.267
Neuberg: So you're
not shackled by sort of

00:04:48.267 --> 00:04:50.400
backwards compatibility...
Almaer: Exactly.

00:04:50.400 --> 00:04:51.801
Neuberg: So what are
some of those--

00:04:51.801 --> 00:04:53.701
what has been one of
the nicest limitations

00:04:53.701 --> 00:04:55.534
that you're free of now?

00:04:55.534 --> 00:04:59.968
Almaer: So...the debugging
experience has totally changed.

00:04:59.968 --> 00:05:02.767
It's amazing how close

00:05:02.767 --> 00:05:05.167
the modern browsers
actually are, right?

00:05:05.167 --> 00:05:07.367
So like in the past,
you're always doing it

00:05:07.367 --> 00:05:09.000
and there's like these
weird bugs and IE6

00:05:09.000 --> 00:05:10.334
and this, that,
and the other,

00:05:10.334 --> 00:05:11.701
and you spend
all your time on that.

00:05:11.701 --> 00:05:13.467
Even though there's still
subtle differences,

00:05:13.467 --> 00:05:14.901
like I'll give you one--

00:05:14.901 --> 00:05:17.534
we do a lot of stuff with
the Web Worker API, right?

00:05:17.534 --> 00:05:20.133
But what browsers
is that in, first.

00:05:20.133 --> 00:05:23.467
So we created a facade that
if you've got workers, great.

00:05:23.467 --> 00:05:25.567
If not, try and use Gears.
Neuberg: Yeah.

00:05:25.567 --> 00:05:27.534
Almaer: If not,
we'll just do setInterval

00:05:27.534 --> 00:05:29.167
and just make the code
actually run,

00:05:29.167 --> 00:05:30.334
but it's not gonna be great.

00:05:30.334 --> 00:05:31.567
But then within the browsers,

00:05:31.567 --> 00:05:33.367
Safari doesn't support
importScripts,

00:05:33.367 --> 00:05:35.300
part of the Web Worker API,

00:05:35.300 --> 00:05:36.968
so we implement that
in the facade.

00:05:36.968 --> 00:05:39.701
So you're Mr. Shim,
you understand this world.

00:05:39.701 --> 00:05:41.434
And so we did the same thing
for workers

00:05:41.434 --> 00:05:44.767
so you can just go ahead
and use the same worker API.

00:05:44.767 --> 00:05:46.868
And there's all these subtle
little things with workers

00:05:46.868 --> 00:05:49.834
like...we do real-time
syntax analysis

00:05:49.834 --> 00:05:52.100
and so we have JSLint
built in, for example.

00:05:52.100 --> 00:05:53.767
So as you're typing,
it's like...

00:05:53.767 --> 00:05:55.834
tells you the error right then.
Neuberg: That's run in a worker.

00:05:55.834 --> 00:05:57.367
Almaer: And it's run
in a worker.

00:05:57.367 --> 00:05:59.167
Neuberg: So it doesn't block
the execution of the script.

00:05:59.167 --> 00:06:01.267
Almaer: Exactly. Otherwise,
you'd be typing and be frozen.

00:06:01.267 --> 00:06:03.734
So we've got a whole bunch
of these, like, smart agents

00:06:03.734 --> 00:06:05.234
so we can kick off
the workers.

00:06:05.234 --> 00:06:07.934
But then we started to see
the CPU usage go like crazy.

00:06:07.934 --> 00:06:10.434
'Cause we're not restricted
to this, like, single thread

00:06:10.434 --> 00:06:12.501
in the main UI thread
in the browser.

00:06:12.501 --> 00:06:14.534
We can start firing stuff off.

00:06:14.534 --> 00:06:16.234
But now that's using up
all of the browsers,

00:06:16.234 --> 00:06:17.667
and it's counteractive.

00:06:17.667 --> 00:06:19.634
So there's no notion
of yield and stuff like that,

00:06:19.634 --> 00:06:21.133
which I really want now.

00:06:21.133 --> 00:06:22.400
Neuberg: Yeah. Asleep...
Almaer: Asleep.

00:06:22.400 --> 00:06:23.834
Exactly, yeah.

00:06:23.834 --> 00:06:26.200
And so what we have to do
if we have different slicings

00:06:26.200 --> 00:06:28.734
where we go through
and we monitor how many workers.

00:06:28.734 --> 00:06:31.868
So this code, this facade,
is all open source in Bespin,

00:06:31.868 --> 00:06:34.234
so if people are interested
in, like, doing worker stuff,

00:06:34.234 --> 00:06:36.000
it's there,
and we want to break it off

00:06:36.000 --> 00:06:37.634
into its own
open source project.

00:06:37.634 --> 00:06:41.667
So being able to use workers
has given us...a huge win for--

00:06:41.667 --> 00:06:43.000
'cause we can start doing
all these things

00:06:43.000 --> 00:06:44.801
that we'd never even
be able to do before.

00:06:44.801 --> 00:06:46.434
Neuberg: You mentioned
something I want to highlight

00:06:46.434 --> 00:06:47.801
and most people
don't expect--

00:06:47.801 --> 00:06:51.467
sort of the modern browsers,
Safari, Chrome, Firefox,

00:06:51.467 --> 00:06:53.501
are actually
very similar to each other.

00:06:53.501 --> 00:06:55.200
Almaer: Yeah.
Neuberg: And I heard a statistic

00:06:55.200 --> 00:06:58.267
that I didn't realize
from someone recently...

00:06:58.267 --> 00:07:02.300
Firefox 2 turned over
to Firefox 3.

00:07:02.300 --> 00:07:05.734
Within two months, 50%
of the audience flipped over.

00:07:05.734 --> 00:07:06.968
Almaer: Yeah.
Neuberg: I hadn't...

00:07:06.968 --> 00:07:08.667
I just learned about this
recently.

00:07:08.667 --> 00:07:09.834
Almaer: Yeah, that's cool.

00:07:09.834 --> 00:07:11.234
Neuberg: So these browsers
are revving

00:07:11.234 --> 00:07:12.667
faster than people expect

00:07:12.667 --> 00:07:13.968
so you can use these
newer features

00:07:13.968 --> 00:07:15.501
faster than you'd expect.

00:07:15.501 --> 00:07:16.701
Almaer:
And there's kind of

00:07:16.701 --> 00:07:18.167
this weird chicken and egg
situation, right,

00:07:18.167 --> 00:07:19.734
where it's like, if we don't
go and build apps

00:07:19.734 --> 00:07:21.667
using canvas
and all these things,

00:07:21.667 --> 00:07:23.734
then why is it worth switching
from IE6?

00:07:23.734 --> 00:07:25.000
Neuberg: Exactly.
It's a tricky...

00:07:25.000 --> 00:07:26.601
Almaer: But like we gotta
get it out and push.

00:07:26.601 --> 00:07:28.667
I know it's really hard
for consumer apps and stuff,

00:07:28.667 --> 00:07:30.501
but I'm trying to, like,
get it there

00:07:30.501 --> 00:07:32.334
and then give people
a reason to operate.

00:07:32.334 --> 00:07:33.901
Neuberg: Right, right.
Almaer: But then, like...

00:07:33.901 --> 00:07:37.100
with a fast JavaScript,
that alone was a huge thing.

00:07:37.100 --> 00:07:40.300
Canvas, we even saw
a few interesting things like--

00:07:40.300 --> 00:07:42.000
we got this huge speed bump

00:07:42.000 --> 00:07:44.601
when it was testing
on WebKit nightly.

00:07:44.601 --> 00:07:46.367
One day it just, like,
instantly was faster.

00:07:46.367 --> 00:07:48.100
Neuberg: Interesting.
Almaer: And we're like,

00:07:48.100 --> 00:07:49.334
well, what changed?

00:07:49.334 --> 00:07:50.868
Well, what actually
turned out was

00:07:50.868 --> 00:07:53.467
the canvas implementation...

00:07:53.467 --> 00:07:55.701
they made an adjustment
to the algorithm

00:07:55.701 --> 00:07:57.834
where it only blit
the changes on the canvas

00:07:57.834 --> 00:07:59.367
instead of painting
all the time.

00:07:59.367 --> 00:08:00.534
Neuberg: So it had
a dirty flag?

00:08:00.534 --> 00:08:01.834
Almaer: Yeah, exactly.

00:08:01.834 --> 00:08:03.834
And so in an editor,
that's like heaven.

00:08:03.834 --> 00:08:05.334
Because most of the time
you're typing,

00:08:05.334 --> 00:08:07.167
and all you need to do
is add in...the text.

00:08:07.167 --> 00:08:08.534
Neuberg: Right.
Almaer: And so again,

00:08:08.534 --> 00:08:09.834
we're benefiting
from all these browsers

00:08:09.834 --> 00:08:11.067
kind of innovating,

00:08:11.067 --> 00:08:13.734
and we solved this speed bump
for nothing.

00:08:13.734 --> 00:08:15.534
And we were also doing
a lot of techniques like--

00:08:15.534 --> 00:08:17.367
we didn't think
that having, like,

00:08:17.367 --> 00:08:20.033
one huge canvas full-screen
would scale.

00:08:20.033 --> 00:08:21.601
Like, we didn't think
it would perform.

00:08:21.601 --> 00:08:24.234
And that turned out
not to be a bottleneck at all.

00:08:24.234 --> 00:08:26.067
We now have multiple
canvases, actually,

00:08:26.067 --> 00:08:28.167
like we have this pine menu
Quicksilver thing

00:08:28.167 --> 00:08:29.868
that animates on--
it's actually on top.

00:08:29.868 --> 00:08:31.367
Neuberg: You just use
z-index and...

00:08:31.367 --> 00:08:33.567
Almaer: Yeah. And again, we're
like, is this gonna like...

00:08:33.567 --> 00:08:35.000
you know, be weird?

00:08:35.000 --> 00:08:36.868
Not at all.
It performs fantastically.

00:08:36.868 --> 00:08:38.367
Neuberg: Interesting.

00:08:38.367 --> 00:08:40.367
Almaer: The funny story
about bottlenecks is, um...

00:08:40.367 --> 00:08:42.267
Neuberg: Yeah. They're always--
Almaer: There's always--yeah.

00:08:42.267 --> 00:08:43.734
Neuberg: They're never
where you expect them.

00:08:43.734 --> 00:08:45.234
Almaer: Exactly.
We made a big mistake

00:08:45.234 --> 00:08:47.200
in that the day before
we shipped Bespin,

00:08:47.200 --> 00:08:48.601
we have this syntax
highlighter,

00:08:48.601 --> 00:08:50.067
so obviously,
you go through.

00:08:50.067 --> 00:08:52.501
We just, as you do,
we grabbed an open source WAN

00:08:52.501 --> 00:08:54.534
that's kind of
in the model of

00:08:54.534 --> 00:08:56.634
you write a bunch of code
into a text area,

00:08:56.634 --> 00:08:58.467
hit something,
it shows you pretty HTMLs.

00:08:58.467 --> 00:09:00.834
One of those guys, right, like
you use in a blog or something.

00:09:00.834 --> 00:09:02.701
So we took that code
and started to use it,

00:09:02.701 --> 00:09:05.100
but for us, we're painting
again and again.

00:09:05.100 --> 00:09:06.934
And so every time
we paint that line,

00:09:06.934 --> 00:09:09.634
we're doing syntax analysis
to do the highlighting.

00:09:09.634 --> 00:09:11.667
And we profiled it
and it was doing, like,

00:09:11.667 --> 00:09:13.667
500 regex per line,

00:09:13.667 --> 00:09:15.701
and we're painting every
10 milliseconds or whatever.

00:09:15.701 --> 00:09:17.734
So we're doing thousands
of regular expressions.

00:09:17.734 --> 00:09:19.200
Neuberg:
Was it a compiled regex?

00:09:19.200 --> 00:09:21.334
Did you reuse your regex object?

00:09:21.334 --> 00:09:22.801
Almaer: We would reuse
the regex object,

00:09:22.801 --> 00:09:24.634
but it was, like,
different ones going on,

00:09:24.634 --> 00:09:26.400
and it's just, like,
just an immense--

00:09:26.400 --> 00:09:28.367
every 10 milliseconds,
thousands of regexes, right?

00:09:28.367 --> 00:09:29.734
Neuberg: Yeah.
Almaer: And so we're like,

00:09:29.734 --> 00:09:30.734
this is nuts.

00:09:30.734 --> 00:09:32.400
We've gotta skip that.

00:09:32.400 --> 00:09:35.400
And so we wrote our own
state-based state machine,

00:09:35.400 --> 00:09:36.901
very simple syntax
highlighter.

00:09:36.901 --> 00:09:38.734
And like we have
our unit test,

00:09:38.734 --> 00:09:41.200
and it's like, here's the one
that we had at first

00:09:41.200 --> 00:09:42.601
and here's our new one,

00:09:42.601 --> 00:09:44.734
and it's, like,
thousands times faster.

00:09:44.734 --> 00:09:46.801
And then we go
check it out again,

00:09:46.801 --> 00:09:48.901
and it turns out
it barely made a difference

00:09:48.901 --> 00:09:50.300
to the responsiveness
at all.

00:09:50.300 --> 00:09:53.067
Because we were so worried that
we had all this JavaScript code

00:09:53.067 --> 00:09:54.901
that's doing
all the canvas stuff

00:09:54.901 --> 00:09:56.133
that that would be
the bottleneck.

00:09:56.133 --> 00:09:57.601
JavaScript
wasn't the bottleneck at all.

00:09:57.601 --> 00:10:00.033
It was all the blitting it to
the screen was the bottleneck.

00:10:00.033 --> 00:10:02.434
Neuberg: Right, interesting.
I know, it's always...

00:10:02.434 --> 00:10:05.267
measure...
do your measurements first,

00:10:05.267 --> 00:10:07.267
and then actually do
your optimization.

00:10:07.267 --> 00:10:08.534
Almaer: Exactly, yeah.

00:10:08.534 --> 00:10:10.234
So that again kind of hit home

00:10:10.234 --> 00:10:12.701
that JavaScript isn't the
bottleneck that it used to be.

00:10:12.701 --> 00:10:14.667
Neuberg: No, especially
when we start using

00:10:14.667 --> 00:10:17.100
the newer things
like canvas, SVG,

00:10:17.100 --> 00:10:18.801
blitting to the screen.

00:10:18.801 --> 00:10:20.100
You know what,
that's always the bottleneck,

00:10:20.100 --> 00:10:22.234
The DOM is the bottleneck,
so generally...

00:10:22.234 --> 00:10:24.200
Almaer: Yeah.
But yeah, it's...

00:10:24.200 --> 00:10:27.834
it's been kind of fun
to ignore the DOM sometimes too.

00:10:27.834 --> 00:10:30.767
That's again,
like the canvas API is so small,

00:10:30.767 --> 00:10:32.400
that being able
to just have that--

00:10:32.400 --> 00:10:33.901
Neuberg: That should be
a bumper sticker!

00:10:33.901 --> 00:10:35.434
Or a T-shirt--
"I'm ignoring the DOM.

00:10:35.434 --> 00:10:37.200
What are you gonna
do about it?"

00:10:37.200 --> 00:10:38.701
Almaer: It's kind of funny,
like--

00:10:38.701 --> 00:10:40.200
one version,
we're using jQuery,

00:10:40.200 --> 00:10:41.934
which is
a fantastic library.

00:10:41.934 --> 00:10:43.801
But we realized it wasn't
doing anything for us

00:10:43.801 --> 00:10:45.634
because it's all about DOM.
Neuberg: It's all about DOM.

00:10:45.634 --> 00:10:47.200
Almaer: DSL for the DOM, so...

00:10:47.200 --> 00:10:49.501
Yeah, fun things
have come out of it like

00:10:49.501 --> 00:10:53.300
we've started to play around
with this Thunderhead UI toolkit

00:10:53.300 --> 00:10:54.734
that goes,
okay, you got canvas,

00:10:54.734 --> 00:10:56.100
you got this thing
to draw things,

00:10:56.100 --> 00:10:57.601
but how do you put
these components--

00:10:57.601 --> 00:10:59.100
there's no component
hierarchy.

00:10:59.100 --> 00:11:01.501
And it's been really fun
to get to play around with that.

00:11:01.501 --> 00:11:03.067
And we re-use CSS,

00:11:03.067 --> 00:11:05.801
and we now have implemented
a bunch of the CSS3 stuff.

00:11:05.801 --> 00:11:07.868
So the developer
just uses even, like,

00:11:07.868 --> 00:11:10.300
-webkit-transform,
or whatever, and it works,

00:11:10.300 --> 00:11:12.200
and we've implemented it
in canvas.

00:11:12.200 --> 00:11:13.868
Neuberg: Right,
reversing it and--

00:11:13.868 --> 00:11:15.367
Almaer: And what's so cool
is that, like,

00:11:15.367 --> 00:11:17.200
man, I wish we had
this CSS3 feature...

00:11:17.200 --> 00:11:18.400
we just do it.

00:11:18.400 --> 00:11:19.834
Neuberg: Yeah.
Almaer: And implement it.

00:11:19.834 --> 00:11:21.267
Neuberg: Take the future
in your own hands.

00:11:21.267 --> 00:11:22.634
Almaer:
Yeah, yeah, it's cool.

00:11:22.634 --> 00:11:24.100
Neuberg: We're almost
out of time, unfortunately.

00:11:24.100 --> 00:11:25.767
There's way more
interesting stuff here

00:11:25.767 --> 00:11:27.367
that we can talk about
in eight minutes,

00:11:27.367 --> 00:11:29.467
but if people want to learn more
and want to get involved,

00:11:29.467 --> 00:11:32.200
I know you've been really
great about pulling people in,

00:11:32.200 --> 00:11:33.400
new contributions.

00:11:33.400 --> 00:11:35.467
How do they get started?
Where do they go?

00:11:35.467 --> 00:11:37.367
Almaer: Yeah, so the main site
for Bespin

00:11:37.367 --> 00:11:38.801
is bespin.mozilla.com.

00:11:38.801 --> 00:11:40.200
That's where you'll go

00:11:40.200 --> 00:11:42.367
to kind of see
the flagship product.

00:11:42.367 --> 00:11:44.767
But there's actually
different pieces,

00:11:44.767 --> 00:11:46.901
so if you like the editor,
there's an editor component.

00:11:46.901 --> 00:11:48.701
It's all open source.
Neuberg: It's a la carte.

00:11:48.701 --> 00:11:50.801
Almaer: Exactly.
You can use the servers.

00:11:50.801 --> 00:11:52.334
Everything is there available.

00:11:52.334 --> 00:11:56.734
We have a Wiki
on wiki.mozilla.org/labs/bespin.

00:11:56.734 --> 00:11:59.801
Has all of the information,
our IRC channel, mailing lists,

00:11:59.801 --> 00:12:01.634
and we'd love for you
to come help contribute

00:12:01.634 --> 00:12:03.467
to the platform.

00:12:03.467 --> 00:12:05.534
Neuberg: So just in the last
five seconds,

00:12:05.534 --> 00:12:08.267
what's been one really cool
external contribution,

00:12:08.267 --> 00:12:11.868
and who's the contributor
that you've really liked?

00:12:11.868 --> 00:12:13.334
Almaer: Yeah, so this guy
Julian--

00:12:13.334 --> 00:12:15.100
this is actually kind of
pretty awesome--

00:12:15.100 --> 00:12:17.267
so as an experiment--
you're an old open source guy,

00:12:17.267 --> 00:12:18.434
so you know it's like,

00:12:18.434 --> 00:12:19.968
how do you get contributors,
right?

00:12:19.968 --> 00:12:21.434
Neuberg: It's not easy.
Almaer: Not easy.

00:12:21.434 --> 00:12:24.133
So I did a little experiment
just kind of goofing around

00:12:24.133 --> 00:12:25.634
where I was about
to add a feature,

00:12:25.634 --> 00:12:26.968
and instead of writing
the code,

00:12:26.968 --> 00:12:30.467
I built a fairly detailed spec,
but not too rigid,

00:12:30.467 --> 00:12:33.067
and got the graphics all ready
and all that stuff.

00:12:33.067 --> 00:12:35.100
And I said
this is a 50-point feature.

00:12:35.100 --> 00:12:36.734
So I emailed the people
out there.

00:12:36.734 --> 00:12:38.567
I was like,
anyone who can do this,

00:12:38.567 --> 00:12:40.067
you get 50 points.

00:12:40.067 --> 00:12:41.701
They meant nothing, right,
at this time.

00:12:41.701 --> 00:12:43.033
And then a day later,
this guy--

00:12:43.033 --> 00:12:44.434
Neuberg: Well, again,
this is 25 points, so...

00:12:44.434 --> 00:12:46.067
Almaer: Yeah, exactly.

00:12:46.067 --> 00:12:48.734
He's German, so I definitely
think he expects a beer.

00:12:48.734 --> 00:12:49.934
Neuberg: Right.
Almaer: But...

00:12:49.934 --> 00:12:51.434
like literally,
a day or two later,

00:12:51.434 --> 00:12:53.734
this Julian guy from Germany

00:12:53.734 --> 00:12:55.033
came along
and just implemented.

00:12:55.033 --> 00:12:58.033
It was the equivalent
if you used a textme, Applet

00:12:58.033 --> 00:12:59.501
to quickly go to a file,

00:12:59.501 --> 00:13:02.000
he implemented Quick Open
in the editor in a day.

00:13:02.000 --> 00:13:04.767
Like, never touched it before,
like, did all the stuff.

00:13:04.767 --> 00:13:06.234
So it really showed us
the power.

00:13:06.234 --> 00:13:08.634
If you give people what
they need to get stuff done,

00:13:08.634 --> 00:13:10.434
they'll do it.

00:13:10.434 --> 00:13:12.501
They want to do it.
They want to get involved.

00:13:12.501 --> 00:13:15.601
Now he's been on the project
the whole time.

00:13:15.601 --> 00:13:17.868
I believe he's still
in high school, this guy.

00:13:17.868 --> 00:13:19.734
Neuberg: Nice. Nice.
Almaer: He's amazing.

00:13:19.734 --> 00:13:21.801
Yeah, all the contributors--
we had syntax,

00:13:21.801 --> 00:13:24.000
Engine staff people
have put in.

00:13:24.000 --> 00:13:27.801
Someone ported it to Dojo,
which was a huge effort.

00:13:27.801 --> 00:13:29.334
Now we're just like
again and again

00:13:29.334 --> 00:13:31.234
seeing people come up
and do amazing work,

00:13:31.234 --> 00:13:32.601
so we're jazzed.

00:13:32.601 --> 00:13:34.133
Neuberg: So we gotta wrap up.
But he got 50 points.

00:13:34.133 --> 00:13:36.801
If you want 100 points,
go to the site...

00:13:36.801 --> 00:13:38.234
Almaer: Exactly.
Neuberg: I'm not saying...

00:13:38.234 --> 00:13:40.267
I'm not signing you up
to give away free points, so...

00:13:40.267 --> 00:13:41.901
Thank you so much, man.

00:13:41.901 --> 00:13:43.601
Almaer: Always a pleasure,
my friend.

00:13:43.601 --> 00:13:45.000
Neuberg: You too, my friend.
Almaer: Thank you.

