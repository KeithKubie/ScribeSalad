WEBVTT
Kind: captions
Language: en

00:00:00.000 --> 00:00:02.410
[MUSIC PLAYING]

00:00:04.653 --> 00:00:06.570
KONSTANTINE TSOTSOS:
Thank you all for coming.

00:00:06.570 --> 00:00:07.970
My name's Konstantine Tsotsos.

00:00:07.970 --> 00:00:10.050
I'm a software engineer
here at Google.

00:00:10.050 --> 00:00:13.830
Today we're going to talk about
realism for augmented reality,

00:00:13.830 --> 00:00:15.290
and how you can
use some new things

00:00:15.290 --> 00:00:17.600
we're bringing to
Lighting in ARCore

00:00:17.600 --> 00:00:21.170
to make your ARCore apps a lot
more immersive, and believable,

00:00:21.170 --> 00:00:22.185
and realistic.

00:00:22.185 --> 00:00:23.810
The way we're going
to do that is we're

00:00:23.810 --> 00:00:26.150
going to give you a
high-level overview of why

00:00:26.150 --> 00:00:29.690
we care about realism, what
tells us about immersion

00:00:29.690 --> 00:00:31.088
in augmented reality.

00:00:31.088 --> 00:00:33.380
Then go through a whole ton
of technical details of how

00:00:33.380 --> 00:00:35.300
we do it, give you
the nitty-gritty,

00:00:35.300 --> 00:00:37.650
and then walk through some
live demos and wrap it up.

00:00:37.650 --> 00:00:39.770
Let's get started.

00:00:39.770 --> 00:00:42.140
Augmented reality
has always promised

00:00:42.140 --> 00:00:44.750
to blend the virtual
with the real.

00:00:44.750 --> 00:00:47.420
What we really want is
for our virtual character

00:00:47.420 --> 00:00:49.370
to actually look like
it's in our living room,

00:00:49.370 --> 00:00:51.710
to look like it's interacting
with the environment,

00:00:51.710 --> 00:00:54.560
to look like it's actually
in broad daylight sunshine.

00:00:54.560 --> 00:00:56.810
And for all of that to
blend with the environment

00:00:56.810 --> 00:00:58.490
in a natural, seamless way.

00:00:58.490 --> 00:00:59.990
And for all of you,
you'd like to be

00:00:59.990 --> 00:01:02.540
able to implement that easily
without that much work,

00:01:02.540 --> 00:01:04.280
hopefully.

00:01:04.280 --> 00:01:06.590
And the way that
all of this happens

00:01:06.590 --> 00:01:10.220
is by taking advantage of cues
that we see in the environment

00:01:10.220 --> 00:01:12.230
and making sure that
the way that we present

00:01:12.230 --> 00:01:15.140
our virtual characters in
an augmented reality app

00:01:15.140 --> 00:01:17.190
fits that environment.

00:01:17.190 --> 00:01:19.310
So let's take a look at
a fairly standard scene

00:01:19.310 --> 00:01:21.270
and walk through
what's going on here.

00:01:21.270 --> 00:01:24.080
So here we've got a couple
of chairs, a table, a floor,

00:01:24.080 --> 00:01:25.880
some walls.

00:01:25.880 --> 00:01:28.040
We look at this scene
as humans and we see,

00:01:28.040 --> 00:01:30.140
oh, it's a bunch of
objects and surfaces

00:01:30.140 --> 00:01:32.300
and there's light coming
in, and we naturally

00:01:32.300 --> 00:01:34.830
understand what's
going on in the scene,

00:01:34.830 --> 00:01:36.080
where the light's coming from.

00:01:36.080 --> 00:01:38.180
We see directions of shadows.

00:01:38.180 --> 00:01:40.370
Turns out that when we
render stuff in our computers

00:01:40.370 --> 00:01:43.580
and on our phones for
a virtual character

00:01:43.580 --> 00:01:45.467
we use a fairly similar process.

00:01:45.467 --> 00:01:46.550
We have a bunch of assets.

00:01:46.550 --> 00:01:50.120
Those assets are represented
by geometry that has surfaces.

00:01:50.120 --> 00:01:52.010
Those surfaces have
material properties.

00:01:52.010 --> 00:01:57.050
Maybe it's rough and diffuse
or it's specular, really shiny,

00:01:57.050 --> 00:01:58.370
metallic.

00:01:58.370 --> 00:02:01.100
We put in a light into
our virtual scene,

00:02:01.100 --> 00:02:03.410
and then that light bounces
off of those surfaces

00:02:03.410 --> 00:02:06.500
when we render our image and
goes into the camera view.

00:02:06.500 --> 00:02:08.240
And that's how we
generate the images

00:02:08.240 --> 00:02:10.250
that we see in our computers.

00:02:10.250 --> 00:02:14.660
The difference here is sort
of similar to the way in CGI

00:02:14.660 --> 00:02:16.640
we generate
computer-generated imagery

00:02:16.640 --> 00:02:18.770
to show special effects.

00:02:18.770 --> 00:02:20.390
If you have really
great CGI, that

00:02:20.390 --> 00:02:22.370
looks fantastic and
believable, and if you

00:02:22.370 --> 00:02:25.040
have not so great
CGI, it pulls you out

00:02:25.040 --> 00:02:26.240
of the moment like that.

00:02:26.240 --> 00:02:28.970
It immediately breaks
your immersion.

00:02:28.970 --> 00:02:32.540
Let's look a little bit at
how that happens or why.

00:02:32.540 --> 00:02:34.130
Some of the first
cues that we look

00:02:34.130 --> 00:02:35.810
at when we see these
images are things

00:02:35.810 --> 00:02:37.460
called specular highlights.

00:02:37.460 --> 00:02:39.320
These are really shiny
bits of surfaces,

00:02:39.320 --> 00:02:41.330
like the edge of the
chair there or the edge

00:02:41.330 --> 00:02:42.890
of the table where--

00:02:42.890 --> 00:02:45.410
because of the nature of the
material and the geometry

00:02:45.410 --> 00:02:47.630
we see a highlight
from an incoming light.

00:02:47.630 --> 00:02:49.958
As we move around the scene,
and as we're viewing it,

00:02:49.958 --> 00:02:51.500
that highlight tends
to move with us,

00:02:51.500 --> 00:02:53.540
because that's the way
these kinds of highlights

00:02:53.540 --> 00:02:56.090
behave in a scene.

00:02:56.090 --> 00:02:58.843
The next thing we pick up on
is the shadows of the scene.

00:02:58.843 --> 00:03:01.010
Here we see a couple different
directions of shadows

00:03:01.010 --> 00:03:02.760
because we have some
overhead light coming

00:03:02.760 --> 00:03:05.953
in from a bit towards the
upper right of the image,

00:03:05.953 --> 00:03:08.120
and it's casting shadows
on the chair and the table.

00:03:08.120 --> 00:03:11.540
That tells us something about
how is this scene laid out

00:03:11.540 --> 00:03:13.880
and where the light's
coming from in that scene.

00:03:13.880 --> 00:03:16.100
If those shadows are
wrong, it immediately

00:03:16.100 --> 00:03:19.490
doesn't fit our
impression of the scene.

00:03:19.490 --> 00:03:21.020
Shading is another
important bit,

00:03:21.020 --> 00:03:24.170
where depending on the kind of
light and the kind of surfaces,

00:03:24.170 --> 00:03:27.110
you see intensity of
light coming back at you

00:03:27.110 --> 00:03:29.880
change as you move
along that surface.

00:03:29.880 --> 00:03:32.900
Think of looking at a very
dull ball, or maybe this chair

00:03:32.900 --> 00:03:36.650
you're seeing up on
the stage right here.

00:03:36.650 --> 00:03:38.807
As the light plays
across it you see

00:03:38.807 --> 00:03:40.640
changing amounts of
light coming back at you

00:03:40.640 --> 00:03:46.390
based off of the angle of the
surface relative to that light.

00:03:46.390 --> 00:03:50.563
Finally, reflection is another
big cue that we look at where--

00:03:50.563 --> 00:03:52.480
here we've got a couple
of really shiny things

00:03:52.480 --> 00:03:55.070
like the table that's reflecting
a whole bunch of the wall.

00:03:55.070 --> 00:03:57.460
And we have a whole bunch
of wood tones on the floor

00:03:57.460 --> 00:03:59.110
and on the chairs.

00:03:59.110 --> 00:04:01.690
As light comes in, bounces
off of these surfaces

00:04:01.690 --> 00:04:03.610
and then comes to
our eyes, it picks up

00:04:03.610 --> 00:04:06.310
a bunch of the light and
intensity from those surfaces,

00:04:06.310 --> 00:04:08.620
and so you end up having
some reflected colors.

00:04:08.620 --> 00:04:10.785
If you put an object
in a blue room,

00:04:10.785 --> 00:04:12.160
it's going to look
a little blue.

00:04:12.160 --> 00:04:13.870
That's the same thing
that happens here,

00:04:13.870 --> 00:04:16.245
and that's a big import--
that's an important part of CGI

00:04:16.245 --> 00:04:18.110
as well.

00:04:18.110 --> 00:04:20.140
All of these cues
together tell us

00:04:20.140 --> 00:04:22.900
that this is a
real, natural scene.

00:04:22.900 --> 00:04:24.520
And unfortunately,
humans are actually

00:04:24.520 --> 00:04:26.350
really good at perception.

00:04:26.350 --> 00:04:27.400
We're wildly good at it.

00:04:27.400 --> 00:04:29.840
It makes our jobs as computer
vision engineers really,

00:04:29.840 --> 00:04:32.080
really difficult. We
look at this scene

00:04:32.080 --> 00:04:34.600
and can immediately detect
when something doesn't fit,

00:04:34.600 --> 00:04:36.150
when something is unrealistic.

00:04:36.150 --> 00:04:39.885
And we're great at spotting
fakes and mistakes.

00:04:39.885 --> 00:04:41.260
So let's see what
this looks like

00:04:41.260 --> 00:04:44.560
if we want to put an
actual object in here.

00:04:44.560 --> 00:04:47.655
Here's a really, really
shiny specular rocket.

00:04:47.655 --> 00:04:48.280
It's brand new.

00:04:48.280 --> 00:04:50.680
It's got lots of fine
details in the rivets,

00:04:50.680 --> 00:04:53.710
it's got a shiny window,
some complicated geometry.

00:04:53.710 --> 00:04:56.680
And we're going to try and
light this in our scene

00:04:56.680 --> 00:04:58.600
using a bunch of
fairly naive methods

00:04:58.600 --> 00:05:01.100
that you might be able to do
out of the box with smartphone

00:05:01.100 --> 00:05:02.570
AR today.

00:05:02.570 --> 00:05:04.630
And this is a very
challenging case for this

00:05:04.630 --> 00:05:07.900
because it's a really
specular, shiny rocket.

00:05:07.900 --> 00:05:10.450
So we stuck our rocket
in there and we're

00:05:10.450 --> 00:05:11.650
using a few basic things.

00:05:11.650 --> 00:05:15.190
We got a guess of the
overhead lighting,

00:05:15.190 --> 00:05:17.470
so we have a directional
light coming straight down.

00:05:17.470 --> 00:05:19.157
Shadow doesn't quite match.

00:05:19.157 --> 00:05:20.740
It's not going in
the right direction.

00:05:20.740 --> 00:05:22.690
We're using a
coarse ambient term

00:05:22.690 --> 00:05:25.390
that represents the
average pixel intensity

00:05:25.390 --> 00:05:27.520
of the entire scene.

00:05:27.520 --> 00:05:29.920
Doesn't look quite like it fits.

00:05:29.920 --> 00:05:32.870
Looks pretty virtual to me.

00:05:32.870 --> 00:05:35.430
What we'd love is for the
rocket that we put in,

00:05:35.430 --> 00:05:38.070
this nice shiny rocket,
to look a bit more

00:05:38.070 --> 00:05:41.130
like what you're seeing on the
right of the screen over there.

00:05:41.130 --> 00:05:43.530
Here we're seeing that
that rocket actually

00:05:43.530 --> 00:05:47.220
blends much more nicely with
the scene that we're looking at.

00:05:47.220 --> 00:05:48.690
We've got a
directional shadow that

00:05:48.690 --> 00:05:50.520
matches the shadows around it.

00:05:50.520 --> 00:05:51.990
We've got specular
highlights that

00:05:51.990 --> 00:05:54.720
cover large chunks of the rocket
representing where the light is

00:05:54.720 --> 00:05:56.675
actually coming from.

00:05:56.675 --> 00:05:58.050
Along the sides
you see that some

00:05:58.050 --> 00:05:59.820
of the shading of the
rocket is picking up

00:05:59.820 --> 00:06:02.410
the colors of the
ambient environment.

00:06:02.410 --> 00:06:05.340
This looks a lot more
believable to me,

00:06:05.340 --> 00:06:09.550
and this looks like an ideal
case for lighting this rocket.

00:06:09.550 --> 00:06:11.130
Well, luckily this
was captured live

00:06:11.130 --> 00:06:14.070
on a Pixel 3 using
environmental HDR, which

00:06:14.070 --> 00:06:15.690
is a new mode for
lighting estimation

00:06:15.690 --> 00:06:17.280
that we're bringing to ARCore.

00:06:17.280 --> 00:06:20.273
And this will be available
in ARCore later this summer.

00:06:20.273 --> 00:06:21.690
Let's peel back
some of the layers

00:06:21.690 --> 00:06:23.910
of what these APIs
are actually doing

00:06:23.910 --> 00:06:27.960
and how they build up to this
well-lit, believable, immersive

00:06:27.960 --> 00:06:29.608
rocket you're seeing here.

00:06:29.608 --> 00:06:31.650
The first thing that we're
going to be giving you

00:06:31.650 --> 00:06:34.110
is a main directional
light out of this API.

00:06:34.110 --> 00:06:35.610
Here we're lighting
the rocket using

00:06:35.610 --> 00:06:37.440
just this directional light.

00:06:37.440 --> 00:06:39.193
A big thing that
you can pick up here

00:06:39.193 --> 00:06:40.860
is that we now have
a directional shadow

00:06:40.860 --> 00:06:43.407
on the back end of that rocket
that matches the environment,

00:06:43.407 --> 00:06:45.490
and we're getting some of
the specular highlights,

00:06:45.490 --> 00:06:48.210
because now we actually have
a realistic light coming

00:06:48.210 --> 00:06:52.110
from a particular point of
view, that's not straight down.

00:06:52.110 --> 00:06:55.200
The next piece are ambient
spherical harmonics.

00:06:55.200 --> 00:06:57.540
Now, this is a very common
and useful representation

00:06:57.540 --> 00:07:00.930
of lighting that gives you a
sense of the overall intensity

00:07:00.930 --> 00:07:03.755
of light coming in from
all around the environment.

00:07:03.755 --> 00:07:05.130
And once we've
added this in, you

00:07:05.130 --> 00:07:07.505
can see a bit more shading is
coming in on the bottom end

00:07:07.505 --> 00:07:08.310
of the rocket.

00:07:08.310 --> 00:07:10.140
Not all of it yet, though,
because this is really, really

00:07:10.140 --> 00:07:10.830
shiny.

00:07:10.830 --> 00:07:12.810
And we're still
missing a piece here.

00:07:12.810 --> 00:07:15.275
The final pieces are high
dynamic range cube map.

00:07:15.275 --> 00:07:16.650
This is what's
going to bring you

00:07:16.650 --> 00:07:19.680
to this full ideal
version of the rocket.

00:07:19.680 --> 00:07:21.960
Once we bring that in
you get full specular

00:07:21.960 --> 00:07:23.247
highlights and reflections.

00:07:23.247 --> 00:07:25.080
There's another really
common representation

00:07:25.080 --> 00:07:26.760
you can plug into
your graphics engine

00:07:26.760 --> 00:07:28.670
to handle specular objects.

00:07:28.670 --> 00:07:30.900
You see shading along
the bottom of the rocket.

00:07:30.900 --> 00:07:32.970
And you see a whole
ton of reflected color

00:07:32.970 --> 00:07:34.620
now coming in from
the environment.

00:07:34.620 --> 00:07:36.120
The sides of the
rocket are actually

00:07:36.120 --> 00:07:38.370
picking up those wood tones.

00:07:38.370 --> 00:07:40.650
Let's see what this looks
like in a few other natural

00:07:40.650 --> 00:07:41.880
environments.

00:07:41.880 --> 00:07:44.130
Here we took our
beautiful little rocket

00:07:44.130 --> 00:07:46.160
and played with it
around the Bay Area.

00:07:46.160 --> 00:07:49.470
It's watching the sunset,
playing in the park,

00:07:49.470 --> 00:07:52.680
watching the boats by the water,
parking its car in a garage,

00:07:52.680 --> 00:07:53.690
I guess.

00:07:53.690 --> 00:07:55.410
And in all of
these cases, you're

00:07:55.410 --> 00:07:58.230
seeing that the shading is
matching the environment,

00:07:58.230 --> 00:08:00.477
the specular highlights
match what's believable,

00:08:00.477 --> 00:08:02.310
and the shadows match
what's actually coming

00:08:02.310 --> 00:08:05.160
in-- mostly here from sunlight.

00:08:05.160 --> 00:08:06.440
Some more examples for you.

00:08:06.440 --> 00:08:09.030
Our rocket's out to grab
some dinner, hanging out

00:08:09.030 --> 00:08:11.850
in an office, out on a
patio watching some tourist

00:08:11.850 --> 00:08:14.040
sites near the Bay
Bridge, then indoors

00:08:14.040 --> 00:08:15.810
again with lots of
strong light coming

00:08:15.810 --> 00:08:18.500
in from the outdoor world.

00:08:18.500 --> 00:08:20.280
Last highlights reel, I promise.

00:08:20.280 --> 00:08:22.800
Here we're seeing our rocket
in another office setting,

00:08:22.800 --> 00:08:25.950
in another indoor setting with
some strong bright lighting,

00:08:25.950 --> 00:08:28.650
a few other cases with lots
of external lighting coming in

00:08:28.650 --> 00:08:31.860
around, and another
scene in a park.

00:08:31.860 --> 00:08:33.780
So that's what it looks
like out in the wild.

00:08:33.780 --> 00:08:37.260
But what about for you
to play with today?

00:08:37.260 --> 00:08:38.958
Here's a new scene where--

00:08:38.958 --> 00:08:40.500
I want to do a little
bit of a poll--

00:08:40.500 --> 00:08:43.230
one of these
mannequins is virtual.

00:08:43.230 --> 00:08:47.600
If you think the virtual one is
on the left, raise your hand.

00:08:47.600 --> 00:08:51.440
If you think the virtual one is
on the right, raise your hand.

00:08:51.440 --> 00:08:54.050
If you saw this gag yesterday
in "What's New in ARCore,"

00:08:54.050 --> 00:08:55.080
raise your hand.

00:08:55.080 --> 00:08:55.580
Great.

00:08:55.580 --> 00:08:57.170
Lots of repeat viewers.

00:08:57.170 --> 00:09:00.620
So the mannequin on the left
is the virtual one here.

00:09:00.620 --> 00:09:03.500
We're lighting it using
environmental HDR.

00:09:03.500 --> 00:09:06.470
You can see as the directional
light pans across the scene

00:09:06.470 --> 00:09:07.910
that the shading
on that mannequin

00:09:07.910 --> 00:09:10.860
is changing to match the
real one right next to it.

00:09:10.860 --> 00:09:13.610
And this is actually a
snapshot from our sandbox demo

00:09:13.610 --> 00:09:16.920
that you can play with
across the way over there.

00:09:16.920 --> 00:09:20.000
The next place-- and here
you can see environmental HDR

00:09:20.000 --> 00:09:21.750
being toggled on and off.

00:09:21.750 --> 00:09:23.750
Here you see a lot more
of the color tone impact

00:09:23.750 --> 00:09:26.120
that I was talking about
in the previous scene.

00:09:26.120 --> 00:09:28.850
As we switch it off right
there, doesn't really match.

00:09:28.850 --> 00:09:31.490
Once it's on, we have a lot
of the same golden tones

00:09:31.490 --> 00:09:34.375
that are visible on
the real mannequin.

00:09:34.375 --> 00:09:35.750
The next place
you're going to be

00:09:35.750 --> 00:09:39.140
able to see environmental HDR is
in Scene Viewer, which we also

00:09:39.140 --> 00:09:41.930
talked about yesterday in the
"What's New in ARCore" session.

00:09:41.930 --> 00:09:44.900
This is a new way to
view your 3D models live

00:09:44.900 --> 00:09:46.323
in the space in front of you.

00:09:46.323 --> 00:09:48.740
And we're thrilled to announce
that environmental HDR will

00:09:48.740 --> 00:09:51.440
be coming to Scene Viewer later
this summer in an upcoming

00:09:51.440 --> 00:09:52.250
release.

00:09:52.250 --> 00:09:54.415
So you'll be able to have
this Curiosity Rover,

00:09:54.415 --> 00:09:56.540
plop it into your living
room, and have it actually

00:09:56.540 --> 00:09:59.200
look realistic and immersive
in your living room.

00:09:59.200 --> 00:10:01.070
Though if it looks real
in your living room,

00:10:01.070 --> 00:10:02.945
you might have to match
your furniture to it,

00:10:02.945 --> 00:10:05.070
that might be a bit hard.

00:10:05.070 --> 00:10:07.040
So now I'd love to
hand this over to Alex

00:10:07.040 --> 00:10:10.460
to give us a deep dive into
how environmental HDR actually

00:10:10.460 --> 00:10:11.450
works.

00:10:11.450 --> 00:10:12.686
Thanks.

00:10:12.686 --> 00:10:15.410
[APPLAUSE]

00:10:15.410 --> 00:10:16.890
ALEX MA: Thank you, Konstantine.

00:10:16.890 --> 00:10:18.280
Hi everyone.

00:10:18.280 --> 00:10:19.140
My name's Alex Ma.

00:10:19.140 --> 00:10:21.840
I'm a software engineer
at Google Daydream.

00:10:21.840 --> 00:10:24.330
I'm really happy to
be here to give you

00:10:24.330 --> 00:10:28.782
a deep dive into the technology
behind this new feature.

00:10:28.782 --> 00:10:29.990
So let's take a look at this.

00:10:29.990 --> 00:10:32.120
Beautiful picture, isn't it?

00:10:32.120 --> 00:10:34.200
This is the image actually--
a computer graphics

00:10:34.200 --> 00:10:36.470
rendering for a short film.

00:10:36.470 --> 00:10:40.130
Rendering with natural light
produced by Dr. [INAUDIBLE]

00:10:40.130 --> 00:10:42.340
and his team in 1998.

00:10:42.340 --> 00:10:47.740
All the spheres, the holders,
and the table are 3D models.

00:10:47.740 --> 00:10:49.266
They're not real.

00:10:49.266 --> 00:10:51.540
So only the background,
as you can see,

00:10:51.540 --> 00:10:54.220
full screen, are actually--

00:10:54.220 --> 00:10:56.400
that environment
light itself was

00:10:56.400 --> 00:10:58.710
captured from the real world.

00:10:58.710 --> 00:11:00.750
So you can see from
the scene, light

00:11:00.750 --> 00:11:06.230
are scattered through the
treetops and getting refracted

00:11:06.230 --> 00:11:12.570
or refracted onto different
surfaces on this thing.

00:11:12.570 --> 00:11:15.530
This is a very good example of
how environmental lighting can

00:11:15.530 --> 00:11:18.200
contribute to the realism
of virtual object,

00:11:18.200 --> 00:11:20.240
even though the
geometry is very simple.

00:11:22.830 --> 00:11:26.260
So in real world, light
comes from everywhere.

00:11:26.260 --> 00:11:28.830
The appearance of an
object is influenced

00:11:28.830 --> 00:11:31.690
by the light running from
all incidental directions

00:11:31.690 --> 00:11:32.860
around it.

00:11:32.860 --> 00:11:36.240
Some directions may have a
stronger influence while some

00:11:36.240 --> 00:11:37.020
don't.

00:11:37.020 --> 00:11:39.960
But they all contribute to
the object appearance one

00:11:39.960 --> 00:11:42.790
way or another.

00:11:42.790 --> 00:11:46.125
Without environmental lighting,
as you can see on the screen,

00:11:46.125 --> 00:11:47.500
this is a very
simple set-up with

00:11:47.500 --> 00:11:49.930
a typical directional light.

00:11:49.930 --> 00:11:51.740
And what does it look like?

00:11:51.740 --> 00:11:53.280
This looks very boring.

00:11:53.280 --> 00:11:55.780
And this is actually typically
what we do during AR lighting

00:11:55.780 --> 00:11:58.690
today, because we don't
have any knowledge of how

00:11:58.690 --> 00:12:01.600
the lighting came from and
what is the whole environment

00:12:01.600 --> 00:12:03.870
lighting is.

00:12:03.870 --> 00:12:05.760
How about this one?

00:12:05.760 --> 00:12:06.680
So, you see?

00:12:06.680 --> 00:12:09.980
With the same set-up but
with environmental lighting,

00:12:09.980 --> 00:12:14.890
it significantly increased
the realism of virtual object.

00:12:14.890 --> 00:12:17.470
Then the question becomes,
how do we actually

00:12:17.470 --> 00:12:20.940
capture this
environmental lighting?

00:12:20.940 --> 00:12:24.510
So Dr. [INAUDIBLE]
established a modern framework

00:12:24.510 --> 00:12:28.680
of High Dynamic Range Imaging,
or HDRI, as we [INAUDIBLE]

00:12:28.680 --> 00:12:31.770
in computer graphics
and visual effects.

00:12:31.770 --> 00:12:33.750
To acquire
environmental lighting,

00:12:33.750 --> 00:12:38.160
a typical setup is to use a
camera with a telephoto lens

00:12:38.160 --> 00:12:40.530
to shoot a mirror sphere.

00:12:40.530 --> 00:12:42.960
Shoot even one
direction, it generally

00:12:42.960 --> 00:12:46.150
covers almost the entire
specific environment.

00:12:46.150 --> 00:12:49.215
But the usual practice
is, we'll shoot the mirror

00:12:49.215 --> 00:12:52.510
ball from opposite directions.

00:12:52.510 --> 00:12:56.280
And in this way we can
reduce image distortion.

00:12:56.280 --> 00:12:59.970
And also it's easier to
remove the tripod, the camera,

00:12:59.970 --> 00:13:04.540
and the photographer
for that image.

00:13:04.540 --> 00:13:07.840
We also want to capture
the lighting environment

00:13:07.840 --> 00:13:09.770
with multiple exposures.

00:13:09.770 --> 00:13:12.070
It's something to do with
what we call dynamic range.

00:13:12.070 --> 00:13:14.150
We will cover it later.

00:13:14.150 --> 00:13:18.167
But you can see from here
because the sky is real bright,

00:13:18.167 --> 00:13:20.500
such like if you want to
capture the detail from the sky

00:13:20.500 --> 00:13:24.640
or a treetop, we have to use a
shorter exposure while-- if you

00:13:24.640 --> 00:13:26.467
want to cover the
detail on the ground,

00:13:26.467 --> 00:13:29.050
then we need [INAUDIBLE] it will
become longer because usually

00:13:29.050 --> 00:13:30.467
people-- things
on the ground will

00:13:30.467 --> 00:13:33.840
be much darker in this case.

00:13:33.840 --> 00:13:36.720
We then fuse all the
photographs into this image

00:13:36.720 --> 00:13:39.150
to what we call a light prop.

00:13:39.150 --> 00:13:41.900
This is essentially
the very [INAUDIBLE]

00:13:41.900 --> 00:13:43.790
for a remnant of lighting.

00:13:43.790 --> 00:13:45.860
And this is the most
common way to do lighting

00:13:45.860 --> 00:13:47.390
in visual effects right now.

00:13:47.390 --> 00:13:49.730
As you can see, how they
render photo-realistic

00:13:49.730 --> 00:13:53.690
CGI creates an element
in blockbuster movies.

00:13:53.690 --> 00:13:56.420
So there are two
interesting facts here.

00:13:56.420 --> 00:14:01.190
The first one-- so this
is an image with about 900

00:14:01.190 --> 00:14:03.230
by 900 pixels.

00:14:03.230 --> 00:14:05.360
Every piece on
here is effectively

00:14:05.360 --> 00:14:08.910
a light source, no matter how
bright or how big they are.

00:14:08.910 --> 00:14:12.440
So in this case, there are more
than 600,000 lights already,

00:14:12.440 --> 00:14:15.770
just with this texture.

00:14:15.770 --> 00:14:17.790
And secondly, you can
see a very interesting

00:14:17.790 --> 00:14:20.020
coming back the lighting range.

00:14:20.020 --> 00:14:22.710
The range is about
5,000 to 1, which

00:14:22.710 --> 00:14:25.320
means the brightest
pixel here is

00:14:25.320 --> 00:14:28.260
5,000 times brighter
than the darkest pixel.

00:14:28.260 --> 00:14:30.930
Usually your phone, the
camera on your phone,

00:14:30.930 --> 00:14:35.190
basically have 8-bit of range,
which means the range is only

00:14:35.190 --> 00:14:37.440
from 255 to 1.

00:14:37.440 --> 00:14:39.562
How can you get that fancy one?

00:14:39.562 --> 00:14:40.770
It's a very challenging case.

00:14:40.770 --> 00:14:44.140
That's why we had to actually--
in shooting this type of way

00:14:44.140 --> 00:14:46.360
to change that is for
your time such as it

00:14:46.360 --> 00:14:48.630
will cover the
whole dynamic range.

00:14:48.630 --> 00:14:50.970
But this is also
impossible for AR.

00:14:50.970 --> 00:14:54.570
So now we all know
environmental lighting is great.

00:14:54.570 --> 00:14:57.720
So how can we actually
bring this technique to AR?

00:14:57.720 --> 00:15:01.840
So let's take a look at what
are the challenges here.

00:15:01.840 --> 00:15:04.840
As we said still earlier,
the first challenge

00:15:04.840 --> 00:15:07.240
is dynamic range.

00:15:07.240 --> 00:15:10.120
So, for example, by looking
at this picture here--

00:15:10.120 --> 00:15:12.700
and we have different
multiple exposures

00:15:12.700 --> 00:15:14.680
showing on the screen--

00:15:14.680 --> 00:15:17.800
you can suddenly see, for
example, the reading on a chair

00:15:17.800 --> 00:15:19.730
at the bottom of the image.

00:15:19.730 --> 00:15:24.310
It's pretty fit to the
8-bit range of your camera.

00:15:24.310 --> 00:15:29.340
However, for the top, no matter
how you change the exposure

00:15:29.340 --> 00:15:32.550
setting, it always give
you 255 because that

00:15:32.550 --> 00:15:34.320
is facing a very bright area.

00:15:34.320 --> 00:15:36.870
The outdoor sunlight basically
casts through the window

00:15:36.870 --> 00:15:39.030
and get into the
indoor environment.

00:15:39.030 --> 00:15:41.130
So no matter how you
change exposure setting,

00:15:41.130 --> 00:15:44.330
you never get the right
answer for the lighting.

00:15:44.330 --> 00:15:47.100
Lighting there is
simply just clipped.

00:15:47.100 --> 00:15:49.410
Then, without knowing
that information,

00:15:49.410 --> 00:15:51.870
you can never render
a very good image

00:15:51.870 --> 00:15:55.600
based on this piece of lighting.

00:15:55.600 --> 00:15:58.130
A similar dynamic range should
happen with artificial light

00:15:58.130 --> 00:16:00.140
that we see in
this indoor scene.

00:16:00.140 --> 00:16:03.330
As you can see, no matter how
we change the exposure time,

00:16:03.330 --> 00:16:06.320
the light sources on
top are always clipped.

00:16:06.320 --> 00:16:09.740
And it's also very hard
to find a good range

00:16:09.740 --> 00:16:15.030
of exposures setting that you
can cover the entire image.

00:16:15.030 --> 00:16:16.147
So remember how we--

00:16:16.147 --> 00:16:17.730
remember how we were
talking about how

00:16:17.730 --> 00:16:20.790
to capture the light mirror
ball with multiple exposure?

00:16:20.790 --> 00:16:23.590
This is exactly trying
to solve the same issue.

00:16:23.590 --> 00:16:28.520
But in AR we cannot
do this in real time.

00:16:28.520 --> 00:16:31.060
The consequence of not
having enough dynamic range

00:16:31.060 --> 00:16:32.810
is that your lighting
environment does not

00:16:32.810 --> 00:16:35.430
have the correct
energy for computation.

00:16:35.430 --> 00:16:37.230
The light source
are usually clipped.

00:16:37.230 --> 00:16:40.290
So the rendering looks dull,
as you can see on the left.

00:16:40.290 --> 00:16:44.540
But having a light
energy with HDR--

00:16:44.540 --> 00:16:47.360
then you certainly see
the rendering on the right

00:16:47.360 --> 00:16:49.650
is more accurate
because, in this case,

00:16:49.650 --> 00:16:51.620
the environment is actually
a [INAUDIBLE] thing

00:16:51.620 --> 00:16:54.900
with a very strong sunlight and
you can see, actually see space

00:16:54.900 --> 00:16:59.770
for spectral refreshing on
top of the rocket surface.

00:16:59.770 --> 00:17:02.030
So here we show
another indoor scene--

00:17:02.030 --> 00:17:03.550
it's our parking garage.

00:17:03.550 --> 00:17:06.339
So even with this slightly
lower dynamic range--

00:17:06.339 --> 00:17:08.020
in this case this is indoor--

00:17:08.020 --> 00:17:10.569
as you can see on the
[? topic ?] window

00:17:10.569 --> 00:17:14.740
the refraction is
still very faithful

00:17:14.740 --> 00:17:16.660
if you render with HDR.

00:17:16.660 --> 00:17:19.060
It looked more contract and
more physically correct.

00:17:22.550 --> 00:17:26.390
The second challenge comes from
how our camera sees the world.

00:17:26.390 --> 00:17:30.290
For AR, we visualize
everything with our camera.

00:17:30.290 --> 00:17:33.710
A typical mobile phone
camera only cover about 6%

00:17:33.710 --> 00:17:35.050
of the 360 environment.

00:17:35.050 --> 00:17:37.370
That's a tiny fraction
of the whole thing we

00:17:37.370 --> 00:17:41.420
are seeing in this environment.

00:17:41.420 --> 00:17:44.990
And as a usual
practice, usually we

00:17:44.990 --> 00:17:47.570
are pointing our
phone to the ground

00:17:47.570 --> 00:17:50.300
or to a table tower when
we're engaging a AR typical

00:17:50.300 --> 00:17:52.310
wanted dropped object onto it.

00:17:52.310 --> 00:17:54.660
Or we are pointing to the
person, where maybe you

00:17:54.660 --> 00:17:56.190
will do a AR selfie.

00:17:56.190 --> 00:17:59.690
It's never going to pointing
your camera to the light source

00:17:59.690 --> 00:18:02.330
directly unless they're-- oh,
where are the light source

00:18:02.330 --> 00:18:03.300
in this thing?

00:18:03.300 --> 00:18:05.150
This is almost
impossible to do when

00:18:05.150 --> 00:18:08.220
we're engaged in an AR session.

00:18:08.220 --> 00:18:11.190
So how to fill this missing
information becomes-- also

00:18:11.190 --> 00:18:12.380
becomes a challenge.

00:18:12.380 --> 00:18:14.840
In the previous
case, we are dealing

00:18:14.840 --> 00:18:17.150
with this problem
with a mirror ball,

00:18:17.150 --> 00:18:19.570
because a mirror ball,
where we see the reflection,

00:18:19.570 --> 00:18:22.020
you have to cover the
whole 360 environment.

00:18:22.020 --> 00:18:24.020
But in this case,
we don't want a user

00:18:24.020 --> 00:18:27.150
to actually-- when they start to
use AR application-- they start

00:18:27.150 --> 00:18:29.570
to put a mirror ball
in front of their phone

00:18:29.570 --> 00:18:30.960
and try to look around.

00:18:30.960 --> 00:18:32.240
And that's a very tedious job.

00:18:35.220 --> 00:18:39.330
So how can we actually provide
360 environmental lighting

00:18:39.330 --> 00:18:44.445
for AR with such a limited
field of input and also LDR?

00:18:48.580 --> 00:18:51.970
So we still like the
idea to put a mirror ball

00:18:51.970 --> 00:18:53.330
in front of the phone.

00:18:53.330 --> 00:18:55.900
We don't want our user
to do it, so we actually

00:18:55.900 --> 00:18:57.560
do it by ourselves.

00:18:57.560 --> 00:18:59.660
So here you can see
this would actually

00:18:59.660 --> 00:19:03.430
be the rig that was not
only the mirror ball sphere

00:19:03.430 --> 00:19:08.920
here, but we also add a diffuse
and the [INAUDIBLE] sphere.

00:19:08.920 --> 00:19:12.850
I will talk you more about why
we are adding more spheres here

00:19:12.850 --> 00:19:17.540
later, but we actually designed
this rig such that this--

00:19:17.540 --> 00:19:20.890
the image for the sphere
are actually the lighting

00:19:20.890 --> 00:19:22.910
measurement [INAUDIBLE].

00:19:22.910 --> 00:19:24.610
I would put a
mobile camera here,

00:19:24.610 --> 00:19:28.900
as you can see, to actually
look at the three spheres

00:19:28.900 --> 00:19:31.960
here while looking at the
image that the camera can see.

00:19:34.615 --> 00:19:39.220
But typically the image
will look like this.

00:19:39.220 --> 00:19:42.160
And you can see the
pattern you see all sphere

00:19:42.160 --> 00:19:45.510
images that actually come from
the HDL lighting measurement.

00:19:45.510 --> 00:19:49.410
So actually we try to use
the three sphere to measure

00:19:49.410 --> 00:19:51.140
lighting [INAUDIBLE].

00:19:51.140 --> 00:19:53.130
Remember we talk about before?

00:19:53.130 --> 00:19:59.040
We simply use a simple single
mirror ball to shoot HDI.

00:19:59.040 --> 00:20:02.520
However, it isn't, because we
cannot trick the exposure time

00:20:02.520 --> 00:20:03.400
for a phone.

00:20:03.400 --> 00:20:05.520
We actually have
to add a diffuse

00:20:05.520 --> 00:20:07.500
and measure to
actually simulate we

00:20:07.500 --> 00:20:10.500
are changing exposure setting.

00:20:10.500 --> 00:20:15.530
So as you can see on the screen,
the mirror ball refraction

00:20:15.530 --> 00:20:18.500
usually clip as we say
before, because we only

00:20:18.500 --> 00:20:22.310
have 8-bit range
for the camera here.

00:20:22.310 --> 00:20:25.610
But the diffuse
refraction from the middle

00:20:25.610 --> 00:20:27.530
is actually suitable
for us to capture

00:20:27.530 --> 00:20:32.030
the entire amount of the energy
for the lighting arrangement.

00:20:32.030 --> 00:20:33.980
Because usually it
worked very well

00:20:33.980 --> 00:20:36.410
with other exposure
setting for the camera,

00:20:36.410 --> 00:20:37.880
and usually the
diffuse refactoring

00:20:37.880 --> 00:20:40.240
will not be saturated at all.

00:20:40.240 --> 00:20:42.050
And the [INAUDIBLE]
of AR record lighting

00:20:42.050 --> 00:20:45.860
for viewing just in between
the diffuse and spectral light

00:20:45.860 --> 00:20:48.757
give us more information
that we can interpolate.

00:20:52.960 --> 00:20:55.780
In our world, we
add more measurement

00:20:55.780 --> 00:20:59.530
prop instead of tweaking the
exposure time from the phone.

00:20:59.530 --> 00:21:01.870
So this work basically
establish the mapping

00:21:01.870 --> 00:21:04.100
between the input and output.

00:21:04.100 --> 00:21:06.280
So the input will
be the rear camera

00:21:06.280 --> 00:21:10.000
image and output will be our
lighting measurements that

00:21:10.000 --> 00:21:13.370
will be output for the user.

00:21:13.370 --> 00:21:16.120
So the rig is very light
and give us the freedom

00:21:16.120 --> 00:21:18.790
to walk around and
take more measurements

00:21:18.790 --> 00:21:21.610
in different environments
to help us understand more

00:21:21.610 --> 00:21:25.570
about mapping between
the input and output.

00:21:25.570 --> 00:21:28.650
As you can see, the
mapping between these two

00:21:28.650 --> 00:21:30.400
can be very complex.

00:21:30.400 --> 00:21:33.870
So we try to leverage the
law of large number and use

00:21:33.870 --> 00:21:35.160
machine learning too.

00:21:35.160 --> 00:21:38.400
If we can collect more of these
kind of samples, then maybe

00:21:38.400 --> 00:21:42.870
we can [INAUDIBLE] very good.

00:21:42.870 --> 00:21:46.950
So far we have about 50 million
of these kind of samples,

00:21:46.950 --> 00:21:50.740
and the number
are still growing.

00:21:50.740 --> 00:21:53.820
So use all the sample we
have, we start a trend.

00:21:53.820 --> 00:21:56.320
A new network that
can try to establish

00:21:56.320 --> 00:21:58.030
the mapping between
the input/output

00:21:58.030 --> 00:22:00.430
and start to generate HDI
light [INAUDIBLE] just

00:22:00.430 --> 00:22:03.220
simply based on the
camera imaging feed

00:22:03.220 --> 00:22:05.770
from a mobile device.

00:22:05.770 --> 00:22:10.340
The research is
done already and we

00:22:10.340 --> 00:22:12.310
are happy that the
paper is accepted

00:22:12.310 --> 00:22:16.510
by a very important [INAUDIBLE]
conference, committee

00:22:16.510 --> 00:22:19.870
region, and patent
recognition this year.

00:22:19.870 --> 00:22:25.130
And in summer we are going
to present work there.

00:22:25.130 --> 00:22:27.140
And this paper is
already on archive

00:22:27.140 --> 00:22:30.140
so you can pretty
easily Google the title

00:22:30.140 --> 00:22:31.250
and that give you the PDF.

00:22:31.250 --> 00:22:32.458
You can have a preview of it.

00:22:35.060 --> 00:22:36.470
Now we have a
basic understanding

00:22:36.470 --> 00:22:40.310
about how we can actually put
use HDR lighting for simply

00:22:40.310 --> 00:22:41.550
a camera image.

00:22:41.550 --> 00:22:43.960
Now let's see what we can
offer to the developer

00:22:43.960 --> 00:22:48.470
to let it-- to use this
very good asset for them

00:22:48.470 --> 00:22:52.350
to render realistic objects.

00:22:52.350 --> 00:22:55.750
First, we will offer the major--

00:22:55.750 --> 00:22:58.270
main-- directional light.

00:22:58.270 --> 00:23:01.230
Like basically come from the
most important contribution

00:23:01.230 --> 00:23:03.810
for the lighting
environment itself.

00:23:03.810 --> 00:23:08.130
In this case, we're offering
direction and intensity

00:23:08.130 --> 00:23:10.590
for this typical
lighting representation.

00:23:10.590 --> 00:23:14.490
And you can also use the
direction to cast shadows.

00:23:14.490 --> 00:23:17.340
Usually shadow technique,
like shadow mapping

00:23:17.340 --> 00:23:20.080
or even percentage
closer filtering,

00:23:20.080 --> 00:23:22.110
they rely on a
single direction that

00:23:22.110 --> 00:23:26.060
allows you to employ your shadow
camera to look at the object.

00:23:26.060 --> 00:23:31.270
So light direction will be
very helpful to do this job.

00:23:31.270 --> 00:23:34.100
The second we're researching
is about [INAUDIBLE] emulation.

00:23:34.100 --> 00:23:39.270
So we do not simply want to just
provide a typical offset base

00:23:39.270 --> 00:23:41.283
ambient to the developers.

00:23:41.283 --> 00:23:42.700
So we want to make
sure everything

00:23:42.700 --> 00:23:45.600
can be physically correct.

00:23:45.600 --> 00:23:49.980
So in this case, we're going
to model our MPN immersion

00:23:49.980 --> 00:23:53.210
as 27 spherical
harmonics coefficient.

00:23:53.210 --> 00:23:54.840
So spherical harmonics
is very popular

00:23:54.840 --> 00:23:56.760
lighting representation
for having use

00:23:56.760 --> 00:23:59.670
in video game or visual
effects for many years.

00:23:59.670 --> 00:24:03.505
So it serves a very good
approximation of [INAUDIBLE]

00:24:03.505 --> 00:24:05.630
and typically works very
well with natural lighting

00:24:05.630 --> 00:24:07.560
environment.

00:24:07.560 --> 00:24:11.100
So in this case, we're going
to remove the directional light

00:24:11.100 --> 00:24:13.230
component because we
don't want to duplicate

00:24:13.230 --> 00:24:15.690
lighting contribution here.

00:24:15.690 --> 00:24:19.830
In that way, we can find the
actual ambient contribution.

00:24:19.830 --> 00:24:22.770
Then we can begin to compute
the coefficient of each sphere

00:24:22.770 --> 00:24:24.240
harmonics basis function.

00:24:24.240 --> 00:24:25.920
So sphere harmonics
is very similar

00:24:25.920 --> 00:24:29.080
to free or transform
or DCT transform,

00:24:29.080 --> 00:24:31.150
but it's actually
defined on a sphere.

00:24:31.150 --> 00:24:33.330
So it's basically a series
of basic functioning.

00:24:33.330 --> 00:24:35.210
If you edit them
out one by one, you

00:24:35.210 --> 00:24:37.080
start to approximate
your function

00:24:37.080 --> 00:24:38.630
much, much more accurate.

00:24:38.630 --> 00:24:41.340
It's starting with
a constant, then

00:24:41.340 --> 00:24:43.680
typically you are
using more coefficient

00:24:43.680 --> 00:24:46.290
to actually model the actual
energy for your lighting

00:24:46.290 --> 00:24:48.820
environment.

00:24:48.820 --> 00:24:51.490
In typical case,
people use label two,

00:24:51.490 --> 00:24:53.280
which have night
coefficient [INAUDIBLE]

00:24:53.280 --> 00:24:55.840
and that give you
27 coefficient.

00:24:55.840 --> 00:24:58.350
And this is very popular
in graphics engine

00:24:58.350 --> 00:24:59.690
like Unity or Unreal.

00:24:59.690 --> 00:25:02.560
They mostly support
sphere harmonics.

00:25:02.560 --> 00:25:04.830
So you can simply grab the
number and just plug it in.

00:25:04.830 --> 00:25:07.678
That will do the job.

00:25:07.678 --> 00:25:10.220
If you are interested in knowing
more about sphere harmonics,

00:25:10.220 --> 00:25:12.680
Google the keywords for
[INAUDIBLE] lighting.

00:25:12.680 --> 00:25:14.576
That'll probably give you the--

00:25:14.576 --> 00:25:16.982
this paper by Robyn
Green that has

00:25:16.982 --> 00:25:18.440
a very detailed
introduction on how

00:25:18.440 --> 00:25:22.240
to use spherical
harmonics for lighting.

00:25:22.240 --> 00:25:26.170
Last and most importantly,
we will offer full HDR.

00:25:26.170 --> 00:25:30.230
16-bit floating point precision
cubemap for the developers.

00:25:30.230 --> 00:25:35.030
It is essentially the native
representation for this HDR

00:25:35.030 --> 00:25:36.265
lighting environment.

00:25:36.265 --> 00:25:37.640
So instead we give
you the prop--

00:25:37.640 --> 00:25:39.830
will actually give
you a much more useful

00:25:39.830 --> 00:25:41.720
representing because
cubemap is a-- people

00:25:41.720 --> 00:25:43.762
use cubemap everyday.

00:25:43.762 --> 00:25:45.470
So it's very useful
if you want to create

00:25:45.470 --> 00:25:48.540
a shiny or classic refreshing
look for your object,

00:25:48.540 --> 00:25:52.520
or even you can just grab
the simple native information

00:25:52.520 --> 00:25:54.498
and try to use any of
those rendering technique

00:25:54.498 --> 00:25:55.790
you can find in visual effects.

00:25:58.630 --> 00:26:00.730
So we also try to introduce
new-- two new concept

00:26:00.730 --> 00:26:02.170
for AR lighting.

00:26:02.170 --> 00:26:05.830
First, the lighting output that
we are giving to the developer,

00:26:05.830 --> 00:26:08.710
essentially what we
call relative intensity.

00:26:08.710 --> 00:26:11.890
That means-- because usually
when you is using AR,

00:26:11.890 --> 00:26:14.450
your camera is already
in auto exposure mode.

00:26:14.450 --> 00:26:16.550
So when you look at
different thing--

00:26:16.550 --> 00:26:19.540
it's for your time changing
why you are doing--

00:26:19.540 --> 00:26:21.370
engaging with AR.

00:26:21.370 --> 00:26:24.070
As you can see on the screen,
if I'm looking at the ground

00:26:24.070 --> 00:26:25.870
because the ground
reflects less light,

00:26:25.870 --> 00:26:28.640
so the camera
actually automatically

00:26:28.640 --> 00:26:32.320
expand exposure time trying to
make an image look adequate.

00:26:32.320 --> 00:26:34.240
And while I'm looking
at a window, which

00:26:34.240 --> 00:26:36.940
is much stronger,
brighter than the ground,

00:26:36.940 --> 00:26:39.320
they start to shorten
that exposure time.

00:26:39.320 --> 00:26:41.320
So we don't want the
developer to actually worry

00:26:41.320 --> 00:26:45.280
about how to handle
exposure time, or ISO value,

00:26:45.280 --> 00:26:48.130
or even color correction,
white balance.

00:26:48.130 --> 00:26:51.610
We simply try to aggregate every
information to the output such

00:26:51.610 --> 00:26:55.870
that when you grab the
lighting value from our API,

00:26:55.870 --> 00:26:57.460
it's already
consider all of that,

00:26:57.460 --> 00:27:00.010
and you simply just
grab it and plug it

00:27:00.010 --> 00:27:01.312
into your graphic engine.

00:27:01.312 --> 00:27:02.770
[INAUDIBLE] basically
just give you

00:27:02.770 --> 00:27:05.770
the right look for your object.

00:27:05.770 --> 00:27:10.060
There also-- we are shifting
into a more physically correct

00:27:10.060 --> 00:27:10.950
framework.

00:27:10.950 --> 00:27:13.300
We're going to provide you
with linear lighting process

00:27:13.300 --> 00:27:17.800
where it's very
common in visual field

00:27:17.800 --> 00:27:21.585
that when you do lighting
everything it will be linear.

00:27:21.585 --> 00:27:22.960
So in this case,
for example, you

00:27:22.960 --> 00:27:30.010
can start to use your 3D Max or
Maya package to prepare your 3D

00:27:30.010 --> 00:27:30.850
asset.

00:27:30.850 --> 00:27:34.510
Then all the numbers can
be easily brought to--

00:27:34.510 --> 00:27:37.345
into our AR kind of environment.

00:27:40.262 --> 00:27:41.970
So to this stage we're
happy to introduce

00:27:41.970 --> 00:27:44.340
to you three different
APIs and their properties.

00:27:44.340 --> 00:27:46.048
Let's take a look at
how you can use them

00:27:46.048 --> 00:27:48.732
to your shading framework.

00:27:48.732 --> 00:27:50.190
So typically, the
mentor should not

00:27:50.190 --> 00:27:53.270
give you the major look
of your virtual object.

00:27:53.270 --> 00:27:59.040
And sometimes you can even use
a direction to cast a shadow.

00:27:59.040 --> 00:28:02.000
So ambient we're taking
care of all the rest--

00:28:02.000 --> 00:28:03.620
I'm all over the
environment energy

00:28:03.620 --> 00:28:06.480
and it casts onto the object.

00:28:06.480 --> 00:28:08.510
And finally, you
can use HDR cubemap

00:28:08.510 --> 00:28:12.460
to create a realistic look for
the refraction, the glassiness

00:28:12.460 --> 00:28:15.540
of the object.

00:28:15.540 --> 00:28:18.390
And by using this
all three, it really

00:28:18.390 --> 00:28:20.010
depends on your creativity.

00:28:20.010 --> 00:28:23.910
Try to define what is
a look for your object.

00:28:23.910 --> 00:28:26.850
Entirely up to you to
weigh different things

00:28:26.850 --> 00:28:29.160
and try to find the best
material you can represent

00:28:29.160 --> 00:28:31.940
for your virtual object.

00:28:31.940 --> 00:28:35.340
The tools are there,
please use it.

00:28:35.340 --> 00:28:37.470
For myself, I've been
working in visual effects

00:28:37.470 --> 00:28:40.500
industry for several years
before joining Google.

00:28:40.500 --> 00:28:42.960
And I always had the
dream that if someday we

00:28:42.960 --> 00:28:45.270
can share this
super cool lighting

00:28:45.270 --> 00:28:50.030
technology that we learn from
there to the general public.

00:28:50.030 --> 00:28:55.560
So that with a single mobile
device is actually make you

00:28:55.560 --> 00:28:59.550
like a director,
or cinematographer,

00:28:59.550 --> 00:29:02.410
or even you can shoot your
own movie-- video-type movie--

00:29:02.410 --> 00:29:05.190
with this stuff as an option.

00:29:05.190 --> 00:29:07.500
So AI is simply blending
virtual with real.

00:29:07.500 --> 00:29:10.380
And that's exactly what
Visual Effects does.

00:29:10.380 --> 00:29:14.730
So today we are happy to
actually announce this API

00:29:14.730 --> 00:29:16.270
and hope you can use it.

00:29:16.270 --> 00:29:19.110
Let's take a look
what the actual code--

00:29:19.110 --> 00:29:22.900
how can we introduce the
features in our code.

00:29:22.900 --> 00:29:26.310
So let's take a look Java APIs.

00:29:26.310 --> 00:29:29.120
So this is a typical setting
for the directional API.

00:29:29.120 --> 00:29:31.740
So it's very similar
to what we had before,

00:29:31.740 --> 00:29:35.240
but now we are introducing a new
mode called environmental HDR.

00:29:35.240 --> 00:29:39.530
So you state a mode, and
you're getting a light estimate

00:29:39.530 --> 00:29:40.850
for every frame.

00:29:40.850 --> 00:29:43.400
And from there you can
try to use a function

00:29:43.400 --> 00:29:46.010
getMainLightDirection
or getMainLightIntensity

00:29:46.010 --> 00:29:47.960
to get the direction
and light intended

00:29:47.960 --> 00:29:50.470
for that directional light.

00:29:50.470 --> 00:29:53.810
Similar things happen with
ambient sphere harmonics.

00:29:53.810 --> 00:29:57.400
So you would just need to use
get ambient sphere harmonics,

00:29:57.400 --> 00:30:00.190
then that would give you
the sphere harmonic value

00:30:00.190 --> 00:30:03.580
that you plug into
your graphics engine.

00:30:03.580 --> 00:30:06.030
And finally will
be the HDR cubemap.

00:30:06.030 --> 00:30:10.140
Then it will give you an
array of six android image.

00:30:10.140 --> 00:30:12.870
Then you use that-- you
upload those to the GPU

00:30:12.870 --> 00:30:14.000
and starting from there.

00:30:17.540 --> 00:30:19.840
And for Unity, it
will be much easier.

00:30:19.840 --> 00:30:22.750
Basically for the
ARCore config you simply

00:30:22.750 --> 00:30:28.730
set the environment HDR mode.

00:30:28.730 --> 00:30:30.430
Then you'll be automatic--

00:30:30.430 --> 00:30:33.160
I'll try-- we'll try to update--

00:30:33.160 --> 00:30:36.533
all the properties
in Unity underneath.

00:30:39.780 --> 00:30:40.300
Thank you.

00:30:40.300 --> 00:30:43.860
This concludes the deep
dive part of this HDR

00:30:43.860 --> 00:30:45.630
environmental lighting.

00:30:45.630 --> 00:30:49.080
I would like to actually
thank the people who

00:30:49.080 --> 00:30:51.920
work behind this technology
because they can't be here

00:30:51.920 --> 00:30:52.420
today.

00:30:52.420 --> 00:30:54.026
Let's give them a
round of applause.

00:30:54.026 --> 00:30:54.900
[APPLAUSE]

00:30:54.900 --> 00:30:56.930
Because then I can
be here to present

00:30:56.930 --> 00:30:58.013
this cool feature for you.

00:30:58.013 --> 00:30:59.150
Thank you.

00:30:59.150 --> 00:31:01.020
Let's give the stage
back to Konstantine.

00:31:01.020 --> 00:31:02.440
He will do a live demo.

00:31:02.440 --> 00:31:02.940
Thank you.

00:31:07.770 --> 00:31:09.680
KONSTANTINE TSOTSOS:
Thank you, Alex.

00:31:09.680 --> 00:31:10.180
All right.

00:31:10.180 --> 00:31:13.430
Are we ready to
play with it live?

00:31:13.430 --> 00:31:16.150
Could I get the lights over
towards one side, please?

00:31:20.630 --> 00:31:21.230
All right.

00:31:21.230 --> 00:31:23.817
So I'm going to start
up by firing up the app.

00:31:23.817 --> 00:31:25.900
This is going to be the
same app in the same model

00:31:25.900 --> 00:31:28.660
that you've been seeing in all
of our examples so far today.

00:31:28.660 --> 00:31:32.032
So hopefully things
should look familiar.

00:31:32.032 --> 00:31:33.490
Here's our rocket
that we've gotten

00:31:33.490 --> 00:31:38.180
used to seeing with all of
the environmental HDR running.

00:31:38.180 --> 00:31:41.040
If you take a look, you can see
that the shadows are actually

00:31:41.040 --> 00:31:43.520
matching what we're
seeing on the environment.

00:31:43.520 --> 00:31:44.770
Let's dwell here for a second.

00:31:44.770 --> 00:31:48.270
You can see we've got a shadow
matching the line coming off

00:31:48.270 --> 00:31:51.570
of the rest of the
objects we've got here.

00:31:51.570 --> 00:31:55.140
If I take a closer look, you can
see these specular highlights

00:31:55.140 --> 00:31:57.060
are actually following
me around as I'm

00:31:57.060 --> 00:31:58.530
looking around the object.

00:31:58.530 --> 00:31:59.705
That's what we expect.

00:31:59.705 --> 00:32:01.080
That's the way
lighting naturally

00:32:01.080 --> 00:32:03.360
behaves when you're
looking at something

00:32:03.360 --> 00:32:05.685
really shiny and reflective.

00:32:05.685 --> 00:32:07.560
Let's start pulling back
some of these layers

00:32:07.560 --> 00:32:10.860
so you can see the backwards
walk through the APIs

00:32:10.860 --> 00:32:12.180
that we presented.

00:32:12.180 --> 00:32:15.720
First, let's turn off the
high dynamic range cubemap.

00:32:15.720 --> 00:32:17.580
Now we still have
the shadow here,

00:32:17.580 --> 00:32:20.520
you can see we've lost a lot of
the reflective characteristics

00:32:20.520 --> 00:32:21.563
of the entire model.

00:32:21.563 --> 00:32:23.730
We still have a little bit
of the specular highlight

00:32:23.730 --> 00:32:25.230
and the reflections,
but that's just

00:32:25.230 --> 00:32:29.240
coming from the single
directional light.

00:32:29.240 --> 00:32:32.725
Let's take off the ambient
spherical harmonics now.

00:32:32.725 --> 00:32:34.350
Let me toggle that
a little bit for you

00:32:34.350 --> 00:32:37.520
just so you can see
the impact there.

00:32:37.520 --> 00:32:40.100
We're losing a whole bunch of
the overall ambient shading

00:32:40.100 --> 00:32:41.990
and overall ambient
intensity of the scene

00:32:41.990 --> 00:32:43.550
when we turn that
off, but we still

00:32:43.550 --> 00:32:45.560
have the directional
light on there.

00:32:45.560 --> 00:32:46.820
Let's turn that off now.

00:32:46.820 --> 00:32:48.290
Whoops.

00:32:48.290 --> 00:32:51.630
Now there's no light in the
scene and we can't do too much.

00:32:51.630 --> 00:32:53.730
But if we toggle
that back on and off,

00:32:53.730 --> 00:32:55.940
you can see that
directional shadow coming in

00:32:55.940 --> 00:32:58.070
and those specular highlights
coming back up right

00:32:58.070 --> 00:33:00.230
on the tip of the rocket there.

00:33:00.230 --> 00:33:06.350
Let's go back to smartphone
AR before environmental HDR.

00:33:06.350 --> 00:33:09.380
And here's our sort
of naively lit model

00:33:09.380 --> 00:33:11.420
where we have a single
directional light.

00:33:11.420 --> 00:33:13.100
The shadows don't really match.

00:33:13.100 --> 00:33:15.740
The overall characteristic of
the scene isn't represented.

00:33:15.740 --> 00:33:19.670
And everything isn't nice
and shiny and reflective.

00:33:19.670 --> 00:33:23.030
Let's try a slightly
different demo now.

00:33:23.030 --> 00:33:25.550
We're going to fire
up another app.

00:33:25.550 --> 00:33:27.560
And you may see something
familiar in this one

00:33:27.560 --> 00:33:30.415
that you've been seeing in
a bunch of the slides Alex

00:33:30.415 --> 00:33:31.040
was presenting.

00:33:31.040 --> 00:33:33.560
Up in the top right there
you've got the light probe

00:33:33.560 --> 00:33:34.710
for this environment.

00:33:34.710 --> 00:33:36.127
This is the light
probe that we're

00:33:36.127 --> 00:33:37.850
estimating from
environmental HDR,

00:33:37.850 --> 00:33:41.900
that we're packaging
into an API.

00:33:41.900 --> 00:33:44.120
Here are a few really
shiny androids.

00:33:44.120 --> 00:33:47.060
Let's zoom in on
these guys a little.

00:33:47.060 --> 00:33:49.290
The directional shadows are
matching the environment,

00:33:49.290 --> 00:33:50.850
as we expect.

00:33:50.850 --> 00:33:57.305
Could we move the lights
over, please?, Thank you.

00:33:57.305 --> 00:33:58.680
Now we see those
shadows drifting

00:33:58.680 --> 00:34:01.670
to match the new environmental
characteristics that we have,

00:34:01.670 --> 00:34:04.170
where the shadows are now coming
from a completely different

00:34:04.170 --> 00:34:06.450
direction.

00:34:06.450 --> 00:34:07.950
If we zoom in a
little again, we can

00:34:07.950 --> 00:34:11.010
see as exposure changes
those androids still

00:34:11.010 --> 00:34:14.393
look pretty realistic.

00:34:14.393 --> 00:34:16.310
Could we change the
lights back again, please?

00:34:21.060 --> 00:34:22.830
Now those shadows
are moving back

00:34:22.830 --> 00:34:28.719
towards the other direction,
the way they were originally.

00:34:28.719 --> 00:34:31.602
That's it for the live demo.

00:34:31.602 --> 00:34:33.600
[APPLAUSE]

00:34:33.600 --> 00:34:35.860
It's pretty cool, eh?

00:34:35.860 --> 00:34:38.650
It's actually really cool.

00:34:38.650 --> 00:34:41.489
So what did we talk about today?

00:34:41.489 --> 00:34:44.094
Today we presented
environmental HDR to you,

00:34:44.094 --> 00:34:45.719
ran through a whole
ton of the details.

00:34:45.719 --> 00:34:48.270
And this is a new mode coming
to the lighting estimation

00:34:48.270 --> 00:34:50.159
API for ARCore.

00:34:50.159 --> 00:34:51.659
it's going to be
coming this summer,

00:34:51.659 --> 00:34:53.969
but that doesn't mean you
can't start building today.

00:34:53.969 --> 00:34:56.800
You can go download ARCore,
start building your app,

00:34:56.800 --> 00:34:59.340
and once environmental
HDR becomes available,

00:34:59.340 --> 00:35:00.360
just plug it in.

00:35:00.360 --> 00:35:03.510
These are all really easy to
use with any typical graphics

00:35:03.510 --> 00:35:04.230
library.

00:35:04.230 --> 00:35:07.020
What it's going to be giving
you is a main directional light,

00:35:07.020 --> 00:35:11.393
ambient spherical harmonics, and
a high dynamic range cubemap.

00:35:11.393 --> 00:35:12.810
Where else can you
see this today?

00:35:12.810 --> 00:35:17.057
Well, go play with our sandbox
demo just across the road.

00:35:17.057 --> 00:35:18.390
We hope you've enjoyed our talk.

00:35:18.390 --> 00:35:20.690
Thank you so much
and have a great IO.

00:35:20.690 --> 00:35:24.040
[MUSIC PLAYING]

