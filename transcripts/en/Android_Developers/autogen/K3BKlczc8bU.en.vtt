WEBVTT
Kind: captions
Language: en

00:00:07.790 --> 00:00:09.890
hello my name is Bruno Oliveira and

00:00:09.890 --> 00:00:09.900
hello my name is Bruno Oliveira and
 

00:00:09.900 --> 00:00:11.720
hello my name is Bruno Oliveira and
welcome to you to our third episode in

00:00:11.720 --> 00:00:11.730
welcome to you to our third episode in
 

00:00:11.730 --> 00:00:13.660
welcome to you to our third episode in
the play games in an antique a series

00:00:13.660 --> 00:00:13.670
the play games in an antique a series
 

00:00:13.670 --> 00:00:15.890
the play games in an antique a series
we're going to talk about some threading

00:00:15.890 --> 00:00:15.900
we're going to talk about some threading
 

00:00:15.900 --> 00:00:18.380
we're going to talk about some threading
and lifecycle issues that may be may be

00:00:18.380 --> 00:00:18.390
and lifecycle issues that may be may be
 

00:00:18.390 --> 00:00:20.510
and lifecycle issues that may be may be
tricky so first of all let's start with

00:00:20.510 --> 00:00:20.520
tricky so first of all let's start with
 

00:00:20.520 --> 00:00:24.920
tricky so first of all let's start with
ready so when you are using play games

00:00:24.920 --> 00:00:24.930
ready so when you are using play games
 

00:00:24.930 --> 00:00:26.929
ready so when you are using play games
and NDK where you have to realize all

00:00:26.929 --> 00:00:26.939
and NDK where you have to realize all
 

00:00:26.939 --> 00:00:28.580
and NDK where you have to realize all
the time is that the UI thread is

00:00:28.580 --> 00:00:28.590
the time is that the UI thread is
 

00:00:28.590 --> 00:00:29.990
the time is that the UI thread is
different from your game thread so

00:00:29.990 --> 00:00:30.000
different from your game thread so
 

00:00:30.000 --> 00:00:31.400
different from your game thread so
whenever you're writing your game logic

00:00:31.400 --> 00:00:31.410
whenever you're writing your game logic
 

00:00:31.410 --> 00:00:32.749
whenever you're writing your game logic
that's going to be running on the game

00:00:32.749 --> 00:00:32.759
that's going to be running on the game
 

00:00:32.759 --> 00:00:34.220
that's going to be running on the game
thread on the native side and whenever

00:00:34.220 --> 00:00:34.230
thread on the native side and whenever
 

00:00:34.230 --> 00:00:36.110
thread on the native side and whenever
you do most of the calls of the play

00:00:36.110 --> 00:00:36.120
you do most of the calls of the play
 

00:00:36.120 --> 00:00:37.340
you do most of the calls of the play
games API you're going to want to do

00:00:37.340 --> 00:00:37.350
games API you're going to want to do
 

00:00:37.350 --> 00:00:38.990
games API you're going to want to do
them from the UI thread on the Java side

00:00:38.990 --> 00:00:39.000
them from the UI thread on the Java side
 

00:00:39.000 --> 00:00:42.170
them from the UI thread on the Java side
so usually one of the patterns that you

00:00:42.170 --> 00:00:42.180
so usually one of the patterns that you
 

00:00:42.180 --> 00:00:43.760
so usually one of the patterns that you
can use to manage that difficulty is

00:00:43.760 --> 00:00:43.770
can use to manage that difficulty is
 

00:00:43.770 --> 00:00:45.619
can use to manage that difficulty is
just use great methods called post

00:00:45.619 --> 00:00:45.629
just use great methods called post
 

00:00:45.629 --> 00:00:47.150
just use great methods called post
something something and then those

00:00:47.150 --> 00:00:47.160
something something and then those
 

00:00:47.160 --> 00:00:48.860
something something and then those
methods post to the UI thread and then

00:00:48.860 --> 00:00:48.870
methods post to the UI thread and then
 

00:00:48.870 --> 00:00:50.630
methods post to the UI thread and then
on the UI thread you actually use the

00:00:50.630 --> 00:00:50.640
on the UI thread you actually use the
 

00:00:50.640 --> 00:00:52.040
on the UI thread you actually use the
game helper to make the corresponding

00:00:52.040 --> 00:00:52.050
game helper to make the corresponding
 

00:00:52.050 --> 00:00:53.720
game helper to make the corresponding
API call so something like this post

00:00:53.720 --> 00:00:53.730
API call so something like this post
 

00:00:53.730 --> 00:00:55.400
API call so something like this post
amid score which we covered on the last

00:00:55.400 --> 00:00:55.410
amid score which we covered on the last
 

00:00:55.410 --> 00:00:57.740
amid score which we covered on the last
video you just call that from the native

00:00:57.740 --> 00:00:57.750
video you just call that from the native
 

00:00:57.750 --> 00:00:59.139
video you just call that from the native
side and then that pose to the UI thread

00:00:59.139 --> 00:00:59.149
side and then that pose to the UI thread
 

00:00:59.149 --> 00:01:01.430
side and then that pose to the UI thread
how do you call this from the from the

00:01:01.430 --> 00:01:01.440
how do you call this from the from the
 

00:01:01.440 --> 00:01:03.889
how do you call this from the from the
native side well well you can just use

00:01:03.889 --> 00:01:03.899
native side well well you can just use
 

00:01:03.899 --> 00:01:05.899
native side well well you can just use
Jay and I but now how do you actually do

00:01:05.899 --> 00:01:05.909
Jay and I but now how do you actually do
 

00:01:05.909 --> 00:01:07.580
Jay and I but now how do you actually do
the opposite how do you call from dalvik

00:01:07.580 --> 00:01:07.590
the opposite how do you call from dalvik
 

00:01:07.590 --> 00:01:09.050
the opposite how do you call from dalvik
to native when you come from davek

00:01:09.050 --> 00:01:09.060
to native when you come from davek
 

00:01:09.060 --> 00:01:10.550
to native when you come from davek
native all you have to do is declare a

00:01:10.550 --> 00:01:10.560
native all you have to do is declare a
 

00:01:10.560 --> 00:01:12.289
native all you have to do is declare a
native method in your class and then

00:01:12.289 --> 00:01:12.299
native method in your class and then
 

00:01:12.299 --> 00:01:13.940
native method in your class and then
implement the the corresponding native

00:01:13.940 --> 00:01:13.950
implement the the corresponding native
 

00:01:13.950 --> 00:01:16.070
implement the the corresponding native
method so for instance here we are

00:01:16.070 --> 00:01:16.080
method so for instance here we are
 

00:01:16.080 --> 00:01:18.050
method so for instance here we are
reporting that the sign ian has

00:01:18.050 --> 00:01:18.060
reporting that the sign ian has
 

00:01:18.060 --> 00:01:20.870
reporting that the sign ian has
succeeded into into the native code when

00:01:20.870 --> 00:01:20.880
succeeded into into the native code when
 

00:01:20.880 --> 00:01:22.730
succeeded into into the native code when
you write that native method one thing

00:01:22.730 --> 00:01:22.740
you write that native method one thing
 

00:01:22.740 --> 00:01:23.960
you write that native method one thing
that you have to look out for is that

00:01:23.960 --> 00:01:23.970
that you have to look out for is that
 

00:01:23.970 --> 00:01:25.130
that you have to look out for is that
you're actually running on the UI thread

00:01:25.130 --> 00:01:25.140
you're actually running on the UI thread
 

00:01:25.140 --> 00:01:26.840
you're actually running on the UI thread
even though you've crossed the the

00:01:26.840 --> 00:01:26.850
even though you've crossed the the
 

00:01:26.850 --> 00:01:28.609
even though you've crossed the the
native barrier into native code that

00:01:28.609 --> 00:01:28.619
native barrier into native code that
 

00:01:28.619 --> 00:01:29.690
native barrier into native code that
doesn't mean that you're running on the

00:01:29.690 --> 00:01:29.700
doesn't mean that you're running on the
 

00:01:29.700 --> 00:01:31.219
doesn't mean that you're running on the
game thread you're actually running on

00:01:31.219 --> 00:01:31.229
game thread you're actually running on
 

00:01:31.229 --> 00:01:32.630
game thread you're actually running on
the UI thread and if you try if you

00:01:32.630 --> 00:01:32.640
the UI thread and if you try if you
 

00:01:32.640 --> 00:01:34.490
the UI thread and if you try if you
start now trying to manipulate your game

00:01:34.490 --> 00:01:34.500
start now trying to manipulate your game
 

00:01:34.500 --> 00:01:36.050
start now trying to manipulate your game
objects and game logic there you might

00:01:36.050 --> 00:01:36.060
objects and game logic there you might
 

00:01:36.060 --> 00:01:38.330
objects and game logic there you might
run into very hard to debug issues so

00:01:38.330 --> 00:01:38.340
run into very hard to debug issues so
 

00:01:38.340 --> 00:01:40.130
run into very hard to debug issues so
one of the things you can do is just

00:01:40.130 --> 00:01:40.140
one of the things you can do is just
 

00:01:40.140 --> 00:01:42.319
one of the things you can do is just
synchronize at that point however

00:01:42.319 --> 00:01:42.329
synchronize at that point however
 

00:01:42.329 --> 00:01:44.090
synchronize at that point however
synchronization may be expensive like if

00:01:44.090 --> 00:01:44.100
synchronization may be expensive like if
 

00:01:44.100 --> 00:01:45.710
synchronization may be expensive like if
you have a mutex or a semaphore and so

00:01:45.710 --> 00:01:45.720
you have a mutex or a semaphore and so
 

00:01:45.720 --> 00:01:46.760
you have a mutex or a semaphore and so
on and you're going to lock that on

00:01:46.760 --> 00:01:46.770
on and you're going to lock that on
 

00:01:46.770 --> 00:01:48.499
on and you're going to lock that on
every on every frame that your game is

00:01:48.499 --> 00:01:48.509
every on every frame that your game is
 

00:01:48.509 --> 00:01:49.850
every on every frame that your game is
going to draw you might end up with a

00:01:49.850 --> 00:01:49.860
going to draw you might end up with a
 

00:01:49.860 --> 00:01:51.499
going to draw you might end up with a
very slow game so one of the year are

00:01:51.499 --> 00:01:51.509
very slow game so one of the year are
 

00:01:51.509 --> 00:01:53.600
very slow game so one of the year are
very useful patterns we usually see is

00:01:53.600 --> 00:01:53.610
very useful patterns we usually see is
 

00:01:53.610 --> 00:01:54.740
very useful patterns we usually see is
you want to do an atomic right

00:01:54.740 --> 00:01:54.750
you want to do an atomic right
 

00:01:54.750 --> 00:01:56.480
you want to do an atomic right
especially when it's a very small data

00:01:56.480 --> 00:01:56.490
especially when it's a very small data
 

00:01:56.490 --> 00:01:58.160
especially when it's a very small data
structure that you just want to like

00:01:58.160 --> 00:01:58.170
structure that you just want to like
 

00:01:58.170 --> 00:02:00.410
structure that you just want to like
pass a boolean between threads you can

00:02:00.410 --> 00:02:00.420
pass a boolean between threads you can
 

00:02:00.420 --> 00:02:02.209
pass a boolean between threads you can
do is just an anatomic right so in this

00:02:02.209 --> 00:02:02.219
do is just an anatomic right so in this
 

00:02:02.219 --> 00:02:05.719
do is just an anatomic right so in this
case we are using the system Tom extra H

00:02:05.719 --> 00:02:05.729
case we are using the system Tom extra H
 

00:02:05.729 --> 00:02:08.449
case we are using the system Tom extra H
so this is the these these are a few

00:02:08.449 --> 00:02:08.459
so this is the these these are a few
 

00:02:08.459 --> 00:02:10.100
so this is the these these are a few
convenience functions that allow you to

00:02:10.100 --> 00:02:10.110
convenience functions that allow you to
 

00:02:10.110 --> 00:02:12.559
convenience functions that allow you to
do atomic writes and reads in this case

00:02:12.559 --> 00:02:12.569
do atomic writes and reads in this case
 

00:02:12.569 --> 00:02:13.400
do atomic writes and reads in this case
we are gay

00:02:13.400 --> 00:02:13.410
we are gay
 

00:02:13.410 --> 00:02:15.470
we are gay
the new state from the from the UI

00:02:15.470 --> 00:02:15.480
the new state from the from the UI
 

00:02:15.480 --> 00:02:17.720
the new state from the from the UI
thread and then writing it atomically to

00:02:17.720 --> 00:02:17.730
thread and then writing it atomically to
 

00:02:17.730 --> 00:02:18.950
thread and then writing it atomically to
that static variable called state

00:02:18.950 --> 00:02:18.960
that static variable called state
 

00:02:18.960 --> 00:02:20.870
that static variable called state
because this means that when you when

00:02:20.870 --> 00:02:20.880
because this means that when you when
 

00:02:20.880 --> 00:02:22.340
because this means that when you when
you try to read it from your game thread

00:02:22.340 --> 00:02:22.350
you try to read it from your game thread
 

00:02:22.350 --> 00:02:24.320
you try to read it from your game thread
you can just read it because the this

00:02:24.320 --> 00:02:24.330
you can just read it because the this
 

00:02:24.330 --> 00:02:25.550
you can just read it because the this
can be called from any thread you can

00:02:25.550 --> 00:02:25.560
can be called from any thread you can
 

00:02:25.560 --> 00:02:26.810
can be called from any thread you can
just read it because instance the

00:02:26.810 --> 00:02:26.820
just read it because instance the
 

00:02:26.820 --> 00:02:28.910
just read it because instance the
writing is atomic you don't have to

00:02:28.910 --> 00:02:28.920
writing is atomic you don't have to
 

00:02:28.920 --> 00:02:31.910
writing is atomic you don't have to
worry about race conditions there so you

00:02:31.910 --> 00:02:31.920
worry about race conditions there so you
 

00:02:31.920 --> 00:02:33.770
worry about race conditions there so you
get the state based on that so this

00:02:33.770 --> 00:02:33.780
get the state based on that so this
 

00:02:33.780 --> 00:02:35.060
get the state based on that so this
means you can actually get the state on

00:02:35.060 --> 00:02:35.070
means you can actually get the state on
 

00:02:35.070 --> 00:02:36.560
means you can actually get the state on
every frame so you don't have to have a

00:02:36.560 --> 00:02:36.570
every frame so you don't have to have a
 

00:02:36.570 --> 00:02:38.660
every frame so you don't have to have a
call back saying Yesenia has exceeded or

00:02:38.660 --> 00:02:38.670
call back saying Yesenia has exceeded or
 

00:02:38.670 --> 00:02:40.910
call back saying Yesenia has exceeded or
failed on the native side because in any

00:02:40.910 --> 00:02:40.920
failed on the native side because in any
 

00:02:40.920 --> 00:02:43.010
failed on the native side because in any
event you're you're going to have to

00:02:43.010 --> 00:02:43.020
event you're you're going to have to
 

00:02:43.020 --> 00:02:44.660
event you're you're going to have to
process every frame to do animations and

00:02:44.660 --> 00:02:44.670
process every frame to do animations and
 

00:02:44.670 --> 00:02:47.060
process every frame to do animations and
such so you're already occupying the CPU

00:02:47.060 --> 00:02:47.070
such so you're already occupying the CPU
 

00:02:47.070 --> 00:02:48.620
such so you're already occupying the CPU
on every frame so it doesn't really cost

00:02:48.620 --> 00:02:48.630
on every frame so it doesn't really cost
 

00:02:48.630 --> 00:02:50.360
on every frame so it doesn't really cost
much more just to read a boolean

00:02:50.360 --> 00:02:50.370
much more just to read a boolean
 

00:02:50.370 --> 00:02:51.920
much more just to read a boolean
variable to see if the user is signed in

00:02:51.920 --> 00:02:51.930
variable to see if the user is signed in
 

00:02:51.930 --> 00:02:53.540
variable to see if the user is signed in
or not so you can eliminate some

00:02:53.540 --> 00:02:53.550
or not so you can eliminate some
 

00:02:53.550 --> 00:02:55.700
or not so you can eliminate some
complications there there that way so

00:02:55.700 --> 00:02:55.710
complications there there that way so
 

00:02:55.710 --> 00:02:57.350
complications there there that way so
you can call gets an ian state on every

00:02:57.350 --> 00:02:57.360
you can call gets an ian state on every
 

00:02:57.360 --> 00:02:59.210
you can call gets an ian state on every
frame without having to write callbacks

00:02:59.210 --> 00:02:59.220
frame without having to write callbacks
 

00:02:59.220 --> 00:03:03.740
frame without having to write callbacks
or anything so let's talk about the life

00:03:03.740 --> 00:03:03.750
or anything so let's talk about the life
 

00:03:03.750 --> 00:03:07.460
or anything so let's talk about the life
cycle of a play games app so back in the

00:03:07.460 --> 00:03:07.470
cycle of a play games app so back in the
 

00:03:07.470 --> 00:03:09.530
cycle of a play games app so back in the
good old days I remember that writing

00:03:09.530 --> 00:03:09.540
good old days I remember that writing
 

00:03:09.540 --> 00:03:11.090
good old days I remember that writing
game was pretty easy because there was

00:03:11.090 --> 00:03:11.100
game was pretty easy because there was
 

00:03:11.100 --> 00:03:12.320
game was pretty easy because there was
no life cycle is essentially the game

00:03:12.320 --> 00:03:12.330
no life cycle is essentially the game
 

00:03:12.330 --> 00:03:14.000
no life cycle is essentially the game
get to get started the game gets played

00:03:14.000 --> 00:03:14.010
get to get started the game gets played
 

00:03:14.010 --> 00:03:17.180
get to get started the game gets played
and then the user stops the game and it

00:03:17.180 --> 00:03:17.190
and then the user stops the game and it
 

00:03:17.190 --> 00:03:18.830
and then the user stops the game and it
goes back to the operating system so

00:03:18.830 --> 00:03:18.840
goes back to the operating system so
 

00:03:18.840 --> 00:03:20.600
goes back to the operating system so
that was a pretty easy time now with

00:03:20.600 --> 00:03:20.610
that was a pretty easy time now with
 

00:03:20.610 --> 00:03:22.490
that was a pretty easy time now with
modern operating systems especially on

00:03:22.490 --> 00:03:22.500
modern operating systems especially on
 

00:03:22.500 --> 00:03:24.650
modern operating systems especially on
mobile devices you have a whole bunch of

00:03:24.650 --> 00:03:24.660
mobile devices you have a whole bunch of
 

00:03:24.660 --> 00:03:25.699
mobile devices you have a whole bunch of
call back so you have to pay attention

00:03:25.699 --> 00:03:25.709
call back so you have to pay attention
 

00:03:25.709 --> 00:03:27.680
call back so you have to pay attention
to so when your game starts you get on

00:03:27.680 --> 00:03:27.690
to so when your game starts you get on
 

00:03:27.690 --> 00:03:29.000
to so when your game starts you get on
create then you get on start then you

00:03:29.000 --> 00:03:29.010
create then you get on start then you
 

00:03:29.010 --> 00:03:30.590
create then you get on start then you
get on resume and then the window for

00:03:30.590 --> 00:03:30.600
get on resume and then the window for
 

00:03:30.600 --> 00:03:32.030
get on resume and then the window for
you get the window focus and then you

00:03:32.030 --> 00:03:32.040
you get the window focus and then you
 

00:03:32.040 --> 00:03:34.310
you get the window focus and then you
get on pause and then you lose the

00:03:34.310 --> 00:03:34.320
get on pause and then you lose the
 

00:03:34.320 --> 00:03:35.870
get on pause and then you lose the
window focus because of lock screen and

00:03:35.870 --> 00:03:35.880
window focus because of lock screen and
 

00:03:35.880 --> 00:03:37.430
window focus because of lock screen and
then again on stopped because you know

00:03:37.430 --> 00:03:37.440
then again on stopped because you know
 

00:03:37.440 --> 00:03:39.050
then again on stopped because you know
the user has gone back to the home

00:03:39.050 --> 00:03:39.060
the user has gone back to the home
 

00:03:39.060 --> 00:03:40.310
the user has gone back to the home
screen and then you get on start again

00:03:40.310 --> 00:03:40.320
screen and then you get on start again
 

00:03:40.320 --> 00:03:42.229
screen and then you get on start again
so it's a whole bunch of callbacks some

00:03:42.229 --> 00:03:42.239
so it's a whole bunch of callbacks some
 

00:03:42.239 --> 00:03:44.300
so it's a whole bunch of callbacks some
of them are hierarchical some of them

00:03:44.300 --> 00:03:44.310
of them are hierarchical some of them
 

00:03:44.310 --> 00:03:45.860
of them are hierarchical some of them
are not some of them come out of phase

00:03:45.860 --> 00:03:45.870
are not some of them come out of phase
 

00:03:45.870 --> 00:03:47.600
are not some of them come out of phase
and you have to pay attention to all of

00:03:47.600 --> 00:03:47.610
and you have to pay attention to all of
 

00:03:47.610 --> 00:03:49.670
and you have to pay attention to all of
those callbacks to know when you can and

00:03:49.670 --> 00:03:49.680
those callbacks to know when you can and
 

00:03:49.680 --> 00:03:51.199
those callbacks to know when you can and
when you cannot render stuff into your

00:03:51.199 --> 00:03:51.209
when you cannot render stuff into your
 

00:03:51.209 --> 00:03:52.610
when you cannot render stuff into your
game because sometimes you may even have

00:03:52.610 --> 00:03:52.620
game because sometimes you may even have
 

00:03:52.620 --> 00:03:54.229
game because sometimes you may even have
a GL surface sometimes you don't have a

00:03:54.229 --> 00:03:54.239
a GL surface sometimes you don't have a
 

00:03:54.239 --> 00:03:56.600
a GL surface sometimes you don't have a
GL surface sometimes you should not be

00:03:56.600 --> 00:03:56.610
GL surface sometimes you should not be
 

00:03:56.610 --> 00:03:58.100
GL surface sometimes you should not be
running sometimes you should deallocate

00:03:58.100 --> 00:03:58.110
running sometimes you should deallocate
 

00:03:58.110 --> 00:03:59.720
running sometimes you should deallocate
stuff so you have to pay attention to

00:03:59.720 --> 00:03:59.730
stuff so you have to pay attention to
 

00:03:59.730 --> 00:04:03.680
stuff so you have to pay attention to
all of those comics so it's important to

00:04:03.680 --> 00:04:03.690
all of those comics so it's important to
 

00:04:03.690 --> 00:04:05.300
all of those comics so it's important to
keep track in your native game of

00:04:05.300 --> 00:04:05.310
keep track in your native game of
 

00:04:05.310 --> 00:04:07.310
keep track in your native game of
wherein the lifecycle you are regarding

00:04:07.310 --> 00:04:07.320
wherein the lifecycle you are regarding
 

00:04:07.320 --> 00:04:08.330
wherein the lifecycle you are regarding
those call back so you have to know

00:04:08.330 --> 00:04:08.340
those call back so you have to know
 

00:04:08.340 --> 00:04:10.040
those call back so you have to know
whether or not are you are between on

00:04:10.040 --> 00:04:10.050
whether or not are you are between on
 

00:04:10.050 --> 00:04:11.360
whether or not are you are between on
resume and on pause you have to know

00:04:11.360 --> 00:04:11.370
resume and on pause you have to know
 

00:04:11.370 --> 00:04:12.740
resume and on pause you have to know
whether or not you have the window focus

00:04:12.740 --> 00:04:12.750
whether or not you have the window focus
 

00:04:12.750 --> 00:04:14.090
whether or not you have the window focus
you have to know whether or not you have

00:04:14.090 --> 00:04:14.100
you have to know whether or not you have
 

00:04:14.100 --> 00:04:15.740
you have to know whether or not you have
a surface or you don't have surface and

00:04:15.740 --> 00:04:15.750
a surface or you don't have surface and
 

00:04:15.750 --> 00:04:17.750
a surface or you don't have surface and
so on and so forth and now we're going

00:04:17.750 --> 00:04:17.760
so on and so forth and now we're going
 

00:04:17.760 --> 00:04:19.220
so on and so forth and now we're going
to talk about how to integrate play

00:04:19.220 --> 00:04:19.230
to talk about how to integrate play
 

00:04:19.230 --> 00:04:21.229
to talk about how to integrate play
games into that into that flow because

00:04:21.229 --> 00:04:21.239
games into that into that flow because
 

00:04:21.239 --> 00:04:22.670
games into that into that flow because
it's very important as well if you're

00:04:22.670 --> 00:04:22.680
it's very important as well if you're
 

00:04:22.680 --> 00:04:24.469
it's very important as well if you're
using play games to know when you can

00:04:24.469 --> 00:04:24.479
using play games to know when you can
 

00:04:24.479 --> 00:04:26.210
using play games to know when you can
make play games API calls and when you

00:04:26.210 --> 00:04:26.220
make play games API calls and when you
 

00:04:26.220 --> 00:04:26.940
make play games API calls and when you
cannot

00:04:26.940 --> 00:04:26.950
cannot
 

00:04:26.950 --> 00:04:30.220
cannot
so let's try to simplify this life cycle

00:04:30.220 --> 00:04:30.230
so let's try to simplify this life cycle
 

00:04:30.230 --> 00:04:32.590
so let's try to simplify this life cycle
a little bit it's not as scary as it

00:04:32.590 --> 00:04:32.600
a little bit it's not as scary as it
 

00:04:32.600 --> 00:04:34.630
a little bit it's not as scary as it
looks so normally this is the basic

00:04:34.630 --> 00:04:34.640
looks so normally this is the basic
 

00:04:34.640 --> 00:04:36.490
looks so normally this is the basic
Android activity lifecycle get on create

00:04:36.490 --> 00:04:36.500
Android activity lifecycle get on create
 

00:04:36.500 --> 00:04:38.020
Android activity lifecycle get on create
to get on stored and then get on resume

00:04:38.020 --> 00:04:38.030
to get on stored and then get on resume
 

00:04:38.030 --> 00:04:40.840
to get on stored and then get on resume
and unpause these events are all they

00:04:40.840 --> 00:04:40.850
and unpause these events are all they
 

00:04:40.850 --> 00:04:43.570
and unpause these events are all they
are all nested within each other so you

00:04:43.570 --> 00:04:43.580
are all nested within each other so you
 

00:04:43.580 --> 00:04:44.920
are all nested within each other so you
have you're always going to get on

00:04:44.920 --> 00:04:44.930
have you're always going to get on
 

00:04:44.930 --> 00:04:46.780
have you're always going to get on
resume on the after on start and then

00:04:46.780 --> 00:04:46.790
resume on the after on start and then
 

00:04:46.790 --> 00:04:48.760
resume on the after on start and then
before you get on stop you're going to

00:04:48.760 --> 00:04:48.770
before you get on stop you're going to
 

00:04:48.770 --> 00:04:50.620
before you get on stop you're going to
get on pause so you can have a variable

00:04:50.620 --> 00:04:50.630
get on pause so you can have a variable
 

00:04:50.630 --> 00:04:52.870
get on pause so you can have a variable
that tracks where in that state machine

00:04:52.870 --> 00:04:52.880
that tracks where in that state machine
 

00:04:52.880 --> 00:04:55.120
that tracks where in that state machine
you are and then of course your game

00:04:55.120 --> 00:04:55.130
you are and then of course your game
 

00:04:55.130 --> 00:04:57.490
you are and then of course your game
should only be actively playing between

00:04:57.490 --> 00:04:57.500
should only be actively playing between
 

00:04:57.500 --> 00:04:59.110
should only be actively playing between
on resume and on start and then of

00:04:59.110 --> 00:04:59.120
on resume and on start and then of
 

00:04:59.120 --> 00:05:01.420
on resume and on start and then of
course there is an out-of-phase sort of

00:05:01.420 --> 00:05:01.430
course there is an out-of-phase sort of
 

00:05:01.430 --> 00:05:04.150
course there is an out-of-phase sort of
like state machine which is the window

00:05:04.150 --> 00:05:04.160
like state machine which is the window
 

00:05:04.160 --> 00:05:06.520
like state machine which is the window
focus so we know focus can come in and

00:05:06.520 --> 00:05:06.530
focus so we know focus can come in and
 

00:05:06.530 --> 00:05:08.800
focus so we know focus can come in and
come out even if it's out of phase with

00:05:08.800 --> 00:05:08.810
come out even if it's out of phase with
 

00:05:08.810 --> 00:05:10.300
come out even if it's out of phase with
the other events so you should not

00:05:10.300 --> 00:05:10.310
the other events so you should not
 

00:05:10.310 --> 00:05:11.350
the other events so you should not
assume that that's going to happen

00:05:11.350 --> 00:05:11.360
assume that that's going to happen
 

00:05:11.360 --> 00:05:13.150
assume that that's going to happen
between your own resume and unpause but

00:05:13.150 --> 00:05:13.160
between your own resume and unpause but
 

00:05:13.160 --> 00:05:14.470
between your own resume and unpause but
you should assume that that may happen

00:05:14.470 --> 00:05:14.480
you should assume that that may happen
 

00:05:14.480 --> 00:05:16.330
you should assume that that may happen
out of phase with that so you have to

00:05:16.330 --> 00:05:16.340
out of phase with that so you have to
 

00:05:16.340 --> 00:05:17.650
out of phase with that so you have to
keep track of when you have the window

00:05:17.650 --> 00:05:17.660
keep track of when you have the window
 

00:05:17.660 --> 00:05:19.810
keep track of when you have the window
focus other than that if you're using

00:05:19.810 --> 00:05:19.820
focus other than that if you're using
 

00:05:19.820 --> 00:05:22.000
focus other than that if you're using
OpenGL and you're most likely are if

00:05:22.000 --> 00:05:22.010
OpenGL and you're most likely are if
 

00:05:22.010 --> 00:05:24.010
OpenGL and you're most likely are if
you're using ndk you also have to keep

00:05:24.010 --> 00:05:24.020
you're using ndk you also have to keep
 

00:05:24.020 --> 00:05:25.870
you're using ndk you also have to keep
track of when the surface gets created

00:05:25.870 --> 00:05:25.880
track of when the surface gets created
 

00:05:25.880 --> 00:05:27.730
track of when the surface gets created
get through sighs and gets destroyed so

00:05:27.730 --> 00:05:27.740
get through sighs and gets destroyed so
 

00:05:27.740 --> 00:05:29.440
get through sighs and gets destroyed so
that's one more piece one more moving

00:05:29.440 --> 00:05:29.450
that's one more piece one more moving
 

00:05:29.450 --> 00:05:31.000
that's one more piece one more moving
piece that you have to keep dragged off

00:05:31.000 --> 00:05:31.010
piece that you have to keep dragged off
 

00:05:31.010 --> 00:05:32.800
piece that you have to keep dragged off
so it's only when you have those five

00:05:32.800 --> 00:05:32.810
so it's only when you have those five
 

00:05:32.810 --> 00:05:34.480
so it's only when you have those five
things that you can actually do active

00:05:34.480 --> 00:05:34.490
things that you can actually do active
 

00:05:34.490 --> 00:05:35.890
things that you can actually do active
gameplay so here you have a surface you

00:05:35.890 --> 00:05:35.900
gameplay so here you have a surface you
 

00:05:35.900 --> 00:05:38.440
gameplay so here you have a surface you
have focused and the activity is in its

00:05:38.440 --> 00:05:38.450
have focused and the activity is in its
 

00:05:38.450 --> 00:05:42.550
have focused and the activity is in its
resumed state so how does the the play

00:05:42.550 --> 00:05:42.560
resumed state so how does the the play
 

00:05:42.560 --> 00:05:45.430
resumed state so how does the the play
games API merge into this so this is

00:05:45.430 --> 00:05:45.440
games API merge into this so this is
 

00:05:45.440 --> 00:05:47.560
games API merge into this so this is
what I have a game played right so how

00:05:47.560 --> 00:05:47.570
what I have a game played right so how
 

00:05:47.570 --> 00:05:49.630
what I have a game played right so how
do you deal with the play games they pay

00:05:49.630 --> 00:05:49.640
do you deal with the play games they pay
 

00:05:49.640 --> 00:05:52.330
do you deal with the play games they pay
lifecycle on top of that so fortunately

00:05:52.330 --> 00:05:52.340
lifecycle on top of that so fortunately
 

00:05:52.340 --> 00:05:54.040
lifecycle on top of that so fortunately
the play games lifecycle is actually

00:05:54.040 --> 00:05:54.050
the play games lifecycle is actually
 

00:05:54.050 --> 00:05:55.930
the play games lifecycle is actually
nested in the indie activities life

00:05:55.930 --> 00:05:55.940
nested in the indie activities life
 

00:05:55.940 --> 00:05:57.490
nested in the indie activities life
cycle so it's not actually as difficult

00:05:57.490 --> 00:05:57.500
cycle so it's not actually as difficult
 

00:05:57.500 --> 00:06:00.130
cycle so it's not actually as difficult
as you might imagine so we have unsorted

00:06:00.130 --> 00:06:00.140
as you might imagine so we have unsorted
 

00:06:00.140 --> 00:06:02.230
as you might imagine so we have unsorted
non-stop so between Ansari non-stop

00:06:02.230 --> 00:06:02.240
non-stop so between Ansari non-stop
 

00:06:02.240 --> 00:06:03.670
non-stop so between Ansari non-stop
that's when the play games activity

00:06:03.670 --> 00:06:03.680
that's when the play games activity
 

00:06:03.680 --> 00:06:06.760
that's when the play games activity
lifecycle actually happens typically

00:06:06.760 --> 00:06:06.770
lifecycle actually happens typically
 

00:06:06.770 --> 00:06:09.430
lifecycle actually happens typically
after on start so there is no there is

00:06:09.430 --> 00:06:09.440
after on start so there is no there is
 

00:06:09.440 --> 00:06:10.810
after on start so there is no there is
no way to keep a connection to play

00:06:10.810 --> 00:06:10.820
no way to keep a connection to play
 

00:06:10.820 --> 00:06:12.970
no way to keep a connection to play
games while your applications not

00:06:12.970 --> 00:06:12.980
games while your applications not
 

00:06:12.980 --> 00:06:15.580
games while your applications not
started so whenever get on stop you

00:06:15.580 --> 00:06:15.590
started so whenever get on stop you
 

00:06:15.590 --> 00:06:17.020
started so whenever get on stop you
actually lose the connection to play

00:06:17.020 --> 00:06:17.030
actually lose the connection to play
 

00:06:17.030 --> 00:06:18.460
actually lose the connection to play
games and you have to restore it on on

00:06:18.460 --> 00:06:18.470
games and you have to restore it on on
 

00:06:18.470 --> 00:06:20.470
games and you have to restore it on on
start if you're using game helper or

00:06:20.470 --> 00:06:20.480
start if you're using game helper or
 

00:06:20.480 --> 00:06:23.080
start if you're using game helper or
base game game activity that restoration

00:06:23.080 --> 00:06:23.090
base game game activity that restoration
 

00:06:23.090 --> 00:06:25.600
base game game activity that restoration
is done for you automatically so you

00:06:25.600 --> 00:06:25.610
is done for you automatically so you
 

00:06:25.610 --> 00:06:26.890
is done for you automatically so you
don't have to worry about that but you

00:06:26.890 --> 00:06:26.900
don't have to worry about that but you
 

00:06:26.900 --> 00:06:29.350
don't have to worry about that but you
have to know that it exists so when it

00:06:29.350 --> 00:06:29.360
have to know that it exists so when it
 

00:06:29.360 --> 00:06:30.909
have to know that it exists so when it
whenever get the onstart call back

00:06:30.909 --> 00:06:30.919
whenever get the onstart call back
 

00:06:30.919 --> 00:06:33.220
whenever get the onstart call back
you're not connected to play games and

00:06:33.220 --> 00:06:33.230
you're not connected to play games and
 

00:06:33.230 --> 00:06:35.020
you're not connected to play games and
then you have to wait for the on sending

00:06:35.020 --> 00:06:35.030
then you have to wait for the on sending
 

00:06:35.030 --> 00:06:37.000
then you have to wait for the on sending
succeeded or on sign in failed call back

00:06:37.000 --> 00:06:37.010
succeeded or on sign in failed call back
 

00:06:37.010 --> 00:06:39.219
succeeded or on sign in failed call back
so there is this window of time between

00:06:39.219 --> 00:06:39.229
so there is this window of time between
 

00:06:39.229 --> 00:06:40.150
so there is this window of time between
all

00:06:40.150 --> 00:06:40.160
all
 

00:06:40.160 --> 00:06:41.890
all
start and on signing succeeded where

00:06:41.890 --> 00:06:41.900
start and on signing succeeded where
 

00:06:41.900 --> 00:06:43.930
start and on signing succeeded where
your activity is started it may even be

00:06:43.930 --> 00:06:43.940
your activity is started it may even be
 

00:06:43.940 --> 00:06:46.030
your activity is started it may even be
resumed or have window focus you may

00:06:46.030 --> 00:06:46.040
resumed or have window focus you may
 

00:06:46.040 --> 00:06:48.190
resumed or have window focus you may
even have the GL surface but you might

00:06:48.190 --> 00:06:48.200
even have the GL surface but you might
 

00:06:48.200 --> 00:06:49.780
even have the GL surface but you might
not be connected to play games because

00:06:49.780 --> 00:06:49.790
not be connected to play games because
 

00:06:49.790 --> 00:06:50.830
not be connected to play games because
you're waiting for the on setting

00:06:50.830 --> 00:06:50.840
you're waiting for the on setting
 

00:06:50.840 --> 00:06:52.690
you're waiting for the on setting
succeeded or sending fail callbacks to

00:06:52.690 --> 00:06:52.700
succeeded or sending fail callbacks to
 

00:06:52.700 --> 00:06:54.940
succeeded or sending fail callbacks to
be called only after that point are you

00:06:54.940 --> 00:06:54.950
be called only after that point are you
 

00:06:54.950 --> 00:06:56.320
be called only after that point are you
actually connected to play games and you

00:06:56.320 --> 00:06:56.330
actually connected to play games and you
 

00:06:56.330 --> 00:06:58.390
actually connected to play games and you
can make API calls and remember that

00:06:58.390 --> 00:06:58.400
can make API calls and remember that
 

00:06:58.400 --> 00:06:59.500
can make API calls and remember that
when you get on stop you get

00:06:59.500 --> 00:06:59.510
when you get on stop you get
 

00:06:59.510 --> 00:07:01.390
when you get on stop you get
disconnected from play games so this is

00:07:01.390 --> 00:07:01.400
disconnected from play games so this is
 

00:07:01.400 --> 00:07:03.010
disconnected from play games so this is
what the lifecycle looks like so just

00:07:03.010 --> 00:07:03.020
what the lifecycle looks like so just
 

00:07:03.020 --> 00:07:06.130
what the lifecycle looks like so just
simplify this a little bit so what

00:07:06.130 --> 00:07:06.140
simplify this a little bit so what
 

00:07:06.140 --> 00:07:08.500
simplify this a little bit so what
happens what what may go wrong in this

00:07:08.500 --> 00:07:08.510
happens what what may go wrong in this
 

00:07:08.510 --> 00:07:10.120
happens what what may go wrong in this
case so suppose that your game is

00:07:10.120 --> 00:07:10.130
case so suppose that your game is
 

00:07:10.130 --> 00:07:11.770
case so suppose that your game is
actually running and then before you get

00:07:11.770 --> 00:07:11.780
actually running and then before you get
 

00:07:11.780 --> 00:07:13.720
actually running and then before you get
the on sending succeeded call back you

00:07:13.720 --> 00:07:13.730
the on sending succeeded call back you
 

00:07:13.730 --> 00:07:15.730
the on sending succeeded call back you
try to unlock something the user achieve

00:07:15.730 --> 00:07:15.740
try to unlock something the user achieve
 

00:07:15.740 --> 00:07:17.650
try to unlock something the user achieve
something very extraordinary and you

00:07:17.650 --> 00:07:17.660
something very extraordinary and you
 

00:07:17.660 --> 00:07:19.540
something very extraordinary and you
want to unlock it and then you might run

00:07:19.540 --> 00:07:19.550
want to unlock it and then you might run
 

00:07:19.550 --> 00:07:21.190
want to unlock it and then you might run
into trouble because at that point in

00:07:21.190 --> 00:07:21.200
into trouble because at that point in
 

00:07:21.200 --> 00:07:23.680
into trouble because at that point in
the life cycle the play games API is not

00:07:23.680 --> 00:07:23.690
the life cycle the play games API is not
 

00:07:23.690 --> 00:07:25.930
the life cycle the play games API is not
accepting API calls so you're probably

00:07:25.930 --> 00:07:25.940
accepting API calls so you're probably
 

00:07:25.940 --> 00:07:27.760
accepting API calls so you're probably
if you if you haven't thought about that

00:07:27.760 --> 00:07:27.770
if you if you haven't thought about that
 

00:07:27.770 --> 00:07:29.440
if you if you haven't thought about that
you're going to get a crash and if you

00:07:29.440 --> 00:07:29.450
you're going to get a crash and if you
 

00:07:29.450 --> 00:07:30.700
you're going to get a crash and if you
have thought about that and you're

00:07:30.700 --> 00:07:30.710
have thought about that and you're
 

00:07:30.710 --> 00:07:32.710
have thought about that and you're
protecting it with an is connected test

00:07:32.710 --> 00:07:32.720
protecting it with an is connected test
 

00:07:32.720 --> 00:07:34.210
protecting it with an is connected test
what's going to happen is that that

00:07:34.210 --> 00:07:34.220
what's going to happen is that that
 

00:07:34.220 --> 00:07:35.710
what's going to happen is that that
achieving is going to be lost so nobody

00:07:35.710 --> 00:07:35.720
achieving is going to be lost so nobody
 

00:07:35.720 --> 00:07:38.980
achieving is going to be lost so nobody
wants that so one of the strategies that

00:07:38.980 --> 00:07:38.990
wants that so one of the strategies that
 

00:07:38.990 --> 00:07:40.960
wants that so one of the strategies that
some games use is that when you are

00:07:40.960 --> 00:07:40.970
some games use is that when you are
 

00:07:40.970 --> 00:07:42.550
some games use is that when you are
between on start and on sending

00:07:42.550 --> 00:07:42.560
between on start and on sending
 

00:07:42.560 --> 00:07:44.260
between on start and on sending
succeeded you show please wait screen

00:07:44.260 --> 00:07:44.270
succeeded you show please wait screen
 

00:07:44.270 --> 00:07:47.050
succeeded you show please wait screen
this is usually not so bad because the

00:07:47.050 --> 00:07:47.060
this is usually not so bad because the
 

00:07:47.060 --> 00:07:49.270
this is usually not so bad because the
the interval of time between on started

00:07:49.270 --> 00:07:49.280
the interval of time between on started
 

00:07:49.280 --> 00:07:50.830
the interval of time between on started
on send the sign-in succeeded is usually

00:07:50.830 --> 00:07:50.840
on send the sign-in succeeded is usually
 

00:07:50.840 --> 00:07:52.780
on send the sign-in succeeded is usually
small if the user has already signed in

00:07:52.780 --> 00:07:52.790
small if the user has already signed in
 

00:07:52.790 --> 00:07:54.730
small if the user has already signed in
before it's going to be pretty small if

00:07:54.730 --> 00:07:54.740
before it's going to be pretty small if
 

00:07:54.740 --> 00:07:56.230
before it's going to be pretty small if
the user has never seen it before it's

00:07:56.230 --> 00:07:56.240
the user has never seen it before it's
 

00:07:56.240 --> 00:07:57.430
the user has never seen it before it's
also going to be pretty small because

00:07:57.430 --> 00:07:57.440
also going to be pretty small because
 

00:07:57.440 --> 00:07:59.470
also going to be pretty small because
it's kind of fail quickly so it's very

00:07:59.470 --> 00:07:59.480
it's kind of fail quickly so it's very
 

00:07:59.480 --> 00:08:01.330
it's kind of fail quickly so it's very
it's gonna be very it's not going to be

00:08:01.330 --> 00:08:01.340
it's gonna be very it's not going to be
 

00:08:01.340 --> 00:08:03.010
it's gonna be very it's not going to be
typical for that to take more than say

00:08:03.010 --> 00:08:03.020
typical for that to take more than say
 

00:08:03.020 --> 00:08:04.990
typical for that to take more than say
one or two seconds so it's probably a

00:08:04.990 --> 00:08:05.000
one or two seconds so it's probably a
 

00:08:05.000 --> 00:08:06.460
one or two seconds so it's probably a
good idea to put a please wait screen

00:08:06.460 --> 00:08:06.470
good idea to put a please wait screen
 

00:08:06.470 --> 00:08:08.260
good idea to put a please wait screen
between on start and on sandy succeeded

00:08:08.260 --> 00:08:08.270
between on start and on sandy succeeded
 

00:08:08.270 --> 00:08:10.030
between on start and on sandy succeeded
or of course just handle that you know

00:08:10.030 --> 00:08:10.040
or of course just handle that you know
 

00:08:10.040 --> 00:08:11.350
or of course just handle that you know
within the logic of your game so for

00:08:11.350 --> 00:08:11.360
within the logic of your game so for
 

00:08:11.360 --> 00:08:13.330
within the logic of your game so for
instance if every if every level starts

00:08:13.330 --> 00:08:13.340
instance if every if every level starts
 

00:08:13.340 --> 00:08:14.950
instance if every if every level starts
with this intro screen that's going to

00:08:14.950 --> 00:08:14.960
with this intro screen that's going to
 

00:08:14.960 --> 00:08:16.720
with this intro screen that's going to
last five seconds then you don't need to

00:08:16.720 --> 00:08:16.730
last five seconds then you don't need to
 

00:08:16.730 --> 00:08:18.490
last five seconds then you don't need to
put up a white screen because you know

00:08:18.490 --> 00:08:18.500
put up a white screen because you know
 

00:08:18.500 --> 00:08:20.070
put up a white screen because you know
that signing succeed is going to happen

00:08:20.070 --> 00:08:20.080
that signing succeed is going to happen
 

00:08:20.080 --> 00:08:23.440
that signing succeed is going to happen
before that that pop up I mean before

00:08:23.440 --> 00:08:23.450
before that that pop up I mean before
 

00:08:23.450 --> 00:08:27.700
before that that pop up I mean before
that that storyboard scene goes away but

00:08:27.700 --> 00:08:27.710
that that storyboard scene goes away but
 

00:08:27.710 --> 00:08:29.290
that that storyboard scene goes away but
it's nice to have to check for that

00:08:29.290 --> 00:08:29.300
it's nice to have to check for that
 

00:08:29.300 --> 00:08:32.020
it's nice to have to check for that
anyway once that please rate screen goes

00:08:32.020 --> 00:08:32.030
anyway once that please rate screen goes
 

00:08:32.030 --> 00:08:34.360
anyway once that please rate screen goes
away you know that you can safely do API

00:08:34.360 --> 00:08:34.370
away you know that you can safely do API
 

00:08:34.370 --> 00:08:35.740
away you know that you can safely do API
calls so that's when you try to unlock

00:08:35.740 --> 00:08:35.750
calls so that's when you try to unlock
 

00:08:35.750 --> 00:08:37.570
calls so that's when you try to unlock
something so this is one of the very

00:08:37.570 --> 00:08:37.580
something so this is one of the very
 

00:08:37.580 --> 00:08:39.640
something so this is one of the very
useful patterns in that sense so

00:08:39.640 --> 00:08:39.650
useful patterns in that sense so
 

00:08:39.650 --> 00:08:41.709
useful patterns in that sense so
actually the the actual implementations

00:08:41.709 --> 00:08:41.719
actually the the actual implementations
 

00:08:41.719 --> 00:08:43.779
actually the the actual implementations
of course up to your game you can do you

00:08:43.779 --> 00:08:43.789
of course up to your game you can do you
 

00:08:43.789 --> 00:08:45.040
of course up to your game you can do you
can do something very smart or you can

00:08:45.040 --> 00:08:45.050
can do something very smart or you can
 

00:08:45.050 --> 00:08:47.380
can do something very smart or you can
do something much more simplistic just

00:08:47.380 --> 00:08:47.390
do something much more simplistic just
 

00:08:47.390 --> 00:08:49.570
do something much more simplistic just
like putting a please wait screen but

00:08:49.570 --> 00:08:49.580
like putting a please wait screen but
 

00:08:49.580 --> 00:08:51.040
like putting a please wait screen but
the important things to notice that you

00:08:51.040 --> 00:08:51.050
the important things to notice that you
 

00:08:51.050 --> 00:08:52.630
the important things to notice that you
have this life cycle issue and you

00:08:52.630 --> 00:08:52.640
have this life cycle issue and you
 

00:08:52.640 --> 00:08:53.260
have this life cycle issue and you
should be at the end

00:08:53.260 --> 00:08:53.270
should be at the end
 

00:08:53.270 --> 00:08:55.960
should be at the end
in order not to make any API calls when

00:08:55.960 --> 00:08:55.970
in order not to make any API calls when
 

00:08:55.970 --> 00:08:58.150
in order not to make any API calls when
you shouldn't and I guess that's pretty

00:08:58.150 --> 00:08:58.160
you shouldn't and I guess that's pretty
 

00:08:58.160 --> 00:09:00.010
you shouldn't and I guess that's pretty
much all there is to to the life cycle

00:09:00.010 --> 00:09:00.020
much all there is to to the life cycle
 

00:09:00.020 --> 00:09:02.080
much all there is to to the life cycle
thank you very much for for watching and

00:09:02.080 --> 00:09:02.090
thank you very much for for watching and
 

00:09:02.090 --> 00:09:05.740
thank you very much for for watching and
we hope you do you make great games

