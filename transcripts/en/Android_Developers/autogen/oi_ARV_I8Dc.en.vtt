WEBVTT
Kind: captions
Language: en

00:00:07.550 --> 00:00:08.839
 
hi

00:00:08.839 --> 00:00:08.849
hi
 

00:00:08.849 --> 00:00:10.820
hi
my name is Trevor Jones I'm gonna

00:00:10.820 --> 00:00:10.830
my name is Trevor Jones I'm gonna
 

00:00:10.830 --> 00:00:12.410
my name is Trevor Jones I'm gonna
developer programs engineer on the

00:00:12.410 --> 00:00:12.420
developer programs engineer on the
 

00:00:12.420 --> 00:00:14.509
developer programs engineer on the
Android team let's take a bit to talk

00:00:14.509 --> 00:00:14.519
Android team let's take a bit to talk
 

00:00:14.519 --> 00:00:15.770
Android team let's take a bit to talk
about how to do network service

00:00:15.770 --> 00:00:15.780
about how to do network service
 

00:00:15.780 --> 00:00:18.470
about how to do network service
discovery on Android so what is network

00:00:18.470 --> 00:00:18.480
discovery on Android so what is network
 

00:00:18.480 --> 00:00:20.450
discovery on Android so what is network
service discovery so say that you have a

00:00:20.450 --> 00:00:20.460
service discovery so say that you have a
 

00:00:20.460 --> 00:00:21.859
service discovery so say that you have a
game and you want to let friends play

00:00:21.859 --> 00:00:21.869
game and you want to let friends play
 

00:00:21.869 --> 00:00:24.140
game and you want to let friends play
with each other one approach is to get

00:00:24.140 --> 00:00:24.150
with each other one approach is to get
 

00:00:24.150 --> 00:00:25.670
with each other one approach is to get
email addresses for everyone in the game

00:00:25.670 --> 00:00:25.680
email addresses for everyone in the game
 

00:00:25.680 --> 00:00:27.890
email addresses for everyone in the game
and use that to set up a shared room on

00:00:27.890 --> 00:00:27.900
and use that to set up a shared room on
 

00:00:27.900 --> 00:00:30.109
and use that to set up a shared room on
a server somewhere in the cloud it's not

00:00:30.109 --> 00:00:30.119
a server somewhere in the cloud it's not
 

00:00:30.119 --> 00:00:31.400
a server somewhere in the cloud it's not
a bad approach especially if you're

00:00:31.400 --> 00:00:31.410
a bad approach especially if you're
 

00:00:31.410 --> 00:00:32.510
a bad approach especially if you're
going to be competing with someone far

00:00:32.510 --> 00:00:32.520
going to be competing with someone far
 

00:00:32.520 --> 00:00:34.819
going to be competing with someone far
away but if all your friends are sitting

00:00:34.819 --> 00:00:34.829
away but if all your friends are sitting
 

00:00:34.829 --> 00:00:35.720
away but if all your friends are sitting
right next to you

00:00:35.720 --> 00:00:35.730
right next to you
 

00:00:35.730 --> 00:00:37.130
right next to you
all those email addresses are going to

00:00:37.130 --> 00:00:37.140
all those email addresses are going to
 

00:00:37.140 --> 00:00:39.229
all those email addresses are going to
get a bit inconvenient wouldn't it be

00:00:39.229 --> 00:00:39.239
get a bit inconvenient wouldn't it be
 

00:00:39.239 --> 00:00:40.790
get a bit inconvenient wouldn't it be
great if you could just find nearby

00:00:40.790 --> 00:00:40.800
great if you could just find nearby
 

00:00:40.800 --> 00:00:42.590
great if you could just find nearby
users who also happen to have your app

00:00:42.590 --> 00:00:42.600
users who also happen to have your app
 

00:00:42.600 --> 00:00:44.650
users who also happen to have your app
just based on the physical proximity

00:00:44.650 --> 00:00:44.660
just based on the physical proximity
 

00:00:44.660 --> 00:00:46.610
just based on the physical proximity
this is where network service discovery

00:00:46.610 --> 00:00:46.620
this is where network service discovery
 

00:00:46.620 --> 00:00:50.090
this is where network service discovery
or NSD comes into the picture NSD lets

00:00:50.090 --> 00:00:50.100
or NSD comes into the picture NSD lets
 

00:00:50.100 --> 00:00:52.220
or NSD comes into the picture NSD lets
your app find other devices on the local

00:00:52.220 --> 00:00:52.230
your app find other devices on the local
 

00:00:52.230 --> 00:00:53.600
your app find other devices on the local
network that supports services you're

00:00:53.600 --> 00:00:53.610
network that supports services you're
 

00:00:53.610 --> 00:00:55.369
network that supports services you're
interested in those services could be

00:00:55.369 --> 00:00:55.379
interested in those services could be
 

00:00:55.379 --> 00:00:58.119
interested in those services could be
physical devices like printers webcams

00:00:58.119 --> 00:00:58.129
physical devices like printers webcams
 

00:00:58.129 --> 00:01:02.299
physical devices like printers webcams
HTTP servers and yes even games in a

00:01:02.299 --> 00:01:02.309
HTTP servers and yes even games in a
 

00:01:02.309 --> 00:01:04.369
HTTP servers and yes even games in a
sense it turns any local network into a

00:01:04.369 --> 00:01:04.379
sense it turns any local network into a
 

00:01:04.379 --> 00:01:06.710
sense it turns any local network into a
social network for apps take this game

00:01:06.710 --> 00:01:06.720
social network for apps take this game
 

00:01:06.720 --> 00:01:09.080
social network for apps take this game
here which uses NSD to place everyone on

00:01:09.080 --> 00:01:09.090
here which uses NSD to place everyone on
 

00:01:09.090 --> 00:01:10.910
here which uses NSD to place everyone on
the same subnet into a virtual waiting

00:01:10.910 --> 00:01:10.920
the same subnet into a virtual waiting
 

00:01:10.920 --> 00:01:14.000
the same subnet into a virtual waiting
room is a quick way to form teams once

00:01:14.000 --> 00:01:14.010
room is a quick way to form teams once
 

00:01:14.010 --> 00:01:15.289
room is a quick way to form teams once
discovered you'll then be able to

00:01:15.289 --> 00:01:15.299
discovered you'll then be able to
 

00:01:15.299 --> 00:01:16.609
discovered you'll then be able to
connect directly to any of those apps

00:01:16.609 --> 00:01:16.619
connect directly to any of those apps
 

00:01:16.619 --> 00:01:18.770
connect directly to any of those apps
using the standard Android networking

00:01:18.770 --> 00:01:18.780
using the standard Android networking
 

00:01:18.780 --> 00:01:21.320
using the standard Android networking
stack so let's go into a bit more

00:01:21.320 --> 00:01:21.330
stack so let's go into a bit more
 

00:01:21.330 --> 00:01:23.149
stack so let's go into a bit more
details about how all this works and

00:01:23.149 --> 00:01:23.159
details about how all this works and
 

00:01:23.159 --> 00:01:24.800
details about how all this works and
then I'll show you how to implement the

00:01:24.800 --> 00:01:24.810
then I'll show you how to implement the
 

00:01:24.810 --> 00:01:27.830
then I'll show you how to implement the
code for all this inside of your app NSD

00:01:27.830 --> 00:01:27.840
code for all this inside of your app NSD
 

00:01:27.840 --> 00:01:30.620
code for all this inside of your app NSD
is based on two protocols DNS SD and

00:01:30.620 --> 00:01:30.630
is based on two protocols DNS SD and
 

00:01:30.630 --> 00:01:33.649
is based on two protocols DNS SD and
multicast DNS the SD stands for service

00:01:33.649 --> 00:01:33.659
multicast DNS the SD stands for service
 

00:01:33.659 --> 00:01:36.649
multicast DNS the SD stands for service
discovery like DNS on the Internet this

00:01:36.649 --> 00:01:36.659
discovery like DNS on the Internet this
 

00:01:36.659 --> 00:01:38.090
discovery like DNS on the Internet this
provides the mapping between human

00:01:38.090 --> 00:01:38.100
provides the mapping between human
 

00:01:38.100 --> 00:01:39.080
provides the mapping between human
friendly host names

00:01:39.080 --> 00:01:39.090
friendly host names
 

00:01:39.090 --> 00:01:41.899
friendly host names
so same iPhone dot local and the IP

00:01:41.899 --> 00:01:41.909
so same iPhone dot local and the IP
 

00:01:41.909 --> 00:01:44.030
so same iPhone dot local and the IP
address where that device lives now

00:01:44.030 --> 00:01:44.040
address where that device lives now
 

00:01:44.040 --> 00:01:45.080
address where that device lives now
normally you'd go to something like

00:01:45.080 --> 00:01:45.090
normally you'd go to something like
 

00:01:45.090 --> 00:01:47.690
normally you'd go to something like
Google comm in this case everything is

00:01:47.690 --> 00:01:47.700
Google comm in this case everything is
 

00:01:47.700 --> 00:01:49.490
Google comm in this case everything is
going to be ending in something dot

00:01:49.490 --> 00:01:49.500
going to be ending in something dot
 

00:01:49.500 --> 00:01:51.200
going to be ending in something dot
local because it's on the local subnet

00:01:51.200 --> 00:01:51.210
local because it's on the local subnet
 

00:01:51.210 --> 00:01:52.789
local because it's on the local subnet
that's how the device can distinguish

00:01:52.789 --> 00:01:52.799
that's how the device can distinguish
 

00:01:52.799 --> 00:01:55.460
that's how the device can distinguish
between devices advertised via multicast

00:01:55.460 --> 00:01:55.470
between devices advertised via multicast
 

00:01:55.470 --> 00:01:58.039
between devices advertised via multicast
DNS and devices advertised using the

00:01:58.039 --> 00:01:58.049
DNS and devices advertised using the
 

00:01:58.049 --> 00:02:01.700
DNS and devices advertised using the
global DNS system so unlike traditional

00:02:01.700 --> 00:02:01.710
global DNS system so unlike traditional
 

00:02:01.710 --> 00:02:04.639
global DNS system so unlike traditional
DNS M DNS is completely distributed

00:02:04.639 --> 00:02:04.649
DNS M DNS is completely distributed
 

00:02:04.649 --> 00:02:07.100
DNS M DNS is completely distributed
which means no central server

00:02:07.100 --> 00:02:07.110
which means no central server
 

00:02:07.110 --> 00:02:08.840
which means no central server
devices communicate amongst themselves

00:02:08.840 --> 00:02:08.850
devices communicate amongst themselves
 

00:02:08.850 --> 00:02:11.150
devices communicate amongst themselves
to build a network directory of services

00:02:11.150 --> 00:02:11.160
to build a network directory of services
 

00:02:11.160 --> 00:02:13.550
to build a network directory of services
since it's based on multicast it only

00:02:13.550 --> 00:02:13.560
since it's based on multicast it only
 

00:02:13.560 --> 00:02:15.350
since it's based on multicast it only
works between devices on the same

00:02:15.350 --> 00:02:15.360
works between devices on the same
 

00:02:15.360 --> 00:02:18.590
works between devices on the same
broadcast domain so such as a LAN it

00:02:18.590 --> 00:02:18.600
broadcast domain so such as a LAN it
 

00:02:18.600 --> 00:02:20.720
broadcast domain so such as a LAN it
also requires the network supports

00:02:20.720 --> 00:02:20.730
also requires the network supports
 

00:02:20.730 --> 00:02:22.910
also requires the network supports
multicast traffic which some businesses

00:02:22.910 --> 00:02:22.920
multicast traffic which some businesses
 

00:02:22.920 --> 00:02:25.430
multicast traffic which some businesses
or University networks might disable but

00:02:25.430 --> 00:02:25.440
or University networks might disable but
 

00:02:25.440 --> 00:02:27.500
or University networks might disable but
it should work without problems on most

00:02:27.500 --> 00:02:27.510
it should work without problems on most
 

00:02:27.510 --> 00:02:29.060
it should work without problems on most
home networks or even small business

00:02:29.060 --> 00:02:29.070
home networks or even small business
 

00:02:29.070 --> 00:02:33.530
home networks or even small business
networks dns SD extends multicast dns to

00:02:33.530 --> 00:02:33.540
networks dns SD extends multicast dns to
 

00:02:33.540 --> 00:02:36.110
networks dns SD extends multicast dns to
provide service discovery listing what

00:02:36.110 --> 00:02:36.120
provide service discovery listing what
 

00:02:36.120 --> 00:02:39.410
provide service discovery listing what
hosts implement specific protocols many

00:02:39.410 --> 00:02:39.420
hosts implement specific protocols many
 

00:02:39.420 --> 00:02:41.240
hosts implement specific protocols many
people think of dns exclusively in the

00:02:41.240 --> 00:02:41.250
people think of dns exclusively in the
 

00:02:41.250 --> 00:02:43.340
people think of dns exclusively in the
context of mapping host names to IP

00:02:43.340 --> 00:02:43.350
context of mapping host names to IP
 

00:02:43.350 --> 00:02:46.310
context of mapping host names to IP
addresses but des is actually general

00:02:46.310 --> 00:02:46.320
addresses but des is actually general
 

00:02:46.320 --> 00:02:47.870
addresses but des is actually general
with somewhat limited hierarchical

00:02:47.870 --> 00:02:47.880
with somewhat limited hierarchical
 

00:02:47.880 --> 00:02:50.180
with somewhat limited hierarchical
database and can store almost any kind

00:02:50.180 --> 00:02:50.190
database and can store almost any kind
 

00:02:50.190 --> 00:02:53.090
database and can store almost any kind
of data for almost any purpose so

00:02:53.090 --> 00:02:53.100
of data for almost any purpose so
 

00:02:53.100 --> 00:02:55.010
of data for almost any purpose so
service names in this case will take the

00:02:55.010 --> 00:02:55.020
service names in this case will take the
 

00:02:55.020 --> 00:02:59.479
service names in this case will take the
form of service transport dot local this

00:02:59.479 --> 00:02:59.489
form of service transport dot local this
 

00:02:59.489 --> 00:03:01.010
form of service transport dot local this
is how we're mapping from a service name

00:03:01.010 --> 00:03:01.020
is how we're mapping from a service name
 

00:03:01.020 --> 00:03:02.540
is how we're mapping from a service name
to what you traditionally think of as a

00:03:02.540 --> 00:03:02.550
to what you traditionally think of as a
 

00:03:02.550 --> 00:03:05.120
to what you traditionally think of as a
domain name so in this case we're using

00:03:05.120 --> 00:03:05.130
domain name so in this case we're using
 

00:03:05.130 --> 00:03:10.400
domain name so in this case we're using
my app TCP my app is the service name

00:03:10.400 --> 00:03:10.410
my app TCP my app is the service name
 

00:03:10.410 --> 00:03:13.160
my app TCP my app is the service name
and TCP is the network transport that

00:03:13.160 --> 00:03:13.170
and TCP is the network transport that
 

00:03:13.170 --> 00:03:15.410
and TCP is the network transport that
we're using clients can then go and

00:03:15.410 --> 00:03:15.420
we're using clients can then go and
 

00:03:15.420 --> 00:03:16.880
we're using clients can then go and
query on this name to retrieve the

00:03:16.880 --> 00:03:16.890
query on this name to retrieve the
 

00:03:16.890 --> 00:03:19.789
query on this name to retrieve the
listing of devices supporting it once a

00:03:19.789 --> 00:03:19.799
listing of devices supporting it once a
 

00:03:19.799 --> 00:03:22.460
listing of devices supporting it once a
desired device is selected the IP

00:03:22.460 --> 00:03:22.470
desired device is selected the IP
 

00:03:22.470 --> 00:03:24.500
desired device is selected the IP
address port number and any other

00:03:24.500 --> 00:03:24.510
address port number and any other
 

00:03:24.510 --> 00:03:26.870
address port number and any other
necessary metadata are requested via DNS

00:03:26.870 --> 00:03:26.880
necessary metadata are requested via DNS
 

00:03:26.880 --> 00:03:30.020
necessary metadata are requested via DNS
service or SRV records since we're using

00:03:30.020 --> 00:03:30.030
service or SRV records since we're using
 

00:03:30.030 --> 00:03:31.820
service or SRV records since we're using
multicast DNS rather than the usual

00:03:31.820 --> 00:03:31.830
multicast DNS rather than the usual
 

00:03:31.830 --> 00:03:34.220
multicast DNS rather than the usual
internet DNS infrastructure there's no

00:03:34.220 --> 00:03:34.230
internet DNS infrastructure there's no
 

00:03:34.230 --> 00:03:35.810
internet DNS infrastructure there's no
need to go and register these domains

00:03:35.810 --> 00:03:35.820
need to go and register these domains
 

00:03:35.820 --> 00:03:38.360
need to go and register these domains
with any registrar or pay money you can

00:03:38.360 --> 00:03:38.370
with any registrar or pay money you can
 

00:03:38.370 --> 00:03:40.009
with any registrar or pay money you can
just simply broadcast them to network

00:03:40.009 --> 00:03:40.019
just simply broadcast them to network
 

00:03:40.019 --> 00:03:42.500
just simply broadcast them to network
peers as they're needed now that said

00:03:42.500 --> 00:03:42.510
peers as they're needed now that said
 

00:03:42.510 --> 00:03:43.940
peers as they're needed now that said
it's still a good idea to register your

00:03:43.940 --> 00:03:43.950
it's still a good idea to register your
 

00:03:43.950 --> 00:03:46.400
it's still a good idea to register your
service name with the ia na to prevent

00:03:46.400 --> 00:03:46.410
service name with the ia na to prevent
 

00:03:46.410 --> 00:03:48.380
service name with the ia na to prevent
any name collisions there's a free

00:03:48.380 --> 00:03:48.390
any name collisions there's a free
 

00:03:48.390 --> 00:03:51.199
any name collisions there's a free
service on ia na org that'll let you do

00:03:51.199 --> 00:03:51.209
service on ia na org that'll let you do
 

00:03:51.209 --> 00:03:53.690
service on ia na org that'll let you do
this now that we've gone over the

00:03:53.690 --> 00:03:53.700
this now that we've gone over the
 

00:03:53.700 --> 00:03:55.490
this now that we've gone over the
protocol details let's talk about using

00:03:55.490 --> 00:03:55.500
protocol details let's talk about using
 

00:03:55.500 --> 00:03:58.370
protocol details let's talk about using
the SSD API is on Android to broadcast

00:03:58.370 --> 00:03:58.380
the SSD API is on Android to broadcast
 

00:03:58.380 --> 00:04:00.710
the SSD API is on Android to broadcast
your apps custom service the good news

00:04:00.710 --> 00:04:00.720
your apps custom service the good news
 

00:04:00.720 --> 00:04:02.360
your apps custom service the good news
is you don't need to worry about most to

00:04:02.360 --> 00:04:02.370
is you don't need to worry about most to
 

00:04:02.370 --> 00:04:03.920
is you don't need to worry about most to
the protocol details since the OS takes

00:04:03.920 --> 00:04:03.930
the protocol details since the OS takes
 

00:04:03.930 --> 00:04:05.500
the protocol details since the OS takes
care of almost everything for you so

00:04:05.500 --> 00:04:05.510
care of almost everything for you so
 

00:04:05.510 --> 00:04:08.180
care of almost everything for you so
before you start let's say that we have

00:04:08.180 --> 00:04:08.190
before you start let's say that we have
 

00:04:08.190 --> 00:04:09.940
before you start let's say that we have
our app listening on an available port

00:04:09.940 --> 00:04:09.950
our app listening on an available port
 

00:04:09.950 --> 00:04:12.470
our app listening on an available port
this is just the code that you typically

00:04:12.470 --> 00:04:12.480
this is just the code that you typically
 

00:04:12.480 --> 00:04:15.080
this is just the code that you typically
used to open up a socket on Android but

00:04:15.080 --> 00:04:15.090
used to open up a socket on Android but
 

00:04:15.090 --> 00:04:16.699
used to open up a socket on Android but
notice that we're not explicitly

00:04:16.699 --> 00:04:16.709
notice that we're not explicitly
 

00:04:16.709 --> 00:04:19.279
notice that we're not explicitly
selecting a port here be careful to

00:04:19.279 --> 00:04:19.289
selecting a port here be careful to
 

00:04:19.289 --> 00:04:20.640
selecting a port here be careful to
never hard code your port number

00:04:20.640 --> 00:04:20.650
never hard code your port number
 

00:04:20.650 --> 00:04:22.740
never hard code your port number
are using NSD since other apps could be

00:04:22.740 --> 00:04:22.750
are using NSD since other apps could be
 

00:04:22.750 --> 00:04:24.290
are using NSD since other apps could be
using the same port number as your app

00:04:24.290 --> 00:04:24.300
using the same port number as your app
 

00:04:24.300 --> 00:04:26.820
using the same port number as your app
instead we'll ask the server the system

00:04:26.820 --> 00:04:26.830
instead we'll ask the server the system
 

00:04:26.830 --> 00:04:29.430
instead we'll ask the server the system
to give us a random unused port this is

00:04:29.430 --> 00:04:29.440
to give us a random unused port this is
 

00:04:29.440 --> 00:04:30.870
to give us a random unused port this is
okay though because we're going to go in

00:04:30.870 --> 00:04:30.880
okay though because we're going to go in
 

00:04:30.880 --> 00:04:32.730
okay though because we're going to go in
advertises to other devices so they'll

00:04:32.730 --> 00:04:32.740
advertises to other devices so they'll
 

00:04:32.740 --> 00:04:34.080
advertises to other devices so they'll
be able to discover which port you're

00:04:34.080 --> 00:04:34.090
be able to discover which port you're
 

00:04:34.090 --> 00:04:36.480
be able to discover which port you're
listening on so now that we have a

00:04:36.480 --> 00:04:36.490
listening on so now that we have a
 

00:04:36.490 --> 00:04:38.370
listening on so now that we have a
service listening for traffic on our

00:04:38.370 --> 00:04:38.380
service listening for traffic on our
 

00:04:38.380 --> 00:04:40.050
service listening for traffic on our
device we'll want to register that on

00:04:40.050 --> 00:04:40.060
device we'll want to register that on
 

00:04:40.060 --> 00:04:41.999
device we'll want to register that on
the local network the first thing to do

00:04:41.999 --> 00:04:42.009
the local network the first thing to do
 

00:04:42.009 --> 00:04:43.980
the local network the first thing to do
is to create an NST service info object

00:04:43.980 --> 00:04:43.990
is to create an NST service info object
 

00:04:43.990 --> 00:04:46.620
is to create an NST service info object
this object provides all the information

00:04:46.620 --> 00:04:46.630
this object provides all the information
 

00:04:46.630 --> 00:04:48.870
this object provides all the information
that other devices on the network will

00:04:48.870 --> 00:04:48.880
that other devices on the network will
 

00:04:48.880 --> 00:04:50.460
that other devices on the network will
use when they're deciding whether or not

00:04:50.460 --> 00:04:50.470
use when they're deciding whether or not
 

00:04:50.470 --> 00:04:52.499
use when they're deciding whether or not
to connect your device or not the

00:04:52.499 --> 00:04:52.509
to connect your device or not the
 

00:04:52.509 --> 00:04:54.600
to connect your device or not the
service type again uniquely identifies

00:04:54.600 --> 00:04:54.610
service type again uniquely identifies
 

00:04:54.610 --> 00:04:56.850
service type again uniquely identifies
the service your phone as advertising so

00:04:56.850 --> 00:04:56.860
the service your phone as advertising so
 

00:04:56.860 --> 00:04:59.909
the service your phone as advertising so
something like app named TCP and you'll

00:04:59.909 --> 00:04:59.919
something like app named TCP and you'll
 

00:04:59.919 --> 00:05:01.560
something like app named TCP and you'll
typically put an underscore in front of

00:05:01.560 --> 00:05:01.570
typically put an underscore in front of
 

00:05:01.570 --> 00:05:03.560
typically put an underscore in front of
each section as a matter of convention

00:05:03.560 --> 00:05:03.570
each section as a matter of convention
 

00:05:03.570 --> 00:05:06.390
each section as a matter of convention
the service name uniquely identifies a

00:05:06.390 --> 00:05:06.400
the service name uniquely identifies a
 

00:05:06.400 --> 00:05:09.629
the service name uniquely identifies a
particular instance of your app so this

00:05:09.629 --> 00:05:09.639
particular instance of your app so this
 

00:05:09.639 --> 00:05:11.159
particular instance of your app so this
is not the service type the service name

00:05:11.159 --> 00:05:11.169
is not the service type the service name
 

00:05:11.169 --> 00:05:13.770
is not the service type the service name
now with the service name it's usually a

00:05:13.770 --> 00:05:13.780
now with the service name it's usually a
 

00:05:13.780 --> 00:05:15.659
now with the service name it's usually a
good idea to use the device's Bluetooth

00:05:15.659 --> 00:05:15.669
good idea to use the device's Bluetooth
 

00:05:15.669 --> 00:05:17.820
good idea to use the device's Bluetooth
name just as something that's nice and

00:05:17.820 --> 00:05:17.830
name just as something that's nice and
 

00:05:17.830 --> 00:05:20.909
name just as something that's nice and
human friendly it should be unique but

00:05:20.909 --> 00:05:20.919
human friendly it should be unique but
 

00:05:20.919 --> 00:05:22.710
human friendly it should be unique but
if not it's not a big deal Android will

00:05:22.710 --> 00:05:22.720
if not it's not a big deal Android will
 

00:05:22.720 --> 00:05:24.029
if not it's not a big deal Android will
go in a pendant number to the end of the

00:05:24.029 --> 00:05:24.039
go in a pendant number to the end of the
 

00:05:24.039 --> 00:05:26.730
go in a pendant number to the end of the
name to correct that error finally we'll

00:05:26.730 --> 00:05:26.740
name to correct that error finally we'll
 

00:05:26.740 --> 00:05:28.290
name to correct that error finally we'll
set the port number that we selected

00:05:28.290 --> 00:05:28.300
set the port number that we selected
 

00:05:28.300 --> 00:05:31.260
set the port number that we selected
above so that other apps know which one

00:05:31.260 --> 00:05:31.270
above so that other apps know which one
 

00:05:31.270 --> 00:05:34.080
above so that other apps know which one
which port we selected calling register

00:05:34.080 --> 00:05:34.090
which port we selected calling register
 

00:05:34.090 --> 00:05:36.540
which port we selected calling register
service finally will inform the OS about

00:05:36.540 --> 00:05:36.550
service finally will inform the OS about
 

00:05:36.550 --> 00:05:38.640
service finally will inform the OS about
the new service and Android will take

00:05:38.640 --> 00:05:38.650
the new service and Android will take
 

00:05:38.650 --> 00:05:40.170
the new service and Android will take
care of broadcasting that information

00:05:40.170 --> 00:05:40.180
care of broadcasting that information
 

00:05:40.180 --> 00:05:42.899
care of broadcasting that information
after other devices as needed let the

00:05:42.899 --> 00:05:42.909
after other devices as needed let the
 

00:05:42.909 --> 00:05:44.339
after other devices as needed let the
end here there's a registration listener

00:05:44.339 --> 00:05:44.349
end here there's a registration listener
 

00:05:44.349 --> 00:05:46.529
end here there's a registration listener
which is a set of callbacks like on

00:05:46.529 --> 00:05:46.539
which is a set of callbacks like on
 

00:05:46.539 --> 00:05:48.149
which is a set of callbacks like on
service registered that'll let us know

00:05:48.149 --> 00:05:48.159
service registered that'll let us know
 

00:05:48.159 --> 00:05:49.649
service registered that'll let us know
about the success or failure of the top

00:05:49.649 --> 00:05:49.659
about the success or failure of the top
 

00:05:49.659 --> 00:05:51.390
about the success or failure of the top
eration we're going to see this pattern

00:05:51.390 --> 00:05:51.400
eration we're going to see this pattern
 

00:05:51.400 --> 00:05:54.180
eration we're going to see this pattern
a lot over the next few slides the

00:05:54.180 --> 00:05:54.190
a lot over the next few slides the
 

00:05:54.190 --> 00:05:55.800
a lot over the next few slides the
important thing to notice here is on

00:05:55.800 --> 00:05:55.810
important thing to notice here is on
 

00:05:55.810 --> 00:05:58.080
important thing to notice here is on
service registered which is where our

00:05:58.080 --> 00:05:58.090
service registered which is where our
 

00:05:58.090 --> 00:06:00.110
service registered which is where our
app can go and store the service name

00:06:00.110 --> 00:06:00.120
app can go and store the service name
 

00:06:00.120 --> 00:06:02.490
app can go and store the service name
even though we set this one registering

00:06:02.490 --> 00:06:02.500
even though we set this one registering
 

00:06:02.500 --> 00:06:04.740
even though we set this one registering
the OS might have changed it to resolve

00:06:04.740 --> 00:06:04.750
the OS might have changed it to resolve
 

00:06:04.750 --> 00:06:06.300
the OS might have changed it to resolve
a conflict from one other device on the

00:06:06.300 --> 00:06:06.310
a conflict from one other device on the
 

00:06:06.310 --> 00:06:08.219
a conflict from one other device on the
network remember I said that the service

00:06:08.219 --> 00:06:08.229
network remember I said that the service
 

00:06:08.229 --> 00:06:10.200
network remember I said that the service
name always has to be unique so this is

00:06:10.200 --> 00:06:10.210
name always has to be unique so this is
 

00:06:10.210 --> 00:06:12.060
name always has to be unique so this is
your chance to go and discover if it

00:06:12.060 --> 00:06:12.070
your chance to go and discover if it
 

00:06:12.070 --> 00:06:15.300
your chance to go and discover if it
wasn't and update your UI if needed you

00:06:15.300 --> 00:06:15.310
wasn't and update your UI if needed you
 

00:06:15.310 --> 00:06:16.710
wasn't and update your UI if needed you
might want to go and show the service

00:06:16.710 --> 00:06:16.720
might want to go and show the service
 

00:06:16.720 --> 00:06:18.779
might want to go and show the service
name to the user not all apps do though

00:06:18.779 --> 00:06:18.789
name to the user not all apps do though
 

00:06:18.789 --> 00:06:20.580
name to the user not all apps do though
so this might or might not be of

00:06:20.580 --> 00:06:20.590
so this might or might not be of
 

00:06:20.590 --> 00:06:21.320
so this might or might not be of
interest to you

00:06:21.320 --> 00:06:21.330
interest to you
 

00:06:21.330 --> 00:06:23.760
interest to you
now that our app is registered let's

00:06:23.760 --> 00:06:23.770
now that our app is registered let's
 

00:06:23.770 --> 00:06:25.649
now that our app is registered let's
take a look at how to issue a query to

00:06:25.649 --> 00:06:25.659
take a look at how to issue a query to
 

00:06:25.659 --> 00:06:28.379
take a look at how to issue a query to
find other devices service discovery

00:06:28.379 --> 00:06:28.389
find other devices service discovery
 

00:06:28.389 --> 00:06:31.010
find other devices service discovery
like service registration has two steps

00:06:31.010 --> 00:06:31.020
like service registration has two steps
 

00:06:31.020 --> 00:06:33.269
like service registration has two steps
setting up a discovery listener with the

00:06:33.269 --> 00:06:33.279
setting up a discovery listener with the
 

00:06:33.279 --> 00:06:34.050
setting up a discovery listener with the
relevant callback

00:06:34.050 --> 00:06:34.060
relevant callback
 

00:06:34.060 --> 00:06:36.330
relevant callback
and making a single asynchronous API

00:06:36.330 --> 00:06:36.340
and making a single asynchronous API
 

00:06:36.340 --> 00:06:38.940
and making a single asynchronous API
call to discover services let's work

00:06:38.940 --> 00:06:38.950
call to discover services let's work
 

00:06:38.950 --> 00:06:40.290
call to discover services let's work
backwards we'll start with the call to

00:06:40.290 --> 00:06:40.300
backwards we'll start with the call to
 

00:06:40.300 --> 00:06:42.780
backwards we'll start with the call to
discover services here you'll pass in

00:06:42.780 --> 00:06:42.790
discover services here you'll pass in
 

00:06:42.790 --> 00:06:43.950
discover services here you'll pass in
the service name that you're interested

00:06:43.950 --> 00:06:43.960
the service name that you're interested
 

00:06:43.960 --> 00:06:46.610
the service name that you're interested
in so again something like my app TCP

00:06:46.610 --> 00:06:46.620
in so again something like my app TCP
 

00:06:46.620 --> 00:06:49.140
in so again something like my app TCP
the name of the discovery protocol to

00:06:49.140 --> 00:06:49.150
the name of the discovery protocol to
 

00:06:49.150 --> 00:06:52.140
the name of the discovery protocol to
use which is always DNS SD again this is

00:06:52.140 --> 00:06:52.150
use which is always DNS SD again this is
 

00:06:52.150 --> 00:06:53.970
use which is always DNS SD again this is
not the protocol of your app it's the

00:06:53.970 --> 00:06:53.980
not the protocol of your app it's the
 

00:06:53.980 --> 00:06:56.760
not the protocol of your app it's the
service discovery protocol and right now

00:06:56.760 --> 00:06:56.770
service discovery protocol and right now
 

00:06:56.770 --> 00:06:58.980
service discovery protocol and right now
Android only supports DNS SD so this

00:06:58.980 --> 00:06:58.990
Android only supports DNS SD so this
 

00:06:58.990 --> 00:07:00.930
Android only supports DNS SD so this
argument will always be protocol dns SD

00:07:00.930 --> 00:07:00.940
argument will always be protocol dns SD
 

00:07:00.940 --> 00:07:04.170
argument will always be protocol dns SD
and finally a discovery listener object

00:07:04.170 --> 00:07:04.180
and finally a discovery listener object
 

00:07:04.180 --> 00:07:06.030
and finally a discovery listener object
which is what we'll use to get the

00:07:06.030 --> 00:07:06.040
which is what we'll use to get the
 

00:07:06.040 --> 00:07:08.370
which is what we'll use to get the
results of this discovery process the

00:07:08.370 --> 00:07:08.380
results of this discovery process the
 

00:07:08.380 --> 00:07:09.810
results of this discovery process the
listener will get a callback for each

00:07:09.810 --> 00:07:09.820
listener will get a callback for each
 

00:07:09.820 --> 00:07:12.180
listener will get a callback for each
device found and of course this

00:07:12.180 --> 00:07:12.190
device found and of course this
 

00:07:12.190 --> 00:07:13.650
device found and of course this
callbacks where your app can handle any

00:07:13.650 --> 00:07:13.660
callbacks where your app can handle any
 

00:07:13.660 --> 00:07:16.170
callbacks where your app can handle any
errors found the important method here

00:07:16.170 --> 00:07:16.180
errors found the important method here
 

00:07:16.180 --> 00:07:18.930
errors found the important method here
is on service found which is we're going

00:07:18.930 --> 00:07:18.940
is on service found which is we're going
 

00:07:18.940 --> 00:07:20.700
is on service found which is we're going
to find about all the services and

00:07:20.700 --> 00:07:20.710
to find about all the services and
 

00:07:20.710 --> 00:07:22.530
to find about all the services and
devices that were potentially interested

00:07:22.530 --> 00:07:22.540
devices that were potentially interested
 

00:07:22.540 --> 00:07:25.560
devices that were potentially interested
in and store them in the list this is

00:07:25.560 --> 00:07:25.570
in and store them in the list this is
 

00:07:25.570 --> 00:07:26.969
in and store them in the list this is
the list that you'll typically present

00:07:26.969 --> 00:07:26.979
the list that you'll typically present
 

00:07:26.979 --> 00:07:29.700
the list that you'll typically present
to the user and that will let them pick

00:07:29.700 --> 00:07:29.710
to the user and that will let them pick
 

00:07:29.710 --> 00:07:31.440
to the user and that will let them pick
which devices that they want to connect

00:07:31.440 --> 00:07:31.450
which devices that they want to connect
 

00:07:31.450 --> 00:07:34.050
which devices that they want to connect
to so once we know which devices we want

00:07:34.050 --> 00:07:34.060
to so once we know which devices we want
 

00:07:34.060 --> 00:07:36.379
to so once we know which devices we want
to connect to we call resolve service

00:07:36.379 --> 00:07:36.389
to connect to we call resolve service
 

00:07:36.389 --> 00:07:38.820
to connect to we call resolve service
this is another asynchronous call it's a

00:07:38.820 --> 00:07:38.830
this is another asynchronous call it's a
 

00:07:38.830 --> 00:07:41.820
this is another asynchronous call it's a
little bit expensive so again we have a

00:07:41.820 --> 00:07:41.830
little bit expensive so again we have a
 

00:07:41.830 --> 00:07:43.200
little bit expensive so again we have a
listener that's gonna go and get the

00:07:43.200 --> 00:07:43.210
listener that's gonna go and get the
 

00:07:43.210 --> 00:07:45.690
listener that's gonna go and get the
results of this and this is where we

00:07:45.690 --> 00:07:45.700
results of this and this is where we
 

00:07:45.700 --> 00:07:47.640
results of this and this is where we
find out the IP address and port number

00:07:47.640 --> 00:07:47.650
find out the IP address and port number
 

00:07:47.650 --> 00:07:49.130
find out the IP address and port number
of the device that we want to connect to

00:07:49.130 --> 00:07:49.140
of the device that we want to connect to
 

00:07:49.140 --> 00:07:51.450
of the device that we want to connect to
once you get that information then we're

00:07:51.450 --> 00:07:51.460
once you get that information then we're
 

00:07:51.460 --> 00:07:52.620
once you get that information then we're
just go ahead and connect to it directly

00:07:52.620 --> 00:07:52.630
just go ahead and connect to it directly
 

00:07:52.630 --> 00:07:55.920
just go ahead and connect to it directly
using a standard socket now before you

00:07:55.920 --> 00:07:55.930
using a standard socket now before you
 

00:07:55.930 --> 00:07:57.510
using a standard socket now before you
go off and play your game there's one

00:07:57.510 --> 00:07:57.520
go off and play your game there's one
 

00:07:57.520 --> 00:07:59.279
go off and play your game there's one
last thing you want to do when your

00:07:59.279 --> 00:07:59.289
last thing you want to do when your
 

00:07:59.289 --> 00:08:01.529
last thing you want to do when your
application exits it's very important to

00:08:01.529 --> 00:08:01.539
application exits it's very important to
 

00:08:01.539 --> 00:08:03.840
application exits it's very important to
unregister your service so that the OS

00:08:03.840 --> 00:08:03.850
unregister your service so that the OS
 

00:08:03.850 --> 00:08:05.400
unregister your service so that the OS
will stop advertising it to other

00:08:05.400 --> 00:08:05.410
will stop advertising it to other
 

00:08:05.410 --> 00:08:08.730
will stop advertising it to other
devices to do this call NSD managers

00:08:08.730 --> 00:08:08.740
devices to do this call NSD managers
 

00:08:08.740 --> 00:08:11.279
devices to do this call NSD managers
unregister service method whenever your

00:08:11.279 --> 00:08:11.289
unregister service method whenever your
 

00:08:11.289 --> 00:08:12.600
unregister service method whenever your
applications on the store you're on

00:08:12.600 --> 00:08:12.610
applications on the store you're on
 

00:08:12.610 --> 00:08:14.909
applications on the store you're on
pause method gets called you'll also

00:08:14.909 --> 00:08:14.919
pause method gets called you'll also
 

00:08:14.919 --> 00:08:17.430
pause method gets called you'll also
want to make sure to call stop service

00:08:17.430 --> 00:08:17.440
want to make sure to call stop service
 

00:08:17.440 --> 00:08:20.490
want to make sure to call stop service
discovery since the discovery process is

00:08:20.490 --> 00:08:20.500
discovery since the discovery process is
 

00:08:20.500 --> 00:08:22.050
discovery since the discovery process is
also a bit expensive and we don't want

00:08:22.050 --> 00:08:22.060
also a bit expensive and we don't want
 

00:08:22.060 --> 00:08:23.510
also a bit expensive and we don't want
to leave that running unchecked and

00:08:23.510 --> 00:08:23.520
to leave that running unchecked and
 

00:08:23.520 --> 00:08:26.219
to leave that running unchecked and
that's it you're all set to use network

00:08:26.219 --> 00:08:26.229
that's it you're all set to use network
 

00:08:26.229 --> 00:08:27.779
that's it you're all set to use network
service discovery to find out the copies

00:08:27.779 --> 00:08:27.789
service discovery to find out the copies
 

00:08:27.789 --> 00:08:29.520
service discovery to find out the copies
of your app on the network happy

00:08:29.520 --> 00:08:29.530
of your app on the network happy
 

00:08:29.530 --> 00:08:31.950
of your app on the network happy
networking

